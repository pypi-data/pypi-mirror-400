# Authors: The scikit-plots developers
# SPDX-License-Identifier: BSD-3-Clause

"""Contains CITATION.bib contents at the time of building this package."""

######################################################################
## This file is generated by scikitplot's build process
## It contains CITATION.bib contents at the time of building this package.
######################################################################
import pathlib

from scikitplot import logger

_built_with_meson = True

__all__ = [
  "__bibtex__",
  "__citation__",
]

######################################################################
## Create CONFIG by CITATION.bib contents
######################################################################

CITATION = r"""% --------------------------------------------------------------------
% CITATION.bib template file for scikit-plots, provides citation info
% for users who want to cite the library, related papers, and books.
% --------------------------------------------------------------------
@software{ The-scikit-plots-developers_2024,
  title    = { scikit-plots: Machine Learning Visualization in Python },
  author   = { The scikit-plots developers },
  year     = { 2024 },
  month    = { 11 },
  doi      = { 10.5281/zenodo.13367000 },
  url      = { https://github.com/scikit-plots/scikit-plots },
  note     = { Documentation available at \url{ https://scikit-plots.github.io/dev } },
  license  = { BSD-3-Clause },
  version  = { latest },
  message  = { This is the archived snapshot of latest version of My Research Software },
  keywords = { Software, Python, scikit-plots, Machine Learning Visualization },
}"""

# Set the bibtex entry to the article referenced in CITATION.
def _get_bibtex(
  preferred_type:str = 'software',
  ):
    _bibtex = ''
    try:
        # Attempt to read the CITATION.bib file
        refs = (pathlib.Path(__file__).parent / "../CITATION.bib").read_text().split(f"@{preferred_type}")[1:][0]
        _bibtex = f"@{preferred_type}{refs}" if refs else ""
        logger.debug("_bibtex from file CITATION.bib")
    except FileNotFoundError:
        # If CITATION.bib file is not found,
        # fall back to the defined CITATION text string
        refs = CITATION.split(f"@{preferred_type}")[1:][0]
        _bibtex = f"@{preferred_type}{refs}" if refs else ""
        logger.debug("_bibtex from attr CITATION text")
    except Exception as e:
        # Handle any unexpected errors
        logger.error(f"Unexpected error while reading CITATION.bib: {e}")
    return _bibtex

__bibtex__ = __citation__ = _get_bibtex()

######################################################################
## ...
######################################################################
