// Auto-generated by vegabase - DO NOT EDIT
import {
    createRouter as createTanStackRouter,
    createRoute,
    createRootRoute,
    useLoaderData,
    Outlet,
    Scripts,
} from '@tanstack/react-router';

// Import page components
__COMPONENT_IMPORTS__

// SSR props - set before render, used by loaders
let ssrProps: any = null;
// SSR mode - set before render to control script injection
let ssrMode: string = 'ssr';

export function setSSRProps(props: any) {
    ssrProps = props;
}

export function setSSRMode(mode: string) {
    ssrMode = mode;
}

// Root component for SSR - renders full HTML document (required for proper SSR hydration)
function SSRRootComponent() {
    // In static mode, don't include any JavaScript
    const includeScripts = ssrMode !== 'static';

    return (
        <html lang="en">
            <head>
                <meta charSet="UTF-8" />
                <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                <title>App</title>
                <link rel="stylesheet" href="/static/dist/client.css" />
            </head>
            <body>
                <div id="app">
                    <Outlet />
                </div>
                {/* Scripts component injects SSR dehydration data - skip for static */}
                {includeScripts && <Scripts />}
                {includeScripts && <script type="module" src="/static/dist/client.js"></script>}
            </body>
        </html>
    );
}

// Root component for client-only mode - just renders Outlet (HTML shell provides the document)
function ClientRootComponent() {
    return <Outlet />;
}

// Root route for SSR (full HTML document)
const ssrRootRoute = createRootRoute({
    component: SSRRootComponent,
});

// Root route for client-only mode (just app content)
const clientRootRoute = createRootRoute({
    component: ClientRootComponent,
});

__ROUTE_FACTORIES__

// Build route trees by calling factories with the appropriate parent
const ssrRouteTree = ssrRootRoute.addChildren([
    __SSR_ROUTE_TREE__
]);

const clientRouteTree = clientRootRoute.addChildren([
    __CLIENT_ROUTE_TREE__
]);

// Factory function for SSR router (used during SSR and hydration)
export function createRouter() {
    return createTanStackRouter({
        routeTree: ssrRouteTree,
        defaultPreload: '__DEFAULT_PRELOAD__',
        defaultStaleTime: 0,
    });
}

// Factory function for client-only router (used when mounting into #app)
export function createClientRouter() {
    return createTanStackRouter({
        routeTree: clientRouteTree,
        defaultPreload: '__DEFAULT_PRELOAD__',
        defaultStaleTime: 0,
    });
}

// Register router for type inference
declare module '@tanstack/react-router' {
    interface Register {
        router: ReturnType<typeof createRouter>;
    }
}
