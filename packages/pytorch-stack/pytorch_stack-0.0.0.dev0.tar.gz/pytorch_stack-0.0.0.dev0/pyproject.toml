[build-system]
requires = [ "setuptools>=76.1.0", "wheel" ]
build-backend = "setuptools.build_meta"

[project]
name = "pytorch-stack"
description = "A PyTorch stack utility package"
readme = "README.md"
license = "Apache-2.0"
authors = [ { name = "Jirka Borovec", email = "jborovec+github@gmail.com" } ]
requires-python = ">=3.9"
classifiers = [
  "Programming Language :: Python :: 3 :: Only",
  "Programming Language :: Python :: 3.9",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Programming Language :: Python :: 3.13",
]
dynamic = [ "version" ]
dependencies = [ "torch==2.0.0" ]

[project.scripts]
torch-stack = "torch_stack.__main__:main"

[project.optional-dependencies]
all = [ "torchaudio", "torchtext", "torchvision" ]
audio = [ "torchaudio" ]
dev = [
  "jsonargparse[signatures]>=4.38",
  "tomlkit",
]
text = [ "torchtext" ]
vision = [ "torchvision" ]

[tool.setuptools.dynamic]
version = { attr = "torch_stack.__version__" }

[tool.setuptools.packages.find]
where = [ "." ]
include = [ "torch_stack*" ]

[tool.ruff]
target-version = "py39"
line-length = 120

lint.select = [
  "D",      # see: https://pypi.org/project/pydocstyle
  "E",
  "F",      # see: https://pypi.org/project/pyflakes
  "I",      # isort
  "N",      # see: https://pypi.org/project/pep8-naming
  "RUF018", # see: https://docs.astral.sh/ruff/rules/assignment-in-assert
  "S",      # see: https://pypi.org/project/flake8-bandit
  "UP",     # see: https://docs.astral.sh/ruff/rules/#pyupgrade-up
  "W",      # see: https://pypi.org/project/pycodestyle
]
lint.extend-select = [
  "ANN", # see: https://pypi.org/project/flake8-annotations
  "C4",  # see: https://pypi.org/project/flake8-comprehensions
  "PT",  # see: https://pypi.org/project/flake8-pytest-style
  "RET", # see: https://pypi.org/project/flake8-return
  "SIM", # see: https://pypi.org/project/flake8-simplify
  "YTT", # see: https://pypi.org/project/flake8-2020
]
lint.unfixable = [
  "F401",
]
# Unlike Flake8, default to a complexity level of 10.
lint.mccabe.max-complexity = 10
# Use Google-style docstrings.
lint.pydocstyle.convention = "google"

[tool.pyproject-fmt]
# if false will remove unnecessary trailing ``.0``'s from version specifiers
keep_full_version = true
