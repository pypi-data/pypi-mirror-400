# This file was auto-generated by Fern from our API Definition.

import typing

from ..core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ..core.request_options import RequestOptions
from ..types.key_findings_response import KeyFindingsResponse
from .raw_client import AsyncRawKeyFindingsClient, RawKeyFindingsClient


class KeyFindingsClient:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._raw_client = RawKeyFindingsClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> RawKeyFindingsClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        RawKeyFindingsClient
        """
        return self._raw_client

    def get_key_findings(
        self, group_id: int, deal_id: int, *, request_options: typing.Optional[RequestOptions] = None
    ) -> KeyFindingsResponse:
        """
        Get the AI-generated key findings scorecard for the company associated with the deal.

        **DEPRECATED:** This endpoint returns pre-computed key findings from BigTable.
        It will be replaced by an on-demand generation endpoint in the future.

        The scorecard returns a list of findings across multiple dimensions:
        - Growth: Revenue & user growth trends
        - Operational Efficiency: Margins & profitability
        - Growth Efficiency: Magic number, burn multiple, ROAS
        - Retention: Retention & LTV analysis
        - Concentration: Customer concentration risk
        - Unit Economics: CAC, LTV/CAC, payback
        - Monetization: Cohort profitability trends

        Multiple findings can exist for the same topic. Each finding includes:
        - score_level: Performance indicator
        - tldr: Very short headline (1-3 words)
        - title_description: Short summary (8-10 words)
        - description: Detailed summary (~25-35 words)
        - supporting_metrics: Specific data points
        - metadata: Category, interest level, risk flags

        The response also includes an overall synthesis with assessment and upside scenarios.

        Parameters
        ----------
        group_id : int

        deal_id : int

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        KeyFindingsResponse
            Successful Response

        Examples
        --------
        from termina import Termina

        client = Termina(
            token="YOUR_TOKEN",
        )
        client.key_findings.get_key_findings(
            group_id=1,
            deal_id=1,
        )
        """
        _response = self._raw_client.get_key_findings(group_id, deal_id, request_options=request_options)
        return _response.data


class AsyncKeyFindingsClient:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._raw_client = AsyncRawKeyFindingsClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> AsyncRawKeyFindingsClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        AsyncRawKeyFindingsClient
        """
        return self._raw_client

    async def get_key_findings(
        self, group_id: int, deal_id: int, *, request_options: typing.Optional[RequestOptions] = None
    ) -> KeyFindingsResponse:
        """
        Get the AI-generated key findings scorecard for the company associated with the deal.

        **DEPRECATED:** This endpoint returns pre-computed key findings from BigTable.
        It will be replaced by an on-demand generation endpoint in the future.

        The scorecard returns a list of findings across multiple dimensions:
        - Growth: Revenue & user growth trends
        - Operational Efficiency: Margins & profitability
        - Growth Efficiency: Magic number, burn multiple, ROAS
        - Retention: Retention & LTV analysis
        - Concentration: Customer concentration risk
        - Unit Economics: CAC, LTV/CAC, payback
        - Monetization: Cohort profitability trends

        Multiple findings can exist for the same topic. Each finding includes:
        - score_level: Performance indicator
        - tldr: Very short headline (1-3 words)
        - title_description: Short summary (8-10 words)
        - description: Detailed summary (~25-35 words)
        - supporting_metrics: Specific data points
        - metadata: Category, interest level, risk flags

        The response also includes an overall synthesis with assessment and upside scenarios.

        Parameters
        ----------
        group_id : int

        deal_id : int

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        KeyFindingsResponse
            Successful Response

        Examples
        --------
        import asyncio

        from termina import AsyncTermina

        client = AsyncTermina(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.key_findings.get_key_findings(
                group_id=1,
                deal_id=1,
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.get_key_findings(group_id, deal_id, request_options=request_options)
        return _response.data
