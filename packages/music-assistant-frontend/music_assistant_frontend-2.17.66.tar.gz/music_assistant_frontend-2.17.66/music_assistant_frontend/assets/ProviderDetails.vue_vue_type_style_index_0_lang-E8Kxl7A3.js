import{d as X,b as d,e as a,n as E,H as l,E as n,ak as te,D as u,r as R,w as ie,c as A,u as y,I as c,aU as ae,f as v,$ as T,a1 as m,A as ne,F as L,M as z,O as S,G as le,ad as oe}from"./lucide-C2DU1LFb.js";import{T as Z}from"./Toolbar-DxI-629_.js";import{M as I,a as se}from"./marquee_text_sync-lG946jv0.js";import{C as re,M as Y,D as N,I as F,F as me,s as G,x as de,c as b,G as ce,H as ue,_ as ye,h as fe,e as ve,J as he}from"./index-GGmWIGQT.js";import{u as ge}from"./vue-router-BgJK_hRC.js";import{M as K,b as be}from"./MediaItemThumb-DUorpFuJ.js";import{n as H,d as C,l as pe,B as ke,a as W,T as xe,D as M,_ as we,q as $e,E as _,$ as Ce,a0 as _e,p as Te,r as Ie,Y as De,o as ee,e as Ve,b as Be,i as J}from"./vuetify-CDJMkNb9.js";import{_ as O}from"./ProviderIcon.vue_vue_type_style_index_0_lang-BfVk_25X.js";import{C as Pe}from"./Container-DCgapsRo.js";import{L as Q}from"./ListItem-B-0bE6q7.js";import{u as Ae}from"./vue-i18n-DySrp6mW.js";const Le=X({__name:"MenuButton",props:{icon:{default:void 0},text:{default:void 0},disabled:{type:Boolean,default:!1},width:{default:200},loading:{type:Boolean,default:!0}},emits:["click","menu"],setup(e,{emit:r}){const f=r;return(g,h)=>(a(),d("div",{style:E(`width: ${e.width}px; height: 30px;`)},[l(H,{variant:"tonal",style:E(`
            width: ${e.width}px;
            position: absolute;
            border: 1px solid #cccccc4d;
            height: 38px;
            margin-top: -1px;
            margin-left: -1px;
          `),disabled:e.loading,onClick:h[0]||(h[0]=p=>f("menu"))},{default:n(()=>[l(C,{icon:"mdi-menu-down",size:"xx-large",style:E(`width: 20px; margin-left: ${e.width-42}px`)},null,8,["style"])]),_:1},8,["style","disabled"]),l(H,{color:"primary",flat:"",disabled:e.disabled||e.loading,style:E(`width: ${e.width-40}px; justify-content: left;`),text:e.text,onClick:h[1]||(h[1]=p=>f("click"))},te({_:2},[e.icon&&e.text.length<12||e.loading?{name:"prepend",fn:n(()=>[e.loading?(a(),u(pe,{key:0,color:"grey-lighten-5",indeterminate:""})):(a(),u(C,{key:1,icon:e.icon,size:"x-large"},null,8,["icon"]))]),key:"0"}:void 0]),1032,["disabled","style","text"])],4))}}),ze={key:0,xs5:"","pa-5":"",style:{height:"80%","min-width":"230px","margin-top":"25px","margin-bottom":"15px","margin-right":"24px","align-content":"center","flex-shrink":"0"}},Re={key:0},Se={key:1},He={style:{"min-width":"0"}},Ue=["src"],Ee={style:{"padding-bottom":"10px"}},Ne=["onClick"],Fe={style:{color:"accent"}},Ye={style:{color:"accent"}},je={style:{color:"primary"}},qe={style:{display:"flex","margin-left":"14px","padding-bottom":"10px",cursor:"pointer !important"}},Ge=["innerHTML"],Oe={key:3,class:"justify-center",style:{"margin-left":"15px","padding-bottom":"20px"}},Xe=X({__name:"InfoHeader",props:{item:{}},setup(e){const r=e,f=R(!1),g=R(),{mobile:h}=ke(),p=R([]),k=new URL(""+new URL("info_gradient-C5d1dalX.jpg",import.meta.url).href,import.meta.url).href,x=new se,w=ge();ie(()=>r.item,async i=>{i?(g.value=N(i,F.FANART)||N(i,F.LANDSCAPE)||N(i,F.THUMB)||k,p.value=await ue([i],i)):(g.value=k,p.value=[])},{immediate:!0});const D=function(i){w.push({name:"album",params:{itemId:i.item_id,provider:i.provider}})},j=function(i){w.push({name:"artist",params:{itemId:i.item_id,provider:i.provider}})},q=function(){if(G.prevRoute){w.back();return}const i=w.currentRoute.value.name?.toString()||"";for(const t of["artist","album","track","playlist","radio"])if(i.includes(t)){w.push({name:`${t}s`});return}w.push({name:"home"})},V=function(i=!1){const t=document.getElementById("playbutton");ce(r.item,t.getBoundingClientRect().left,t.getBoundingClientRect().top+36,void 0,i)},B=A(()=>r.item?r.item.metadata&&r.item.metadata.description?r.item.metadata.description:r.item.metadata&&r.item.metadata.copyright?r.item.metadata.copyright:("artists"in r.item&&r.item.artists.forEach(function(i){if("metadata"in i&&i.metadata.description)return i.metadata.description}),""):""),P=A(()=>re(B.value)),U=A(()=>{const i=h.value?160:300;return B.value.length>i?P.value.substring(0,i)+"...":P.value}),o=A(()=>{if(r.item&&r.item.media_type==Y.ARTIST)return N(r.item,F.LOGO)});return(i,t)=>(a(),d("div",null,[l(W,{variant:"flat",img:y(k),style:{"z-index":"0","border-radius":"0px"},height:"25vh","max-height":"500px","min-height":"340px"},{default:n(()=>[e.item?c("",!0):(a(),u(xe,{key:0,indeterminate:""})),l(M,{width:"100%",height:"100%",cover:"",class:"background-image",src:g.value,gradient:i.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.90), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.90), rgba(255,255,255,.75)",transition:!1,eager:""},null,8,["src","gradient"]),l(Z,{icon:y(ae),style:{position:"absolute","z-index":"999999"},"menu-items":p.value,"enforce-overflow-menu":!0,"show-loading":!0,"icon-action":q},null,8,["icon","menu-items"]),e.item?(a(),u(_e,{key:1,style:{margin:"0",top:"55%","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)","padding-left":"15px","align-items":"center","padding-right":"15px",display:"flex",width:"100%"}},{default:n(()=>[i.$vuetify.display.mobile?c("",!0):(a(),d("div",ze,[e.item.media_type&&e.item.media_type==y(Y).ARTIST?(a(),d("div",Re,[l(we,{size:"210",style:{"margin-bottom":"10%"}},{default:n(()=>[l(K,{item:e.item,size:"calc(100%)"},null,8,["item"])]),_:1})])):(a(),d("div",Se,[l(K,{item:e.item,size:"calc(100%)",style:{"max-height":"256px"}},null,8,["item"])]))])),v("div",He,[o.value?(a(),d("img",{key:0,src:o.value,width:"auto",height:"80",style:{"padding-left":"10px"}},null,8,Ue)):(a(),u($e,{key:1},{default:n(()=>[l(I,{sync:y(x)},{default:n(()=>[T(m(e.item.name),1)]),_:1},8,["sync"])]),_:1})),v("div",Ee,["version"in e.item&&e.item.version?(a(),u(_,{key:0,class:"caption"},{default:n(()=>[T(m(e.item.version)+" ",1),l(Ce,{location:"bottom"},{activator:n(({props:s})=>[y(me)(e.item.metadata.explicit||!1)?(a(),u(C,ne({key:0},s,{icon:"mdi-alpha-e-box",width:"35"}),null,16)):c("",!0)]),default:n(()=>[v("span",null,m(i.$t("tooltip.explicit")),1)]),_:1})]),_:1})):c("",!0),"artists"in e.item&&e.item.artists?(a(),u(_,{key:1,class:"title accent--text d-flex"},{default:n(()=>[l(C,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),l(I,{sync:y(x)},{default:n(()=>[(a(!0),d(L,null,z(e.item.artists,(s,$)=>(a(),d("span",{key:s.item_id},[v("a",{style:{color:"accent"},onClick:Me=>j(s)},m(s.name),9,Ne),$+1<e.item.artists.length?(a(),d("span",{key:$,style:{color:"accent"}},m(" / "))):c("",!0)]))),128))]),_:1},8,["sync"])]),_:1})):c("",!0),"authors"in e.item&&e.item.authors.length>0?(a(),u(_,{key:2,class:"title accent--text d-flex"},{default:n(()=>[l(C,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-edit"}),l(I,{sync:y(x)},{default:n(()=>[(a(!0),d(L,null,z(e.item.authors,(s,$)=>(a(),d("span",{key:s},[v("span",Fe,m(s),1),$+1<e.item.authors.length?(a(),d("span",{key:$,style:{color:"accent"}},m(" / "))):c("",!0)]))),128))]),_:1},8,["sync"])]),_:1})):c("",!0),"narrators"in e.item&&e.item.narrators.length>0?(a(),u(_,{key:3,class:"title accent--text d-flex"},{default:n(()=>[l(C,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-voice"}),l(I,{sync:y(x)},{default:n(()=>[(a(!0),d(L,null,z(e.item.narrators,(s,$)=>(a(),d("span",{key:s},[v("span",Ye,m(s),1),$+1<e.item.narrators.length?(a(),d("span",{key:$,style:{color:"accent"}},m(" / "))):c("",!0)]))),128))]),_:1},8,["sync"])]),_:1})):c("",!0),"owner"in e.item&&e.item.owner?(a(),u(_,{key:4,class:"title d-flex"},{default:n(()=>[l(C,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-account-music"}),l(I,{sync:y(x)},{default:n(()=>[v("a",je,m(e.item.owner),1)]),_:1},8,["sync"])]),_:1})):c("",!0),"album"in e.item&&e.item.album?(a(),u(_,{key:5,class:"d-flex"},{default:n(()=>[l(C,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-album"}),l(I,{sync:y(x)},{default:n(()=>[v("a",{style:{color:"secondary"},onClick:t[0]||(t[0]=s=>D(e.item?.album))},m(e.item.album.name),1)]),_:1},8,["sync"])]),_:1})):c("",!0)]),v("div",qe,[l(Le,{id:"playbutton",width:220,icon:"mdi-play-circle-outline",text:y(de)(i.$t("play"),14),disabled:!e.item,loading:y(G).playActionInProgress,"open-menu-on-click":!y(G).activePlayer,onClick:V,onMenu:t[1]||(t[1]=s=>V(!0))},null,8,["text","disabled","loading","open-menu-on-click"]),l(H,{variant:"plain",ripple:"",icon:e.item.favorite?"mdi-heart":"mdi-heart-outline",size:"x-large",style:{"margin-top":"-14px"},title:i.$t("tooltip.favorite"),onClick:[t[2]||(t[2]=s=>y(b).toggleFavorite(e.item)),t[3]||(t[3]=S(()=>{},["prevent"])),t[4]||(t[4]=S(()=>{},["stop"]))]},null,8,["icon","title"]),l(O,{domain:e.item.provider,size:25,style:{"margin-top":"6px"}},null,8,["domain"])]),U.value?(a(),u(_,{key:2,class:"body-2 justify-left",style:{"padding-bottom":"10px","white-space":"pre-line",cursor:"pointer"},onClick:t[5]||(t[5]=s=>f.value=!f.value)},{default:n(()=>[v("div",{innerHTML:U.value},null,8,Ge)]),_:1})):c("",!0),e.item&&e.item.metadata.genres?(a(),d("div",Oe,[(a(!0),d(L,null,z(e.item.metadata.genres.slice(0,i.$vuetify.display.mobile?15:25),s=>(a(),u(ee,{key:s,color:"blue-grey lighten-1",style:{"margin-right":"5px","margin-bottom":"5px"},small:"",outlined:""},{default:n(()=>[T(m(s),1)]),_:2},1024))),128))])):c("",!0)])]),_:1})):c("",!0)]),_:1},8,["img"]),l(Te,{modelValue:f.value,"onUpdate:modelValue":t[7]||(t[7]=s=>f.value=s),"max-width":"975",width:"auto"},{default:n(()=>[l(W,null,{default:n(()=>[l(Ie,{innerHTML:P.value},null,8,["innerHTML"]),l(De,null,{default:n(()=>[l(H,{color:"primary",block:"",onClick:t[6]||(t[6]=s=>f.value=!1)},{default:n(()=>[T(m(i.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),ct=ye(Xe,[["__scopeId","data-v-5ca3dc2e"]]),Ke={style:{"margin-bottom":"10px"}},We={key:0},Je=["title","onClick"],Qe=["title"],Ze={class:"d-flex align-center ga-2"},ut=X({__name:"ProviderDetails",props:{itemDetails:{}},setup(e){const r=e,{t:f}=Ae(),g=R(!1),h=R(!1),p=function(o){window.open(o,"_blank")},k=le({}),x=function(o){const i=`${o.provider_instance}.${o.item_id}`,t=k[i];if(t)t.load(),delete k[i];else{const s=new Audio(w(o.provider_instance,o.item_id));k[i]=s,s.play()}},w=function(o,i){return`${b.baseUrl}/preview?item_id=${encodeURIComponent(i)}&provider=${o}`},D=function(o){return`${o.provider_instance}://${r.itemDetails.media_type}/${o.item_id}`},j=async function(o){await he(o)?J.success(f("uri_copied")):J.error(f("uri_copy_failed"))},q=function(o){const i=b.getProvider(o.provider_instance);if(i)return i.name;const t=b.getProviderManifest(o.provider_domain);return t?`${t.name} (${o.provider_instance})`:o.provider_instance},V=function(){g.value=!g.value},B=function(o,i){const t=o,s=[{label:f("tooltip.copy_uri"),icon:"mdi-link",action:()=>{i&&j(D(i))}}];i.url&&!i.provider_domain.startsWith("file")&&s.push({label:f("tooltip.open_provider_link"),icon:"mdi-open-in-new",action:()=>{p(i.url)}}),b.providers[i.provider_instance]?.is_streaming_provider&&s.push({label:f("remove_provider_mapping"),icon:"mdi-delete",action:async()=>{confirm(f("remove_provider_mapping_confirm"))&&await b.sendCommand("music/remove_provider_mapping",{media_type:r.itemDetails.media_type,db_id:r.itemDetails.item_id,mapping:i})}}),ve.emit("contextmenu",{items:s,posX:t.clientX,posY:t.clientY})},P=function(){confirm(f("search_all_providers_confirm"))&&(h.value=!0,b.sendCommand("music/match_providers",{media_type:r.itemDetails.media_type,db_id:r.itemDetails.item_id}).finally(()=>{h.value=!1}))},U=A(()=>[{label:"search_all_providers",icon:"mdi-database-search",action:P,overflowAllowed:!1,disabled:h.value,hide:r.itemDetails.provider!="library"||!b.hasStreamingProviders.value},{label:"tooltip.collapse_expand",icon:g.value?"mdi-chevron-up":"mdi-chevron-down",action:V,overflowAllowed:!1}]);return(o,i)=>(a(),d("section",Ke,[l(Z,{title:o.$t("mapped_providers"),"menu-items":U.value,onTitleClicked:V},null,8,["title","menu-items"]),l(Ve),g.value?(a(),u(Pe,{key:0},{default:n(()=>[l(Be,null,{default:n(()=>[(a(!0),d(L,null,z(e.itemDetails?.provider_mappings,t=>(a(),u(Q,{key:t.provider_instance,disabled:!t.available||!y(b).getProvider(t.provider_instance),"show-menu-btn":"",onMenu:S(s=>B(s,t),["stop"])},{prepend:n(()=>[l(O,{domain:t.provider_domain,size:30},null,8,["domain"])]),title:n(()=>[T(m(q(t))+" ",1),t.in_library?(a(),u(ee,{key:0,size:"x-small",density:"compact",class:"ml-2",title:o.$t("tooltip.in_provider_library")},{default:n(()=>[T(m(o.$t("library")),1)]),_:1},8,["title"])):c("",!0)]),subtitle:n(()=>[e.itemDetails.media_type==y(Y).TRACK&&t.audio_format?(a(),d("span",We,m(t.audio_format.content_type)+" | "+m(t.audio_format.sample_rate/1e3)+"kHz/"+m(t.audio_format.bit_depth)+" bits | ",1)):c("",!0),t.url&&!t.provider_domain.startsWith("file")?(a(),d("a",{key:1,style:{opacity:"0.4"},title:o.$t("tooltip.open_provider_link"),onClick:S(s=>p(t.url),["prevent"])},m(D(t)),9,Je)):(a(),d("span",{key:2,style:{opacity:"0.4"},title:o.$t("copy_uri")},m(D(t)),9,Qe))]),append:n(()=>[t.audio_format&&t.audio_format.bit_depth>16?(a(),u(M,{key:0,src:y(be),width:"30",class:oe(o.$vuetify.theme.current.dark?"hiresicondark":"hiresicon")},null,8,["src","class"])):c("",!0),v("div",Ze,[y(fe)("bp1")&&e.itemDetails.media_type==y(Y).TRACK?(a(),u(H,{key:0,variant:"plain",icon:k[`${t.provider_instance}.${t.item_id}`]?"mdi-pause":"mdi-play-circle",title:o.$t("tooltip.play_sample"),onClick:s=>x(t)},null,8,["icon","title","onClick"])):c("",!0)])]),_:2},1032,["disabled","onMenu"]))),128)),e.itemDetails.provider=="library"?(a(),u(Q,{key:0,"show-menu-btn":"",onMenu:i[0]||(i[0]=S(t=>B(t,{provider_instance:"library",provider_domain:"library",item_id:e.itemDetails.item_id,available:!0}),["stop"]))},{prepend:n(()=>[l(O,{domain:"library",size:30})]),title:n(()=>[T(m(o.$t("music_assistant_library")),1)]),subtitle:n(()=>[v("span",null,"library://"+m(e.itemDetails.media_type)+"/"+m(e.itemDetails.item_id),1)]),_:1})):c("",!0)]),_:1})]),_:1})):c("",!0)]))}});export{ct as I,ut as _};
