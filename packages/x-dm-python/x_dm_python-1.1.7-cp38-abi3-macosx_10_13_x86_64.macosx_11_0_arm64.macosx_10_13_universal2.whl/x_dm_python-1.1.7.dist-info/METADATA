Metadata-Version: 2.4
Name: x_dm_python
Version: 1.1.7
Classifier: Programming Language :: Rust
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Dist: pytest>=7.0 ; extra == 'test'
Requires-Dist: pytest-asyncio>=0.21 ; extra == 'test'
Provides-Extra: test
Summary: Twitter DM æ‰¹é‡å¹¶å‘å‘é€åº“ (Rust å®ç°, æä¾› Python ç»‘å®š)
Author-email: robin <robin528919@gmail.com>
Requires-Python: >=3.8
Description-Content-Type: text/markdown; charset=UTF-8; variant=GFM
Project-URL: Homepage, https://github.com/yourusername/twitter-dm-static
Project-URL: Repository, https://github.com/yourusername/twitter-dm-static.git
Project-URL: Issues, https://github.com/yourusername/twitter-dm-static/issues

# Twitter Full Feature Library

åŸºäº Rust å¼€å‘çš„é«˜æ€§èƒ½ Twitter (X) å…¨åŠŸèƒ½è‡ªåŠ¨åŒ–åº“ï¼Œé€šè¿‡ PyO3 æä¾›å®Œå…¨å¼‚æ­¥çš„ Python æ¥å£ã€‚ä¸ä»…æ”¯æŒç§ä¿¡æ‰¹é‡å‘é€ï¼Œè¿˜æ¶µç›–äº†å‘å¸–ã€ç”¨æˆ·ç®¡ç†ã€åª’ä½“ä¸Šä¼ ã€æ”¶ä»¶ç®±åŒæ­¥ç­‰å®Œæ•´åŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ“¨ **æ¶ˆæ¯æœåŠ¡ (DM)**: æ”¯æŒå•æ¡/æ‰¹é‡å‘é€ç§ä¿¡ã€è‡ªå®šä¹‰æ–‡æ¡ˆã€åª’ä½“é™„ä»¶
- ğŸ“ **å¸–å­æœåŠ¡ (Posts)**: å‘å¸ƒæ¨æ–‡ã€å›å¤ã€å¼•ç”¨ã€è½¬å‘ã€ç‚¹èµã€åˆ é™¤
- ğŸ‘¥ **ç”¨æˆ·æœåŠ¡ (User)**: è·å–ä¸ªäººèµ„æ–™ã€ä¿®æ”¹èµ„æ–™ï¼ˆå¤´åƒ/èƒŒæ™¯/ç®€ä»‹/åç§°ï¼‰
- ğŸ“¤ **åª’ä½“æœåŠ¡ (Upload)**: æ”¯æŒå›¾ç‰‡/è§†é¢‘ä¸Šä¼ ã€åˆ†ç‰‡ä¸Šä¼ 
- ğŸ“¥ **æ”¶ä»¶ç®± (Inbox)**: è·å–ç§ä¿¡ä¼šè¯ã€æ¶ˆæ¯æ›´æ–°
- ğŸ”’ **å®‰å…¨è®¤è¯**: åŸºäº cookies çš„è®¤è¯æœºåˆ¶ï¼Œæ”¯æŒ JA3/JA4 æŒ‡çº¹ç»•è¿‡
- âš¡ **é«˜æ€§èƒ½**: ä½¿ç”¨ Tokio å®ç°çœŸæ­£çš„å¹¶å‘è¯·æ±‚
- ğŸ **Python ç»‘å®š**: æä¾›ç¬¦åˆ Python ä¹ æƒ¯çš„å®Œæ•´å¼‚æ­¥ API

## ğŸ“¦ å®‰è£…

### ä»æºç æ„å»º Python æ‰©å±•

```bash
# å®‰è£… maturin (Python åŒ…æ„å»ºå·¥å…·)
pip install maturin

# å¼€å‘æ¨¡å¼å®‰è£… (å¿«é€Ÿæµ‹è¯•)
maturin develop

# æˆ–è€…æ„å»º release wheel
maturin build --release
```

### ä½¿ç”¨ Rust

åœ¨ `Cargo.toml` ä¸­æ·»åŠ ä¾èµ–:

```toml
[dependencies]
x_dm_python = { path = "." }
tokio = { version = "1", features = ["full"] }
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### Python ä½¿ç”¨ç¤ºä¾‹ (å¼‚æ­¥ API)

> **é‡è¦**: æ‰€æœ‰æ“ä½œå‡ä¸ºå¼‚æ­¥ï¼Œè¯·ç¡®ä¿åœ¨ `async` å‡½æ•°ä¸­è¿è¡Œã€‚

```python
import asyncio
import x_dm_python

async def main():
    # åˆå§‹åŒ–å®¢æˆ·ç«¯ (éœ€è¦æœ‰æ•ˆçš„ cookies)
    cookies = "ct0=your_csrf_token; auth_token=your_auth_token; twid=u%3D123456789"
    client = x_dm_python.Twitter(cookies)

    # 1. å‘é€æ¨æ–‡
    print("--- å‘å¸ƒæ¨æ–‡ ---")
    tweet_result = await client.create_tweet(
        text="Hello from x_dm_python! ğŸš€",
        # reply_to="tweet_id_if_reply",
        # media_ids=["media_id_1"]
    )
    if tweet_result.success:
        print(f"æ¨æ–‡å‘é€æˆåŠŸ: {tweet_result.tweet_id}")
    
        # ç‚¹èµè¯¥æ¨æ–‡
        await client.favorite_tweet(tweet_result.tweet_id)

    # 2. ä¿®æ”¹ä¸ªäººèµ„æ–™
    print("\n--- æ›´æ–°èµ„æ–™ ---")
    profile_result = await client.edit_profile(
        name="Rust Python Bot",
        description="Automated by x_dm_python library"
    )
    if profile_result.success:
        print(f"èµ„æ–™æ›´æ–°æˆåŠŸ: {profile_result.name}")

    # 3. è·å–ç”¨æˆ·ä¿¡æ¯
    print("\n--- è·å–ä¿¡æ¯ ---")
    user_info = await client.get_profile("elonmusk")
    if user_info.success:
        print(f"ç”¨æˆ·: {user_info.name}, ç²‰ä¸æ•°: {user_info.followers_count}")

    # 4. æ‰¹é‡å‘é€ç§ä¿¡
    print("\n--- æ‰¹é‡ç§ä¿¡ ---")
    user_ids = ["123456789", "987654321"]
    batch_result = await client.send_batch_direct_messages(
        user_ids=user_ids, 
        message="è¿™æ˜¯ä¸€æ¡æ‰¹é‡æµ‹è¯•æ¶ˆæ¯ï¼"
    )
    print(f"æˆåŠŸ: {batch_result.success_count}, å¤±è´¥: {batch_result.failure_count}")

# è¿è¡Œ
asyncio.run(main())
```

### Rust ä½¿ç”¨ç¤ºä¾‹

```rust
use x_dm_python::{Twitter, CreateTweetParams};

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    // åˆå§‹åŒ–å®¢æˆ·ç«¯
    let cookies = "ct0=...; auth_token=...; twid=...";
    let client = Twitter::new(cookies.to_string(), None)?;

    // å‘å¸ƒæ¨æ–‡
    let params = CreateTweetParams::new("Hello from Rust!");
    let result = client.create_tweet(params).await?;
    println!("Sent tweet ID: {:?}", result.tweet_id);

    // è·å–ç”¨æˆ·èµ„æ–™
    let profile = client.get_profile("elonmusk").await?;
    println!("Elon's followers: {:?}", profile.followers_count);

    Ok(())
}
```

## ğŸ“– API æ–‡æ¡£æ¦‚è§ˆ

æ ¸å¿ƒç±» `Twitter` èšåˆäº†æ‰€æœ‰åŠŸèƒ½æ¨¡å—ï¼š

### ğŸ“ Posts (å¸–å­)
- `create_tweet(text: str, ...)`: å‘æ¨æ–‡/å›å¤
- `delete_tweet(tweet_id: str)`: åˆ é™¤æ¨æ–‡
- `favorite_tweet(tweet_id: str)`: ç‚¹èµ
- `unfavorite_tweet(tweet_id: str)`: å–æ¶ˆç‚¹èµ
- `create_retweet(tweet_id: str)`: è½¬å‘
- `delete_retweet(tweet_id: str)`: å–æ¶ˆè½¬å‘
- `get_tweets(user_id: str)`: è·å–ç”¨æˆ·æ¨æ–‡åˆ—è¡¨

### ğŸ‘¥ User (ç”¨æˆ·)
- `get_profile(screen_name: str)`: é€šè¿‡ç”¨æˆ·åè·å–èµ„æ–™
- `get_profile_by_id(rest_id: str)`: é€šè¿‡ ID è·å–èµ„æ–™
- `edit_profile(name: str, description: str, ...)`: ç¼–è¾‘èµ„æ–™
- `change_profile_image(media_id: str)`: æ›´æ¢å¤´åƒ
- `change_background_image(media_id: str)`: æ›´æ¢èƒŒæ™¯å›¾

### ğŸ“¨ DM (ç§ä¿¡)
- `send_direct_message(user_id: str, message: str)`: å‘é€å•æ¡
- `send_batch_direct_messages(user_ids: List[str], ...)`: æ‰¹é‡å‘é€

### ğŸ“¤ Upload (ä¸Šä¼ )
- `upload_image(bytes: bytes, category: str)`: ä¸Šä¼ å›¾ç‰‡
- `upload_video(...)`: ä¸Šä¼ è§†é¢‘ (Rust API)

### ğŸ“¥ Inbox (æ”¶ä»¶ç®±)
- `get_user_updates(...)`: è·å–æ¶ˆæ¯æ›´æ–°

*(è¯¦ç»†å‚æ•°è¯·å‚è€ƒä»£ç æ³¨é‡Šæˆ–ç”Ÿæˆçš„ Python ç±»å‹æç¤º)*

## ğŸ” è·å– Twitter Cookies

1. æµè§ˆå™¨ç™»å½• Twitter (X)
2. F12 æ‰“å¼€å¼€å‘è€…å·¥å…· -> Network
3. å‘é€ä»»æ„è¯·æ±‚ï¼ŒæŸ¥çœ‹ Request Headers ä¸­çš„ `Cookie`
4. ç¡®ä¿åŒ…å«: `ct0` (CSRF Token), `auth_token`, `twid`

## ğŸ—ï¸ æ¶æ„è®¾è®¡

æœ¬é¡¹ç›®é‡‡ç”¨**æ¨¡å—åŒ–ç»„åˆæ¨¡å¼**ï¼š

- **common**: åŸºç¡€ HTTP å®¢æˆ·ç«¯ã€è®¤è¯ã€é”™è¯¯å¤„ç†
- **x (Core)**:
  - `dm`: ç§ä¿¡æ¨¡å—
  - `posts`: å¸–å­/æ¨æ–‡æ¨¡å—
  - `user`: ç”¨æˆ·èµ„æ–™æ¨¡å—
  - `upload`: åª’ä½“ä¸Šä¼ æ¨¡å—
  - `inbox`: æ”¶ä»¶ç®±æ¨¡å—
- **python**: PyO3 ç»‘å®šå±‚
- **lib.rs**: ç»Ÿä¸€å…¥å£ `Twitter` ç»“æ„ä½“

## ğŸ“œ è®¸å¯è¯

MIT License

