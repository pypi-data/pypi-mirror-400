/*! For license information please see 459.93961eab22ba989f8c49.js.LICENSE.txt */
"use strict";(self.webpackChunkjupyterlab_unicore_shell=self.webpackChunkjupyterlab_unicore_shell||[]).push([[459],{459:(e,t,r)=>{r.r(t),r.d(t,{WebLinksAddon:()=>a});var i=class{constructor(e,t,r,i={}){this._terminal=e,this._regex=t,this._handler=r,this._options=i}provideLinks(e,t){let r=s.computeLink(e,this._regex,this._terminal,this._handler);t(this._addCallbacks(r))}_addCallbacks(e){return e.map((e=>(e.leave=this._options.leave,e.hover=(t,r)=>{if(this._options.hover){let{range:i}=e;this._options.hover(t,r,i)}},e)))}};function n(e){try{let t=new URL(e),r=t.password&&t.username?`${t.protocol}//${t.username}:${t.password}@${t.host}`:t.username?`${t.protocol}//${t.username}@${t.host}`:`${t.protocol}//${t.host}`;return e.toLocaleLowerCase().startsWith(r.toLocaleLowerCase())}catch{return!1}}var s=class e{static computeLink(t,r,i,s){let l,o=new RegExp(r.source,(r.flags||"")+"g"),[a,h]=e._getWindowedLineStrings(t-1,i),c=a.join(""),p=[];for(;l=o.exec(c);){let t=l[0];if(!n(t))continue;let[r,o]=e._mapStrIdx(i,h,0,l.index),[a,c]=e._mapStrIdx(i,r,o,t.length);if(-1===r||-1===o||-1===a||-1===c)continue;let u={start:{x:o+1,y:r+1},end:{x:c,y:a+1}};p.push({range:u,text:t,activate:s})}return p}static _getWindowedLineStrings(e,t){let r,i=e,n=e,s=0,l="",o=[];if(r=t.buffer.active.getLine(e)){let e=r.translateToString(!0);if(r.isWrapped&&" "!==e[0]){for(s=0;(r=t.buffer.active.getLine(--i))&&s<2048&&(l=r.translateToString(!0),s+=l.length,o.push(l),r.isWrapped&&-1===l.indexOf(" ")););o.reverse()}for(o.push(e),s=0;(r=t.buffer.active.getLine(++n))&&r.isWrapped&&s<2048&&(l=r.translateToString(!0),s+=l.length,o.push(l),-1===l.indexOf(" ")););}return[o,i]}static _mapStrIdx(e,t,r,i){let n=e.buffer.active,s=n.getNullCell(),l=r;for(;i;){let e=n.getLine(t);if(!e)return[-1,-1];for(let r=l;r<e.length;++r){e.getCell(r,s);let l=s.getChars();if(s.getWidth()&&(i-=l.length||1,r===e.length-1&&""===l)){let e=n.getLine(t+1);e&&e.isWrapped&&(e.getCell(0,s),2===s.getWidth()&&(i+=1))}if(i<0)return[t,r]}t++,l=0}return[t,l]}},l=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function o(e,t){let r=window.open();if(r){try{r.opener=null}catch{}r.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}var a=class{constructor(e=o,t={}){this._handler=e,this._options=t}activate(e){this._terminal=e;let t=this._options,r=t.urlRegex||l;this._linkProvider=this._terminal.registerLinkProvider(new i(this._terminal,r,this._handler,t))}dispose(){this._linkProvider?.dispose()}}}}]);