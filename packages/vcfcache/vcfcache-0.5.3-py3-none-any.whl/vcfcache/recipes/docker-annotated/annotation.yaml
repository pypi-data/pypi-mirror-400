## GRCh38 VEP 115.2 annotation config
##
## This annotation config is VEP installation-agnostic (works with native, Docker, or Apptainer).
## The installation method is specified in params.yaml via annotation_tool_cmd.

annotation_cmd: |
  ${params.bcftools_cmd} view ${INPUT_BCF} | \
  ${params.annotation_tool_cmd} \
    --offline \
    --buffer_size ${params.vep_buffer} \
    --fork ${params.vep_forks} \
    --cache \
    --dir_cache ${params.vep_cache} \
    --format vcf \
    --vcf \
    --force_overwrite \
    -i STDIN \
    -o STDOUT \
    -a GRCh38 \
    --transcript_version \
    --total_length \
    --flag_pick \
    --exclude_predicted \
    --hgvs \
    --hgvsg \
    --spdi \
    --variant_class \
    --uniprot \
    --gene_version \
    --protein \
    --symbol \
    --canonical \
    --appris \
    --mane \
    --biotype \
    --domains \
    --stats_file ${AUXILIARY_DIR}/vep_stats.html \
    --warning_file ${AUXILIARY_DIR}/vep_warnings.txt \
    --verbose 2> ${AUXILIARY_DIR}/vep_stderr.txt | \
  ${params.bcftools_cmd} view -o ${OUTPUT_BCF} -Ob -W

must_contain_info_tag: CSQ
required_tool_version: "115.2"

optional_checks:
  vep_cache_version: "115"
  genome_build: "GRCh38"
