Metadata-Version: 2.4
Name: tracarbon
Version: 0.9.1
Summary: Tracarbon is a Python library that tracks your device's energy consumption and calculates your carbon emissions.
Author-email: Florian Valeye <fvaleye@github.com>
License-Expression: Apache-2.0
Project-URL: documentation, https://fvaleye.github.io
Project-URL: repository, https://github.com/fvaleye/tracarbon
Keywords: energy,sustainability,energy-consumption,electricity-consumption,energy-efficiency,carbon-footprint,carbon-emissions
Classifier: Development Status :: 3 - Alpha
Classifier: Programming Language :: Python :: 3 :: Only
Requires-Python: >=3.9
Description-Content-Type: text/markdown
License-File: LICENSE.txt
Requires-Dist: loguru<0.8,>=0.6
Requires-Dist: aiohttp<4.0.0,>=3.9.3
Requires-Dist: aiocache<0.13.0,>=0.12.1
Requires-Dist: aiofiles<26.0,>=23.2
Requires-Dist: psutil>=5.9.8
Requires-Dist: orjson<4,>=3.10
Requires-Dist: msgpack<2.0.0,>=1.1.1
Requires-Dist: pydantic<3.0.0,>=1.10.7
Requires-Dist: typer<0.22,>=0.7
Requires-Dist: ec2-metadata<3.0.0,>=2.14.0
Requires-Dist: python-dotenv<1.3,>=0.21
Requires-Dist: asyncer<0.0.13,>=0.0.5
Provides-Extra: datadog
Requires-Dist: datadog<0.53,>=0.44; extra == "datadog"
Provides-Extra: prometheus
Requires-Dist: prometheus-client<0.24,>=0.16; extra == "prometheus"
Provides-Extra: kubernetes
Requires-Dist: kubernetes<35.0,>=26.1; extra == "kubernetes"
Provides-Extra: dev
Requires-Dist: ty>=0.0.1a6; extra == "dev"
Requires-Dist: ruff<0.15.0,>=0.11.13; extra == "dev"
Requires-Dist: pytest<9.0.0,>=8.4.0; extra == "dev"
Requires-Dist: pytest-mock<4.0.0,>=3.14.0; extra == "dev"
Requires-Dist: pytest-asyncio<1.3.0,>=0.24.0; extra == "dev"
Requires-Dist: pytest-cov<8.0.0,>=5.0.0; extra == "dev"
Requires-Dist: pytest-xdist<4.0.0,>=3.6.1; extra == "dev"
Requires-Dist: pytest-clarity<2.0.0,>=1.0.1; extra == "dev"
Requires-Dist: sphinx<8.0.0,>=7.4.7; extra == "dev"
Requires-Dist: pydata-sphinx-theme<0.17.0,>=0.14.4; extra == "dev"
Requires-Dist: toml<0.11.0,>=0.10.2; extra == "dev"
Requires-Dist: datadog<0.53,>=0.44; extra == "dev"
Requires-Dist: prometheus-client<0.24,>=0.16; extra == "dev"
Requires-Dist: bandit<2.0.0,>=1.7.9; extra == "dev"
Requires-Dist: radon<7.0.0,>=6.0.1; extra == "dev"
Requires-Dist: kubernetes<35.0,>=26.1; extra == "dev"
Requires-Dist: autodoc_pydantic==2.2.0; extra == "dev"
Requires-Dist: uv; extra == "dev"
Requires-Dist: pre-commit<5.0.0,>=3.7.0; extra == "dev"
Provides-Extra: all
Requires-Dist: tracarbon[datadog]; extra == "all"
Requires-Dist: tracarbon[prometheus]; extra == "all"
Requires-Dist: tracarbon[kubernetes]; extra == "all"
Dynamic: license-file

![Tracarbon Logo](https://raw.githubusercontent.com/fvaleye/tracarbon/main/logo.png "Tracarbon logo")

![example workflow](https://github.com/fvaleye/tracarbon/actions/workflows/build.yml/badge.svg)
[![pypi](https://img.shields.io/pypi/v/tracarbon.svg?style=flat-square)](https://pypi.org/project/tracarbon/)
[![doc](https://img.shields.io/badge/docs-python-blue.svg?style=for-the-badge)](https://fvaleye.github.io/tracarbon)
[![licence](https://img.shields.io/badge/license-Apache--2.0-green)](https://github.com/fvaleye/tracarbon/blob/main/LICENSE.txt)

## üìå Overview

Tracarbon is a Python library that tracks your device's energy consumption and calculates your carbon emissions.

It detects your location and your device automatically before starting to export measurements to an exporter.
It could be used as a CLI with already defined metrics or programmatically with the API by defining the metrics that you want to have.

Read more in this [article](https://medium.com/@florian.valeye/tracarbon-track-your-devices-carbon-footprint-fb051fcc9009).

## üì¶ Where to get it

```sh
# Install Tracarbon
pip install tracarbon
```

```sh
# Install one or more exporters from the list
pip install 'tracarbon[datadog,prometheus,kubernetes]'
```

### üîå Devices: energy consumption

| **Devices** |                                                                                                                                                           **Description**                                                                                                                                                            |
| ----------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| Mac         |                                                                                                  ‚úÖ Global energy consumption of your Mac (must be plugged into a wall adapter). Supports Apple Silicon GPU power tracking via `powermetrics` (requires sudo).                                                                                                  |
| Linux       | ‚úÖ Supports Intel and AMD processors via [RAPL](https://web.eece.maine.edu/~vweaver/projects/rapl/). Intel uses the powercap interface. AMD is supported on kernel 5.8+ (powercap) or via the `amd_energy` driver (HWMON). Works with containers on [Kubernetes](https://kubernetes.io/) using the [Metric API](https://kubernetes.io/docs/tasks/debug/debug-cluster/resource-metrics-pipeline/#metrics-api) if available. |
| Windows     |                                                                                                                        ‚ùå Not yet implemented. See [#184](https://github.com/hubblo-org/scaphandre/pull/184).                                                                                                                        |

| **Cloud Provider** |                                                                                              **Description**                                                                                              |
| ------------------ | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| AWS                | ‚úÖ Use the hardware's usage with the EC2 instances carbon emissions datasets of [cloud-carbon-coefficients](https://github.com/cloud-carbon-footprint/ccf-coefficients/blob/main/data/aws-instances.csv). |
| GCP                | ‚úÖ Use the hardware's usage with the GCP instances carbon emissions datasets of [cloud-carbon-coefficients](https://github.com/cloud-carbon-footprint/ccf-coefficients/blob/main/data/gcp-instances.csv). |
| Azure              | ‚úÖ Use the hardware's usage with the Azure instances carbon emissions datasets of [cloud-carbon-coefficients](https://github.com/cloud-carbon-footprint/ccf-coefficients/blob/main/data/azure-instances.csv). |

### üéÆ GPU: power tracking

| **GPU**        |                                                        **Description**                                                         |
| -------------- | :----------------------------------------------------------------------------------------------------------------------------: |
| NVIDIA         | ‚úÖ Supported via `nvidia-smi`. Works on Linux, Windows, and Intel Macs. Supports multiple GPUs.                                 |
| AMD            | ‚úÖ Supported via `rocm-smi` or `amd-smi` on Linux. Supports multiple GPUs.                                                      |
| Apple Silicon  | ‚úÖ Supported via `powermetrics` on Mac (requires sudo). Tracks integrated GPU power on M1/M2/M3/M4 chips.                       |
| Intel          | ‚ùå Not yet implemented.                                                                                                         |

## üì° Exporters

| **Exporter** |          **Description**          |
| ------------ | :-------------------------------: |
| Stdout       |   Print the metrics in Stdout.    |
| JSON         | Write the metrics in a JSON file. |
| Prometheus   |  Send the metrics to Prometheus.  |
| Datadog      |   Send the metrics to Datadog.    |

### üó∫Ô∏è Locations

| **Location** |                                                                              **Description**                                                                               | **Source**                                                                                                                                                    |
| ------------ | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | :------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Worldwide    | Get the latest co2g/kwh in near real-time using the CO2Signal or ElectricityMaps APIs. See [here](http://api.electricitymap.org/v3/zones) for the list of available zones. | [CO2Signal API](https://www.co2signal.com) or [ElectricityMaps](https://static.electricitymaps.com/api/docs/index.html)                                       |
| Europe       |                                 Static file created from the European Environment Agency Emission for the co2g/kwh in European countries.                                  | [EEA website](https://www.eea.europa.eu/en/analysis/maps-and-charts/co2-emission-intensity-15) |
| AWS          |                                                               Static file of the AWS Grid emissions factors.                                                               | [cloud-carbon-coefficients](https://github.com/cloud-carbon-footprint/cloud-carbon-coefficients/blob/main/data/grid-emissions-factors-aws.csv)                |
| GCP          |                                                               Static file of the GCP Grid emissions factors (2024 yearly data).                                                               | [GoogleCloudPlatform/region-carbon-info](https://github.com/GoogleCloudPlatform/region-carbon-info/blob/main/data/yearly/2024.csv)                |
| Azure        |                                                               Static file of the Azure Grid emissions factors.                                                             | [cloud-carbon-coefficients](https://github.com/cloud-carbon-footprint/cloud-carbon-coefficients/blob/main/data/grid-emissions-factors-azure.csv)              |

### ‚öôÔ∏è Configuration

The environment variables can be set from an environment file `.env`.

| **Parameter**                 | **Description**                                                                                                                                                                                                                                                                  |
| ----------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| TRACARBON_CO2SIGNAL_API_KEY   | The api key received from [CO2Signal](https://www.co2signal.com) or [ElectricityMaps](https://static.electricitymaps.com/api/docs/index.html).                                                                                                                                   |
| TRACARBON_CO2SIGNAL_URL       | The url of [CO2Signal](https://docs.co2signal.com/#get-latest-by-country-code) is the default endpoint to retrieve the last known state of the zone, but it could be changed to [ElectricityMaps](https://static.electricitymaps.com/api/docs/index.html#live-carbon-intensity). |
| TRACARBON_METRIC_PREFIX_NAME  | The prefix to use in all the metrics name.                                                                                                                                                                                                                                       |
| TRACARBON_INTERVAL_IN_SECONDS | The interval in seconds to wait between the metrics evaluation.                                                                                                                                                                                                                  |
| TRACARBON_LOG_LEVEL           | The level to use for displaying the logs.                                                                                                                                                                                                                                        |

## üîé Usage

**Request your API key**

- Go to [CO2Signal](https://www.co2signal.com/) and get your free API key for non-commercial use, or go to [ElectricityMaps](https://static.electricitymaps.com/api/docs/index.html) for commercial use.
- This API is used to retrieve the last known carbon intensity (in gCO2eq/kWh) of electricity consumed in your location.
- Set your API key in the environment variables, in the `.env` file or directly in the configuration.
- If you would like to start without an API key, it's possible, the carbon intensity will be loaded statistically from a file.
- Launch Tracarbon üöÄ

**Command Line**

```sh
tracarbon run
```

**API**

```python
from tracarbon import TracarbonBuilder, TracarbonConfiguration

configuration = TracarbonConfiguration() # Your configuration
tracarbon = TracarbonBuilder(configuration=configuration).build()
tracarbon.start()
# Your code
tracarbon.stop()

with tracarbon:
    # Your code

report = tracarbon.report() # Get the report
```

## üíª Development

**Local: using uv**

```sh
make init
make test-unit
```

## üõ°Ô∏è Licence

[Apache License 2.0](https://raw.githubusercontent.com/fvaleye/tracarbon/main/LICENSE.txt)

## üìö Documentation

The documentation is hosted here: https://fvaleye.github.io/tracarbon/documentation
