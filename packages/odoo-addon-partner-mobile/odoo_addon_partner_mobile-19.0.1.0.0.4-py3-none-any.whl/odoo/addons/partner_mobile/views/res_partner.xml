<?xml version="1.0" encoding="utf-8" ?>
<!--
  Copyright 2025 Akretion France (https://www.akretion.com/)
  @author: Alexis de Lattre <alexis.delattre@akretion.com>
  License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
-->
<odoo>
    <record id="view_partner_tree" model="ir.ui.view">
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_tree" />
        <field name="arch" type="xml">
            <field name="phone" position="after">
                <field name="mobile" optional="show" class="o_force_ltr" />
            </field>
        </field>
    </record>

    <record id="view_partner_form" model="ir.ui.view">
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form" />
        <field name="arch" type="xml">
            <xpath expr="/form/sheet//field[@name='phone']/.." position="after">
                <div class="d-flex align-items-baseline w-md-50" name="mobile">
                    <i class="fa fa-fw me-1 fa-mobile text-primary" title="Mobile" />
                    <field
                        name="mobile"
                        class="w-100"
                        widget="phone"
                        placeholder="Mobile"
                    />
                </div>
            </xpath>

            <xpath
                expr="//field[@name='child_ids']/kanban/templates//div[@t-if='record.phone.raw_value']"
                position="after"
            >
                <div t-if="record.mobile.raw_value">
                    <i class="fa fa-fw me-1 fa-mobile text-primary" title="Mobile" />
                    <field name="mobile" />
                </div>
            </xpath>
            <xpath
                expr="//field[@name='child_ids']/form/sheet//field[@name='phone']/.."
                position="after"
            >
                <div class="d-flex align-items-baseline" name="mobile">
                    <i class="fa fa-fw me-1 fa-mobile text-primary" title="Mobile" />
                    <field
                        name="mobile"
                        widget="phone"
                        class="w-100"
                        placeholder="Mobile"
                    />
                </div>
            </xpath>
        </field>
    </record>

    <!--
        No need to inherit the search view of res.partner:
        in the module phone_validation, they already handle the fact
        that <field name="phone"/> will search both on 'phone' and 'mobile' fields
    -->

    <record id="res_partner_kanban_view" model="ir.ui.view">
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.res_partner_kanban_view" />
        <field name="arch" type="xml">
            <div t-if="record.phone.raw_value" position="after">
                <div t-if="record.mobile.raw_value">
                    <i class="fa fa-fw me-1 fa-mobile text-primary" title="Mobile" />
                    <field name="mobile" />
                </div>
            </div>
        </field>
    </record>

    <record id="view_partner_simple_form" model="ir.ui.view">
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_simple_form" />
        <field name="arch" type="xml">
            <field name="phone" position="after">
                <field name="mobile" widget="phone" />
            </field>
        </field>
    </record>
</odoo>
