/*
VibeDark Theme
Vibe-created and edited by Randy Eckman with the help of GitHub Copilot Claude Sonnet 4

DESIGN PHILOSOPHY:
This stylesheet is minimized to work with Qt's palette system. Basic colors (backgrounds,
text, borders) are handled by the palette (see vibedark.py). QSS focuses only on:
- Layout properties (padding, margins, border-radius)
- Interactive states (hover, focus, pressed)
- Special cases that override palette defaults
*/

/*
QSS COLOR OVERRIDES - Colors that override the palette for specific purposes:

INTERACTIVE STATE COLORS:
--bg-hover: #444a5a       (hover states - not provided by palette)
--bg-focus: #232b3a       (focused input backgrounds - special focus styling)
--accent-blue: #1d61a5    (primary accent - buttons, progress, selections)
--accent-light: #2a7ad1   (lighter accent - tree selections, combo highlights)
--accent-muted: #555b6b   (subtle accent - muted elements)

TEXT COLORS:
--text-white: #ffffff     (white text on colored backgrounds)
--text-primary: #f0f0f0   (main text color - explicit override of palette)
--text-contrast: #232323  (dark text on light backgrounds - combo selections)
--text-disabled: #888     (disabled text - overrides palette for consistency)
--text-secondary: #aaa    (secondary text - muted information)

BACKGROUND COLORS:
--bg-primary: #232323       (main background color)
--bg-secondary: #2d2d2d   (alternate backgrounds - disabled states, alternating rows)
--separator-light: #6c7485  (toolbar separators - more visible than standard borders)

BORDER COLORS:
--border-light: #222      (subtle borders - tree views)
--border-default: #444a5a (medium borders - various elements)
--border-focus: #1d61a5   (focused element borders - same as accent-blue)
*/

/*
SPECIAL CASE NOTES:
- QComboBox dropdown uses custom selection styling (cannot inherit palette selection)
- QToolBar::separator uses lighter color for better visibility against dark background
- QToolTip uses white border for maximum contrast
- QTreeView uses custom selection colors for better visibility
- Disabled states use explicit colors for consistency across all widget types
*/

/*
STYLE PATTERNS - Repeated properties that maintain consistency:

BORDER RADIUS PATTERNS:
--radius-small: 2px     (spinbox buttons, splitter handles)
--radius-medium: 4px    (most interactive elements - buttons, inputs, menus)
--radius-large: 6px     (containers, tab widgets, progress bars, group boxes)
--radius-round: 8px     (slider handles, checkbox/radio indicators)

PADDING PATTERNS:
--padding-tight: 2px 8px     (status labels)
--padding-standard: 4px 8px  (input fields, dialog buttons)
--padding-comfortable: 4px 12px (menu bar items, combobox buttons)
--padding-menu-bar: 4px      (menu bar items - compact)
--padding-spacious: 6px 16px  (tabs)
--padding-menu: 6px 6px 6px 12px (menu items - compact with extra left space)
--padding-menu-left: 12px    (menu items - extra left padding for icons)

BORDER WIDTH PATTERNS:
--border-thin: 1px      (standard borders, most UI elements)
--border-focus: 1px   (focused input elements - emphasizes interaction)
--border-thick: 2px     (combobox dropdown items, separator width)

SIZE PATTERNS:
--scrollbar-size: 12px       (both horizontal and vertical scrollbars)
--scrollbar-handle-min: 20px (minimum grab area for usability)
--icon-small: 12x12px        (spinbox arrows)
--icon-medium: 16x16px       (combobox arrows, checkboxes/radios)
--menu-dropdown-min-width: 120px (minimum width for dropdown menus)
--separator-margin-v: 6px 4px  (vertical separator spacing - swapped)
--menu-separator-margin: 4px 0 (menu separators)
--slider-handle-margin: -5px   (handle overlap for proper alignment)

FONT PATTERNS:
--font-weight-bold: bold     (emphasized dropdown items)
--font-size-small: 12px      (tooltips)

VALUE EXCEPTIONS - Non-color values used outside standard patterns:
--zero-margin: 0px              (scrollbar margin reset)
--zero-border: none             (removing default borders, transparent backgrounds)
--transparent: transparent      (removing backgrounds)
--dropdown-width: 24px          (combobox dropdown button width)
--menu-separator-height: 1px    (menu separator line thickness)
--progress-height: 18px         (progress bar standard height)
--checkbox-size: 16px           (checkbox/radio indicator dimensions)
--spinbox-button-width: 18px    (spinbox up/down button width)
--groupbox-title-offset: 16px   (margin-top for groupbox title spacing)
--text-spacing: 8px             (spacing between checkbox/radio and text)
--slider-groove-height: 6px     (horizontal slider groove thickness)
--slider-groove-width: 6px      (vertical slider groove thickness)
--slider-groove-radius: 3px     (slider groove - slightly smaller than medium)
--slider-handle-size: 16px      (slider handle dimensions)
--slider-handle-margin: -5px    (handle overlap for proper alignment)
--icon-size: 16px               (menu icon size override)
--icon-small: 12px              (spinbox arrow dimensions)
--icon-medium: 16px             (combobox arrow dimensions)
--icon-padding: 6px             (menu icon left and right padding)
--center-align: center          (progress bar text alignment)
--subcontrol-margin: margin     (groupbox title positioning)
--subcontrol-top-left: top left (groupbox title anchor point)
--splitter-size: 6px            (splitter handle thickness)
--disabled-global: #888888      (global disabled state - same as text-disabled but explicit)
--tooltip-border: white         (tooltip border - high contrast against dark background)
*/

/*
QSS TECHNICAL LIMITATIONS:
- Cannot use CSS variables, so color values must be repeated throughout
- Cannot create mixins or functions for common property groups
- Pseudo-states (:hover, :focus) cannot inherit from base styles
- Each selector must explicitly define all needed properties
- Palette integration requires careful coordination with Python theme setup
*/

/* BASE WIDGET STYLES - Minimal layout-focused styling that leverages palette colors */

/* Base input field styling - layout only, colors from palette */
QLineEdit, QTextEdit, QPlainTextEdit, QSpinBox, QDoubleSpinBox {
    border: 1px solid #444a5a;  /* --border-default | --border-thin */
    border-radius: 4px;         /* --radius-medium */
    padding: 4px 8px;           /* --padding-standard */
    selection-background-color: #2a82da; /* --accent-blue */
    selection-color: #ffffff;            /* --text-white */
}

/* Base input focus state - special focus styling */
QLineEdit:focus, QTextEdit:focus, QPlainTextEdit:focus,
QSpinBox:focus, QDoubleSpinBox:focus {
    border: 1px solid #1d61a5; /* --border-focus | --border-focus-width */
    background: #232b3a;          /* --bg-focus (special focus color not in palette) */
}

/* Hover/selected item styling - removed global base to prevent conflicts */

/* QToolBar - minimal layout styling */
QToolBar QToolButton {
    border: none;               /* --zero-border */
    icon-size: 16px;            /* --icon-size */
}
QToolBar QToolButton:hover {
    background: #444a5a;        /* --bg-hover (not in palette) */
    border-radius: 4px;         /* --radius-medium */
}
QToolBar QToolButton:pressed {
    background: #1d61a5;        /* --accent-blue (override palette for pressed state) */
}
QToolBar::separator {
    background: #6c7485;        /* --separator-light (more visible than standard border) */
    width: 2px;                 /* --separator-width */
    margin: 4px 6px;            /* --separator-margin-h */
}

QToolBar::separator:vertical {
    height: 2px;                /* --separator-width */
    margin: 6px 4px;            /* --separator-margin-v (swapped from horizontal) */
}

/* QLabel - only special cases need styling */
QLabel#status_label {
    padding: 2px 8px;           /* --padding-tight */
    background: #444a5a;        /* --bg-hover */
    border-radius: 4px;         /* --radius-medium */
}
QLabel#status_label:hover {
    background: #1d61a5;        /* --accent-blue */
}

/* QTreeView - layout and special selection behavior */
QTreeView {
    alternate-background-color: #2d2d2d; /* --bg-secondary */
    selection-background-color: #2a7ad1; /* --accent-light (special tree selection) */
    selection-color: #ffffff;            /* --text-white (override palette) */
    gridline-color: #444a5a;        /* --border-default */
    border: 1px solid #222;         /* --border-light */
}
/* Note: selection colors inherit from base selection styling */
QTreeView::branch:has-children:hover,
QTreeView::branch:has-children:!has-siblings:adjoins-item:hover,
QTreeView::branch:open:hover, QTreeView::branch:closed:hover {
    background: #1d61a5;            /* --accent-blue */
}
/* Fallback: ensure every branch gets a vertical line by default */
/* QTreeView::branch {
    border-image: none;
    image: url(":/vibedark/icons/vline.svg");
} */
/* Branch lines - using background images for proper tree structure */
QTreeView::branch:has-siblings:!adjoins-item {
    border-image: none;         /* --zero-border */
    image: url(":/vibedark/icons/vline.svg");
}
QTreeView::branch:has-siblings:adjoins-item {
    border-image: none;         /* --zero-border */
    image: url(":/vibedark/icons/branch-more.svg");
}
QTreeView::branch:!has-children:!has-siblings:adjoins-item {
    border-image: none;         /* --zero-border */
    image: url(":/vibedark/icons/branch-end.svg");
}

/* Composite cases: a node that has children AND participates in sibling/adjoin layout
   needs a combined icon (line + arrow). These selectors match the common permutations
   and point to composite placeholder images you can later replace with final artwork. */
QTreeView::branch:open:has-children:has-siblings:adjoins-item {
    border-image: none;
    image: url(":/vibedark/icons/branch-open-more.svg");
}
QTreeView::branch:closed:has-children:has-siblings:adjoins-item {
    border-image: none;
    image: url(":/vibedark/icons/branch-closed-more.svg");
}
QTreeView::branch:open:has-children:!has-siblings:adjoins-item {
    border-image: none;
    image: url(":/vibedark/icons/branch-open-end.svg");
}
QTreeView::branch:closed:has-children:!has-siblings:adjoins-item {
    border-image: none;
    image: url(":/vibedark/icons/branch-closed-end.svg");
}

/* Branch icons with background cleared */
QTreeView::branch:open {
    background: transparent;    /* --transparent */
}
QTreeView::branch:closed {
    background: transparent;    /* --transparent */
}
QTreeView::branch:closed:has-children {
    border-image: none;         /* --zero-border */
    image: url(":/vibedark/icons/branch-closed.svg");
}
QTreeView::branch:open:has-children {
    border-image: none;         /* --zero-border */
    image: url(":/vibedark/icons/branch-open.svg");
}
QTreeView::item:selected {
    background: #1d61a5;        /* --accent-blue */
    color: #ffffff;
}
QTreeView::item:hover {
    background: #444a5a;        /* --bg-hover */
    color: #ffffff;
}

/* QHeaderView - minimal layout styling */
QHeaderView::section {
    border: 1px solid #444a5a;  /* --border-default | --border-thin */
    padding: 4px;               /* --padding-standard (simplified, no horizontal) */
}

/* QScrollBar - layout and special colors */
QScrollBar {
    margin: 0px;                /* --zero-margin */
}
QScrollBar:vertical {
    width: 12px;                /* --scrollbar-size */
}
QScrollBar:horizontal {
    height: 12px;               /* --scrollbar-size */
}
QScrollBar::handle {
    background: #444a5a;        /* --bg-hover (not in palette) */
    border-radius: 6px;         /* --radius-large */
}
QScrollBar::handle:vertical {
    min-height: 20px;           /* --scrollbar-handle-min */
}
QScrollBar::handle:horizontal {
    min-width: 20px;            /* --scrollbar-handle-min */
}
QScrollBar::add-line, QScrollBar::sub-line {
    background: none;           /* --zero-border */
    border: none;               /* --zero-border */
}
QScrollBar::add-page, QScrollBar::sub-page {
    background: none;           /* --zero-border */
}

/* QLineEdit */
QLineEdit[readOnly="true"] {
    background: #2d2d2d;        /* --bg-secondary */
    color: #888;                /* --text-disabled */
}
QLineEdit[text=""] {
    color: #888;                /* --text-disabled */
}

/* QTextEdit */
/* Inherits base input styling */

/* QPlainTextEdit */
/* Inherits base input styling */

/* QComboBox - special dropdown behavior requires explicit styling */
/* Note: QComboBox cannot inherit from base input styling because it has
   custom dropdown selection behavior that conflicts with standard selection colors.
   The dropdown uses a two-tone selection system (light blue selected, dark blue hover)
   which would be overridden by the base selection styling. */
QComboBox {
    background: #232323;        /* --bg-primary */
    color: #f0f0f0;             /* --text-primary */
    border: 1px solid #444a5a;  /* --border-default | --border-thin */
    border-radius: 4px;         /* --radius-medium */
    padding: 4px 8px;           /* --padding-standard */
    selection-background-color: #1d61a5; /* --accent-blue */
    selection-color: #fff;                /* --text-white */
}
QComboBox:focus {
    border: 1px solid #1d61a5; /* --border-focus | --border-focus-width */
}
QComboBox QAbstractItemView {
    border: 1px solid #1d61a5;  /* --border-focus | --border-thin */
}
QComboBox QAbstractItemView::item {
    border: none;               /* --zero-border */
    border-radius: 0;           /* special: no radius for dropdown items */
    padding: 4px 12px;          /* --padding-comfortable */
}
QComboBox QAbstractItemView::item:selected {
    background: #2a7ad1;        /* --accent-light */
    border: 2px solid #1d61a5;  /* --border-focus | --border-thick */
    border-radius: 4px;         /* --radius-medium */
    font-weight: bold;          /* --font-weight-bold */
}
QComboBox QAbstractItemView::item:hover {
    background: #1d61a5;        /* --accent-blue */
    border: 2px solid #2a7ad1;  /* --accent-light | --border-thick */
    border-radius: 4px;         /* --radius-medium */
    font-weight: bold;          /* --font-weight-bold */
}
QComboBox::drop-down {
    border-left: 1px solid #444a5a; /* --border-default | --border-thin */
    width: 24px;                /* --dropdown-width */
}
QComboBox::down-arrow {
    image: url(":/vibedark/icons/arrow-down.svg"); /* icon reference - not commented */
    width: 16px;                /* --icon-medium */
    height: 16px;               /* --icon-medium */
}

/* QTabWidget - layout and special selection styling */
QTabWidget::pane {
    border: 1px solid #444a5a;  /* --border-default | --border-thin */
    border-radius: 6px;         /* --radius-large */
}
QTabBar::tab {
    border: 1px solid #444a5a;  /* --border-default | --border-thin */
    border-bottom: none;        /* --zero-border (creates connected tab look) */
    border-top-left-radius: 6px;  /* --radius-large (top corners only) */
    border-top-right-radius: 6px; /* --radius-large (top corners only) */
    padding: 6px 16px;          /* --padding-spacious */
    margin-right: 2px;          /* small spacing between tabs */
}
QTabBar::tab:selected, QTabBar::tab:hover {
    background: #1d61a5;        /* --accent-blue */
    border-color: #1d61a5;      /* --border-focus */
}
QTabBar::tab:!selected {
    color: #aaa;                /* --text-secondary */
}

/* QMenu, QMenuBar - layout and special interaction styling */
QMenuBar {
    background: #232323;        /* --bg-primary (custom menu bar background) */
    color: #f0f0f0;             /* --text-primary (custom menu bar text) */
}
QMenuBar::item {
    padding: 4px;          /* --padding-menu-bar */
}
QMenuBar::item:selected {
    background: #1d61a5;        /* --accent-blue */
    border-radius: 4px;         /* --radius-medium */
}
QMenu {
    border: 1px solid #444a5a;  /* --border-default | --border-thin */
    border-radius: 6px;         /* --radius-large */
    icon-size: 12px;            /* Smaller icon size for compact look */
}
QMenu, QMenu::item {
    min-width: 120px;          /* --menu-dropdown-min-width */
}
QMenu::item {
    padding: 4px;           /* Reduced from 6px for more compact look */
    padding-left: 10px;     /* Slightly reduced left padding */
    padding-right: 10px;    /* Consistent with left */
    border-radius: 4px;     /* --radius-medium */
}
QMenu::icon, QMenu::indicator, QMenu::right-arrow {
    width: 12px;                /* Consistent size for all menu sub-elements */
    height: 12px;
    subcontrol-origin: padding;
    subcontrol-position: center left;
}
QMenu::icon, QMenu::indicator {
    left: 6px;
}
QMenu::right-arrow {
    subcontrol-position: center right;
    right: 6px;
}
QMenu::item:selected {
    background: #1d61a5;        /* --accent-blue */
}
QMenu::item:has-children {
    padding-right: 16px;        /* Make room for right arrow + 4px margin */
}
QMenu::separator {
    height: 1px;                /* --menu-separator-height */
    background: #444a5a;        /* --border-default */
    margin: 4px 0;              /* --menu-separator-margin */
}

/* QStatusBar - minimal layout styling */
QStatusBar {
    background: #232323;        /* --bg-primary (custom status bar background) */
    color: #f0f0f0;             /* --text-primary (custom status bar text) */
    border-top: 1px solid #444a5a; /* --border-default | --border-thin */
}
QStatusBar::item {
    margin: 1px;
    padding: 2px;
    border: 0;
    background: transparent;
}
QStatusBar QLabel {
    margin: 1px;
    padding: 2px;
    border: 0;
    background: transparent;
    border-radius: 4px;
}

/* QGroupBox - layout and title styling */
QGroupBox {
    border: 1px solid #444a5a;  /* --border-default | --border-thin */
    border-radius: 6px;         /* --radius-large */
    margin-top: 16px;           /* --groupbox-title-offset */
}
QGroupBox::title {
    subcontrol-origin: margin;  /* --subcontrol-margin */
    subcontrol-position: top left; /* --subcontrol-top-left */
    padding: 0 8px;             /* vertical zero, horizontal --padding-standard */
    color: #ffffff;             /* --text-white */
}

/* QSlider - layout and special handle styling */
QSlider::groove {
    border: 1px solid #444a5a;  /* --border-default | --border-thin */
    border-radius: 3px;         /* special: slightly smaller than --radius-medium */
}
QSlider::groove:horizontal {
    height: 6px;                /* --slider-groove-height */
}
QSlider::groove:vertical {
    width: 6px;                 /* --slider-groove-width */
}
QSlider::handle {
    background: #1d61a5;        /* --accent-blue */
    border: 1px solid #1d61a5;  /* --border-focus | --border-thin */
    border-radius: 8px;         /* --radius-round */
}
QSlider::handle:horizontal {
    width: 16px;                /* --slider-handle-size */
    margin: -5px 0;             /* --slider-handle-margin (negative overlap) */
}
QSlider::handle:vertical {
    height: 16px;               /* --slider-handle-size */
    margin: 0 -5px;             /* --slider-handle-margin (negative overlap, rotated) */
}

/* QProgressBar - layout and special styling */
QProgressBar {
    border: 1px solid #444a5a;  /* --border-default | --border-thin */
    border-radius: 6px;         /* --radius-large */
    text-align: center;         /* --center-align */
    height: 18px;               /* --progress-height */
}
QProgressBar::chunk {
    background-color: #1d61a5;  /* --accent-blue */
    border-radius: 6px;         /* --radius-large */
}

/* QListView, QTableView - layout and special selection */
QListView, QTableView {
    alternate-background-color: #2d2d2d; /* --bg-secondary */
    border: 1px solid #222;       /* --border-light | --border-thin */
}
QListView::item, QTableView::item {
    border: 1px solid transparent; /* Prevents text shifting on hover */
}
QListView::item:selected, QTableView::item:selected {
    background: #1d61a5;        /* --accent-blue */
    border: 1px solid #1d61a5;  /* Match selection color for consistent sizing */
    color: #ffffff;
}
QListView::item:hover, QTableView::item:hover {
    background: #444a5a;        /* --bg-hover */
    border: 1px solid #444a5a;  /* Match hover color for consistent sizing */
    color: #ffffff;
}

/* QSpinBox, QDoubleSpinBox - special button styling */
/* Inherits base input styling */
QSpinBox::up-button, QSpinBox::down-button,
QDoubleSpinBox::up-button, QDoubleSpinBox::down-button {
    border: 1px solid #444a5a;  /* --border-default | --border-thin */
    width: 18px;                /* --spinbox-button-width */
    border-radius: 2px;         /* --radius-small */
}
QSpinBox::up-button:hover, QSpinBox::down-button:hover,
QDoubleSpinBox::up-button:hover, QDoubleSpinBox::down-button:hover {
    background: #1d61a5;        /* --accent-blue */
}
QSpinBox::up-arrow, QDoubleSpinBox::up-arrow {
    image: url(":/vibedark/icons/arrow-up.svg"); /* icon reference - not commented */
    width: 12px;                /* --icon-small */
    height: 12px;               /* --icon-small */
}
QSpinBox::down-arrow, QDoubleSpinBox::down-arrow {
    image: url(":/vibedark/icons/arrow-down.svg");
}

/* Menu indicators */
QMenu::indicator:non-exclusive:unchecked {
    image: url(":/vibedark/icons/checkbox-unchecked.svg");
}
QMenu::indicator:non-exclusive:checked {
    image: url(":/vibedark/icons/checkbox-checked.svg");
}
QMenu::indicator:exclusive:unchecked {
    image: url(":/vibedark/icons/radio-unchecked.svg");
}
QMenu::indicator:exclusive:checked {
    image: url(":/vibedark/icons/radio-checked.svg");
}

/* QCheckBox, QRadioButton */
QCheckBox, QRadioButton {
    color: #f0f0f0;             /* --text-primary */
    spacing: 8px;               /* --text-spacing */
}
QCheckBox:disabled, QRadioButton:disabled {
    color: #888;                /* --text-disabled */
}
QCheckBox::indicator, QRadioButton::indicator {
    width: 16px;                /* --checkbox-size */
    height: 16px;               /* --checkbox-size */
    border-radius: 8px;         /* --radius-round */
    border: 1px solid #444a5a; /* --border-default | --border-focus-width */
}
QCheckBox::indicator:checked, QRadioButton::indicator:checked {
    background: #1d61a5;        /* --accent-blue */
    border: 1px solid #1d61a5; /* --border-focus | --border-focus-width */
}
QCheckBox::indicator:unchecked, QRadioButton::indicator:unchecked {
    border: 1px solid #444a5a; /* --border-default | --border-focus-width */
}
QCheckBox::indicator:indeterminate {
    background: #444a5a;        /* --bg-hover */
    border: 1px solid #1d61a5; /* --border-focus | --border-focus-width */
}

/* QSplitter */
QSplitter::handle {
    background: #444a5a;        /* --bg-hover */
    border-radius: 2px;         /* --radius-small */
}
QSplitter::handle:horizontal {
    width: 6px;                 /* --splitter-size */
}
QSplitter::handle:vertical {
    height: 6px;                /* --splitter-size */
}
QSplitter::handle:hover {
    background: #555b6b;        /* --accent-muted */
}

/* QToolTip */
QToolTip {
    color: #ffffff;             /* --text-white */
    background-color: #444a5a;  /* --bg-hover */
    border: 1px solid white;    /* --tooltip-border (high contrast) | --border-thin */
    border-radius: 4px;         /* --radius-medium */
    /* padding: 4px 8px; */     /* --padding-standard (commented out for default) */
    font-size: 12px;            /* --font-size-small */
}

/* Disabled state for all widgets */
*:disabled {
    color: #888888;             /* --disabled-global (same as --text-disabled) */
    background: #2d2d2d;        /* --bg-secondary */
    border-color: #444a5a;      /* --border-default */
}
