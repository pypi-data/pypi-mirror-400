import{_ as Te}from"./CNTYtJs2.js";import{_ as Ue}from"./BoDFvG8T.js";import{R as De,h as ve,c as u,o as s,y as k,g as e,N as Ee,x as Ge,e as qe,a8 as Me,u as Ne,S as Ve,G as Be,k as P,E as $,H as te,f as E,W as Fe,b as r,a as i,I as p,d as f,t as d,J as R,K as T,v as c,w as l,O as G,L as v,a2 as je,Q as U,D as He}from"./dgvVcRbD.js";import{_ as se,a as oe}from"./Dq8znpD1.js";import{_ as ae,a as re}from"./Bksp2Q9Y.js";import{_ as le,a as ie}from"./DXS-54NY.js";import{_ as ne}from"./Bsc0CIfh.js";import{_ as de}from"./Ds87O63J.js";import{_ as Ie}from"./DX3tX3Y8.js";import{u as Oe}from"./CKMor2ew.js";import{u as ce}from"./BtWIKuWo.js";import{a as ue}from"./uuASzBh0.js";import{a as q,P as me}from"./BXMn9_va.js";import{S as We}from"./D8ey85JT.js";import{P as Ke}from"./BLJJlJXh.js";import{C as Qe}from"./BxLYNdF4.js";import{U as Je}from"./BIMr8OGX.js";import{C as Xe}from"./Cuh_dt_A.js";import{S as M}from"./Dx5eJfeI.js";import{S as pe}from"./B1N1Egs6.js";import{C as fe}from"./DjY5_9nl.js";import{D as Ye}from"./ClvrI8Td.js";import"./Si7f0Dtd.js";import"./DfwZZ1UW.js";import"./Dc4I8EvL.js";import"./CVKV6eJo.js";import"./BOr0jPkT.js";import"./PjxHOgst.js";import"./D6j-iADt.js";import"./wWRSdjR0.js";import"./PBSS8bwl.js";import"./C7c-EcZg.js";import"./CDwYDXMA.js";import"./BnobUxhI.js";import"./COpoDM1M.js";import"./asafqq8u.js";import"./DssDgHgj.js";import"./Cs0iAjED.js";import"./Bw0uuBPj.js";import"./XTzszJDu.js";import"./Dlg-EP8N.js";import"./DBAxjluF.js";const Ze=De("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),he=ve({__name:"CardFooter",props:{class:{}},setup(N){const g=N;return(b,m)=>(s(),u("div",{"data-slot":"card-footer",class:k(e(Ee)("flex items-center px-6 [.border-t]:pt-6",g.class))},[Ge(b.$slots,"default")],2))}}),et={class:"absolute inset-0 flex flex-col overflow-hidden rounded-[inherit]"},tt={class:"mx-auto flex w-full max-w-[1600px] flex-1 flex-col overflow-y-auto px-4 py-6"},st={key:0,class:"bg-muted/20 border-border/50 mb-8 flex-shrink-0 rounded-2xl border p-6"},ot={class:"text-primary mb-4 flex items-center gap-2 text-lg font-semibold"},at={class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},rt={class:"flex min-w-0 items-center gap-3"},lt={class:"flex min-w-0 flex-col"},it=["href","onClick"],nt={key:1},dt={key:0,class:"text-muted-foreground mt-1 flex items-center gap-1 truncate text-xs"},ct={key:0,class:"mb-4 flex flex-wrap gap-1"},ut={class:"text-muted-foreground line-clamp-3 text-sm"},mt={class:"mb-4 flex-shrink-0 space-y-6"},pt={class:"flex flex-col justify-between gap-4 md:flex-row md:items-center"},ft={class:"text-2xl font-bold"},ht={class:"flex w-full items-center gap-2 md:w-auto"},vt={class:"relative w-full max-w-sm"},gt={class:"group relative"},_t={key:0,class:"from-background via-background absolute top-0 bottom-2 left-0 z-10 flex items-center bg-gradient-to-r to-transparent pr-6"},xt={key:1,class:"from-background via-background absolute top-0 right-0 bottom-2 z-10 flex items-center bg-gradient-to-l to-transparent pl-6"},bt={class:"pr-2 pb-4"},yt={key:0,class:"flex justify-center py-12"},wt={key:1,class:"py-12 text-center"},kt={class:"text-destructive mb-4"},Ct={key:2,class:"py-12 text-center"},$t={class:"mb-2 text-lg font-semibold"},At={class:"text-muted-foreground"},Lt={key:3,class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},St={class:"flex min-w-0 items-center gap-3"},zt={class:"flex min-w-0 flex-col"},Pt=["href","onClick"],Rt={key:1},Tt={key:0,class:"text-muted-foreground mt-1 flex items-center gap-1 truncate text-xs"},Ut={key:0,class:"mb-4 flex flex-wrap gap-1"},Dt={class:"text-muted-foreground line-clamp-3 text-sm"},$s=ve({__name:"index",async setup(N){let g,b;const{t:m}=qe(),V=Me().origin;Ne({title:m("pageTitle.assistants")});const{isMobile:Gt}=Oe(),ge=Ve(),_e=Be(),h=P(()=>ge.currentUser),B=$(!0);te(async()=>{const a=(await _e.getConfig()).allow_user_create_assistants;B.value=String(a).toLowerCase()!=="false"});const xe=P(()=>!!(h.value?.is_superuser&&B.value)),_=$(void 0),y=$(void 0),A=$(""),be=[{value:"GENERAL",label:"General",icon:M},{value:"RAG",label:"RAG",icon:Ye}],ye=P(()=>{const o={sort_by:"usage_count",order:"desc"};return _.value&&(o.mode=_.value),y.value&&(o.scope=y.value),A.value&&(o.search=A.value),o}),{data:L,pending:we,error:ke,refresh:F}=([g,b]=E(()=>ce("/v1/assistants",{query:ye})),g=await g,b(),g),{data:D,refresh:j}=([g,b]=E(()=>ce("/v1/assistants",{query:{scope:"pinned",limit:100},immediate:!1})),g=await g,b(),g);h.value&&([g,b]=E(()=>j()),await g,b());const Ce=P(()=>L.value??[]),$e=P(()=>D.value??[]),Ae=ue(Ce),H=ue($e),Le={chat:"assistants.capabilities.chat",completion:"assistants.capabilities.completion",embedding:"assistants.capabilities.embedding",vision:"assistants.capabilities.vision",audio:"assistants.capabilities.audio",function_calling:"assistants.capabilities.function_calling",tool_use:"assistants.capabilities.tool_use",code:"assistants.capabilities.code",image_generation:"assistants.capabilities.image_generation"},Se={chat:"bg-stone-100 text-stone-800 border-stone-200",completion:"bg-amber-50 text-amber-700 border-amber-200",embedding:"bg-yellow-50 text-yellow-700 border-yellow-200",vision:"bg-orange-100 text-orange-900 border-orange-300",audio:"bg-amber-200 text-amber-900 border-amber-300",function_calling:"bg-orange-100 text-orange-800 border-orange-200",tool_use:"bg-amber-100 text-amber-800 border-amber-200",code:"bg-yellow-100 text-yellow-800 border-yellow-200",image_generation:"bg-emerald-50 text-emerald-800 border-emerald-200"},I=o=>{const a=Le[o];return a?m(a):o},O=o=>Se[o]||"bg-orange-50 text-orange-700 border-orange-200",W=async(o,a)=>{a.stopPropagation(),await G(`/assistants/${o.id}/edit`)},K=async(o,a)=>{a.stopPropagation(),await G(`/assistants/create?source_id=${o.id}`)},Q=async(o,a)=>{if(a.stopPropagation(),!h.value){U.error(m("auth.loginRequired"));return}const{$api:w}=He(),x=o.is_pinned,t=(n,z,Pe)=>{if(!n.value)return;const ee=n.value.find(Re=>Re.id===z);ee&&(ee.is_pinned=Pe)};t(L,o.id,!x),t(D,o.id,!x);try{x?(await w(`/v1/assistants/${o.id}/pin`,{method:"DELETE"}),U.success(m("assistants.unpinned"))):(await w(`/v1/assistants/${o.id}/pin`,{method:"POST"}),U.success(m("assistants.pinned"))),j(),y.value==="pinned"&&x&&F()}catch{U.error(m("common.error")),t(L,o.id,x),t(D,o.id,x)}},J=o=>{_.value=o,y.value=void 0},ze=o=>{y.value=o,_.value=void 0},C=$(null),X=$(!1),Y=$(!1),S=()=>{if(!C.value)return;const{scrollLeft:o,scrollWidth:a,clientWidth:w}=C.value;X.value=o>0,Y.value=Math.ceil(o+w)<a},Z=o=>{if(!C.value)return;const a=300,w=o==="left"?C.value.scrollLeft-a:C.value.scrollLeft+a;C.value.scrollTo({left:w,behavior:"smooth"})};return te(()=>{S(),setTimeout(S,100),window.addEventListener("resize",S)}),Fe(()=>{window.removeEventListener("resize",S)}),(o,a)=>{const w=Te,x=Ue;return s(),u("div",et,[r(w),i("div",tt,[!_.value&&!y.value&&!A.value&&e(H).length>0?(s(),u("div",st,[i("h2",ot,[r(e(q),{class:"h-4 w-4"}),f(" "+d(e(m)("assistants.pinned")),1)]),i("div",at,[(s(!0),u(R,null,T(e(H),t=>(s(),c(e(oe),{key:t.id,class:k(["group bg-background relative cursor-pointer transition-all hover:scale-[1.02] hover:shadow-md",t.status==="DRAFT"?"cursor-not-allowed opacity-60":""])},{default:l(()=>[r(e(ae),null,{default:l(()=>[i("div",rt,[r(e(le),{class:"size-10 flex-shrink-0"},{default:l(()=>[t.avatar_url?(s(),c(e(ie),{key:0,src:t.avatar_url,alt:t.name},null,8,["src","alt"])):p("",!0),r(e(ne),null,{default:l(()=>[f(d(t.name.charAt(0).toUpperCase()),1)]),_:2},1024)]),_:2},1024),i("div",lt,[r(e(re),{class:"truncate text-base leading-tight font-medium"},{default:l(()=>[t.status!=="DRAFT"?(s(),c(x,{key:0,to:`/chatwith/${t.id}`,custom:""},{default:l(({href:n,navigate:z})=>[i("a",{href:`${e(V)}${n}`,onClick:z,class:"focus:outline-none"},[a[6]||(a[6]=i("span",{class:"absolute inset-0","aria-hidden":"true"},null,-1)),f(" "+d(t.name),1)],8,it)]),_:2},1032,["to"])):(s(),u("span",nt,d(t.name),1))]),_:2},1024),t.model?(s(),u("div",dt,[r(e(M),{class:"h-3 w-3 opacity-70"}),f(" "+d(t.model.name),1)])):p("",!0)])])]),_:2},1024),r(e(se),null,{default:l(()=>[t.model?.capabilities?.length?(s(),u("div",ct,[(s(!0),u(R,null,T(t.model.capabilities,n=>(s(),c(e(de),{key:n,variant:"outline",class:k(["h-5 px-1 py-0 text-[10px]",O(n)])},{default:l(()=>[f(d(I(n)),1)]),_:2},1032,["class"]))),128))])):p("",!0),i("p",ut,d(t.description),1)]),_:2},1024),r(e(he),{class:"relative z-10 flex justify-start gap-1 px-6 pt-0 pb-4"},{default:l(()=>[h.value?(s(),c(e(v),{key:0,variant:"ghost",size:"icon",class:"text-muted-foreground hover:text-primary h-8 w-8",onClick:n=>Q(t,n),title:t.is_pinned?e(m)("assistants.unpin"):e(m)("assistants.pin")},{default:l(()=>[t.is_pinned?(s(),c(e(me),{key:0,class:"h-4 w-4 fill-current"})):(s(),c(e(q),{key:1,class:"h-4 w-4"}))]),_:2},1032,["onClick","title"])):p("",!0),h.value&&t.owner_id===h.value.id?(s(),c(e(v),{key:1,variant:"ghost",size:"icon",class:"text-muted-foreground hover:text-primary h-8 w-8",onClick:n=>W(t,n)},{default:l(()=>[r(e(pe),{class:"h-4 w-4"})]),_:1},8,["onClick"])):p("",!0),h.value&&t.owner_id!==h.value.id?(s(),c(e(v),{key:2,variant:"ghost",size:"icon",class:"text-muted-foreground hover:text-primary h-8 w-8",onClick:n=>K(t,n),title:e(m)("assistants.copy")},{default:l(()=>[r(e(fe),{class:"h-4 w-4"})]),_:1},8,["onClick","title"])):p("",!0)]),_:2},1024)]),_:2},1032,["class"]))),128))])])):p("",!0),i("div",mt,[i("div",pt,[i("h1",ft,d(_.value?_.value==="RAG"?"RAG":"General":"All Assistants"),1),i("div",ht,[i("div",vt,[r(e(We),{class:"text-muted-foreground absolute top-2.5 left-2 h-4 w-4"}),r(e(Ie),{modelValue:A.value,"onUpdate:modelValue":a[0]||(a[0]=t=>A.value=t),placeholder:o.$t("assistants.searchPlaceholder"),class:"pl-8"},null,8,["modelValue","placeholder"])]),xe.value?(s(),c(e(v),{key:0,onClick:a[1]||(a[1]=t=>("navigateTo"in o?o.navigateTo:e(G))("/assistants/create"))},{default:l(()=>[r(e(Ke),{class:"mr-2 h-4 w-4"}),f(" "+d(e(m)("assistants.create")),1)]),_:1})):p("",!0)])]),i("div",gt,[X.value?(s(),u("div",_t,[r(e(v),{variant:"outline",size:"icon",class:"h-8 w-8 rounded-full shadow-sm",onClick:a[2]||(a[2]=t=>Z("left"))},{default:l(()=>[r(e(Qe),{class:"h-4 w-4"})]),_:1})])):p("",!0),i("div",{ref_key:"scrollContainer",ref:C,class:"flex w-full max-w-full items-center gap-2 overflow-x-auto scroll-smooth pb-2 [-ms-overflow-style:'none'] [scrollbar-width:'none'] [&::-webkit-scrollbar]:hidden",onScroll:S},[r(e(v),{variant:"ghost",class:k(["h-9 flex-shrink-0 rounded-full px-4 transition-all",!_.value&&!y.value?"bg-primary text-primary-foreground hover:bg-primary/90 hover:text-primary-foreground":"bg-muted/50 text-muted-foreground hover:bg-muted hover:text-foreground"]),onClick:a[3]||(a[3]=t=>J(void 0))},{default:l(()=>[r(e(Ze),{class:"mr-2 h-4 w-4"}),a[7]||(a[7]=f(" All ",-1))]),_:1},8,["class"]),r(e(v),{variant:"ghost",class:k(["h-9 flex-shrink-0 rounded-full px-4 transition-all",y.value==="mine"?"bg-primary text-primary-foreground hover:bg-primary/90 hover:text-primary-foreground":"bg-muted/50 text-muted-foreground hover:bg-muted hover:text-foreground"]),onClick:a[4]||(a[4]=t=>ze("mine"))},{default:l(()=>[r(e(Je),{class:"mr-2 h-4 w-4"}),f(" "+d(e(m)("assistants.myAssistants")),1)]),_:1},8,["class"]),(s(),u(R,null,T(be,t=>r(e(v),{key:t.value,variant:"ghost",class:k(["h-9 flex-shrink-0 rounded-full px-4 transition-all",_.value===t.value?"bg-primary text-primary-foreground hover:bg-primary/90 hover:text-primary-foreground":"bg-muted/50 text-muted-foreground hover:bg-muted hover:text-foreground"]),onClick:n=>J(t.value)},{default:l(()=>[(s(),c(je(t.icon),{class:"mr-2 h-4 w-4"})),f(" "+d(t.label),1)]),_:2},1032,["class","onClick"])),64))],544),Y.value?(s(),u("div",xt,[r(e(v),{variant:"outline",size:"icon",class:"h-8 w-8 rounded-full shadow-sm",onClick:a[5]||(a[5]=t=>Z("right"))},{default:l(()=>[r(e(Xe),{class:"h-4 w-4"})]),_:1})])):p("",!0)])]),i("div",bt,[e(we)?(s(),u("div",yt,[...a[8]||(a[8]=[i("div",{class:"border-primary h-8 w-8 animate-spin rounded-full border-b-2"},null,-1)])])):e(ke)?(s(),u("div",wt,[i("p",kt,d(o.$t("assistants.failedToLoad")),1),r(e(v),{onClick:e(F),variant:"outline"},{default:l(()=>[f(d(o.$t("assistants.tryAgain")),1)]),_:1},8,["onClick"])])):!e(L)||e(L).length===0?(s(),u("div",Ct,[a[9]||(a[9]=i("div",{class:"mb-4"},[i("svg",{class:"text-muted-foreground mx-auto h-16 w-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),i("h3",$t,d(o.$t("assistants.noAssistants")),1),i("p",At,d(o.$t("assistants.noAssistantsDescription")),1)])):(s(),u("div",Lt,[(s(!0),u(R,null,T(e(Ae),t=>(s(),c(e(oe),{key:t.id,class:k(["group relative cursor-pointer transition-all hover:scale-[1.02] hover:shadow-md",t.status==="DRAFT"?"cursor-not-allowed opacity-60":""])},{default:l(()=>[r(e(ae),null,{default:l(()=>[i("div",St,[r(e(le),{class:"size-10 flex-shrink-0"},{default:l(()=>[t.avatar_url?(s(),c(e(ie),{key:0,src:t.avatar_url,alt:t.name},null,8,["src","alt"])):p("",!0),r(e(ne),null,{default:l(()=>[f(d(t.name.charAt(0).toUpperCase()),1)]),_:2},1024)]),_:2},1024),i("div",zt,[r(e(re),{class:"truncate text-base leading-tight font-medium"},{default:l(()=>[t.status!=="DRAFT"?(s(),c(x,{key:0,to:`/chatwith/${t.id}`,custom:""},{default:l(({href:n,navigate:z})=>[i("a",{href:`${e(V)}${n}`,onClick:z,class:"focus:outline-none"},[a[10]||(a[10]=i("span",{class:"absolute inset-0","aria-hidden":"true"},null,-1)),f(" "+d(t.name),1)],8,Pt)]),_:2},1032,["to"])):(s(),u("span",Rt,d(t.name),1))]),_:2},1024),t.model?(s(),u("div",Tt,[r(e(M),{class:"h-3 w-3 opacity-70"}),f(" "+d(t.model.name),1)])):p("",!0)])])]),_:2},1024),r(e(se),null,{default:l(()=>[t.model?.capabilities?.length?(s(),u("div",Ut,[(s(!0),u(R,null,T(t.model.capabilities,n=>(s(),c(e(de),{key:n,variant:"outline",class:k(["h-5 px-1 py-0 text-[10px]",O(n)])},{default:l(()=>[f(d(I(n)),1)]),_:2},1032,["class"]))),128))])):p("",!0),i("p",Dt,d(t.description),1)]),_:2},1024),r(e(he),{class:"relative z-10 flex justify-start gap-1 px-6 pt-0 pb-4"},{default:l(()=>[h.value?(s(),c(e(v),{key:0,variant:"ghost",size:"icon",class:"text-muted-foreground hover:text-primary h-8 w-8",onClick:n=>Q(t,n),title:t.is_pinned?e(m)("assistants.unpin"):e(m)("assistants.pin")},{default:l(()=>[t.is_pinned?(s(),c(e(me),{key:0,class:"h-4 w-4 fill-current"})):(s(),c(e(q),{key:1,class:"h-4 w-4"}))]),_:2},1032,["onClick","title"])):p("",!0),h.value&&t.owner_id===h.value.id?(s(),c(e(v),{key:1,variant:"ghost",size:"icon",class:"text-muted-foreground hover:text-primary h-8 w-8",onClick:n=>W(t,n)},{default:l(()=>[r(e(pe),{class:"h-4 w-4"})]),_:1},8,["onClick"])):p("",!0),h.value&&t.owner_id!==h.value.id?(s(),c(e(v),{key:2,variant:"ghost",size:"icon",class:"text-muted-foreground hover:text-primary h-8 w-8",onClick:n=>K(t,n),title:e(m)("assistants.copy")},{default:l(()=>[r(e(fe),{class:"h-4 w-4"})]),_:1},8,["onClick","title"])):p("",!0)]),_:2},1024)]),_:2},1032,["class"]))),128))]))])])])}}});export{$s as default};
