import{j as o,a7 as g,aX as h,aY as S,r as v,B as M,aL as D,a1 as j,q as y}from"./index-4cf586ed.js";import{u as C,T as w,D as I,S as z,L as T}from"./UseMouseModeInteraction-9b6c111c.js";import{u as b}from"./colormap-0981f7dc.js";import{u as A,a as L,b as R,D as F}from"./DropdownDetector-705d3a9d.js";import{I as H,A as P}from"./AutoscaleOption-e2ee098d.js";import{H as N}from"./HistogramDomainSlider-9c6d3e2d.js";import{p as q}from"./geometry-252a228f.js";import{L as V}from"./Label-7daca8b6.js";import{V as Y}from"./VSegment-5d77576e.js";import"./index-19c84627.js";import"./hooks-e7539055.js";import"./Image-c1578ac2.js";import"./colors-5bf0897d.js";function k(s){const{domain:a}=s,{displayArray:i,detectorSize:e}=s.detectorArray;return o.jsx(H,{values:i,domain:a,colorMap:s.lut,invertColorMap:s.isColorMapInverted,scaleType:s.scale,position:[e.width*.5,e.height*.5,0],scale:[1,1,1],size:e})}function O(s){var d,u,p;const{tomoHardware:a,detectorArray:i}=s,e=(u=(d=i.imagePixelSize)==null?void 0:d.to("mm"))==null?void 0:u.scalar,r=a.sy?q(a.sy):null;if(r===null||e===void 0)return o.jsx(o.Fragment,{});const c=i.detectorSize.width,{sampleStage:l}=a,x=((p=l==null?void 0:l.properties.detector_center)==null?void 0:p[0])??0,t=i.detectorSize.height,n=c*.5+r/e-x,m=new g(n,t*.75),f=t/50;return o.jsxs(o.Fragment,{children:[o.jsx(Y,{x:n,y1:t,y2:t*.75,color:"red",gapColor:"white",dashSize:f,gapSize:f,lineWidth:2}),o.jsx(V,{datapos:[m.x,m.y],color:"#FF0000",text:"Theorical rotation axis"})]})}D("daiquiri.components.tomo.detector.Default");function W(s){const{options:a}=s,{tomoconfig:i}=a,e=A(),r=h(i??""),c=S(r),l=L({sampleStage:c}),t=R({detector:l,sampleStage:c,profile:e.profile,normalization:e.scaleType,autoscale:e.autoscale,autoscaleMode:e.autoscaleMode,domain:e.scaleDomain,enabled:!0,minRefreshPeriod:.5}).data,n=v.useRef(null),m=C("zoom"),{mouseMode:f}=m,d=(t==null?void 0:t.detectorSize)??{width:0,height:0},u=t==null?void 0:t.statistics;return b({statistics:t==null?void 0:t.statistics,...e}),o.jsxs("div",{className:"plot2d-container w-100 h-100",style:{flex:"1 1 0%",display:"flex",flexDirection:"column"},children:[o.jsxs(w,{align:"center",children:[o.jsx(I,{mouseModeInteraction:m}),o.jsx(M,{title:"Reset zoom (sample stage overview)",variant:"secondary",onClick:()=>{var p;(p=n==null?void 0:n.current)==null||p.actions.resetZoom()},children:o.jsx("i",{className:"fa fa-expand fa-fw fa-lg"})}),o.jsx(z,{}),o.jsx(F,{showDisplayed:!1,variant:"secondary",isInverted:e.invertColorMap,onSelectInvertion:e.setInvertColorMap,isDisplayed:!0,onSelectDisplayed:()=>{},lut:e.colorMap,onSelectLut:e.setColorMap,norm:e.scaleType,onSelectNorm:e.setScaleType,autoscale:e.autoscale,onSelectAutoscale:e.setAutoscale,autoscaleMode:e.autoscaleMode,onSelectAutoscaleMode:e.setAutoscaleMode,profile:e.profile,onSelectProfile:e.setProfile,array:t}),o.jsx(P,{disabled:u===void 0,...e}),o.jsx(N,{disabled:u===void 0,statistics:t==null?void 0:t.statistics,...e})]}),o.jsx("div",{style:{flex:"1 1 auto",display:"flex",margin:0,minHeight:0},children:o.jsx(T,{plotRef:n,abscissaConfig:{visDomain:[0,d.width],label:"px"},ordinateConfig:{visDomain:[0,d.height],label:"px",flip:!0},mouseMode:f,aspect:"equal",children:t&&o.jsxs(o.Fragment,{children:[o.jsx(k,{detectorArray:t,lut:e.colorMap,isColorMapInverted:e.invertColorMap,scale:e.scaleType,domain:e.scaleDomain}),o.jsx(O,{tomoHardware:c,detectorArray:t})]})})})]})}function B(s){return o.jsx(W,{...s})}function se(s){const{yamlNode:a,tomoconfig:i,...e}=s;j(a,"tomoconfig",i),y(a,e);const r={tomoconfig:i};return o.jsx(B,{options:r})}export{se as default};
