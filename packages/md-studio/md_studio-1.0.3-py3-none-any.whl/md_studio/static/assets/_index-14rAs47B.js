import{j as e,r as n}from"./jsx-runtime-BiXka7E7.js";import{c as W,a as U,d as Pt,e as Oe,f as kt,g as Me,h as re,P as K,i as z,j as le,k as It,l as Tt,m as _t,n as Rt,R as Mt,F as Dt,D as At,u as Lt,w as Y,t as Q,B as Z}from"./index-BwWm0JV9.js";import{a as zt,I as Ot,F as Ve}from"./ImportButton-BcqHX3kq.js";import{u as Vt,g as Bt,f as Ft,B as $t,D as Ht,b as Ut,E as Wt,d as Kt,e as Ee}from"./date-utils-CPa5qVN4.js";import{r as Ue,t as Gt,w as We,x as Yt,y as Pe,L as ye}from"./components-CZmywKMH.js";import{c as Ke,R as Zt,A as qt,C as Xt,a as Jt}from"./index-CkllyZqd.js";import{V as Qt}from"./index-DsP7OPKi.js";import{L as es}from"./loader-circle-BRNhzI2j.js";import{N as ts}from"./not-found-page-FnOw7Rim.js";import"./slug-DE7USKAG.js";/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],ns=W("box",ss);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],rs=W("check",os);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ge=W("chevron-down",as);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],is=W("chevron-up",ls);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ds=W("eye",cs);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=[["path",{d:"M11.35 22H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v5.35",key:"17jvcc"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M14 19h6",key:"bvotb8"}],["path",{d:"M17 16v6",key:"18yu1i"}]],Ye=W("file-plus-corner",us);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Be=W("globe",ps);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],ms=W("keyboard",fs);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],xs=W("link-2",hs);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Fe=W("lock",gs);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ws=W("search",vs);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ss=W("square-pen",ys);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],$e=W("trash-2",bs);function Ze({className:t,...s}){return e.jsx("div",{"data-slot":"card",className:U("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function qe({className:t,...s}){return e.jsx("div",{"data-slot":"card-header",className:U("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function js({className:t,...s}){return e.jsx("div",{"data-slot":"card-title",className:U("leading-none font-semibold",t),...s})}function Ns({className:t,...s}){return e.jsx("div",{"data-slot":"card-description",className:U("text-muted-foreground text-sm",t),...s})}function Xe({className:t,...s}){return e.jsx("div",{"data-slot":"card-content",className:U("px-6",t),...s})}function Je({className:t,...s}){return e.jsx("div",{"data-slot":"card-footer",className:U("flex items-center px-6 [.border-t]:pt-6",t),...s})}function He(t,[s,o]){return Math.min(o,Math.max(s,t))}function Cs(t){const s=Es(t),o=n.forwardRef((r,l)=>{const{children:u,...c}=r,i=n.Children.toArray(u),d=i.find(ks);if(d){const m=d.props.children,j=i.map(S=>S===d?n.Children.count(m)>1?n.Children.only(null):n.isValidElement(m)?m.props.children:null:S);return e.jsx(s,{...c,ref:l,children:n.isValidElement(m)?n.cloneElement(m,void 0,j):null})}return e.jsx(s,{...c,ref:l,children:u})});return o.displayName=`${t}.Slot`,o}function Es(t){const s=n.forwardRef((o,r)=>{const{children:l,...u}=o;if(n.isValidElement(l)){const c=Ts(l),i=Is(u,l.props);return l.type!==n.Fragment&&(i.ref=r?Pt(r,c):c),n.cloneElement(l,i)}return n.Children.count(l)>1?n.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var Ps=Symbol("radix.slottable");function ks(t){return n.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Ps}function Is(t,s){const o={...s};for(const r in s){const l=t[r],u=s[r];/^on[A-Z]/.test(r)?l&&u?o[r]=(...i)=>{const d=u(...i);return l(...i),d}:l&&(o[r]=l):r==="style"?o[r]={...l,...u}:r==="className"&&(o[r]=[l,u].filter(Boolean).join(" "))}return{...t,...o}}function Ts(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,o=s&&"isReactWarning"in s&&s.isReactWarning;return o?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,o=s&&"isReactWarning"in s&&s.isReactWarning,o?t.props.ref:t.props.ref||t.ref)}function _s(t){const s=n.useRef({value:t,previous:t});return n.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var Rs=[" ","Enter","ArrowUp","ArrowDown"],Ms=[" ","Enter"],ue="Select",[je,Ne,Ds]=Bt(ue),[he]=kt(ue,[Ds,Ke]),Ce=Ke(),[As,ie]=he(ue),[Ls,zs]=he(ue),Qe=t=>{const{__scopeSelect:s,children:o,open:r,defaultOpen:l,onOpenChange:u,value:c,defaultValue:i,onValueChange:d,dir:m,name:j,autoComplete:S,disabled:T,required:v,form:E}=t,h=Ce(s),[g,b]=n.useState(null),[p,y]=n.useState(null),[_,N]=n.useState(!1),R=Vt(m),[L,$]=Oe({prop:r,defaultProp:l??!1,onChange:u,caller:ue}),[te,se]=Oe({prop:c,defaultProp:i,onChange:d,caller:ue}),M=n.useRef(null),O=g?E||!!g.closest("form"):!0,[q,G]=n.useState(new Set),H=Array.from(q).map(D=>D.props.value).join(";");return e.jsx(Zt,{...h,children:e.jsxs(As,{required:v,scope:s,trigger:g,onTriggerChange:b,valueNode:p,onValueNodeChange:y,valueNodeHasChildren:_,onValueNodeHasChildrenChange:N,contentId:Me(),value:te,onValueChange:se,open:L,onOpenChange:$,dir:R,triggerPointerDownPosRef:M,disabled:T,children:[e.jsx(je.Provider,{scope:s,children:e.jsx(Ls,{scope:t.__scopeSelect,onNativeOptionAdd:n.useCallback(D=>{G(B=>new Set(B).add(D))},[]),onNativeOptionRemove:n.useCallback(D=>{G(B=>{const V=new Set(B);return V.delete(D),V})},[]),children:o})}),O?e.jsxs(St,{"aria-hidden":!0,required:v,tabIndex:-1,name:j,autoComplete:S,value:te,onChange:D=>se(D.target.value),disabled:T,form:E,children:[te===void 0?e.jsx("option",{value:""}):null,Array.from(q)]},H):null]})})};Qe.displayName=ue;var et="SelectTrigger",tt=n.forwardRef((t,s)=>{const{__scopeSelect:o,disabled:r=!1,...l}=t,u=Ce(o),c=ie(et,o),i=c.disabled||r,d=re(s,c.onTriggerChange),m=Ne(o),j=n.useRef("touch"),[S,T,v]=jt(h=>{const g=m().filter(y=>!y.disabled),b=g.find(y=>y.value===c.value),p=Nt(g,h,b);p!==void 0&&c.onValueChange(p.value)}),E=h=>{i||(c.onOpenChange(!0),v()),h&&(c.triggerPointerDownPosRef.current={x:Math.round(h.pageX),y:Math.round(h.pageY)})};return e.jsx(qt,{asChild:!0,...u,children:e.jsx(K.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":bt(c.value)?"":void 0,...l,ref:d,onClick:z(l.onClick,h=>{h.currentTarget.focus(),j.current!=="mouse"&&E(h)}),onPointerDown:z(l.onPointerDown,h=>{j.current=h.pointerType;const g=h.target;g.hasPointerCapture(h.pointerId)&&g.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&h.pointerType==="mouse"&&(E(h),h.preventDefault())}),onKeyDown:z(l.onKeyDown,h=>{const g=S.current!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&T(h.key),!(g&&h.key===" ")&&Rs.includes(h.key)&&(E(),h.preventDefault())})})})});tt.displayName=et;var st="SelectValue",nt=n.forwardRef((t,s)=>{const{__scopeSelect:o,className:r,style:l,children:u,placeholder:c="",...i}=t,d=ie(st,o),{onValueNodeHasChildrenChange:m}=d,j=u!==void 0,S=re(s,d.onValueNodeChange);return le(()=>{m(j)},[m,j]),e.jsx(K.span,{...i,ref:S,style:{pointerEvents:"none"},children:bt(d.value)?e.jsx(e.Fragment,{children:c}):u})});nt.displayName=st;var Os="SelectIcon",ot=n.forwardRef((t,s)=>{const{__scopeSelect:o,children:r,...l}=t;return e.jsx(K.span,{"aria-hidden":!0,...l,ref:s,children:r||"â–¼"})});ot.displayName=Os;var Vs="SelectPortal",rt=t=>e.jsx(It,{asChild:!0,...t});rt.displayName=Vs;var pe="SelectContent",at=n.forwardRef((t,s)=>{const o=ie(pe,t.__scopeSelect),[r,l]=n.useState();if(le(()=>{l(new DocumentFragment)},[]),!o.open){const u=r;return u?Ue.createPortal(e.jsx(lt,{scope:t.__scopeSelect,children:e.jsx(je.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),u):null}return e.jsx(it,{...t,ref:s})});at.displayName=pe;var ee=10,[lt,ce]=he(pe),Bs="SelectContentImpl",Fs=Cs("SelectContent.RemoveScroll"),it=n.forwardRef((t,s)=>{const{__scopeSelect:o,position:r="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:u,onPointerDownOutside:c,side:i,sideOffset:d,align:m,alignOffset:j,arrowPadding:S,collisionBoundary:T,collisionPadding:v,sticky:E,hideWhenDetached:h,avoidCollisions:g,...b}=t,p=ie(pe,o),[y,_]=n.useState(null),[N,R]=n.useState(null),L=re(s,w=>_(w)),[$,te]=n.useState(null),[se,M]=n.useState(null),O=Ne(o),[q,G]=n.useState(!1),H=n.useRef(!1);n.useEffect(()=>{if(y)return _t(y)},[y]),Rt();const D=n.useCallback(w=>{const[P,...F]=O().map(a=>a.ref.current),[C]=F.slice(-1),k=document.activeElement;for(const a of w)if(a===k||(a?.scrollIntoView({block:"nearest"}),a===P&&N&&(N.scrollTop=0),a===C&&N&&(N.scrollTop=N.scrollHeight),a?.focus(),document.activeElement!==k))return},[O,N]),B=n.useCallback(()=>D([$,y]),[D,$,y]);n.useEffect(()=>{q&&B()},[q,B]);const{onOpenChange:V,triggerPointerDownPosRef:X}=p;n.useEffect(()=>{if(y){let w={x:0,y:0};const P=C=>{w={x:Math.abs(Math.round(C.pageX)-(X.current?.x??0)),y:Math.abs(Math.round(C.pageY)-(X.current?.y??0))}},F=C=>{w.x<=10&&w.y<=10?C.preventDefault():y.contains(C.target)||V(!1),document.removeEventListener("pointermove",P),X.current=null};return X.current!==null&&(document.addEventListener("pointermove",P),document.addEventListener("pointerup",F,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",F,{capture:!0})}}},[y,V,X]),n.useEffect(()=>{const w=()=>V(!1);return window.addEventListener("blur",w),window.addEventListener("resize",w),()=>{window.removeEventListener("blur",w),window.removeEventListener("resize",w)}},[V]);const[fe,J]=jt(w=>{const P=O().filter(k=>!k.disabled),F=P.find(k=>k.ref.current===document.activeElement),C=Nt(P,w,F);C&&setTimeout(()=>C.ref.current.focus())}),xe=n.useCallback((w,P,F)=>{const C=!H.current&&!F;(p.value!==void 0&&p.value===P||C)&&(te(w),C&&(H.current=!0))},[p.value]),ge=n.useCallback(()=>y?.focus(),[y]),ae=n.useCallback((w,P,F)=>{const C=!H.current&&!F;(p.value!==void 0&&p.value===P||C)&&M(w)},[p.value]),me=r==="popper"?ke:ct,de=me===ke?{side:i,sideOffset:d,align:m,alignOffset:j,arrowPadding:S,collisionBoundary:T,collisionPadding:v,sticky:E,hideWhenDetached:h,avoidCollisions:g}:{};return e.jsx(lt,{scope:o,content:y,viewport:N,onViewportChange:R,itemRefCallback:xe,selectedItem:$,onItemLeave:ge,itemTextRefCallback:ae,focusSelectedItem:B,selectedItemText:se,position:r,isPositioned:q,searchRef:fe,children:e.jsx(Mt,{as:Fs,allowPinchZoom:!0,children:e.jsx(Dt,{asChild:!0,trapped:p.open,onMountAutoFocus:w=>{w.preventDefault()},onUnmountAutoFocus:z(l,w=>{p.trigger?.focus({preventScroll:!0}),w.preventDefault()}),children:e.jsx(At,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:w=>w.preventDefault(),onDismiss:()=>p.onOpenChange(!1),children:e.jsx(me,{role:"listbox",id:p.contentId,"data-state":p.open?"open":"closed",dir:p.dir,onContextMenu:w=>w.preventDefault(),...b,...de,onPlaced:()=>G(!0),ref:L,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:z(b.onKeyDown,w=>{const P=w.ctrlKey||w.altKey||w.metaKey;if(w.key==="Tab"&&w.preventDefault(),!P&&w.key.length===1&&J(w.key),["ArrowUp","ArrowDown","Home","End"].includes(w.key)){let C=O().filter(k=>!k.disabled).map(k=>k.ref.current);if(["ArrowUp","End"].includes(w.key)&&(C=C.slice().reverse()),["ArrowUp","ArrowDown"].includes(w.key)){const k=w.target,a=C.indexOf(k);C=C.slice(a+1)}setTimeout(()=>D(C)),w.preventDefault()}})})})})})})});it.displayName=Bs;var $s="SelectItemAlignedPosition",ct=n.forwardRef((t,s)=>{const{__scopeSelect:o,onPlaced:r,...l}=t,u=ie(pe,o),c=ce(pe,o),[i,d]=n.useState(null),[m,j]=n.useState(null),S=re(s,L=>j(L)),T=Ne(o),v=n.useRef(!1),E=n.useRef(!0),{viewport:h,selectedItem:g,selectedItemText:b,focusSelectedItem:p}=c,y=n.useCallback(()=>{if(u.trigger&&u.valueNode&&i&&m&&h&&g&&b){const L=u.trigger.getBoundingClientRect(),$=m.getBoundingClientRect(),te=u.valueNode.getBoundingClientRect(),se=b.getBoundingClientRect();if(u.dir!=="rtl"){const k=se.left-$.left,a=te.left-k,f=L.left-a,x=L.width+f,I=Math.max(x,$.width),A=window.innerWidth-ee,ne=He(a,[ee,Math.max(ee,A-I)]);i.style.minWidth=x+"px",i.style.left=ne+"px"}else{const k=$.right-se.right,a=window.innerWidth-te.right-k,f=window.innerWidth-L.right-a,x=L.width+f,I=Math.max(x,$.width),A=window.innerWidth-ee,ne=He(a,[ee,Math.max(ee,A-I)]);i.style.minWidth=x+"px",i.style.right=ne+"px"}const M=T(),O=window.innerHeight-ee*2,q=h.scrollHeight,G=window.getComputedStyle(m),H=parseInt(G.borderTopWidth,10),D=parseInt(G.paddingTop,10),B=parseInt(G.borderBottomWidth,10),V=parseInt(G.paddingBottom,10),X=H+D+q+V+B,fe=Math.min(g.offsetHeight*5,X),J=window.getComputedStyle(h),xe=parseInt(J.paddingTop,10),ge=parseInt(J.paddingBottom,10),ae=L.top+L.height/2-ee,me=O-ae,de=g.offsetHeight/2,w=g.offsetTop+de,P=H+D+w,F=X-P;if(P<=ae){const k=M.length>0&&g===M[M.length-1].ref.current;i.style.bottom="0px";const a=m.clientHeight-h.offsetTop-h.offsetHeight,f=Math.max(me,de+(k?ge:0)+a+B),x=P+f;i.style.height=x+"px"}else{const k=M.length>0&&g===M[0].ref.current;i.style.top="0px";const f=Math.max(ae,H+h.offsetTop+(k?xe:0)+de)+F;i.style.height=f+"px",h.scrollTop=P-ae+h.offsetTop}i.style.margin=`${ee}px 0`,i.style.minHeight=fe+"px",i.style.maxHeight=O+"px",r?.(),requestAnimationFrame(()=>v.current=!0)}},[T,u.trigger,u.valueNode,i,m,h,g,b,u.dir,r]);le(()=>y(),[y]);const[_,N]=n.useState();le(()=>{m&&N(window.getComputedStyle(m).zIndex)},[m]);const R=n.useCallback(L=>{L&&E.current===!0&&(y(),p?.(),E.current=!1)},[y,p]);return e.jsx(Us,{scope:o,contentWrapper:i,shouldExpandOnScrollRef:v,onScrollButtonChange:R,children:e.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:e.jsx(K.div,{...l,ref:S,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});ct.displayName=$s;var Hs="SelectPopperPosition",ke=n.forwardRef((t,s)=>{const{__scopeSelect:o,align:r="start",collisionPadding:l=ee,...u}=t,c=Ce(o);return e.jsx(Xt,{...c,...u,ref:s,align:r,collisionPadding:l,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ke.displayName=Hs;var[Us,De]=he(pe,{}),Ie="SelectViewport",dt=n.forwardRef((t,s)=>{const{__scopeSelect:o,nonce:r,...l}=t,u=ce(Ie,o),c=De(Ie,o),i=re(s,u.onViewportChange),d=n.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(je.Slot,{scope:o,children:e.jsx(K.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:i,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:z(l.onScroll,m=>{const j=m.currentTarget,{contentWrapper:S,shouldExpandOnScrollRef:T}=c;if(T?.current&&S){const v=Math.abs(d.current-j.scrollTop);if(v>0){const E=window.innerHeight-ee*2,h=parseFloat(S.style.minHeight),g=parseFloat(S.style.height),b=Math.max(h,g);if(b<E){const p=b+v,y=Math.min(E,p),_=p-y;S.style.height=y+"px",S.style.bottom==="0px"&&(j.scrollTop=_>0?_:0,S.style.justifyContent="flex-end")}}}d.current=j.scrollTop})})})]})});dt.displayName=Ie;var ut="SelectGroup",[Ws,Ks]=he(ut),Gs=n.forwardRef((t,s)=>{const{__scopeSelect:o,...r}=t,l=Me();return e.jsx(Ws,{scope:o,id:l,children:e.jsx(K.div,{role:"group","aria-labelledby":l,...r,ref:s})})});Gs.displayName=ut;var pt="SelectLabel",Ys=n.forwardRef((t,s)=>{const{__scopeSelect:o,...r}=t,l=Ks(pt,o);return e.jsx(K.div,{id:l.id,...r,ref:s})});Ys.displayName=pt;var be="SelectItem",[Zs,ft]=he(be),mt=n.forwardRef((t,s)=>{const{__scopeSelect:o,value:r,disabled:l=!1,textValue:u,...c}=t,i=ie(be,o),d=ce(be,o),m=i.value===r,[j,S]=n.useState(u??""),[T,v]=n.useState(!1),E=re(s,p=>d.itemRefCallback?.(p,r,l)),h=Me(),g=n.useRef("touch"),b=()=>{l||(i.onValueChange(r),i.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Zs,{scope:o,value:r,disabled:l,textId:h,isSelected:m,onItemTextChange:n.useCallback(p=>{S(y=>y||(p?.textContent??"").trim())},[]),children:e.jsx(je.ItemSlot,{scope:o,value:r,disabled:l,textValue:j,children:e.jsx(K.div,{role:"option","aria-labelledby":h,"data-highlighted":T?"":void 0,"aria-selected":m&&T,"data-state":m?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...c,ref:E,onFocus:z(c.onFocus,()=>v(!0)),onBlur:z(c.onBlur,()=>v(!1)),onClick:z(c.onClick,()=>{g.current!=="mouse"&&b()}),onPointerUp:z(c.onPointerUp,()=>{g.current==="mouse"&&b()}),onPointerDown:z(c.onPointerDown,p=>{g.current=p.pointerType}),onPointerMove:z(c.onPointerMove,p=>{g.current=p.pointerType,l?d.onItemLeave?.():g.current==="mouse"&&p.currentTarget.focus({preventScroll:!0})}),onPointerLeave:z(c.onPointerLeave,p=>{p.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:z(c.onKeyDown,p=>{d.searchRef?.current!==""&&p.key===" "||(Ms.includes(p.key)&&b(),p.key===" "&&p.preventDefault())})})})})});mt.displayName=be;var ve="SelectItemText",ht=n.forwardRef((t,s)=>{const{__scopeSelect:o,className:r,style:l,...u}=t,c=ie(ve,o),i=ce(ve,o),d=ft(ve,o),m=zs(ve,o),[j,S]=n.useState(null),T=re(s,b=>S(b),d.onItemTextChange,b=>i.itemTextRefCallback?.(b,d.value,d.disabled)),v=j?.textContent,E=n.useMemo(()=>e.jsx("option",{value:d.value,disabled:d.disabled,children:v},d.value),[d.disabled,d.value,v]),{onNativeOptionAdd:h,onNativeOptionRemove:g}=m;return le(()=>(h(E),()=>g(E)),[h,g,E]),e.jsxs(e.Fragment,{children:[e.jsx(K.span,{id:d.textId,...u,ref:T}),d.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Ue.createPortal(u.children,c.valueNode):null]})});ht.displayName=ve;var xt="SelectItemIndicator",gt=n.forwardRef((t,s)=>{const{__scopeSelect:o,...r}=t;return ft(xt,o).isSelected?e.jsx(K.span,{"aria-hidden":!0,...r,ref:s}):null});gt.displayName=xt;var Te="SelectScrollUpButton",vt=n.forwardRef((t,s)=>{const o=ce(Te,t.__scopeSelect),r=De(Te,t.__scopeSelect),[l,u]=n.useState(!1),c=re(s,r.onScrollButtonChange);return le(()=>{if(o.viewport&&o.isPositioned){let i=function(){const m=d.scrollTop>0;u(m)};const d=o.viewport;return i(),d.addEventListener("scroll",i),()=>d.removeEventListener("scroll",i)}},[o.viewport,o.isPositioned]),l?e.jsx(yt,{...t,ref:c,onAutoScroll:()=>{const{viewport:i,selectedItem:d}=o;i&&d&&(i.scrollTop=i.scrollTop-d.offsetHeight)}}):null});vt.displayName=Te;var _e="SelectScrollDownButton",wt=n.forwardRef((t,s)=>{const o=ce(_e,t.__scopeSelect),r=De(_e,t.__scopeSelect),[l,u]=n.useState(!1),c=re(s,r.onScrollButtonChange);return le(()=>{if(o.viewport&&o.isPositioned){let i=function(){const m=d.scrollHeight-d.clientHeight,j=Math.ceil(d.scrollTop)<m;u(j)};const d=o.viewport;return i(),d.addEventListener("scroll",i),()=>d.removeEventListener("scroll",i)}},[o.viewport,o.isPositioned]),l?e.jsx(yt,{...t,ref:c,onAutoScroll:()=>{const{viewport:i,selectedItem:d}=o;i&&d&&(i.scrollTop=i.scrollTop+d.offsetHeight)}}):null});wt.displayName=_e;var yt=n.forwardRef((t,s)=>{const{__scopeSelect:o,onAutoScroll:r,...l}=t,u=ce("SelectScrollButton",o),c=n.useRef(null),i=Ne(o),d=n.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return n.useEffect(()=>()=>d(),[d]),le(()=>{i().find(j=>j.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[i]),e.jsx(K.div,{"aria-hidden":!0,...l,ref:s,style:{flexShrink:0,...l.style},onPointerDown:z(l.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:z(l.onPointerMove,()=>{u.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:z(l.onPointerLeave,()=>{d()})})}),qs="SelectSeparator",Xs=n.forwardRef((t,s)=>{const{__scopeSelect:o,...r}=t;return e.jsx(K.div,{"aria-hidden":!0,...r,ref:s})});Xs.displayName=qs;var Re="SelectArrow",Js=n.forwardRef((t,s)=>{const{__scopeSelect:o,...r}=t,l=Ce(o),u=ie(Re,o),c=ce(Re,o);return u.open&&c.position==="popper"?e.jsx(Jt,{...l,...r,ref:s}):null});Js.displayName=Re;var Qs="SelectBubbleInput",St=n.forwardRef(({__scopeSelect:t,value:s,...o},r)=>{const l=n.useRef(null),u=re(r,l),c=_s(s);return n.useEffect(()=>{const i=l.current;if(!i)return;const d=window.HTMLSelectElement.prototype,j=Object.getOwnPropertyDescriptor(d,"value").set;if(c!==s&&j){const S=new Event("change",{bubbles:!0});j.call(i,s),i.dispatchEvent(S)}},[c,s]),e.jsx(K.select,{...o,style:{...Qt,...o.style},ref:u,defaultValue:s})});St.displayName=Qs;function bt(t){return t===""||t===void 0}function jt(t){const s=Tt(t),o=n.useRef(""),r=n.useRef(0),l=n.useCallback(c=>{const i=o.current+c;s(i),function d(m){o.current=m,window.clearTimeout(r.current),m!==""&&(r.current=window.setTimeout(()=>d(""),1e3))}(i)},[s]),u=n.useCallback(()=>{o.current="",window.clearTimeout(r.current)},[]);return n.useEffect(()=>()=>window.clearTimeout(r.current),[]),[o,l,u]}function Nt(t,s,o){const l=s.length>1&&Array.from(s).every(m=>m===s[0])?s[0]:s,u=o?t.indexOf(o):-1;let c=en(t,Math.max(u,0));l.length===1&&(c=c.filter(m=>m!==o));const d=c.find(m=>m.textValue.toLowerCase().startsWith(l.toLowerCase()));return d!==o?d:void 0}function en(t,s){return t.map((o,r)=>t[(s+r)%t.length])}var tn=Qe,sn=tt,nn=nt,on=ot,rn=rt,an=at,ln=dt,cn=mt,dn=ht,un=gt,pn=vt,fn=wt;function mn({...t}){return e.jsx(tn,{"data-slot":"select",...t})}function hn({...t}){return e.jsx(nn,{"data-slot":"select-value",...t})}function xn({className:t,size:s="default",children:o,...r}){return e.jsxs(sn,{"data-slot":"select-trigger","data-size":s,className:U("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[o,e.jsx(on,{asChild:!0,children:e.jsx(Ge,{className:"size-4 opacity-50"})})]})}function gn({className:t,children:s,position:o="popper",align:r="center",...l}){return e.jsx(rn,{children:e.jsxs(an,{"data-slot":"select-content",className:U("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",o==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:o,align:r,...l,children:[e.jsx(vn,{}),e.jsx(ln,{className:U("p-1",o==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(wn,{})]})})}function Se({className:t,children:s,...o}){return e.jsxs(cn,{"data-slot":"select-item",className:U("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...o,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(un,{children:e.jsx(rs,{className:"size-4"})})}),e.jsx(dn,{children:s})]})}function vn({className:t,...s}){return e.jsx(pn,{"data-slot":"select-scroll-up-button",className:U("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(is,{className:"size-4"})})}function wn({className:t,...s}){return e.jsx(fn,{"data-slot":"select-scroll-down-button",className:U("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Ge,{className:"size-4"})})}function oe({className:t,...s}){return e.jsx("div",{"data-slot":"skeleton",className:U("bg-accent animate-pulse rounded-md",t),...s})}function yn({count:t=5}){return e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:Array.from({length:t}).map((s,o)=>e.jsxs(Ze,{className:"h-full gap-3 border-border/70 py-4",children:[e.jsx(qe,{className:"pb-1 pt-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(oe,{className:"h-4 w-36"}),e.jsx(oe,{className:"h-3 w-4/5"}),e.jsx(oe,{className:"h-3 w-3/5"}),e.jsx(oe,{className:"h-3 w-2/3"})]}),e.jsx(oe,{className:"mt-0.5 h-4 w-4 rounded"})]})}),e.jsx(Xe,{className:"flex-1 pt-0",children:e.jsx(oe,{className:"h-3 w-2/3"})}),e.jsxs(Je,{className:"items-center justify-between pt-2",children:[e.jsx(oe,{className:"h-3 w-24"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-9 w-9"}),e.jsx(oe,{className:"h-9 w-9"}),e.jsx(oe,{className:"h-9 w-9"})]})]})]},o))})}function Sn(t,s=300){const[o,r]=n.useState(t);return n.useEffect(()=>{const l=setTimeout(()=>{r(t)},s);return()=>{clearTimeout(l)}},[t,s]),o}function bn({docs:t,total:s,page:o,query:r,baseUrl:l,pageSize:u,sortBy:c,filterBy:i}){const d=Gt(),[m,j]=We(),{revalidate:S,state:T}=Yt(),{basePath:v}=Lt(),E=Pe(),h=Pe(),g=Pe(),b=n.useRef(null),[p,y]=n.useState(r),_=Sn(p,300),[N,R]=n.useState(new Set),[L,$]=n.useState(!1),[te,se]=n.useState(!1),[M,O]=n.useState(t),[q,G]=n.useState(o),[H,D]=n.useState(s),B=g.state!=="idle",V=T==="loading"||E.state!=="idle"||h.state!=="idle"||te,X=n.useMemo(()=>{const a=new URLSearchParams;return r&&a.set("q",r),c&&a.set("sortBy",c),i&&a.set("filterBy",i),a.set("pageSize",String(u)),a},[r,c,i,u]),fe=n.useCallback(a=>{const f=new URLSearchParams(X);return f.set("page",String(a)),Y(`/api/list?${f.toString()}`,v)},[X,v]),J=n.useCallback(a=>{const f=new URLSearchParams(m.toString());Object.entries(a).forEach(([x,I])=>{I===void 0||I===""?f.delete(x):f.set(x,String(I))}),j(f)},[m,j]);n.useEffect(()=>{_!==r&&($(!0),J({q:_,page:1}))},[_,r,J]),n.useEffect(()=>{V||$(!1)},[V]),n.useEffect(()=>{y(r)},[r]),n.useEffect(()=>{O(t),G(o),D(s),R(new Set),typeof window<"u"&&r===""&&i==="all"&&o===1&&window.dispatchEvent(new CustomEvent("md-studio-docs-synced",{detail:{docs:t}}))},[t,o,s,r,c,i]),n.useEffect(()=>{g.data?.docs?.length&&(O(a=>{const f=new Map(a.map(x=>[x.slug,x]));return g.data.docs.forEach(x=>f.set(x.slug,x)),Array.from(f.values())}),G(g.data.page),D(g.data.total))},[g.data]),n.useEffect(()=>{const a=f=>{const x=f.target,I=x&&["INPUT","TEXTAREA"].includes(x.tagName)&&!x.hasAttribute("data-hotkey-ignore");if(f.key==="Escape"){f.preventDefault(),R(new Set),x instanceof HTMLElement&&x.blur();return}I||(f.key==="n"&&(f.preventDefault(),d(Y("/new",v))),f.key==="/"&&(f.preventDefault(),b.current?.focus()))};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[d,v]);const xe=n.useCallback(async a=>{console.log("handleTogglePublic called for doc:",a.slug);try{const f=new FormData;if(f.append("slug",a.slug),!(await fetch(Y("/api/toggle-public",v),{method:"post",body:f})).ok)throw new Error(`Failed to update "${a.title}".`);O(I=>I.map(A=>A.slug===a.slug?{...A,isPublic:!A.isPublic}:A)),typeof window<"u"&&window.dispatchEvent(new CustomEvent("md-studio-docs-updated",{detail:{slug:a.slug,patch:{isPublic:!a.isPublic}}})),Q.success(a.isPublic?"Document is now private.":"Document is now public."),S()}catch(f){const x=f instanceof Error?f.message:"Failed to update document.";Q.error(x)}},[v,S]),ge=n.useCallback(async a=>{if(window.confirm(`Delete "${a.title}"? This removes the markdown file from storage.`))try{const x=new FormData;if(x.append("slug",a.slug),!(await fetch(Y("/api/delete",v),{method:"post",body:x})).ok)throw new Error(`Failed to delete "${a.title}".`);O(A=>A.filter(ne=>ne.slug!==a.slug)),D(A=>Math.max(0,A-1)),typeof window<"u"&&window.dispatchEvent(new CustomEvent("md-studio-docs-deleted",{detail:{slugs:[a.slug]}})),Q.success("Document deleted."),R(A=>{const ne=new Set(A);return ne.delete(a.slug),ne}),S()}catch(x){const I=x instanceof Error?x.message:"Failed to delete document.";Q.error(I)}},[v,S]),ae=n.useCallback(async()=>{const a=N.size;if(window.confirm(`Delete ${a} document${a>1?"s":""}? This removes the markdown files from storage.`)){se(!0);try{for(const x of N){const I=new FormData;if(I.append("slug",x),!(await fetch(Y("/api/delete",v),{method:"post",body:I})).ok)throw new Error(`Failed to delete "${x}".`)}O(x=>x.filter(I=>!N.has(I.slug))),D(x=>Math.max(0,x-N.size)),typeof window<"u"&&window.dispatchEvent(new CustomEvent("md-studio-docs-deleted",{detail:{slugs:Array.from(N)}})),Q.success(`${a} document${a>1?"s":""} deleted.`),R(new Set),S()}catch(x){const I=x instanceof Error?x.message:"Failed to delete documents.";Q.error(I)}finally{se(!1)}}},[N,v,S]),me=n.useCallback(async a=>{try{let f=a;if(!a.isPublic){const we=new FormData;we.append("slug",a.slug);const Ae=await fetch(Y("/api/toggle-public",v),{method:"post",body:we}),Le=await Ae.json().catch(()=>({}));if(!Ae.ok||!Le?.meta)throw new Error("Unable to make document public.");f=Le.meta,O(Et=>Et.map(ze=>ze.slug===f.slug?f:ze)),typeof window<"u"&&window.dispatchEvent(new CustomEvent("md-studio-docs-updated",{detail:{slug:f.slug,patch:{isPublic:f.isPublic,publicId:f.publicId}}}))}const x=f.publicId||f.slug,I=typeof window<"u"?window.location.origin:"";if(!I){const we=v?`${v}/s/${x}`:`/s/${x}`;await navigator.clipboard.writeText(we),Q.success("Share link copied."),a.isPublic||Q.success("Document is now public.");return}const A=v?v.replace(/^\/+|\/+$/g,""):"",ne=A?`/${A}/s/${x}`:`/s/${x}`,Ct=`${I}${ne}`;await navigator.clipboard.writeText(Ct),Q.success("Share link copied."),a.isPublic||Q.success("Document is now public.")}catch(f){const x=f instanceof Error?f.message:"Unable to copy share link.";Q.error(x)}},[l,v]),de=n.useCallback(a=>{R(f=>{const x=new Set(f);return x.has(a)?x.delete(a):x.add(a),x})},[]),w=n.useCallback(()=>{N.size===M.length?R(new Set):R(new Set(M.map(a=>a.slug)))},[M,N.size]),P=M.length>0,F=P&&N.size===M.length,C=M.length<H,k=n.useCallback(()=>{if(B||!C)return;const a=q+1;g.load(fe(a))},[B,C,q,g,fe]);return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Documents"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage markdown content stored on the local filesystem."})]}),e.jsxs("div",{className:"relative w-full max-w-md",children:[e.jsx(ws,{className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground"}),e.jsx(zt,{ref:b,placeholder:"Search documents... (Press / to focus)",value:p,onChange:a=>y(a.target.value),"data-hotkey-ignore":!0,className:"pl-9"}),L&&e.jsx(es,{className:"absolute right-3 top-1/2 -translate-y-1/2 size-4 animate-spin text-muted-foreground"})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Z,{variant:i==="all"?"default":"outline",size:"sm",onClick:()=>J({filterBy:"all",page:1}),children:"All"}),e.jsxs(Z,{variant:i==="public"?"default":"outline",size:"sm",onClick:()=>J({filterBy:"public",page:1}),children:[e.jsx(Be,{className:"mr-2 size-4"}),"Public"]}),e.jsxs(Z,{variant:i==="private"?"default":"outline",size:"sm",onClick:()=>J({filterBy:"private",page:1}),children:[e.jsx(Fe,{className:"mr-2 size-4"}),"Private"]}),e.jsxs(mn,{value:c,onValueChange:a=>J({sortBy:a,page:1}),children:[e.jsx(xn,{className:"w-[180px]",children:e.jsx(hn,{})}),e.jsxs(gn,{children:[e.jsx(Se,{value:"date-newest",children:"Date: Newest"}),e.jsx(Se,{value:"date-oldest",children:"Date: Oldest"}),e.jsx(Se,{value:"updated-newest",children:"Recently Updated"}),e.jsx(Se,{value:"title-asc",children:"Name: A-Z"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Z,{asChild:!0,variant:"outline",children:e.jsxs(ye,{to:Y("/new",v),children:[e.jsx(Ye,{className:"mr-2 size-4"}),"New"]})}),e.jsx(Ot,{}),P&&e.jsx(Z,{type:"button",variant:"outline",size:"sm",onClick:w,children:F?"Clear selection":"Select all"})]})]}),N.size>0&&e.jsxs("div",{className:"flex items-center justify-between rounded-lg border bg-muted/50 px-4 py-3",children:[e.jsxs("span",{className:"text-sm font-medium",children:[N.size," document",N.size>1?"s":""," selected"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>R(new Set),children:"Clear"}),e.jsxs(Z,{variant:"destructive",size:"sm",onClick:ae,disabled:V,children:[e.jsx($e,{className:"mr-2 size-4"}),"Delete Selected"]})]})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Showing ",M.length," of ",H," documents"]})})]}),V&&!L?e.jsx(yn,{count:u}):P?e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4",children:M.map(a=>e.jsxs(Ze,{className:`group h-full gap-3 border-border/70 py-4 transition-all hover:-translate-y-0.5 hover:border-border hover:bg-muted/30 hover:shadow-md ${N.has(a.slug)?"border-primary/50 ring-2 ring-primary/30":""}`,onClick:f=>{(f.metaKey||f.ctrlKey)&&(f.preventDefault(),de(a.slug))},children:[e.jsx(qe,{className:"pb-1 pt-3",children:e.jsx("div",{className:"flex items-start justify-between gap-3",children:e.jsx("div",{className:"min-w-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[a.isPublic?e.jsx(Be,{className:"size-4 text-blue-500 shrink-0"}):e.jsx(Fe,{className:"size-4 text-muted-foreground shrink-0"}),e.jsx(js,{className:"text-base font-semibold line-clamp-1",children:e.jsx(ye,{to:Y(`/doc/${a.slug}`,v),className:"hover:underline",onClick:f=>f.stopPropagation(),children:a.title})})]})})})}),e.jsx(Xe,{className:"flex-1 pt-0",children:e.jsx(Ns,{className:"mt-1 line-clamp-3 text-xs text-muted-foreground",children:a.excerpt||"No excerpt available."})}),e.jsxs(Je,{className:"items-center justify-between pt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:Ft(a.updatedAt)}),e.jsx($t,{variant:a.isPublic?"default":"secondary",className:"px-2 py-0 text-[10px]",children:a.isPublic?"Public":"Private"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{asChild:!0,variant:"outline",size:"icon",children:e.jsxs(ye,{to:Y(`/doc/${a.slug}`,v),onClick:f=>f.stopPropagation(),children:[e.jsx(ds,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"View"})]})}),e.jsx(Z,{asChild:!0,variant:"outline",size:"icon",children:e.jsxs(ye,{to:Y(`/doc/${a.slug}/edit`,v),onClick:f=>f.stopPropagation(),children:[e.jsx(Ss,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Edit"})]})}),e.jsxs(Ht,{children:[e.jsx(Ut,{asChild:!0,children:e.jsx(Z,{variant:"outline",size:"icon",onClick:f=>f.stopPropagation(),children:e.jsx(Wt,{className:"size-4"})})}),e.jsxs(Kt,{align:"end",children:[e.jsxs(Ee,{onClick:()=>xe(a),disabled:V,children:[e.jsx(ns,{className:"mr-2 size-4"}),a.isPublic?"Make private":"Make public"]}),e.jsxs(Ee,{onClick:()=>me(a),children:[e.jsx(xs,{className:"mr-2 size-4"}),"Copy share link"]}),e.jsxs(Ee,{className:"text-destructive focus:text-destructive",onClick:()=>ge(a),disabled:V,children:[e.jsx($e,{className:"mr-2 size-4"}),"Delete"]})]})]})]})]})]},a.slug))}):e.jsx(jn,{query:r,filterBy:i,onAction:()=>d(Y("/new",v))}),P?e.jsxs("div",{className:"mt-6 flex w-full items-center justify-center gap-3 text-xs text-muted-foreground",children:[C?e.jsxs("span",{children:["Showing ",M.length," of ",H]}):null,C?e.jsx(Z,{variant:"ghost",size:"sm",onClick:k,disabled:B,children:B?"Loading...":"Load more"}):null]}):null]})}function jn({query:t,filterBy:s,onAction:o}){return t||s!=="all"?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-4 rounded-lg border border-dashed border-border p-10 text-center",children:[e.jsx("div",{className:"flex size-12 items-center justify-center rounded-full border border-border bg-muted/40",children:e.jsx(Ve,{className:"size-6 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold",children:"No documents found"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Try adjusting your search or filter settings."})]})]}):e.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-6 rounded-lg border border-dashed border-border p-10 text-center",children:[e.jsx("div",{className:"flex size-16 items-center justify-center rounded-full border-2 border-border bg-muted/40",children:e.jsx(Ve,{className:"size-8 text-muted-foreground"})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-xl font-semibold",children:"No documents yet"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"Create your first markdown document to get started. You can write, preview, and manage all your content in one place."})]}),e.jsxs(Z,{onClick:o,size:"lg",children:[e.jsx(Ye,{className:"mr-2 size-4"}),"Create your first document"]}),e.jsxs("div",{className:"mt-4 rounded-lg border bg-muted/50 p-4 max-w-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ms,{className:"size-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Keyboard Shortcuts"})]}),e.jsxs("div",{className:"flex flex-col gap-2 text-sm text-muted-foreground text-left",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Create new document"}),e.jsx("kbd",{className:"px-2 py-1 bg-background border rounded text-xs",children:"N"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Focus search"}),e.jsx("kbd",{className:"px-2 py-1 bg-background border rounded text-xs",children:"/"})]})]})]})]})}const Nn=16,An=()=>[{title:"Dashboard | md-studio"}];function Ln(){const[t]=We(),[s,o]=n.useState([]),[r,l]=n.useState(0),[u,c]=n.useState(!0),[i,d]=n.useState(!1),m=t.get("q")??"",j=t.get("page")??"1",S=Number.parseInt(j,10),T=Number.isFinite(S)&&S>0?S:1,v=t.get("sortBy")??"date-newest",E=t.get("filterBy")??"all",h=typeof window<"u"?window.location.origin:"";return n.useEffect(()=>{c(!0),d(!1);const g=new URLSearchParams({q:m,page:T.toString(),sortBy:v,filterBy:E}),b=typeof window<"u"?window.ENV?.BASE_PATH??"":"";fetch(Y(`/api/list?${g}`,b)).then(async p=>{if(p.status===404)return d(!0),c(!1),null;if(!p.ok)throw new Error(`Failed to load docs (${p.status})`);return p.json()}).then(p=>{p&&(o(p.docs||p.items||[]),l(p.total||0),c(!1))}).catch(p=>{console.error("Failed to load docs:",p),c(!1)})},[m,T,v,E]),n.useEffect(()=>{if(typeof window>"u")return;const g=b=>{const y=b.detail?.slugs??[];y.length&&(o(_=>_.filter(N=>!y.includes(N.slug))),l(_=>Math.max(0,_-y.length)))};return window.addEventListener("md-studio-docs-deleted",g),()=>window.removeEventListener("md-studio-docs-deleted",g)},[]),n.useEffect(()=>{if(typeof window>"u")return;const g=b=>{const y=b.detail?.doc;y?.slug&&(o(_=>{const N=_.filter(R=>R.slug!==y.slug);return[y,...N]}),l(_=>_+1))};return window.addEventListener("md-studio-docs-created",g),()=>window.removeEventListener("md-studio-docs-created",g)},[]),n.useEffect(()=>{if(typeof window>"u")return;const g=b=>{const p=b,y=p.detail?.slug,_=p.detail?.patch??{};y&&o(N=>N.map(R=>R.slug===y?{...R,..._}:R))};return window.addEventListener("md-studio-docs-updated",g),()=>window.removeEventListener("md-studio-docs-updated",g)},[]),u&&s.length===0?e.jsx("div",{className:"p-8",children:"Loading..."}):i?e.jsx(ts,{}):e.jsx("main",{className:"flex flex-col gap-6",children:e.jsx(bn,{docs:s,total:r,page:T,query:m,baseUrl:h,pageSize:Nn,sortBy:v,filterBy:E})})}export{Ln as default,An as meta};
