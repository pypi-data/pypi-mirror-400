import{j as r,L as R,s as a,r as m}from"./vendor-tanstack-BVzzyDEt.js";import{L as b,aU as l,da as T,c_ as g,db as N,dc as D,bY as W,a7 as P,cP as L,c8 as Q,a6 as E,I as $,b3 as w,i as S}from"./index-BJkJ93Lr.js";function X({value:e,className:t,hideLineNumbers:o=!0,copy:s=!0,...n}){return r.jsx(b,{value:e,disabled:!0,hideLineNumbers:o,copy:s,className:l("bg-muted/50",t),...n})}const C={"flow-run":"Play","task-run":"Cog",deployment:"Rocket",flow:"Workflow","work-pool":"Server","work-queue":"ListOrdered",automation:"Zap","block-document":"Box","concurrency-limit":"Gauge",unknown:"Circle"},q={"flow-run":"Flow run","task-run":"Task run",flow:"Flow",deployment:"Deployment","work-pool":"Work pool","work-queue":"Work queue",automation:"Automation","block-document":"Block document","concurrency-limit":"Concurrency limit",unknown:"Resource"};function k(e){return!e||typeof e!="string"?"unknown":e.startsWith("prefect.flow-run.")?"flow-run":e.startsWith("prefect.task-run.")?"task-run":e.startsWith("prefect.deployment.")?"deployment":e.startsWith("prefect.flow.")?"flow":e.startsWith("prefect.work-pool.")?"work-pool":e.startsWith("prefect.work-queue.")?"work-queue":e.startsWith("prefect.automation.")?"automation":e.startsWith("prefect.block-document.")?"block-document":e.startsWith("prefect.concurrency-limit.")?"concurrency-limit":"unknown"}function x(e){if(!e||typeof e!="string")return null;const t=e.split(".");return t.length<3?null:t.slice(2).join(".")}function d(e){return e["prefect.resource.name"]||e["prefect.name"]||e["prefect-cloud.name"]||null}function v(e){for(const t of e){const o=t["prefect.resource.id"]||"";if(k(o)==="work-pool")return t}return null}function G(e,t=[]){const o=e["prefect.resource.id"]||"",s=k(o),n=x(o);if(!n)return null;switch(s){case"flow-run":return{to:"/runs/flow-run/$id",params:{id:n}};case"task-run":return{to:"/runs/task-run/$id",params:{id:n}};case"deployment":return{to:"/deployments/deployment/$id",params:{id:n}};case"flow":return{to:"/flows/flow/$id",params:{id:n}};case"work-pool":return{to:"/work-pools/work-pool/$workPoolName",params:{workPoolName:d(e)||n}};case"automation":return{to:"/automations/automation/$id",params:{id:n}};case"block-document":return{to:"/blocks/block/$id",params:{id:n}};case"concurrency-limit":return{to:"/concurrency-limits/concurrency-limit/$id",params:{id:n}};case"work-queue":{const c=d(e);if(!c)return null;const p=v(t);if(!p)return null;const j=p["prefect.resource.id"]||"",h=x(j),y=d(p)||h;return y?{to:"/work-pools/work-pool/$workPoolName/queue/$workQueueName",params:{workPoolName:y,workQueueName:c}}:null}default:return null}}function i({resource:e,relatedResources:t=[],children:o,className:s}){const n=G(e,t);return n?r.jsx(R,{to:n.to,params:n.params,className:s,children:o}):r.jsx("span",{className:s,children:o})}function F({resourceId:e,className:t}){const{data:o}=a(E(e));return r.jsx(u,{resourceType:"flow-run",displayText:o.name??e,className:t})}function B({resourceId:e,className:t}){const{data:o}=a(Q(e));return r.jsx(u,{resourceType:"task-run",displayText:o.name??e,className:t})}function _({resourceId:e,className:t}){const{data:o}=a(L(e));return r.jsx(u,{resourceType:"deployment",displayText:o.name,className:t})}function A({resourceId:e,className:t}){const{data:o}=a(P(e));return r.jsx(u,{resourceType:"flow",displayText:o.name,className:t})}function O({resourceId:e,className:t}){const{data:o}=a(W(e));return r.jsx(u,{resourceType:"work-pool",displayText:o.name,className:t})}function U({resourceId:e,className:t}){const{data:o}=a(D(e));return r.jsx(u,{resourceType:"work-queue",displayText:o.name,className:t})}function J({resourceId:e,className:t}){const{data:o}=a(N(e));return r.jsx(u,{resourceType:"automation",displayText:o.name,className:t})}function z({resourceId:e,className:t}){const{data:o}=a(g(e));return r.jsx(u,{resourceType:"block-document",displayText:o.name??e,className:t})}function Y({resourceId:e,className:t}){const{data:o}=a(T(e));return r.jsx(u,{resourceType:"concurrency-limit",displayText:o.tag??e,className:t})}function V({resourceType:e,resourceId:t,className:o}){switch(e){case"flow-run":return r.jsx(F,{resourceId:t,className:o});case"task-run":return r.jsx(B,{resourceId:t,className:o});case"deployment":return r.jsx(_,{resourceId:t,className:o});case"flow":return r.jsx(A,{resourceId:t,className:o});case"work-pool":return r.jsx(O,{resourceId:t,className:o});case"work-queue":return r.jsx(U,{resourceId:t,className:o});case"automation":return r.jsx(J,{resourceId:t,className:o});case"block-document":return r.jsx(z,{resourceId:t,className:o});case"concurrency-limit":return r.jsx(Y,{resourceId:t,className:o});default:return null}}function Z(e){return e["prefect.resource.name"]||e["prefect.name"]||e["prefect-cloud.name"]||null}function H(e){return e["prefect.resource.id"]||""}function u({resourceType:e,displayText:t,className:o}){const s=C[e],n=q[e];return r.jsxs("div",{className:l("flex items-center gap-2",o),children:[n&&r.jsx("span",{children:n}),r.jsx($,{id:s,className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{children:t})]})}function f(){return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(w,{className:"h-4 w-4 rounded-full"}),r.jsx(w,{className:"h-4 w-24"})]})}function I({event:e,className:t}){const o=Z(e.resource),s=H(e.resource),n=k(s),c=x(s);return o?r.jsxs("div",{className:l("flex flex-col gap-0.5",t),children:[r.jsx("span",{className:"text-sm font-medium",children:"Resource"}),r.jsx(m.Suspense,{fallback:r.jsx(f,{}),children:r.jsx(i,{resource:e.resource,relatedResources:e.related??[],className:"hover:underline",children:r.jsx(u,{resourceType:n,displayText:o,className:"text-sm"})})})]}):c&&n!=="unknown"?r.jsxs("div",{className:l("flex flex-col gap-0.5",t),children:[r.jsx("span",{className:"text-sm font-medium",children:"Resource"}),r.jsx(m.Suspense,{fallback:r.jsx(f,{}),children:r.jsx(i,{resource:e.resource,relatedResources:e.related??[],className:"hover:underline",children:r.jsx(V,{resourceType:n,resourceId:c,className:"text-sm"})})})]}):c?r.jsxs("div",{className:l("flex flex-col gap-0.5",t),children:[r.jsx("span",{className:"text-sm font-medium",children:"Resource"}),r.jsx(m.Suspense,{fallback:r.jsx(f,{}),children:r.jsx(i,{resource:e.resource,relatedResources:e.related??[],className:"hover:underline",children:r.jsx(u,{resourceType:n,displayText:c,className:"text-sm text-muted-foreground font-mono"})})})]}):s?r.jsxs("div",{className:l("flex flex-col gap-0.5",t),children:[r.jsx("span",{className:"text-sm font-medium",children:"Resource"}),r.jsx(i,{resource:e.resource,relatedResources:e.related??[],className:"hover:underline",children:r.jsx("div",{className:"text-sm text-muted-foreground",children:r.jsx("span",{className:"font-mono text-xs",children:s})})})]}):r.jsxs("div",{className:l("flex flex-col gap-0.5",t),children:[r.jsx("span",{className:"text-sm font-medium",children:"Resource"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:r.jsx("span",{className:"text-muted-foreground",children:"Unknown"})})]})}function ee(e){const t=[],o=e.split(".");for(let s=1;s<o.length;s++){const n=o.slice(0,s).join(".");t.push(`${n}.*`)}return[...t,e]}function te(e){let t=e;return t.startsWith("prefect.")?t=t.slice(8):t.startsWith("prefect-cloud.")&&(t=t.slice(14)),t.split(/[._-]/).map(o=>S(o.toLowerCase())).join(" ")}export{I as E,X as J,C as R,i as a,q as b,te as f,ee as g,k as p};
//# sourceMappingURL=utilities-DhQ0a_py.js.map
