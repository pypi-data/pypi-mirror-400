import{ao as j,r as v,j as a,at as y,R as b,C as N,au as w,w as E,c as C,s as f,a1 as k,U as h,av as O,q as T}from"./index-4cf586ed.js";import{m as R}from"./ConnectUtils-bd734a4a.js";function F(r){const{options:s,selectedScan:e,currentPoint:n,data:i,scans:p,actions:c}=r,{series:t}=s,o=j(p);if(v.useEffect(()=>{c.setFollow(),c.setPage(void 0),c.setParams({scalars:[t]}),o&&c.setParams({scanid:o},!0)},[]),v.useEffect(()=>{let l=e;l||o&&(l=o),l&&c.setParams({scanid:l},!0)},[e]),!t)return a.jsxs("div",{className:"bg-warning rounded p-1",children:[a.jsx("i",{className:"fa fa-warning m-1"}),"Please specify a `series` in the config"]});const g=s.name||t;if(o===null)return a.jsxs("span",{children:[g,": No scan loaded."]});const u=i[e||o]||{};if(!u.data)return a.jsxs("span",{children:[g,": Waiting for scan data"]});if(!u.axes.ys.scalars.includes(t))return a.jsxs("div",{className:"bg-warning rounded p-1",children:["Scan does not include `",t,"`"]});const m=u.data[t];if(!m)return a.jsxs("div",{className:"bg-warning rounded p-1",children:["No y data yet for `",t,"`"]});if(!m.data)return a.jsxs("div",{className:"bg-warning rounded p-1",children:["Data not yet loaded for `",t,"`"]});const x=n!==null?n:m.data.length-1,d=m.data[x];let S="primary";s.comparator&&s.comparison&&(S=y(s.comparator,d,s.comparison)?"success":"danger");let P=String(d);return s.round!==void 0&&d!==void 0&&!Number.isNaN(d)&&(P=d.toFixed(s.round)),a.jsx("div",{className:"scanplot0d-value",children:a.jsxs(b,{children:[a.jsxs(N,{children:[g,":"]}),a.jsxs(N,{children:[a.jsx(w,{bg:S,children:P}),a.jsxs("span",{className:"invisible",children:["[",x,", ",u.page,"]"]})]})]})})}const I=(r,s,e)=>{const{data:n,list:i}=s.providers.scans;return{data:n.selector("results",r),scans:i.selector("results",r),currentPoint:f.selector("currentPoint",r),selectedScan:f.selector("selectedScan",r)}},z=(r,s)=>({actions:{setFollow:()=>{s.selectedScan===void 0&&f.dispatch("RESET_SCAN_SELECTION")},setPageSize:e=>s.providers.scans.data.setPageSize(e,!0),setPage:(e,n)=>s.providers.scans.data.setPage(e,n),setParams:(e,n)=>s.providers.scans.data.setParams(e,n)}}),A=E({scans:f})(C(R(I),z)(F));function V(r){const{yamlNode:s,providers:e,series:n,name:i,round:p,comparison:c,comparator:t,...o}=r;return k(s,"series",n),h(s,"name",i),O(s,"round",p),h(s,"comparison",c),h(s,"comparator",t),T(s,o),a.jsx(A,{providers:e,options:{series:n,name:i,round:p,comparison:c,comparator:t}})}export{V as default};
