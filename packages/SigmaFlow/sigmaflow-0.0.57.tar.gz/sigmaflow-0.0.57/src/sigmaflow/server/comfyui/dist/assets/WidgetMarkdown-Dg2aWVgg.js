var V=Object.defineProperty;var p=(i,m)=>V(i,"name",{value:m,configurable:!0});import{defineComponent as x,ref as s,computed as b,openBlock as $,createElementBlock as y,createElementVNode as h,normalizeClass as M,withDirectives as T,createVNode as u,unref as l,isRef as B,withModifiers as d,vShow as C,nextTick as E}from"vue";import H from"primevue/textarea";import{u as L}from"./useWidgetValue-BBcazAQ2.js";import{aX as z,L as D}from"./index-6STX4Oia.js";import"@primevue/themes";import"@primevue/themes/aura";import"./vendor-other-_sromytg.js";import"./vendor-vue-CrN17A9b.js";import"primevue/config";import"primevue/confirmationservice";import"primevue/toastservice";import"primevue/tooltip";import"primevue/button";import"vue-i18n";import"primevue/message";import"primevue/skeleton";import"primevue/multiselect";import"primevue/inputtext";import"primevue/select";import"primevue/checkbox";import"primevue/divider";import"primevue/scrollpanel";import"primevue/usetoast";import"primevue/card";import"primevue/listbox";import"primevue/progressbar";import"primevue/floatlabel";import"@primevue/forms";import"@primevue/forms/resolvers/zod";import"primevue/password";import"primevue/progressspinner";import"primevue/tag";import"primevue/inputnumber";import"primevue/tabpanels";import"primevue/tabs";import"primevue/iconfield";import"primevue/inputicon";import"primevue/badge";import"primevue/chip";import"primevue/tabpanel";import"primevue/toggleswitch";import"primevue/colorpicker";import"primevue/radiobutton";import"primevue/knob";import"primevue/slider";import"primevue/panel";import"primevue/tabmenu";import"primevue/popover";import"primevue/tab";import"primevue/tablist";import"primevue";import"primevue/autocomplete";import"primevue/dropdown";import"./vendor-xterm-DV1MVhAx.js";import"./vendor-three-zdhtZbSm.js";import"primevue/galleria";import"primevue/tabview";import"primevue/contextmenu";import"primevue/tree";import"primevue/toolbar";import"primevue/selectbutton";import"primevue/dialog";import"primevue/confirmpopup";import"primevue/useconfirm";import"primevue/confirmdialog";import"./vendor-tiptap-D1RRboMA.js";import"primevue/blockui";const R=["innerHTML"],Pt=x({__name:"WidgetMarkdown",props:{widget:{},modelValue:{}},emits:["update:modelValue"],setup(i,{emit:m}){const a=i,f=m,o=s(!1),n=s(),{localValue:e,onChange:c}=L(a.widget,a.modelValue,f),w=b(()=>z(e.value||"")),g=p(async()=>{o.value||(o.value=!0,await E(),n.value?.$el?.focus())},"startEditing"),v=p(()=>{o.value=!1},"handleBlur");return(r,t)=>($(),y("div",{class:"widget-expands widget-markdown relative w-full",onDblclick:g},[h("div",{class:M(["comfy-markdown-content lod-toggle size-full min-h-[60px] overflow-y-auto rounded-lg px-4 py-2 text-sm",o.value===!1?"visible":"invisible"]),innerHTML:w.value},null,10,R),T(u(l(H),{ref_key:"textareaRef",ref:n,modelValue:l(e),"onUpdate:modelValue":[t[0]||(t[0]=k=>B(e)?e.value=k:null),l(c)],"aria-label":`${r.$t("g.edit")} ${r.widget.name||r.$t("g.markdown")} ${r.$t("g.content")}`,class:"absolute inset-0 min-h-[60px] w-full resize-none",pt:{root:{class:"text-sm w-full h-full",onBlur:v}},"data-capture-wheel":"true",onClick:t[1]||(t[1]=d(()=>{},["stop"])),onKeydown:t[2]||(t[2]=d(()=>{},["stop"]))},null,8,["modelValue","aria-label","pt","onUpdate:modelValue"]),[[C,o.value]]),u(D)],32))}});export{Pt as default};
//# sourceMappingURL=WidgetMarkdown-Dg2aWVgg.js.map
