@prefix dash: <http://datashapes.org/dash#> .
@prefix ex: <http://datashapes.org/shasf/tests/rules/triple/schema2person.test#> .
@prefix mf: <http://www.w3.org/2001/sw/DataAccess/tests/test-manifest#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix person: <http://datashapes.org/shasf/tests/rules/triple/person#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix schema1: <http://schema.org/> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<schema2person.test.ttl> a mf:Manifest ;
    mf:entries ( ex:InferencingTestCase ) .

<http://datashapes.org/shasf/tests/rules/triple/schema2person.test> a owl:Ontology ;
    rdfs:label "Test of person2schema" ;
    owl:imports <http://datashapes.org/dash>,
        <http://datashapes.org/schema>,
        <http://datashapes.org/shasf/tests/rules/triple/person> ;
    owl:versionInfo "Created with TopBraid Composer" ;
    sh:declare [ a sh:PrefixDeclaration ;
            sh:namespace "http://datashapes.org/shasf/tests/rules/triple/schema2person.test#"^^xsd:anyURI ;
            sh:prefix "ex" ],
        [ a sh:PrefixDeclaration ;
            sh:namespace "http://schema.org/"^^xsd:anyURI ;
            sh:prefix "schema" ] .

ex:schema2personMappingShape a sh:NodeShape ;
    rdfs:label "Schema-to-Person Mapping Shape" ;
    sh:rule [ a sh:TripleRule ;
            sh:object person:Person ;
            sh:predicate rdf:type ;
            sh:subject sh:this ],
        [ a sh:TripleRule ;
            sh:object [ sh:path schema1:familyName ] ;
            sh:predicate person:lastName ;
            sh:subject sh:this ],
        [ a sh:TripleRule ;
            sh:object [ sh:path schema1:givenName ] ;
            sh:predicate person:firstName ;
            sh:subject sh:this ],
        [ a sh:TripleRule ;
            sh:object [ sh:path ( schema1:address schema1:postalCode ) ] ;
            sh:predicate person:zipCode ;
            sh:subject sh:this ] ;
    sh:targetClass schema1:Person .

ex:InferencingTestCase a dash:InferencingTestCase ;
    dash:expectedResult [ rdf:object person:Person ;
            rdf:predicate rdf:type ;
            rdf:subject ex:JohnDoe ],
        [ rdf:object "12345" ;
            rdf:predicate person:zipCode ;
            rdf:subject ex:JohnDoe ],
        [ rdf:object "Doe" ;
            rdf:predicate person:lastName ;
            rdf:subject ex:JohnDoe ],
        [ rdf:object "John" ;
            rdf:predicate person:firstName ;
            rdf:subject ex:JohnDoe ] .

ex:JohnDoeAddress a schema1:PostalAddress ;
    rdfs:label "John Doe's address" ;
    schema1:postalCode "12345" .

ex:JohnDoe a schema1:Person ;
    rdfs:label "John doe" ;
    schema1:address ex:JohnDoeAddress ;
    schema1:familyName "Doe" ;
    schema1:givenName "John" .

