## GRCh38 VEP 115.2 annotation config
##
## This annotation config is VEP installation-agnostic (works with native, Docker, or Apptainer).
## The installation method is specified in params.yaml via annotation_tool_cmd.

annotation_cmd: |
  ${params.bcftools_cmd} view ${INPUT_BCF} | \
  ${params.annotation_tool_cmd} \
    --offline \
    --buffer_size ${params.vep_buffer} \
    --fork ${params.vep_forks} \
    --cache \
    --dir_cache ${params.vep_cache} \
    -i stdin \
    -o stdout \
    --format vcf \
    --assembly GRCh38 \
    --canonical \
    --symbol \
    --protein \
    --biotype \
    --tsl \
    --hgvs \
    --variant_class \
    --sift b \
    --polyphen b \
    --stats_file ${AUXILIARY_DIR}/vep_stats.html \
    --warning_file ${AUXILIARY_DIR}/vep_warnings.txt \
    --verbose 2> ${AUXILIARY_DIR}/vep_stderr.txt | \
  ${params.bcftools_cmd} view -o ${OUTPUT_BCF} -Ob --write-index

must_contain_info_tag: CSQ
required_tool_version: "115.2"

optional_checks:
  vep_cache_version: "115"
  genome_build: "GRCh38"
