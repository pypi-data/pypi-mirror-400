from abc import ABCMeta, abstractmethod

from pyomo.common.timing import HierarchicalTimer as HierarchicalTimer
from pyomo.contrib.pynumero.interfaces import ampl_nlp as ampl_nlp
from pyomo.contrib.pynumero.interfaces import pyomo_nlp as pyomo_nlp
from pyomo.contrib.pynumero.sparse import BlockMatrix as BlockMatrix
from pyomo.contrib.pynumero.sparse import BlockVector as BlockVector

class BaseInteriorPointInterface(metaclass=ABCMeta):
    @abstractmethod
    def n_primals(self): ...
    @abstractmethod
    def nnz_hessian_lag(self): ...
    @abstractmethod
    def primals_lb(self): ...
    @abstractmethod
    def primals_ub(self): ...
    @abstractmethod
    def init_primals(self): ...
    @abstractmethod
    def set_primals(self, primals): ...
    @abstractmethod
    def get_primals(self): ...
    @abstractmethod
    def get_obj_factor(self): ...
    @abstractmethod
    def set_obj_factor(self, obj_factor): ...
    @abstractmethod
    def evaluate_objective(self): ...
    @abstractmethod
    def evaluate_grad_objective(self): ...
    @abstractmethod
    def n_eq_constraints(self): ...
    @abstractmethod
    def n_ineq_constraints(self): ...
    @abstractmethod
    def nnz_jacobian_eq(self): ...
    @abstractmethod
    def nnz_jacobian_ineq(self): ...
    @abstractmethod
    def ineq_lb(self): ...
    @abstractmethod
    def ineq_ub(self): ...
    @abstractmethod
    def init_duals_eq(self): ...
    @abstractmethod
    def init_duals_ineq(self): ...
    @abstractmethod
    def set_duals_eq(self, duals_eq): ...
    @abstractmethod
    def set_duals_ineq(self, duals_ineq): ...
    @abstractmethod
    def get_duals_eq(self): ...
    @abstractmethod
    def get_duals_ineq(self): ...
    @abstractmethod
    def evaluate_eq_constraints(self): ...
    @abstractmethod
    def evaluate_ineq_constraints(self): ...
    @abstractmethod
    def evaluate_jacobian_eq(self): ...
    @abstractmethod
    def evaluate_jacobian_ineq(self): ...
    @abstractmethod
    def init_slacks(self): ...
    @abstractmethod
    def init_duals_primals_lb(self): ...
    @abstractmethod
    def init_duals_primals_ub(self): ...
    @abstractmethod
    def init_duals_slacks_lb(self): ...
    @abstractmethod
    def init_duals_slacks_ub(self): ...
    @abstractmethod
    def set_slacks(self, slacks): ...
    @abstractmethod
    def set_duals_primals_lb(self, duals): ...
    @abstractmethod
    def set_duals_primals_ub(self, duals): ...
    @abstractmethod
    def set_duals_slacks_lb(self, duals): ...
    @abstractmethod
    def set_duals_slacks_ub(self, duals): ...
    @abstractmethod
    def get_slacks(self): ...
    @abstractmethod
    def get_duals_primals_lb(self): ...
    @abstractmethod
    def get_duals_primals_ub(self): ...
    @abstractmethod
    def get_duals_slacks_lb(self): ...
    @abstractmethod
    def get_duals_slacks_ub(self): ...
    @abstractmethod
    def set_barrier_parameter(self, barrier): ...
    @abstractmethod
    def evaluate_primal_dual_kkt_matrix(self, timer=None): ...
    @abstractmethod
    def evaluate_primal_dual_kkt_rhs(self, timer=None): ...
    @abstractmethod
    def set_primal_dual_kkt_solution(self, sol): ...
    @abstractmethod
    def get_delta_primals(self): ...
    @abstractmethod
    def get_delta_slacks(self): ...
    @abstractmethod
    def get_delta_duals_eq(self): ...
    @abstractmethod
    def get_delta_duals_ineq(self): ...
    @abstractmethod
    def get_delta_duals_primals_lb(self): ...
    @abstractmethod
    def get_delta_duals_primals_ub(self): ...
    @abstractmethod
    def get_delta_duals_slacks_lb(self): ...
    @abstractmethod
    def get_delta_duals_slacks_ub(self): ...
    def regularize_equality_gradient(self, kkt, coef, copy_kkt: bool = True) -> None: ...
    def regularize_hessian(self, kkt, coef, copy_kkt: bool = True) -> None: ...

class InteriorPointInterface(BaseInteriorPointInterface):
    def __init__(self, pyomo_model) -> None: ...
    def n_primals(self): ...
    def nnz_hessian_lag(self): ...
    def set_obj_factor(self, obj_factor) -> None: ...
    def get_obj_factor(self): ...
    def n_eq_constraints(self): ...
    def n_ineq_constraints(self): ...
    def nnz_jacobian_eq(self): ...
    def nnz_jacobian_ineq(self): ...
    def init_primals(self): ...
    def init_slacks(self): ...
    def init_duals_eq(self): ...
    def init_duals_ineq(self): ...
    def init_duals_primals_lb(self): ...
    def init_duals_primals_ub(self): ...
    def init_duals_slacks_lb(self): ...
    def init_duals_slacks_ub(self): ...
    def set_primals(self, primals) -> None: ...
    def set_slacks(self, slacks) -> None: ...
    def set_duals_eq(self, duals) -> None: ...
    def set_duals_ineq(self, duals) -> None: ...
    def set_duals_primals_lb(self, duals) -> None: ...
    def set_duals_primals_ub(self, duals) -> None: ...
    def set_duals_slacks_lb(self, duals) -> None: ...
    def set_duals_slacks_ub(self, duals) -> None: ...
    def get_primals(self): ...
    def get_slacks(self): ...
    def get_duals_eq(self): ...
    def get_duals_ineq(self): ...
    def get_duals_primals_lb(self): ...
    def get_duals_primals_ub(self): ...
    def get_duals_slacks_lb(self): ...
    def get_duals_slacks_ub(self): ...
    def primals_lb(self): ...
    def primals_ub(self): ...
    def ineq_lb(self): ...
    def ineq_ub(self): ...
    def set_barrier_parameter(self, barrier) -> None: ...
    def pyomo_nlp(self): ...
    def evaluate_primal_dual_kkt_matrix(self, timer=None): ...
    def evaluate_primal_dual_kkt_rhs(self, timer=None): ...
    def set_primal_dual_kkt_solution(self, sol) -> None: ...
    def get_delta_primals(self): ...
    def get_delta_slacks(self): ...
    def get_delta_duals_eq(self): ...
    def get_delta_duals_ineq(self): ...
    def get_delta_duals_primals_lb(self): ...
    def get_delta_duals_primals_ub(self): ...
    def get_delta_duals_slacks_lb(self): ...
    def get_delta_duals_slacks_ub(self): ...
    def evaluate_objective(self): ...
    def evaluate_eq_constraints(self): ...
    def evaluate_ineq_constraints(self): ...
    def evaluate_grad_objective(self): ...
    def evaluate_jacobian_eq(self): ...
    def evaluate_jacobian_ineq(self): ...
    def regularize_equality_gradient(self, kkt, coef, copy_kkt: bool = True): ...
    def regularize_hessian(self, kkt, coef, copy_kkt: bool = True): ...
    def load_primals_into_pyomo_model(self) -> None: ...
    def pyomo_model(self): ...
    def get_pyomo_variables(self): ...
    def get_pyomo_constraints(self): ...
    def variable_names(self): ...
    def constraint_names(self): ...
    def get_primal_indices(self, pyomo_variables): ...
    def get_constraint_indices(self, pyomo_constraints): ...
