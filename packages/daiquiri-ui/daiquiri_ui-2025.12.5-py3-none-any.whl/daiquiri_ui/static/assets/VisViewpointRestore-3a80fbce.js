var ve=Object.defineProperty;var _e=(n,i,o)=>i in n?ve(n,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[i]=o;var at=(n,i,o)=>(_e(n,typeof i!="symbol"?i+"":i,o),o);import{r as qt,bO as D,l as ft,an as Jt,ac as Ht,bP as Se}from"./index-4cf586ed.js";import{v as Kt,x as Ae}from"./index-19c84627.js";import{h as Fe,o as Ie,q as Ue}from"./hooks-e7539055.js";function be(n){qt.useEffect(()=>{n()},[])}window.global||(window.global=window);var Zt={},G={},At,zt;function Te(){return zt||(zt=1,At=function(n){n.prototype[Symbol.iterator]=function*(){for(let i=this.head;i;i=i.next)yield i.value}}),At}var Re=_;_.Node=Q;_.create=_;function _(n){var i=this;if(i instanceof _||(i=new _),i.tail=null,i.head=null,i.length=0,n&&typeof n.forEach=="function")n.forEach(function(f){i.push(f)});else if(arguments.length>0)for(var o=0,s=arguments.length;o<s;o++)i.push(arguments[o]);return i}_.prototype.removeNode=function(n){if(n.list!==this)throw new Error("removing node which does not belong to this list");var i=n.next,o=n.prev;return i&&(i.prev=o),o&&(o.next=i),n===this.head&&(this.head=i),n===this.tail&&(this.tail=o),n.list.length--,n.next=null,n.prev=null,n.list=null,i};_.prototype.unshiftNode=function(n){if(n!==this.head){n.list&&n.list.removeNode(n);var i=this.head;n.list=this,n.next=i,i&&(i.prev=n),this.head=n,this.tail||(this.tail=n),this.length++}};_.prototype.pushNode=function(n){if(n!==this.tail){n.list&&n.list.removeNode(n);var i=this.tail;n.list=this,n.prev=i,i&&(i.next=n),this.tail=n,this.head||(this.head=n),this.length++}};_.prototype.push=function(){for(var n=0,i=arguments.length;n<i;n++)De(this,arguments[n]);return this.length};_.prototype.unshift=function(){for(var n=0,i=arguments.length;n<i;n++)Pe(this,arguments[n]);return this.length};_.prototype.pop=function(){if(this.tail){var n=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,n}};_.prototype.shift=function(){if(this.head){var n=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,n}};_.prototype.forEach=function(n,i){i=i||this;for(var o=this.head,s=0;o!==null;s++)n.call(i,o.value,s,this),o=o.next};_.prototype.forEachReverse=function(n,i){i=i||this;for(var o=this.tail,s=this.length-1;o!==null;s--)n.call(i,o.value,s,this),o=o.prev};_.prototype.get=function(n){for(var i=0,o=this.head;o!==null&&i<n;i++)o=o.next;if(i===n&&o!==null)return o.value};_.prototype.getReverse=function(n){for(var i=0,o=this.tail;o!==null&&i<n;i++)o=o.prev;if(i===n&&o!==null)return o.value};_.prototype.map=function(n,i){i=i||this;for(var o=new _,s=this.head;s!==null;)o.push(n.call(i,s.value,this)),s=s.next;return o};_.prototype.mapReverse=function(n,i){i=i||this;for(var o=new _,s=this.tail;s!==null;)o.push(n.call(i,s.value,this)),s=s.prev;return o};_.prototype.reduce=function(n,i){var o,s=this.head;if(arguments.length>1)o=i;else if(this.head)s=this.head.next,o=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var f=0;s!==null;f++)o=n(o,s.value,f),s=s.next;return o};_.prototype.reduceReverse=function(n,i){var o,s=this.tail;if(arguments.length>1)o=i;else if(this.tail)s=this.tail.prev,o=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var f=this.length-1;s!==null;f--)o=n(o,s.value,f),s=s.prev;return o};_.prototype.toArray=function(){for(var n=new Array(this.length),i=0,o=this.head;o!==null;i++)n[i]=o.value,o=o.next;return n};_.prototype.toArrayReverse=function(){for(var n=new Array(this.length),i=0,o=this.tail;o!==null;i++)n[i]=o.value,o=o.prev;return n};_.prototype.slice=function(n,i){i=i||this.length,i<0&&(i+=this.length),n=n||0,n<0&&(n+=this.length);var o=new _;if(i<n||i<0)return o;n<0&&(n=0),i>this.length&&(i=this.length);for(var s=0,f=this.head;f!==null&&s<n;s++)f=f.next;for(;f!==null&&s<i;s++,f=f.next)o.push(f.value);return o};_.prototype.sliceReverse=function(n,i){i=i||this.length,i<0&&(i+=this.length),n=n||0,n<0&&(n+=this.length);var o=new _;if(i<n||i<0)return o;n<0&&(n=0),i>this.length&&(i=this.length);for(var s=this.length,f=this.tail;f!==null&&s>i;s--)f=f.prev;for(;f!==null&&s>n;s--,f=f.prev)o.push(f.value);return o};_.prototype.splice=function(n,i,...o){n>this.length&&(n=this.length-1),n<0&&(n=this.length+n);for(var s=0,f=this.head;f!==null&&s<n;s++)f=f.next;for(var y=[],s=0;f&&s<i;s++)y.push(f.value),f=this.removeNode(f);f===null&&(f=this.tail),f!==this.head&&f!==this.tail&&(f=f.prev);for(var s=0;s<o.length;s++)f=Ce(this,f,o[s]);return y};_.prototype.reverse=function(){for(var n=this.head,i=this.tail,o=n;o!==null;o=o.prev){var s=o.prev;o.prev=o.next,o.next=s}return this.head=i,this.tail=n,this};function Ce(n,i,o){var s=i===n.head?new Q(o,null,i,n):new Q(o,i,i.next,n);return s.next===null&&(n.tail=s),s.prev===null&&(n.head=s),n.length++,s}function De(n,i){n.tail=new Q(i,n.tail,null,n),n.head||(n.head=n.tail),n.length++}function Pe(n,i){n.head=new Q(i,null,n.head,n),n.tail||(n.tail=n.head),n.length++}function Q(n,i,o,s){if(!(this instanceof Q))return new Q(n,i,o,s);this.list=s,this.value=n,i?(i.next=this,this.prev=i):this.prev=null,o?(o.prev=this,this.next=o):this.next=null}try{Te()(_)}catch{}const Oe=Re,K=Symbol("max"),X=Symbol("length"),rt=Symbol("lengthCalculator"),ht=Symbol("allowStale"),Z=Symbol("maxAge"),W=Symbol("dispose"),Yt=Symbol("noDisposeOnSet"),N=Symbol("lruList"),H=Symbol("cache"),Qt=Symbol("updateAgeOnGet"),Ft=()=>1;class Ne{constructor(i){if(typeof i=="number"&&(i={max:i}),i||(i={}),i.max&&(typeof i.max!="number"||i.max<0))throw new TypeError("max must be a non-negative number");this[K]=i.max||1/0;const o=i.length||Ft;if(this[rt]=typeof o!="function"?Ft:o,this[ht]=i.stale||!1,i.maxAge&&typeof i.maxAge!="number")throw new TypeError("maxAge must be a number");this[Z]=i.maxAge||0,this[W]=i.dispose,this[Yt]=i.noDisposeOnSet||!1,this[Qt]=i.updateAgeOnGet||!1,this.reset()}set max(i){if(typeof i!="number"||i<0)throw new TypeError("max must be a non-negative number");this[K]=i||1/0,st(this)}get max(){return this[K]}set allowStale(i){this[ht]=!!i}get allowStale(){return this[ht]}set maxAge(i){if(typeof i!="number")throw new TypeError("maxAge must be a non-negative number");this[Z]=i,st(this)}get maxAge(){return this[Z]}set lengthCalculator(i){typeof i!="function"&&(i=Ft),i!==this[rt]&&(this[rt]=i,this[X]=0,this[N].forEach(o=>{o.length=this[rt](o.value,o.key),this[X]+=o.length})),st(this)}get lengthCalculator(){return this[rt]}get length(){return this[X]}get itemCount(){return this[N].length}rforEach(i,o){o=o||this;for(let s=this[N].tail;s!==null;){const f=s.prev;Wt(this,i,s,o),s=f}}forEach(i,o){o=o||this;for(let s=this[N].head;s!==null;){const f=s.next;Wt(this,i,s,o),s=f}}keys(){return this[N].toArray().map(i=>i.key)}values(){return this[N].toArray().map(i=>i.value)}reset(){this[W]&&this[N]&&this[N].length&&this[N].forEach(i=>this[W](i.key,i.value)),this[H]=new Map,this[N]=new Oe,this[X]=0}dump(){return this[N].map(i=>dt(this,i)?!1:{k:i.key,v:i.value,e:i.now+(i.maxAge||0)}).toArray().filter(i=>i)}dumpLru(){return this[N]}set(i,o,s){if(s=s||this[Z],s&&typeof s!="number")throw new TypeError("maxAge must be a number");const f=s?Date.now():0,y=this[rt](o,i);if(this[H].has(i)){if(y>this[K])return ut(this,this[H].get(i)),!1;const d=this[H].get(i).value;return this[W]&&(this[Yt]||this[W](i,d.value)),d.now=f,d.maxAge=s,d.value=o,this[X]+=y-d.length,d.length=y,this.get(i),st(this),!0}const p=new Me(i,o,y,f,s);return p.length>this[K]?(this[W]&&this[W](i,o),!1):(this[X]+=p.length,this[N].unshift(p),this[H].set(i,this[N].head),st(this),!0)}has(i){if(!this[H].has(i))return!1;const o=this[H].get(i).value;return!dt(this,o)}get(i){return It(this,i,!0)}peek(i){return It(this,i,!1)}pop(){const i=this[N].tail;return i?(ut(this,i),i.value):null}del(i){ut(this,this[H].get(i))}load(i){this.reset();const o=Date.now();for(let s=i.length-1;s>=0;s--){const f=i[s],y=f.e||0;if(y===0)this.set(f.k,f.v);else{const p=y-o;p>0&&this.set(f.k,f.v,p)}}}prune(){this[H].forEach((i,o)=>It(this,o,!1))}}const It=(n,i,o)=>{const s=n[H].get(i);if(s){const f=s.value;if(dt(n,f)){if(ut(n,s),!n[ht])return}else o&&(n[Qt]&&(s.value.now=Date.now()),n[N].unshiftNode(s));return f.value}},dt=(n,i)=>{if(!i||!i.maxAge&&!n[Z])return!1;const o=Date.now()-i.now;return i.maxAge?o>i.maxAge:n[Z]&&o>n[Z]},st=n=>{if(n[X]>n[K])for(let i=n[N].tail;n[X]>n[K]&&i!==null;){const o=i.prev;ut(n,i),i=o}},ut=(n,i)=>{if(i){const o=i.value;n[W]&&n[W](o.key,o.value),n[X]-=o.length,n[H].delete(o.key),n[N].removeNode(i)}};class Me{constructor(i,o,s,f,y){this.key=i,this.value=o,this.length=s,this.now=f,this.maxAge=y||0}}const Wt=(n,i,o,s)=>{let f=o.value;dt(n,f)&&(ut(n,o),n[ht]||(f=void 0)),f&&i.call(s,f.value,f.key,n)};var Le=Ne,ct={};Object.defineProperty(ct,"__esModule",{value:!0});ct.isBrowser=void 0;var $e=function(){return typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"};ct.isBrowser=$e;var gt=D&&D.__assign||function(){return gt=Object.assign||function(n){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&(n[f]=i[f])}return n},gt.apply(this,arguments)},je=D&&D.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(G,"__esModule",{value:!0});G.createSuspenseFetch=G.peek=G.preload=G.refresh=void 0;var kt=je(Le),Ge=ct,te={max:500,maxAge:1e3*60*60},Et=new kt.default(te);Ge.isBrowser();var wt=function(n){var i=n.promiseFn,o=n.cache,s=n.key,f=n.preload,y=f===void 0?!1:f,p=n.lifeSpan,a=p===void 0?0:p,d=o.get(s);if(d){if(y)return;if(d!=null&&d.error)throw d.error;if(d!=null&&d.response)return d.response;throw d==null?void 0:d.promise}var x={key:s,promise:i().then(function(v){v?x.response=v:x.response=!0}).catch(function(v){v?x.error=v:x.error="unknown error"}).then(function(){a>0&&setTimeout(function(){o.has(s)&&o.del(s)},a)})};if(o.set(s,x),!y)throw x.promise};function xt(n,i,o){return o===void 0&&(o={}),wt({promiseFn:i,cache:Et,key:n,lifeSpan:o.lifeSpan||xt.lifeSpan})}G.default=xt;xt.lifeSpan=0;function Ve(n){return ee(Et,n)}G.refresh=Ve;function He(n,i){wt({promiseFn:i,cache:Et,key:n,preload:!0,lifeSpan:xt.lifeSpan})}G.preload=He;function ze(n){var i;return(i=Et.get(n))===null||i===void 0?void 0:i.response}G.peek=ze;function ee(n,i){i===void 0?n.reset():n.has(i)&&n.del(i)}function Ye(n,i){n===void 0&&(n=0),i===void 0&&(i={});var o=gt(gt({},te),i),s=new kt.default(o);return{fetch:function(f,y){return wt({promiseFn:y,cache:s,key:f,lifeSpan:n})},preload:function(f,y){return void wt({promiseFn:y,cache:s,key:f,preload:!0,lifeSpan:n})},refresh:function(f){return ee(s,f)},peek:function(f){var y;return(y=s.get(f))===null||y===void 0?void 0:y.response},getCache:function(){return s}}}G.createSuspenseFetch=Ye;var re={},Tt={exports:{}},Rt={exports:{}},ne={},Bt={};Bt.byteLength=qe;Bt.toByteArray=Ke;Bt.fromByteArray=ke;var Y=[],j=[],We=typeof Uint8Array<"u"?Uint8Array:Array,Ut="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var nt=0,Xe=Ut.length;nt<Xe;++nt)Y[nt]=Ut[nt],j[Ut.charCodeAt(nt)]=nt;j["-".charCodeAt(0)]=62;j["_".charCodeAt(0)]=63;function ie(n){var i=n.length;if(i%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=n.indexOf("=");o===-1&&(o=i);var s=o===i?0:4-o%4;return[o,s]}function qe(n){var i=ie(n),o=i[0],s=i[1];return(o+s)*3/4-s}function Je(n,i,o){return(i+o)*3/4-o}function Ke(n){var i,o=ie(n),s=o[0],f=o[1],y=new We(Je(n,s,f)),p=0,a=f>0?s-4:s,d;for(d=0;d<a;d+=4)i=j[n.charCodeAt(d)]<<18|j[n.charCodeAt(d+1)]<<12|j[n.charCodeAt(d+2)]<<6|j[n.charCodeAt(d+3)],y[p++]=i>>16&255,y[p++]=i>>8&255,y[p++]=i&255;return f===2&&(i=j[n.charCodeAt(d)]<<2|j[n.charCodeAt(d+1)]>>4,y[p++]=i&255),f===1&&(i=j[n.charCodeAt(d)]<<10|j[n.charCodeAt(d+1)]<<4|j[n.charCodeAt(d+2)]>>2,y[p++]=i>>8&255,y[p++]=i&255),y}function Ze(n){return Y[n>>18&63]+Y[n>>12&63]+Y[n>>6&63]+Y[n&63]}function Qe(n,i,o){for(var s,f=[],y=i;y<o;y+=3)s=(n[y]<<16&16711680)+(n[y+1]<<8&65280)+(n[y+2]&255),f.push(Ze(s));return f.join("")}function ke(n){for(var i,o=n.length,s=o%3,f=[],y=16383,p=0,a=o-s;p<a;p+=y)f.push(Qe(n,p,p+y>a?a:p+y));return s===1?(i=n[o-1],f.push(Y[i>>2]+Y[i<<4&63]+"==")):s===2&&(i=(n[o-2]<<8)+n[o-1],f.push(Y[i>>10]+Y[i>>4&63]+Y[i<<2&63]+"=")),f.join("")}var Ct={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ct.read=function(n,i,o,s,f){var y,p,a=f*8-s-1,d=(1<<a)-1,x=d>>1,v=-7,S=o?f-1:0,C=o?-1:1,F=n[i+S];for(S+=C,y=F&(1<<-v)-1,F>>=-v,v+=a;v>0;y=y*256+n[i+S],S+=C,v-=8);for(p=y&(1<<-v)-1,y>>=-v,v+=s;v>0;p=p*256+n[i+S],S+=C,v-=8);if(y===0)y=1-x;else{if(y===d)return p?NaN:(F?-1:1)*(1/0);p=p+Math.pow(2,s),y=y-x}return(F?-1:1)*p*Math.pow(2,y-s)};Ct.write=function(n,i,o,s,f,y){var p,a,d,x=y*8-f-1,v=(1<<x)-1,S=v>>1,C=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=s?0:y-1,M=s?1:-1,I=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(a=isNaN(i)?1:0,p=v):(p=Math.floor(Math.log(i)/Math.LN2),i*(d=Math.pow(2,-p))<1&&(p--,d*=2),p+S>=1?i+=C/d:i+=C*Math.pow(2,1-S),i*d>=2&&(p++,d/=2),p+S>=v?(a=0,p=v):p+S>=1?(a=(i*d-1)*Math.pow(2,f),p=p+S):(a=i*Math.pow(2,S-1)*Math.pow(2,f),p=0));f>=8;n[o+F]=a&255,F+=M,a/=256,f-=8);for(p=p<<f|a,x+=f;x>0;n[o+F]=p&255,F+=M,p/=256,x-=8);n[o+F-M]|=I*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const i=Bt,o=Ct,s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=g,n.INSPECT_MAX_BYTES=50;const f=2147483647;n.kMaxLength=f,a.TYPED_ARRAY_SUPPORT=y(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function y(){try{const r=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(r,t),r.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function p(r){if(r>f)throw new RangeError('The value "'+r+'" is invalid for option "size"');const t=new Uint8Array(r);return Object.setPrototypeOf(t,a.prototype),t}function a(r,t,e){if(typeof r=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(r)}return d(r,t,e)}a.poolSize=8192;function d(r,t,e){if(typeof r=="string")return C(r,t);if(ArrayBuffer.isView(r))return M(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(z(r,ArrayBuffer)||r&&z(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(z(r,SharedArrayBuffer)||r&&z(r.buffer,SharedArrayBuffer)))return I(r,t,e);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const u=r.valueOf&&r.valueOf();if(u!=null&&u!==r)return a.from(u,t,e);const h=w(r);if(h)return h;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return a.from(r[Symbol.toPrimitive]("string"),t,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}a.from=function(r,t,e){return d(r,t,e)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function x(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function v(r,t,e){return x(r),r<=0?p(r):t!==void 0?typeof e=="string"?p(r).fill(t,e):p(r).fill(t):p(r)}a.alloc=function(r,t,e){return v(r,t,e)};function S(r){return x(r),p(r<0?0:m(r)|0)}a.allocUnsafe=function(r){return S(r)},a.allocUnsafeSlow=function(r){return S(r)};function C(r,t){if((typeof t!="string"||t==="")&&(t="utf8"),!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const e=E(r,t)|0;let u=p(e);const h=u.write(r,t);return h!==e&&(u=u.slice(0,h)),u}function F(r){const t=r.length<0?0:m(r.length)|0,e=p(t);for(let u=0;u<t;u+=1)e[u]=r[u]&255;return e}function M(r){if(z(r,Uint8Array)){const t=new Uint8Array(r);return I(t.buffer,t.byteOffset,t.byteLength)}return F(r)}function I(r,t,e){if(t<0||r.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<t+(e||0))throw new RangeError('"length" is outside of buffer bounds');let u;return t===void 0&&e===void 0?u=new Uint8Array(r):e===void 0?u=new Uint8Array(r,t):u=new Uint8Array(r,t,e),Object.setPrototypeOf(u,a.prototype),u}function w(r){if(a.isBuffer(r)){const t=m(r.length)|0,e=p(t);return e.length===0||r.copy(e,0,0,t),e}if(r.length!==void 0)return typeof r.length!="number"||St(r.length)?p(0):F(r);if(r.type==="Buffer"&&Array.isArray(r.data))return F(r.data)}function m(r){if(r>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return r|0}function g(r){return+r!=r&&(r=0),a.alloc(+r)}a.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==a.prototype},a.compare=function(t,e){if(z(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),z(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let u=t.length,h=e.length;for(let c=0,l=Math.min(u,h);c<l;++c)if(t[c]!==e[c]){u=t[c],h=e[c];break}return u<h?-1:h<u?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return a.alloc(0);let u;if(e===void 0)for(e=0,u=0;u<t.length;++u)e+=t[u].length;const h=a.allocUnsafe(e);let c=0;for(u=0;u<t.length;++u){let l=t[u];if(z(l,Uint8Array))c+l.length>h.length?(a.isBuffer(l)||(l=a.from(l)),l.copy(h,c)):Uint8Array.prototype.set.call(h,l,c);else if(a.isBuffer(l))l.copy(h,c);else throw new TypeError('"list" argument must be an Array of Buffers');c+=l.length}return h};function E(r,t){if(a.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||z(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);const e=r.length,u=arguments.length>2&&arguments[2]===!0;if(!u&&e===0)return 0;let h=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return _t(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return Vt(r).length;default:if(h)return u?-1:_t(r).length;t=(""+t).toLowerCase(),h=!0}}a.byteLength=E;function P(r,t,e){let u=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(r||(r="utf8");;)switch(r){case"hex":return pe(this,t,e);case"utf8":case"utf-8":return Dt(this,t,e);case"ascii":return ce(this,t,e);case"latin1":case"binary":return le(this,t,e);case"base64":return he(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,t,e);default:if(u)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),u=!0}}a.prototype._isBuffer=!0;function R(r,t,e){const u=r[t];r[t]=r[e],r[e]=u}a.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)R(this,e,e+1);return this},a.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)R(this,e,e+3),R(this,e+1,e+2);return this},a.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)R(this,e,e+7),R(this,e+1,e+6),R(this,e+2,e+5),R(this,e+3,e+4);return this},a.prototype.toString=function(){const t=this.length;return t===0?"":arguments.length===0?Dt(this,0,t):P.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:a.compare(this,t)===0},a.prototype.inspect=function(){let t="";const e=n.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(t,e,u,h,c){if(z(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(e===void 0&&(e=0),u===void 0&&(u=t?t.length:0),h===void 0&&(h=0),c===void 0&&(c=this.length),e<0||u>t.length||h<0||c>this.length)throw new RangeError("out of range index");if(h>=c&&e>=u)return 0;if(h>=c)return-1;if(e>=u)return 1;if(e>>>=0,u>>>=0,h>>>=0,c>>>=0,this===t)return 0;let l=c-h,B=u-e;const b=Math.min(l,B),U=this.slice(h,c),T=t.slice(e,u);for(let A=0;A<b;++A)if(U[A]!==T[A]){l=U[A],B=T[A];break}return l<B?-1:B<l?1:0};function $(r,t,e,u,h){if(r.length===0)return-1;if(typeof e=="string"?(u=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,St(e)&&(e=h?0:r.length-1),e<0&&(e=r.length+e),e>=r.length){if(h)return-1;e=r.length-1}else if(e<0)if(h)e=0;else return-1;if(typeof t=="string"&&(t=a.from(t,u)),a.isBuffer(t))return t.length===0?-1:J(r,t,e,u,h);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?h?Uint8Array.prototype.indexOf.call(r,t,e):Uint8Array.prototype.lastIndexOf.call(r,t,e):J(r,[t],e,u,h);throw new TypeError("val must be string, number or Buffer")}function J(r,t,e,u,h){let c=1,l=r.length,B=t.length;if(u!==void 0&&(u=String(u).toLowerCase(),u==="ucs2"||u==="ucs-2"||u==="utf16le"||u==="utf-16le")){if(r.length<2||t.length<2)return-1;c=2,l/=2,B/=2,e/=2}function b(T,A){return c===1?T[A]:T.readUInt16BE(A*c)}let U;if(h){let T=-1;for(U=e;U<l;U++)if(b(r,U)===b(t,T===-1?0:U-T)){if(T===-1&&(T=U),U-T+1===B)return T*c}else T!==-1&&(U-=U-T),T=-1}else for(e+B>l&&(e=l-B),U=e;U>=0;U--){let T=!0;for(let A=0;A<B;A++)if(b(r,U+A)!==b(t,A)){T=!1;break}if(T)return U}return-1}a.prototype.includes=function(t,e,u){return this.indexOf(t,e,u)!==-1},a.prototype.indexOf=function(t,e,u){return $(this,t,e,u,!0)},a.prototype.lastIndexOf=function(t,e,u){return $(this,t,e,u,!1)};function k(r,t,e,u){e=Number(e)||0;const h=r.length-e;u?(u=Number(u),u>h&&(u=h)):u=h;const c=t.length;u>c/2&&(u=c/2);let l;for(l=0;l<u;++l){const B=parseInt(t.substr(l*2,2),16);if(St(B))return l;r[e+l]=B}return l}function ue(r,t,e,u){return lt(_t(t,r.length-e),r,e,u)}function oe(r,t,e,u){return lt(me(t),r,e,u)}function ae(r,t,e,u){return lt(Vt(t),r,e,u)}function se(r,t,e,u){return lt(Ee(t,r.length-e),r,e,u)}a.prototype.write=function(t,e,u,h){if(e===void 0)h="utf8",u=this.length,e=0;else if(u===void 0&&typeof e=="string")h=e,u=this.length,e=0;else if(isFinite(e))e=e>>>0,isFinite(u)?(u=u>>>0,h===void 0&&(h="utf8")):(h=u,u=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const c=this.length-e;if((u===void 0||u>c)&&(u=c),t.length>0&&(u<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");let l=!1;for(;;)switch(h){case"hex":return k(this,t,e,u);case"utf8":case"utf-8":return ue(this,t,e,u);case"ascii":case"latin1":case"binary":return oe(this,t,e,u);case"base64":return ae(this,t,e,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,t,e,u);default:if(l)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),l=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function he(r,t,e){return t===0&&e===r.length?i.fromByteArray(r):i.fromByteArray(r.slice(t,e))}function Dt(r,t,e){e=Math.min(r.length,e);const u=[];let h=t;for(;h<e;){const c=r[h];let l=null,B=c>239?4:c>223?3:c>191?2:1;if(h+B<=e){let b,U,T,A;switch(B){case 1:c<128&&(l=c);break;case 2:b=r[h+1],(b&192)===128&&(A=(c&31)<<6|b&63,A>127&&(l=A));break;case 3:b=r[h+1],U=r[h+2],(b&192)===128&&(U&192)===128&&(A=(c&15)<<12|(b&63)<<6|U&63,A>2047&&(A<55296||A>57343)&&(l=A));break;case 4:b=r[h+1],U=r[h+2],T=r[h+3],(b&192)===128&&(U&192)===128&&(T&192)===128&&(A=(c&15)<<18|(b&63)<<12|(U&63)<<6|T&63,A>65535&&A<1114112&&(l=A))}}l===null?(l=65533,B=1):l>65535&&(l-=65536,u.push(l>>>10&1023|55296),l=56320|l&1023),u.push(l),h+=B}return fe(u)}const Pt=4096;function fe(r){const t=r.length;if(t<=Pt)return String.fromCharCode.apply(String,r);let e="",u=0;for(;u<t;)e+=String.fromCharCode.apply(String,r.slice(u,u+=Pt));return e}function ce(r,t,e){let u="";e=Math.min(r.length,e);for(let h=t;h<e;++h)u+=String.fromCharCode(r[h]&127);return u}function le(r,t,e){let u="";e=Math.min(r.length,e);for(let h=t;h<e;++h)u+=String.fromCharCode(r[h]);return u}function pe(r,t,e){const u=r.length;(!t||t<0)&&(t=0),(!e||e<0||e>u)&&(e=u);let h="";for(let c=t;c<e;++c)h+=xe[r[c]];return h}function ye(r,t,e){const u=r.slice(t,e);let h="";for(let c=0;c<u.length-1;c+=2)h+=String.fromCharCode(u[c]+u[c+1]*256);return h}a.prototype.slice=function(t,e){const u=this.length;t=~~t,e=e===void 0?u:~~e,t<0?(t+=u,t<0&&(t=0)):t>u&&(t=u),e<0?(e+=u,e<0&&(e=0)):e>u&&(e=u),e<t&&(e=t);const h=this.subarray(t,e);return Object.setPrototypeOf(h,a.prototype),h};function O(r,t,e){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+t>e)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(t,e,u){t=t>>>0,e=e>>>0,u||O(t,e,this.length);let h=this[t],c=1,l=0;for(;++l<e&&(c*=256);)h+=this[t+l]*c;return h},a.prototype.readUintBE=a.prototype.readUIntBE=function(t,e,u){t=t>>>0,e=e>>>0,u||O(t,e,this.length);let h=this[t+--e],c=1;for(;e>0&&(c*=256);)h+=this[t+--e]*c;return h},a.prototype.readUint8=a.prototype.readUInt8=function(t,e){return t=t>>>0,e||O(t,1,this.length),this[t]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(t,e){return t=t>>>0,e||O(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(t,e){return t=t>>>0,e||O(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(t,e){return t=t>>>0,e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(t,e){return t=t>>>0,e||O(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readBigUInt64LE=q(function(t){t=t>>>0,et(t,"offset");const e=this[t],u=this[t+7];(e===void 0||u===void 0)&&ot(t,this.length-8);const h=e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,c=this[++t]+this[++t]*2**8+this[++t]*2**16+u*2**24;return BigInt(h)+(BigInt(c)<<BigInt(32))}),a.prototype.readBigUInt64BE=q(function(t){t=t>>>0,et(t,"offset");const e=this[t],u=this[t+7];(e===void 0||u===void 0)&&ot(t,this.length-8);const h=e*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],c=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+u;return(BigInt(h)<<BigInt(32))+BigInt(c)}),a.prototype.readIntLE=function(t,e,u){t=t>>>0,e=e>>>0,u||O(t,e,this.length);let h=this[t],c=1,l=0;for(;++l<e&&(c*=256);)h+=this[t+l]*c;return c*=128,h>=c&&(h-=Math.pow(2,8*e)),h},a.prototype.readIntBE=function(t,e,u){t=t>>>0,e=e>>>0,u||O(t,e,this.length);let h=e,c=1,l=this[t+--h];for(;h>0&&(c*=256);)l+=this[t+--h]*c;return c*=128,l>=c&&(l-=Math.pow(2,8*e)),l},a.prototype.readInt8=function(t,e){return t=t>>>0,e||O(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},a.prototype.readInt16LE=function(t,e){t=t>>>0,e||O(t,2,this.length);const u=this[t]|this[t+1]<<8;return u&32768?u|4294901760:u},a.prototype.readInt16BE=function(t,e){t=t>>>0,e||O(t,2,this.length);const u=this[t+1]|this[t]<<8;return u&32768?u|4294901760:u},a.prototype.readInt32LE=function(t,e){return t=t>>>0,e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return t=t>>>0,e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readBigInt64LE=q(function(t){t=t>>>0,et(t,"offset");const e=this[t],u=this[t+7];(e===void 0||u===void 0)&&ot(t,this.length-8);const h=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(u<<24);return(BigInt(h)<<BigInt(32))+BigInt(e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)}),a.prototype.readBigInt64BE=q(function(t){t=t>>>0,et(t,"offset");const e=this[t],u=this[t+7];(e===void 0||u===void 0)&&ot(t,this.length-8);const h=(e<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(h)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+u)}),a.prototype.readFloatLE=function(t,e){return t=t>>>0,e||O(t,4,this.length),o.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return t=t>>>0,e||O(t,4,this.length),o.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return t=t>>>0,e||O(t,8,this.length),o.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return t=t>>>0,e||O(t,8,this.length),o.read(this,t,!1,52,8)};function L(r,t,e,u,h,c){if(!a.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>h||t<c)throw new RangeError('"value" argument is out of bounds');if(e+u>r.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(t,e,u,h){if(t=+t,e=e>>>0,u=u>>>0,!h){const B=Math.pow(2,8*u)-1;L(this,t,e,u,B,0)}let c=1,l=0;for(this[e]=t&255;++l<u&&(c*=256);)this[e+l]=t/c&255;return e+u},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(t,e,u,h){if(t=+t,e=e>>>0,u=u>>>0,!h){const B=Math.pow(2,8*u)-1;L(this,t,e,u,B,0)}let c=u-1,l=1;for(this[e+c]=t&255;--c>=0&&(l*=256);)this[e+c]=t/l&255;return e+u},a.prototype.writeUint8=a.prototype.writeUInt8=function(t,e,u){return t=+t,e=e>>>0,u||L(this,t,e,1,255,0),this[e]=t&255,e+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(t,e,u){return t=+t,e=e>>>0,u||L(this,t,e,2,65535,0),this[e]=t&255,this[e+1]=t>>>8,e+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(t,e,u){return t=+t,e=e>>>0,u||L(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=t&255,e+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(t,e,u){return t=+t,e=e>>>0,u||L(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255,e+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(t,e,u){return t=+t,e=e>>>0,u||L(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};function Ot(r,t,e,u,h){Gt(t,u,h,r,e,7);let c=Number(t&BigInt(4294967295));r[e++]=c,c=c>>8,r[e++]=c,c=c>>8,r[e++]=c,c=c>>8,r[e++]=c;let l=Number(t>>BigInt(32)&BigInt(4294967295));return r[e++]=l,l=l>>8,r[e++]=l,l=l>>8,r[e++]=l,l=l>>8,r[e++]=l,e}function Nt(r,t,e,u,h){Gt(t,u,h,r,e,7);let c=Number(t&BigInt(4294967295));r[e+7]=c,c=c>>8,r[e+6]=c,c=c>>8,r[e+5]=c,c=c>>8,r[e+4]=c;let l=Number(t>>BigInt(32)&BigInt(4294967295));return r[e+3]=l,l=l>>8,r[e+2]=l,l=l>>8,r[e+1]=l,l=l>>8,r[e]=l,e+8}a.prototype.writeBigUInt64LE=q(function(t,e=0){return Ot(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=q(function(t,e=0){return Nt(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(t,e,u,h){if(t=+t,e=e>>>0,!h){const b=Math.pow(2,8*u-1);L(this,t,e,u,b-1,-b)}let c=0,l=1,B=0;for(this[e]=t&255;++c<u&&(l*=256);)t<0&&B===0&&this[e+c-1]!==0&&(B=1),this[e+c]=(t/l>>0)-B&255;return e+u},a.prototype.writeIntBE=function(t,e,u,h){if(t=+t,e=e>>>0,!h){const b=Math.pow(2,8*u-1);L(this,t,e,u,b-1,-b)}let c=u-1,l=1,B=0;for(this[e+c]=t&255;--c>=0&&(l*=256);)t<0&&B===0&&this[e+c+1]!==0&&(B=1),this[e+c]=(t/l>>0)-B&255;return e+u},a.prototype.writeInt8=function(t,e,u){return t=+t,e=e>>>0,u||L(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=t&255,e+1},a.prototype.writeInt16LE=function(t,e,u){return t=+t,e=e>>>0,u||L(this,t,e,2,32767,-32768),this[e]=t&255,this[e+1]=t>>>8,e+2},a.prototype.writeInt16BE=function(t,e,u){return t=+t,e=e>>>0,u||L(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=t&255,e+2},a.prototype.writeInt32LE=function(t,e,u){return t=+t,e=e>>>0,u||L(this,t,e,4,2147483647,-2147483648),this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},a.prototype.writeInt32BE=function(t,e,u){return t=+t,e=e>>>0,u||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4},a.prototype.writeBigInt64LE=q(function(t,e=0){return Ot(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=q(function(t,e=0){return Nt(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Mt(r,t,e,u,h,c){if(e+u>r.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function Lt(r,t,e,u,h){return t=+t,e=e>>>0,h||Mt(r,t,e,4),o.write(r,t,e,u,23,4),e+4}a.prototype.writeFloatLE=function(t,e,u){return Lt(this,t,e,!0,u)},a.prototype.writeFloatBE=function(t,e,u){return Lt(this,t,e,!1,u)};function $t(r,t,e,u,h){return t=+t,e=e>>>0,h||Mt(r,t,e,8),o.write(r,t,e,u,52,8),e+8}a.prototype.writeDoubleLE=function(t,e,u){return $t(this,t,e,!0,u)},a.prototype.writeDoubleBE=function(t,e,u){return $t(this,t,e,!1,u)},a.prototype.copy=function(t,e,u,h){if(!a.isBuffer(t))throw new TypeError("argument should be a Buffer");if(u||(u=0),!h&&h!==0&&(h=this.length),e>=t.length&&(e=t.length),e||(e=0),h>0&&h<u&&(h=u),h===u||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(u<0||u>=this.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),t.length-e<h-u&&(h=t.length-e+u);const c=h-u;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(e,u,h):Uint8Array.prototype.set.call(t,this.subarray(u,h),e),c},a.prototype.fill=function(t,e,u,h){if(typeof t=="string"){if(typeof e=="string"?(h=e,e=0,u=this.length):typeof u=="string"&&(h=u,u=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!a.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(t.length===1){const l=t.charCodeAt(0);(h==="utf8"&&l<128||h==="latin1")&&(t=l)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(e<0||this.length<e||this.length<u)throw new RangeError("Out of range index");if(u<=e)return this;e=e>>>0,u=u===void 0?this.length:u>>>0,t||(t=0);let c;if(typeof t=="number")for(c=e;c<u;++c)this[c]=t;else{const l=a.isBuffer(t)?t:a.from(t,h),B=l.length;if(B===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(c=0;c<u-e;++c)this[c+e]=l[c%B]}return this};const tt={};function vt(r,t,e){tt[r]=class extends e{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(h){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:h,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}vt("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),vt("ERR_INVALID_ARG_TYPE",function(r,t){return`The "${r}" argument must be of type number. Received type ${typeof t}`},TypeError),vt("ERR_OUT_OF_RANGE",function(r,t,e){let u=`The value of "${r}" is out of range.`,h=e;return Number.isInteger(e)&&Math.abs(e)>2**32?h=jt(String(e)):typeof e=="bigint"&&(h=String(e),(e>BigInt(2)**BigInt(32)||e<-(BigInt(2)**BigInt(32)))&&(h=jt(h)),h+="n"),u+=` It must be ${t}. Received ${h}`,u},RangeError);function jt(r){let t="",e=r.length;const u=r[0]==="-"?1:0;for(;e>=u+4;e-=3)t=`_${r.slice(e-3,e)}${t}`;return`${r.slice(0,e)}${t}`}function de(r,t,e){et(t,"offset"),(r[t]===void 0||r[t+e]===void 0)&&ot(t,r.length-(e+1))}function Gt(r,t,e,u,h,c){if(r>e||r<t){const l=typeof t=="bigint"?"n":"";let B;throw c>3?t===0||t===BigInt(0)?B=`>= 0${l} and < 2${l} ** ${(c+1)*8}${l}`:B=`>= -(2${l} ** ${(c+1)*8-1}${l}) and < 2 ** ${(c+1)*8-1}${l}`:B=`>= ${t}${l} and <= ${e}${l}`,new tt.ERR_OUT_OF_RANGE("value",B,r)}de(u,h,c)}function et(r,t){if(typeof r!="number")throw new tt.ERR_INVALID_ARG_TYPE(t,"number",r)}function ot(r,t,e){throw Math.floor(r)!==r?(et(r,e),new tt.ERR_OUT_OF_RANGE(e||"offset","an integer",r)):t<0?new tt.ERR_BUFFER_OUT_OF_BOUNDS:new tt.ERR_OUT_OF_RANGE(e||"offset",`>= ${e?1:0} and <= ${t}`,r)}const ge=/[^+/0-9A-Za-z-_]/g;function we(r){if(r=r.split("=")[0],r=r.trim().replace(ge,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function _t(r,t){t=t||1/0;let e;const u=r.length;let h=null;const c=[];for(let l=0;l<u;++l){if(e=r.charCodeAt(l),e>55295&&e<57344){if(!h){if(e>56319){(t-=3)>-1&&c.push(239,191,189);continue}else if(l+1===u){(t-=3)>-1&&c.push(239,191,189);continue}h=e;continue}if(e<56320){(t-=3)>-1&&c.push(239,191,189),h=e;continue}e=(h-55296<<10|e-56320)+65536}else h&&(t-=3)>-1&&c.push(239,191,189);if(h=null,e<128){if((t-=1)<0)break;c.push(e)}else if(e<2048){if((t-=2)<0)break;c.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;c.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;c.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return c}function me(r){const t=[];for(let e=0;e<r.length;++e)t.push(r.charCodeAt(e)&255);return t}function Ee(r,t){let e,u,h;const c=[];for(let l=0;l<r.length&&!((t-=2)<0);++l)e=r.charCodeAt(l),u=e>>8,h=e%256,c.push(h),c.push(u);return c}function Vt(r){return i.toByteArray(we(r))}function lt(r,t,e,u){let h;for(h=0;h<u&&!(h+e>=t.length||h>=r.length);++h)t[h+e]=r[h];return h}function z(r,t){return r instanceof t||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===t.name}function St(r){return r!==r}const xe=function(){const r="0123456789abcdef",t=new Array(256);for(let e=0;e<16;++e){const u=e*16;for(let h=0;h<16;++h)t[u+h]=r[e]+r[h]}return t}();function q(r){return typeof BigInt>"u"?Be:r}function Be(){throw new Error("BigInt not supported")}})(ne);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,i){var o=ne,s=o.Buffer;function f(p,a){for(var d in p)a[d]=p[d]}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?n.exports=o:(f(o,i),i.Buffer=y);function y(p,a,d){return s(p,a,d)}y.prototype=Object.create(s.prototype),f(s,y),y.from=function(p,a,d){if(typeof p=="number")throw new TypeError("Argument must not be a number");return s(p,a,d)},y.alloc=function(p,a,d){if(typeof p!="number")throw new TypeError("Argument must be a number");var x=s(p);return a!==void 0?typeof d=="string"?x.fill(a,d):x.fill(a):x.fill(0),x},y.allocUnsafe=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return s(p)},y.allocUnsafeSlow=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(p)}})(Rt,Rt.exports);var tr=Rt.exports,bt=65536,er=4294967295;function rr(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var nr=tr.Buffer,mt=D.crypto||D.msCrypto;mt&&mt.getRandomValues?Tt.exports=ir:Tt.exports=rr;function ir(n,i){if(n>er)throw new RangeError("requested too many random bytes");var o=nr.allocUnsafe(n);if(n>0)if(n>bt)for(var s=0;s<n;s+=bt)mt.getRandomValues(o.slice(s,s+bt));else mt.getRandomValues(o);return typeof i=="function"?process.nextTick(function(){i(null,o)}):o}var ur=Tt.exports,or=ur,Xt=16,V=dr(),ar=new RegExp('(\\\\)?"@__(F|R|D|M|S|A|U|I|B|L)-'+V+'-(\\d+)__@"',"g"),sr=/\{\s*\[native code\]\s*\}/g,hr=/function.*?\(/,fr=/.*?=>.*?/,cr=/[<>\/\u2028\u2029]/g,lr=["*","async"],pr={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\u2028":"\\u2028","\u2029":"\\u2029"};function yr(n){return pr[n]}function dr(){for(var n=or(Xt),i="",o=0;o<Xt;++o)i+=n[o].toString(16);return i}function gr(n){var i=[];for(var o in n)typeof n[o]=="function"&&i.push(o);for(var s=0;s<i.length;s++)delete n[i[s]]}var wr=function n(i,o){o||(o={}),(typeof o=="number"||typeof o=="string")&&(o={space:o});var s=[],f=[],y=[],p=[],a=[],d=[],x=[],v=[],S=[],C=[];function F(w,m){if(o.ignoreFunction&&gr(m),!m&&m!==void 0&&m!==BigInt(0))return m;var g=this[w],E=typeof g;if(E==="object"){if(g instanceof RegExp)return"@__R-"+V+"-"+(f.push(g)-1)+"__@";if(g instanceof Date)return"@__D-"+V+"-"+(y.push(g)-1)+"__@";if(g instanceof Map)return"@__M-"+V+"-"+(p.push(g)-1)+"__@";if(g instanceof Set)return"@__S-"+V+"-"+(a.push(g)-1)+"__@";if(g instanceof Array){var P=g.filter(function(){return!0}).length!==g.length;if(P)return"@__A-"+V+"-"+(d.push(g)-1)+"__@"}if(g instanceof URL)return"@__L-"+V+"-"+(C.push(g)-1)+"__@"}return E==="function"?"@__F-"+V+"-"+(s.push(g)-1)+"__@":E==="undefined"?"@__U-"+V+"-"+(x.push(g)-1)+"__@":E==="number"&&!isNaN(g)&&!isFinite(g)?"@__I-"+V+"-"+(v.push(g)-1)+"__@":E==="bigint"?"@__B-"+V+"-"+(S.push(g)-1)+"__@":m}function M(w){var m=w.toString();if(sr.test(m))throw new TypeError("Serializing native function: "+w.name);if(hr.test(m)||fr.test(m))return m;var g=m.indexOf("("),E=m.substr(0,g).trim().split(" ").filter(function(R){return R.length>0}),P=E.filter(function(R){return lr.indexOf(R)===-1});return P.length>0?(E.indexOf("async")>-1?"async ":"")+"function"+(E.join("").indexOf("*")>-1?"*":"")+m.substr(g):m}if(o.ignoreFunction&&typeof i=="function"&&(i=void 0),i===void 0)return String(i);var I;return o.isJSON&&!o.space?I=JSON.stringify(i):I=JSON.stringify(i,o.isJSON?null:F,o.space),typeof I!="string"?String(I):(o.unsafe!==!0&&(I=I.replace(cr,yr)),s.length===0&&f.length===0&&y.length===0&&p.length===0&&a.length===0&&d.length===0&&x.length===0&&v.length===0&&S.length===0&&C.length===0?I:I.replace(ar,function(w,m,g,E){if(m)return w;if(g==="D")return'new Date("'+y[E].toISOString()+'")';if(g==="R")return"new RegExp("+n(f[E].source)+', "'+f[E].flags+'")';if(g==="M")return"new Map("+n(Array.from(p[E].entries()),o)+")";if(g==="S")return"new Set("+n(Array.from(a[E].values()),o)+")";if(g==="A")return"Array.prototype.slice.call("+n(Object.assign({length:d[E].length},d[E]),o)+")";if(g==="U")return"undefined";if(g==="I")return v[E];if(g==="B")return'BigInt("'+S[E]+'")';if(g==="L")return"new URL("+n(C[E].toString(),o)+")";var P=s[E];return M(P)}))};(function(n){var i=D&&D.__createBinding||(Object.create?function(w,m,g,E){E===void 0&&(E=g),Object.defineProperty(w,E,{enumerable:!0,get:function(){return m[g]}})}:function(w,m,g,E){E===void 0&&(E=g),w[E]=m[g]}),o=D&&D.__setModuleDefault||(Object.create?function(w,m){Object.defineProperty(w,"default",{enumerable:!0,value:m})}:function(w,m){w.default=m}),s=D&&D.__importStar||function(w){if(w&&w.__esModule)return w;var m={};if(w!=null)for(var g in w)g!=="default"&&Object.prototype.hasOwnProperty.call(w,g)&&i(m,w,g);return o(m,w),m},f=D&&D.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(n,"__esModule",{value:!0}),n.useFetch=n.useSuspenseFetch=n.SuspenseFetchProvider=n.getServerInitialData=n.setServerCacheData=n.renderScriptHtml=n.REACT_USE_SUSPENSE_DATA=void 0;var y=s(qt),p=f(wr),a=ct,d=G,x=y.createContext(null);n.REACT_USE_SUSPENSE_DATA="__REACT_USE_SUSPENSE_DATA__";function v(w,m){m===void 0&&(m=n.REACT_USE_SUSPENSE_DATA);var g={};w.forEach(function(P,R){g[R]=P.response});var E=p.default(g||{},{isJSON:!0});return"<script>window."+m+"="+E+"<\/script>"}n.renderScriptHtml=v;function S(w,m){if(m)for(var g=Object.keys(m),E=0,P=g;E<P.length;E++){var R=P[E],$=m[R];$!==void 0&&w.set(R,{response:$,key:R,promise:Promise.resolve()})}}n.setServerCacheData=S;function C(w){if(w===void 0&&(w=n.REACT_USE_SUSPENSE_DATA),window)return window[w]}n.getServerInitialData=C;function F(w){var m=w.children,g=w.lifeSpan,E=g===void 0?0:g,P=w.options,R=P===void 0?{}:P,$=w.method,J=w.initialData,k=$??d.createSuspenseFetch(E,R);return J&&a.isBrowser()&&S(k.getCache(),J),y.default.createElement(x.Provider,{value:k},m)}n.SuspenseFetchProvider=F;function M(){var w=y.useContext(x);return w}n.useSuspenseFetch=M;function I(w,m,g){var E=g===void 0?{}:g,P=E.refetchOnMount,R=P===void 0?!0:P,$=M(),J=$.fetch,k=$.refresh;return y.useEffect(function(){return function(){R&&k(w)}},[]),J(w,m)}n.useFetch=I})(re);(function(n){var i=D&&D.__createBinding||(Object.create?function(p,a,d,x){x===void 0&&(x=d),Object.defineProperty(p,x,{enumerable:!0,get:function(){return a[d]}})}:function(p,a,d,x){x===void 0&&(x=d),p[x]=a[d]}),o=D&&D.__setModuleDefault||(Object.create?function(p,a){Object.defineProperty(p,"default",{enumerable:!0,value:a})}:function(p,a){p.default=a}),s=D&&D.__importStar||function(p){if(p&&p.__esModule)return p;var a={};if(p!=null)for(var d in p)d!=="default"&&Object.prototype.hasOwnProperty.call(p,d)&&i(a,p,d);return o(a,p),a};Object.defineProperty(n,"__esModule",{value:!0}),n.getServerInitialData=n.REACT_USE_SUSPENSE_DATA=n.renderScriptHtml=n.useFetch=n.useSuspenseFetch=n.SuspenseFetchProvider=n.createSuspenseFetch=n.preload=n.peek=n.refresh=void 0;var f=s(G);Object.defineProperty(n,"refresh",{enumerable:!0,get:function(){return f.refresh}}),Object.defineProperty(n,"peek",{enumerable:!0,get:function(){return f.peek}}),Object.defineProperty(n,"preload",{enumerable:!0,get:function(){return f.preload}}),Object.defineProperty(n,"createSuspenseFetch",{enumerable:!0,get:function(){return f.createSuspenseFetch}}),n.default=f.default;var y=re;Object.defineProperty(n,"SuspenseFetchProvider",{enumerable:!0,get:function(){return y.SuspenseFetchProvider}}),Object.defineProperty(n,"useSuspenseFetch",{enumerable:!0,get:function(){return y.useSuspenseFetch}}),Object.defineProperty(n,"useFetch",{enumerable:!0,get:function(){return y.useFetch}}),Object.defineProperty(n,"renderScriptHtml",{enumerable:!0,get:function(){return y.renderScriptHtml}}),Object.defineProperty(n,"REACT_USE_SUSPENSE_DATA",{enumerable:!0,get:function(){return y.REACT_USE_SUSPENSE_DATA}}),Object.defineProperty(n,"getServerInitialData",{enumerable:!0,get:function(){return y.getServerInitialData}})})(Zt);class _r extends Kt{constructor(o,s){super(s,Ae(o,s));at(this,"layerDType");this.layerDType="float32"}get(o,s){const f=this.layerSizes[o],y=ft.clamp(f.width-s.x,0,this.tileSize.width),p=ft.clamp(f.height-s.y,0,this.tileSize.height),a=(s.x/y+s.y/p)%2;return Jt(new Float32Array(y*p).fill(a),[p,y])}getPendingTilesCount(){return 0}}var yt=(n=>(n.UInt8="uint8",n.Float16="float16",n.Float32="float32",n))(yt||{});class Sr extends Kt{constructor(o,s,f={}){const y=s.map(p=>p.size);super(o,y);at(this,"store");at(this,"layerDType");at(this,"layers");this.layerDType=s[0].dtype,this.layers=[...s],this.store=Zt.createSuspenseFetch(0,f)}get(o,s){const{x:f,y}=s,p=`${o}|${f}|${y}`;return this.store.fetch(p,async()=>{const{file:a,path:d,tomovisRestService:x,size:v,dtype:S}=this.layers[o],C=ft.clamp(v.width-f,0,this.tileSize.width),F=ft.clamp(v.height-y,0,this.tileSize.height),M=`${y}:${y+F},${f}:${f+C}`,I=await x.get("/h5grove/data/",{params:{file:a,path:d,selection:M,format:"bin"},responseType:"arraybuffer"}).then(m=>m.data),w=S==="float16"?Uint16Array:S==="float32"?Float32Array:Uint8Array;return Jt(new w(I),[F,C])})}getPendingTilesCount(){return this.store.getCache().values().filter(f=>!f.error&&!f.response).length}}async function pt(n,i,o){const s=await n.get("/h5grove/meta/",{params:{file:i,path:o}}).then(a=>a.data);if(s.kind!=="dataset")throw new Error("Not a dataset");const f=s.shape,y=s.type.dtype,p=await n.get("/h5grove/data/",{params:{file:i,path:o,format:"bin",dtype:"safe"},responseType:"arraybuffer"}).then(a=>a.data);return Fe(p,f,y)}function it(n,i){return n.startsWith("/")?n:`${ft.trimEnd(i,"/")}/${n}`}async function Ar(n,i,o){const s=await pt(n,i,it("histogram/count",o)),f=await pt(n,i,it("histogram/bin_edges",o)),y=await pt(n,i,it("y",o)),p=[y.data[0],y.data[1]],a=await pt(n,i,it("z",o)),d=[a.data[0],a.data[1]],x=await n.get("/h5grove/data/",{params:{file:i,path:it("layers",o)}}).then(S=>S.data),v=await Promise.all(x.map(async S=>{const C=it(S,o),F=await n.get("/h5grove/meta/",{params:{file:i,path:C}}).then(E=>E.data);if(F.kind!=="dataset")throw new Error("Not a dataset");const M=F.shape,I=F.type.dtype;if(M.length!==2)throw new Error("dataset is not 2D");const[w,m]=M;if(I!=="<f2"&&I!=="<f4"&&I!=="|u1")throw new Error(`Unsupported dtype: ${I}`);const g=I==="<f2"?yt.Float16:I==="<f4"?yt.Float32:yt.UInt8;return{file:i,path:C,tomovisRestService:n,size:{width:m,height:w},dtype:g}}));return{histogram:{values:s.data,bins:f.data},layers:v,yDomain:p,zDomain:d}}function Fr(n){const{viewpoint:i,setViewpoint:o}=n,s=Ht(a=>a.camera),f=Ht(a=>a.invalidate),y=Ie(),p=Ue();return be(()=>{if(!i)return;const{position:a,scale:d}=p(i);s.position.copy(a),s.scale.copy(d),s.updateMatrixWorld(),f()}),Se(()=>{o(y())}),null}export{_r as C,Sr as H,yt as L,Fr as V,pt as a,Ar as f};
