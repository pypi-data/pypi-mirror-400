import{r as c,B as r,j as e,Q as h,T as f,U as g,V as p,L as j,z as o}from"./index-D87ilqMg.js";function N({imageId:n,open:d,onOpenChange:m}){const[s,i]=c.useState(null),[x,t]=c.useState(!1);return c.useEffect(()=>{d&&n?(t(!0),fetch(`${r}/images/${n}`).then(a=>a.json()).then(a=>i(a)).catch(a=>console.error(a)).finally(()=>t(!1))):i(null)},[d,n]),e.jsx(h,{open:d,onOpenChange:m,children:e.jsxs(f,{className:"max-w-5xl h-[85vh] flex flex-col p-0 gap-0",children:[e.jsx(g,{className:"p-4 border-b shrink-0",children:e.jsx(p,{children:"Image Details"})}),e.jsx("div",{className:"flex-1 overflow-hidden flex",children:x?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx(j,{className:"h-8 w-8 animate-spin"})}):s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 bg-muted/10 flex items-center justify-center p-4 overflow-hidden",children:s.media_type==="video"?e.jsx("video",{src:`${r}/images/${s.id}/file`,className:"max-w-full max-h-full object-contain shadow-sm",controls:!0,autoPlay:!0,loop:!0}):e.jsx("img",{src:`${r}/images/${s.id}/file`,className:"max-w-full max-h-full object-contain shadow-sm",alt:s.prompt})}),e.jsx("div",{className:"w-96 border-l bg-background flex flex-col",children:e.jsx(o,{className:"flex-1",children:e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-foreground",children:"Prompt"}),e.jsx(o,{type:"always",className:"border",variant:"left-border",children:e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed whitespace-pre-wrap max-h-24 pr-3 p-2",children:s.prompt||"No prompt"})})]}),s.parents&&s.parents.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-sm font-medium text-foreground flex items-center gap-2",children:["Parents",e.jsxs("span",{className:"text-xs text-muted-foreground font-normal",children:["(",s.parents.length,")"]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:s.parents.map(a=>e.jsx("div",{className:"aspect-square overflow-hidden border bg-muted cursor-pointer hover:ring-2 ring-primary/50 transition-all",onClick:()=>{t(!0),fetch(`${r}/images/${a.id}`).then(l=>l.json()).then(l=>i(l)).finally(()=>t(!1))},children:e.jsx("img",{src:`${r}/images/${a.id}/file`,className:"w-full h-full object-cover",alt:""})},a.id))})]}),s.children&&s.children.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-sm font-medium text-foreground flex items-center gap-2",children:["Children",e.jsxs("span",{className:"text-xs text-muted-foreground font-normal",children:["(",s.children.length,")"]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:s.children.map(a=>e.jsx("div",{className:"aspect-square  overflow-hidden border bg-muted cursor-pointer hover:ring-2 ring-primary/50 transition-all",onClick:()=>{t(!0),fetch(`${r}/images/${a.id}`).then(l=>l.json()).then(l=>i(l)).finally(()=>t(!1))},children:e.jsx("img",{src:`${r}/images/${a.id}/file`,className:"w-full h-full object-cover",alt:""})},a.id))})]}),e.jsx("div",{className:"space-y-2 pt-4 border-t",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Width"}),e.jsx("p",{children:s.width})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Height"}),e.jsx("p",{children:s.height})]}),s.seed&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Seed"}),e.jsx("p",{className:"font-mono",children:s.seed})]}),s.steps&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Steps"}),e.jsx("p",{children:s.steps})]})]})})]})})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-muted-foreground",children:"Image not found"})})]})})}export{N as I};
