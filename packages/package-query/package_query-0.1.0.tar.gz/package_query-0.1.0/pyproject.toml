[project]
name = "package-query"
version = "0.1.0"
description = "Query latest package versions from PyPI, npm, crates.io, Docker Hub, and GitHub Actions"
readme = "README.md"
authors = [
    { name = "Henrique", email = "henriquemoreira10fk@gmail.com" }
]
keywords = ["mcp", "pypi", "npm", "crates.io", "docker", "github actions"]
classifiers = [
    "Development Status :: 4 - Beta",
    "Intended Audience :: Developers",
    "License :: OSI Approved :: MIT License",
    "Operating System :: OS Independent",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Programming Language :: Python :: 3.14",
    "Topic :: Internet :: WWW/HTTP",
    "Topic :: Software Development :: Libraries :: Python Modules",
    "Typing :: Typed",
]
requires-python = ">=3.10,<3.15"
dependencies = [
    "curl-cffi>=0.14.0",
    "orjson>=3.11.5",
    "pydantic>=2.12.5",
]

[project.optional-dependencies]
mcp = [
    "fastmcp>=2.14.2"
]

[dependency-groups]
dev = [
    "rich>=14.2.0"
]
lint = [
    "ruff>=0.14.10",
    "ty>=0.0.9",
]

[project.urls]
Homepage = "https://github.com/henrique-coder/package-query"
Documentation = "https://github.com/henrique-coder/package-query#readme"
Repository = "https://github.com/henrique-coder/package-query.git"
Issues = "https://github.com/henrique-coder/package-query/issues"
Changelog = "https://github.com/henrique-coder/package-query/releases"

[tool.ruff]
line-length = 120
indent-width = 4

[tool.ruff.lint]
select = [
    "F",      # Pyflakes: unused imports/variables, undefined names
    "E",      # pycodestyle errors: basic PEP 8 style violations
    "W",      # pycodestyle warnings: whitespace issues, blank lines
    "I",      # isort: import sorting and organization
    "UP",     # pyupgrade: upgrade syntax for newer Python versions
    "B",      # flake8-bugbear: common bugs and design problems
    "SIM",    # flake8-simplify: simplify complex code patterns
    "C4",     # flake8-comprehensions: better list/dict/set comprehensions
    "PIE",    # flake8-pie: misc. lints (unnecessary pass, duplicate keys)
    "RUF",    # Ruff-specific: modern Python best practices
    "PERF",   # Perflint: performance anti-patterns
    "FURB",   # refurb: modernize legacy Python idioms
    "PTH",    # flake8-use-pathlib: prefer pathlib over os.path
    "T20",    # flake8-print: detect leftover print() statements
    "TCH",    # flake8-type-checking: optimize TYPE_CHECKING imports
    "PL",     # Pylint: broad set of code quality checks
    "D205",   # 1 blank line required between docstring and code
]
ignore = [
    "PLR0912",   # Too many branches (complex validation logic is acceptable)
    "PLR0913",   # Too many arguments in function definition (common in APIs)
    "PLR2004",   # Magic value used in comparison (too strict for general use)
]
fixable = ["ALL"]            # Allow auto-fix for all enabled rules
dummy-variable-rgx = "^_$"   # Only underscore is considered a dummy variable

[tool.ruff.lint.isort]
lines-after-imports = 2             # PEP 8: two blank lines after imports
force-sort-within-sections = true   # Alphabetical order within each section
split-on-trailing-comma = true      # Trailing comma triggers multi-line format

[tool.ruff.lint.pydocstyle]
convention = "google"   # Google-style docstrings (Args, Returns, Raises)

[tool.ruff.lint.flake8-quotes]
docstring-quotes = "double"   # Docstrings must use triple double quotes

[tool.ruff.format]
quote-style = "double"              # Strings use double quotes (PEP 8 preference)
indent-style = "space"              # Spaces over tabs (PEP 8)
line-ending = "lf"                  # Unix-style line endings
docstring-code-format = true        # Format code examples inside docstrings
skip-magic-trailing-comma = false   # Preserve trailing commas as formatting hints

[project.scripts]
package-query-mcp = "package_query.mcp_server:main"

[build-system]
requires = ["uv_build"]
build-backend = "uv_build"
