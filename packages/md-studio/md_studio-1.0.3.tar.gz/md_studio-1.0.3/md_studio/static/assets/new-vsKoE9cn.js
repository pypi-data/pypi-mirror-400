import{j as o}from"./jsx-runtime-BiXka7E7.js";import{E as u}from"./Editor-336Gjtep.js";import{u as d,w as r}from"./index-BwWm0JV9.js";import{t as p}from"./components-CZmywKMH.js";import{B as l}from"./Breadcrumb-UgS0yS-w.js";import"./index-CkllyZqd.js";import"./index-DsP7OPKi.js";import"./MarkdownPreview-CMAtWhhj.js";import"./slug-DE7USKAG.js";function w(){const s=p(),{basePath:a}=d(),i=async n=>{const e=new FormData;e.append("title",n.title),e.append("slug",n.slug||""),e.append("bodyMd",n.bodyMd);const t=await(await fetch(r("/api/create",a),{method:"post",body:e})).json();if(t.success&&t.slug){try{const c=await(await fetch(r(`/api/get?slug=${encodeURIComponent(t.slug)}`,a))).json();typeof window<"u"&&c?.doc&&window.dispatchEvent(new CustomEvent("md-studio-docs-created",{detail:{doc:c.doc}}))}catch{}s(r(`/doc/${t.slug}`,a));return}throw new Error(t.error||"Failed to create document.")};return o.jsx(u,{submitLabel:"Create document",successMessage:"Document created.",onSubmit:i})}const P=()=>[{title:"New Document | md-studio"}];function B(){const{dashboardPath:s}=d();return o.jsxs("main",{className:"flex flex-col gap-6",children:[o.jsx(l,{items:[{label:"New document"}],dashboardPath:s}),o.jsx(w,{})]})}export{B as default,P as meta};
