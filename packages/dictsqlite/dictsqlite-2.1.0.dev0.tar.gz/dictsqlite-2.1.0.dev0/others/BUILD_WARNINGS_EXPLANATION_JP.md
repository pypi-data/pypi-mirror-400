# ビルド時の警告について

## 警告の概要

dictsqlite v4.1のビルド時に以下の3つの警告が表示されます：

```
warning: field `db_path` is never read
  --> src\storage.rs:31:5
   |
20 | pub struct StorageEngine {
   |            ------------- field in this struct
...
31 |     db_path: String,
   |     ^^^^^^^

warning: function `encode_base64` is never used
   --> src\crypto.rs:116:8
    |
116 | pub fn encode_base64(data: &[u8]) -> String {
    |        ^^^^^^^^^^^^^

warning: function `decode_base64` is never used
   --> src\crypto.rs:121:8
    |
121 | pub fn decode_base64(encoded: &str) -> Result<Vec<u8>, CryptoError> {
    |        ^^^^^^^^^^^^^
```

## 各警告の意味と対処

### 1. `db_path` フィールドの未使用警告

**意味：**
- `StorageEngine` 構造体の `db_path` フィールドが定義されているが、コード内で一度も読み取られていない
- フィールドは `new()` 関数で設定されているが、その後のメソッドで使用されていない

**影響：**
- 機能的な問題はない（動作に支障なし）
- わずかなメモリの無駄（String型1つ分）があるが、パフォーマンスへの影響は無視できるレベル

**対処の必要性：**
- **必要**：将来的な機能拡張のために保持する場合でも、警告を抑制すべき

**修正方法：**
```rust
// オプション1: 将来の使用を想定して警告を抑制
#[allow(dead_code)]
db_path: String,

// オプション2: 実際に使用する（例：デバッグやログ出力）
pub fn get_db_path(&self) -> &str {
    &self.db_path
}

// オプション3: 不要なら削除
// db_path フィールドを完全に削除
```

### 2. `encode_base64` 関数の未使用警告

**意味：**
- `encode_base64` 関数が公開関数として定義されているが、テストコード以外で使用されていない
- 実際にはテストで使用されているが、`#[cfg(test)]` 属性がないため、本番ビルドでも含まれている

**影響：**
- 機能的な問題はない
- わずかにバイナリサイズが増加するが、最適化によって未使用コードは削除される可能性が高い

**対処の必要性：**
- **推奨**：コードの意図を明確にし、警告を解消すべき

**修正方法：**
```rust
// オプション1: テスト専用として明示
#[cfg(test)]
pub fn encode_base64(data: &[u8]) -> String {
    URL_SAFE_NO_PAD.encode(data)
}

// オプション2: 将来の使用を想定して警告を抑制
#[allow(dead_code)]
pub fn encode_base64(data: &[u8]) -> String {
    URL_SAFE_NO_PAD.encode(data)
}

// オプション3: 公開APIとして提供する場合はそのまま
// （ユーティリティ関数として外部から使用される場合）
```

### 3. `decode_base64` 関数の未使用警告

**意味・影響・対処：**
- `encode_base64` と同じ

## 推奨される対処方法

**最小限の変更で警告を解消する方法：**

1. **`db_path` フィールド**：将来の機能拡張（データベースパスの取得、再接続など）のために保持し、`#[allow(dead_code)]` 属性を追加

2. **Base64関数**：テスト専用なので `#[cfg(test)]` 属性を追加

これらの変更により：
- ✅ 全ての警告が解消される
- ✅ 機能は完全に保たれる（テストも含む）
- ✅ コードの意図が明確になる
- ✅ バイナリサイズへの影響なし

## 警告を放置した場合

警告を放置しても：
- ❌ 機能的な問題は発生しない
- ⚠️ しかし、以下の理由で修正が推奨される：
  - 新しい警告が発生した際に気づきにくくなる
  - コードの品質と保守性が低下する
  - 将来のRustコンパイラで警告がエラーに昇格する可能性がある

## まとめ

これらの警告は**安全性やパフォーマンスに影響しない**軽微なものですが、**コードの品質向上のために修正することを強く推奨**します。

修正は数行の属性追加で完了し、リスクはありません。
