{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Long-Running Agent Feature Registry",
    "description": "Tracks feature completion for multi-context-window agent workflows",
    "type": "object",
    "properties": {
        "projectName": {
            "type": "string",
            "description": "Name of the project"
        },
        "version": {
            "type": "string",
            "pattern": "^\\d+\\.\\d+\\.\\d+$",
            "description": "Semantic version of the project"
        },
        "features": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "pattern": "^F\\d{3}$",
                        "description": "Feature ID (e.g., F001)"
                    },
                    "category": {
                        "type": "string",
                        "enum": [
                            "core",
                            "ui",
                            "api",
                            "testing",
                            "infrastructure",
                            "docs",
                            "security",
                            "performance"
                        ],
                        "description": "Feature category"
                    },
                    "priority": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 5,
                        "description": "Priority (1=critical, 5=future)"
                    },
                    "description": {
                        "type": "string",
                        "description": "Clear, concise feature description"
                    },
                    "dependencies": {
                        "type": "array",
                        "items": {
                            "type": "string",
                            "pattern": "^F\\d{3}$"
                        },
                        "description": "IDs of features this depends on"
                    },
                    "acceptanceCriteria": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "minItems": 1,
                        "description": "Specific, testable criteria for completion"
                    },
                    "estimatedEffort": {
                        "type": "string",
                        "enum": [
                            "small",
                            "medium",
                            "large"
                        ],
                        "description": "Rough estimate of implementation effort"
                    },
                    "passes": {
                        "type": "boolean",
                        "description": "Whether feature has been verified complete"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "not-started",
                            "in-progress",
                            "blocked",
                            "verified"
                        ],
                        "description": "Current status of the feature"
                    },
                    "verifiedAt": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time",
                        "description": "ISO timestamp of verification"
                    },
                    "verifiedBy": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "description": "Identifier of verifying agent/session"
                    },
                    "evidenceLinks": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "description": "Paths to verification evidence files"
                    },
                    "blockedBy": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "description": "Reason or feature IDs blocking progress"
                    },
                    "lastWorkedOn": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "format": "date-time",
                        "description": "ISO timestamp of last work"
                    },
                    "notes": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "description": "Additional context or notes"
                    }
                },
                "required": [
                    "id",
                    "category",
                    "priority",
                    "description",
                    "acceptanceCriteria",
                    "passes",
                    "status"
                ]
            }
        },
        "metadata": {
            "type": "object",
            "properties": {
                "createdAt": {
                    "type": "string",
                    "format": "date-time"
                },
                "lastUpdated": {
                    "type": "string",
                    "format": "date-time"
                },
                "totalFeatures": {
                    "type": "integer",
                    "minimum": 0
                },
                "passingFeatures": {
                    "type": "integer",
                    "minimum": 0
                }
            },
            "required": [
                "createdAt",
                "lastUpdated",
                "totalFeatures",
                "passingFeatures"
            ]
        }
    },
    "required": [
        "projectName",
        "version",
        "features",
        "metadata"
    ]
}