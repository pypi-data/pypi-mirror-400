import{c as M,j as o,a as c,p as V,b as $,$ as A,L as O,r as l,P as D,S as U,B as z,u as B,o as R,s as Z,e as q}from"./index-vC1txwfN.js";import{g as h,s as x,a as C,F as H,C as G,u as J,b as K,c as Q,L as T}from"./loading-button-BXeVTbHs.js";const W=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],X=M("eye-off",W);const Y=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ee=M("eye",Y);function re({className:r,type:s,...t}){return o.jsx("input",{type:s,"data-slot":"input",className:c("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...t})}const b=(r,s,t)=>{if(r&&"reportValidity"in r){const e=h(t,s);r.setCustomValidity(e&&e.message||""),r.reportValidity()}},g=(r,s)=>{for(const t in s.fields){const e=s.fields[t];e&&e.ref&&"reportValidity"in e.ref?b(e.ref,t,r):e&&e.refs&&e.refs.forEach(i=>b(i,t,r))}},y=(r,s)=>{s.shouldUseNativeValidation&&g(r,s);const t={};for(const e in r){const i=h(s.fields,e),a=Object.assign(r[e]||{},{ref:i&&i.ref});if(te(s.names||Object.keys(r),e)){const n=Object.assign({},h(t,e));x(n,"root",a),x(t,e,n)}else x(t,e,a)}return t},te=(r,s)=>{const t=j(s);return r.some(e=>j(e).match(`^${t}\\.\\d+`))};function j(r){return r.replace(/\]|\[/g,"")}function w(r,s){try{var t=r()}catch(e){return s(e)}return t&&t.then?t.then(void 0,s):t}function se(r,s){for(var t={};r.length;){var e=r[0],i=e.code,a=e.message,n=e.path.join(".");if(!t[n])if("unionErrors"in e){var d=e.unionErrors[0].errors[0];t[n]={message:d.message,type:d.code}}else t[n]={message:a,type:i};if("unionErrors"in e&&e.unionErrors.forEach(function(f){return f.errors.forEach(function(p){return r.push(p)})}),s){var u=t[n].types,m=u&&u[e.code];t[n]=C(n,s,t,i,m?[].concat(m,e.message):e.message)}r.shift()}return t}function oe(r,s){for(var t={};r.length;){var e=r[0],i=e.code,a=e.message,n=e.path.join(".");if(!t[n])if(e.code==="invalid_union"&&e.errors.length>0){var d=e.errors[0][0];t[n]={message:d.message,type:d.code}}else t[n]={message:a,type:i};if(e.code==="invalid_union"&&e.errors.forEach(function(f){return f.forEach(function(p){return r.push(p)})}),s){var u=t[n].types,m=u&&u[e.code];t[n]=C(n,s,t,i,m?[].concat(m,e.message):e.message)}r.shift()}return t}function ne(r,s,t){if(t===void 0&&(t={}),(function(e){return"_def"in e&&typeof e._def=="object"&&"typeName"in e._def})(r))return function(e,i,a){try{return Promise.resolve(w(function(){return Promise.resolve(r[t.mode==="sync"?"parse":"parseAsync"](e,s)).then(function(n){return a.shouldUseNativeValidation&&g({},a),{errors:{},values:t.raw?Object.assign({},e):n}})},function(n){if((function(d){return Array.isArray(d?.issues)})(n))return{values:{},errors:y(se(n.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw n}))}catch(n){return Promise.reject(n)}};if((function(e){return"_zod"in e&&typeof e._zod=="object"})(r))return function(e,i,a){try{return Promise.resolve(w(function(){return Promise.resolve((t.mode==="sync"?V:$)(r,e,s)).then(function(n){return a.shouldUseNativeValidation&&g({},a),{errors:{},values:t.raw?Object.assign({},e):n}})},function(n){if((function(d){return d instanceof A})(n))return{values:{},errors:y(oe(n.issues,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw n}))}catch(n){return Promise.reject(n)}};throw new Error("Invalid input: not a Zod schema")}function ae({children:r}){return o.jsxs("div",{className:"min-h-svh flex flex-col items-center justify-center gap-8 p-6 md:p-8",children:[o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(O,{variant:"full",className:"h-12 md:h-16",asLink:!1})}),o.jsx("div",{className:"w-full max-w-sm",children:r})]})}var ie="Label",L=l.forwardRef((r,s)=>o.jsx(D.label,{...r,ref:s,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(r.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));L.displayName=ie;var de=L;function le({className:r,...s}){return o.jsx(de,{"data-slot":"label",className:c("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...s})}const ce=H,S=l.createContext({}),N=({...r})=>o.jsx(S.Provider,{value:{name:r.name},children:o.jsx(G,{...r})}),v=()=>{const r=l.useContext(S),s=l.useContext(k),{getFieldState:t}=J(),e=K({name:r.name}),i=t(r.name,e);if(!r)throw new Error("useFormField should be used within <FormField>");const{id:a}=s;return{id:a,name:r.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...i}},k=l.createContext({});function F({className:r,...s}){const t=l.useId();return o.jsx(k.Provider,{value:{id:t},children:o.jsx("div",{"data-slot":"form-item",className:c("grid gap-2",r),...s})})}function P({className:r,...s}){const{error:t,formItemId:e}=v();return o.jsx(le,{"data-slot":"form-label","data-error":!!t,className:c("data-[error=true]:text-destructive",r),htmlFor:e,...s})}function I({...r}){const{error:s,formItemId:t,formDescriptionId:e,formMessageId:i}=v();return o.jsx(U,{"data-slot":"form-control",id:t,"aria-describedby":s?`${e} ${i}`:`${e}`,"aria-invalid":!!s,...r})}function E({className:r,...s}){const{error:t,formMessageId:e}=v(),i=t?String(t?.message??""):s.children;return i?o.jsx("p",{"data-slot":"form-message",id:e,className:c("text-destructive text-sm",r),...s,children:i}):null}const _=l.forwardRef(({className:r,error:s,...t},e)=>{const[i,a]=l.useState(!1);return o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:i?"text":"password","data-slot":"input",className:c("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 pr-10 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),ref:e,"aria-invalid":!!s,...t}),o.jsx(z,{type:"button",variant:"ghost",size:"icon-sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>a(!i),"aria-label":i?"Hide password":"Show password",children:i?o.jsx(X,{className:"h-4 w-4 text-muted-foreground"}):o.jsx(ee,{className:"h-4 w-4 text-muted-foreground"})})]})});_.displayName="PasswordInput";const ue=R({username:q(),password:Z().min(1,{message:"Password is required"}).min(8,{message:"Password must be at least 8 characters"})});function pe(){const{loginMutation:r}=B(),s=Q({resolver:ne(ue),mode:"onBlur",criteriaMode:"all",defaultValues:{username:"",password:""}}),t=e=>{r.isPending||r.mutate(e)};return o.jsx(ae,{children:o.jsx(ce,{...s,children:o.jsxs("form",{onSubmit:s.handleSubmit(t),className:"flex flex-col gap-6",children:[o.jsx("div",{className:"flex flex-col items-center gap-2 text-center",children:o.jsx("h1",{className:"text-2xl font-bold",children:"Login to your account"})}),o.jsxs("div",{className:"grid gap-4",children:[o.jsx(N,{control:s.control,name:"username",render:({field:e})=>o.jsxs(F,{children:[o.jsx(P,{children:"Email"}),o.jsx(I,{children:o.jsx(re,{"data-testid":"email-input",placeholder:"user@example.com",type:"email",...e})}),o.jsx(E,{className:"text-xs"})]})}),o.jsx(N,{control:s.control,name:"password",render:({field:e})=>o.jsxs(F,{children:[o.jsx("div",{className:"flex items-center",children:o.jsx(P,{children:"Password"})}),o.jsx(I,{children:o.jsx(_,{"data-testid":"password-input",placeholder:"Password",...e})}),o.jsx(E,{className:"text-xs"})]})}),o.jsx(T,{type:"submit",loading:r.isPending,children:"Log In"})]})]})})})}export{pe as component};
