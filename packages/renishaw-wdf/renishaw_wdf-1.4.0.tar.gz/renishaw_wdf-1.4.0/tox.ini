[tox]
envlist = py314, py312, py310, pypy310, lint, type
skip_missing_interpreters = True

[testenv]
setenv =
    PYTHONPATH = {toxinidir}{:}{toxinidir}/wdf
deps =
    pytest
commands =
    py.test

[testenv:lint]
deps =
    flake8
    flake8-tkinter
commands =
    flake8 wdf demos

[testenv:type]
deps =
    mypy
    types-Pillow
commands =
    mypy -m wdf

[flake8]
max-line-length = 110
exclude = dist, build, __pycache__, .tox, .venv, .*_cache
ignore =
    # F401 Constants imported into __init__ are not used there but are exposed to users here.
    F401
    # W503 Line break before binary operator
    W503
    # E402 module level import not at top of file
    E402
    # TK504 Do not use tkinter constants (I prefer tk.NSEW)
    TK504
    # TK141 Using bind without `add=True` (not more readable)
    TK141
    # TK102 Calling mainloop multiple times (unreliable test)
    TK102
