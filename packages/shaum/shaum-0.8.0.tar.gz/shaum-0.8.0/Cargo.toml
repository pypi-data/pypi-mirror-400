[workspace]
resolver = "2"
members = ["bindings/shaum_py"]

[workspace.package]
version = "0.8.0"
edition = "2024"
license = "MIT"
authors = ["Mohammad Farid Hendianto (IRedDragonICY)"]
repository = "https://github.com/IRedDragonICY/shaum"

[workspace.dependencies]
# Internal crates
shaum-types = { version = "0.8.0", path = "crates/shaum-types" }
shaum-calendar = { version = "0.8.0", path = "crates/shaum-calendar" }
shaum-astronomy = { version = "0.8.0", path = "crates/shaum-astronomy" }
shaum-rules = { version = "0.8.0", path = "crates/shaum-rules" }
shaum-network = { version = "0.8.0", path = "crates/shaum-network" }
shaum-core = { version = "0.8.0", path = "crates/shaum_core" }

# Core
chrono = { version = "0.4.42", default-features = false, features = ["serde", "clock"] }
hijri_date = "0.5.1"
serde = { version = "1.0.228", default-features = false, features = ["derive"] }
serde_json = "1.0"
smallvec = { version = "1.15", features = ["serde", "union", "const_generics"] }
thiserror = "2.0"
vsop87 = "3.0.0"
astro = "2.0.0"

# FFI
wasm-bindgen = "0.2.106"
serde-wasm-bindgen = "0.6.5"
tsify = { version = "0.4", features = ["js"] }
pyo3 = { version = "0.27", features = ["extension-module"] }
console_error_panic_hook = "0.1.7"
getrandom = { version = "0.3", features = ["wasm_js"] }

# Network (optional)
reqwest = { version = "0.12", default-features = false, features = ["json", "rustls-tls"] }
maxminddb = "0.27"

# Dev/Test
criterion = { version = "0.8", features = ["html_reports"] }
proptest = "1.9"
tokio = { version = "1.49", features = ["macros", "rt", "rt-multi-thread"] }
wiremock = "0.6.5"

# Build
anyhow = "1.0.100"

[profile.release]
opt-level = "z"
lto = true
codegen-units = 1
panic = "abort"
strip = true
