# This file was auto-generated by Fern from our API Definition.

import typing

from ..core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ..core.request_options import RequestOptions
from ..types.asset_input import AssetInput
from ..types.asset_operations import AssetOperations
from ..types.asset_output import AssetOutput
from ..types.bulk_seat_assignments_response import BulkSeatAssignmentsResponse
from ..types.generic_id import GenericId
from ..types.seat_assignment_by_group import SeatAssignmentByGroup
from .raw_client import AsyncRawAssetsClient, RawAssetsClient
from .types.add_single_assets_response import AddSingleAssetsResponse
from .types.bulk_operations_assets_response import BulkOperationsAssetsResponse
from .types.list_all_assets_request_from_asset_type import ListAllAssetsRequestFromAssetType
from .types.list_all_assets_response import ListAllAssetsResponse

# this is used as the default value for optional parameters
OMIT = typing.cast(typing.Any, ...)


class AssetsClient:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._raw_client = RawAssetsClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> RawAssetsClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        RawAssetsClient
        """
        return self._raw_client

    def list_all(
        self,
        *,
        from_asset_type: typing.Optional[ListAllAssetsRequestFromAssetType] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> ListAllAssetsResponse:
        """
        Retrieve a list of assets with optional filtering by asset type. This operation returns all assets accessible to the authenticated user, optionally filtered to start from a specific asset type level (e.g., only structures, only floors, etc.). Each asset includes its basic properties and immediate children.

        Parameters
        ----------
        from_asset_type : typing.Optional[ListAllAssetsRequestFromAssetType]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ListAllAssetsResponse
            Assets retrieved successfully, potentially filtered by type

        Examples
        --------
        from trebellar import TrebellarApi

        client = TrebellarApi(
            api_key="YOUR_API_KEY",
        )
        client.assets.list_all()
        """
        _response = self._raw_client.list_all(from_asset_type=from_asset_type, request_options=request_options)
        return _response.data

    def add_single(
        self, *, asset: AssetInput, request_options: typing.Optional[RequestOptions] = None
    ) -> AddSingleAssetsResponse:
        """
        Create a single new asset within the hierarchical structure. The asset will be automatically assigned a unique ID and can include children assets for bulk creation. When creating hierarchical assets, ensure parent assets exist or are created first. Supports all asset types: structures, floors, spaces, desks, and sensors.

        Parameters
        ----------
        asset : AssetInput

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AddSingleAssetsResponse
            Asset and any child assets created successfully with assigned IDs

        Examples
        --------
        from trebellar import (
            AssetInput_Structure,
            Coordinates,
            StructureStaticProperties,
            TrebellarApi,
        )

        client = TrebellarApi(
            api_key="YOUR_API_KEY",
        )
        client.assets.add_single(
            asset=AssetInput_Structure(
                label="San Francisco Tower - Floor 42",
                static_properties=StructureStaticProperties(
                    address="123 Main St, San Francisco, CA 94105",
                    coordinates=Coordinates(
                        lat=37.7749,
                        lon=-122.4194,
                    ),
                    rentable_sqft=1.1,
                    business_hours_start="08:00",
                    business_hours_end="18:00",
                    business_days=[
                        "monday",
                        "tuesday",
                        "wednesday",
                        "thursday",
                        "friday",
                    ],
                    status="active",
                    timezone="America/Los_Angeles",
                ),
            ),
        )
        """
        _response = self._raw_client.add_single(asset=asset, request_options=request_options)
        return _response.data

    def get_asset_by_id(
        self, asset_id: GenericId, *, request_options: typing.Optional[RequestOptions] = None
    ) -> AssetOutput:
        """
        Retrieve detailed information about a specific asset including its hierarchical children, static properties, and location data. This operation returns the complete asset structure with all nested children if they exist.

        Parameters
        ----------
        asset_id : GenericId
            A unique identifier for an asset. Can be an AssetId or an ExternalId. ExternalIds are denoted by the "eid:" prefix.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AssetOutput
            Asset retrieved successfully with complete hierarchical structure

        Examples
        --------
        from trebellar import TrebellarApi

        client = TrebellarApi(
            api_key="YOUR_API_KEY",
        )
        client.assets.get_asset_by_id(
            asset_id="eid:sfo-001",
        )
        """
        _response = self._raw_client.get_asset_by_id(asset_id, request_options=request_options)
        return _response.data

    def bulk_operations(
        self, *, operations: typing.Sequence[AssetOperations], request_options: typing.Optional[RequestOptions] = None
    ) -> BulkOperationsAssetsResponse:
        """
        Execute multiple asset operations in a single atomic batch request. Supports add, update, delete, move, and get operations within one transaction. All operations succeed or fail together, ensuring data consistency. Ideal for large-scale imports, reorganizations, or synchronized updates across the asset hierarchy.

        Parameters
        ----------
        operations : typing.Sequence[AssetOperations]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        BulkOperationsAssetsResponse
            All batch operations completed successfully as an atomic transaction

        Examples
        --------
        from trebellar import (
            AssetInput_Structure,
            AssetOperations_Add,
            Coordinates,
            StructureStaticProperties,
            TrebellarApi,
        )

        client = TrebellarApi(
            api_key="YOUR_API_KEY",
        )
        client.assets.bulk_operations(
            operations=[
                AssetOperations_Add(
                    asset=AssetInput_Structure(
                        label="San Francisco Tower - Floor 42",
                        static_properties=StructureStaticProperties(
                            address="123 Main St, San Francisco, CA 94105",
                            coordinates=Coordinates(
                                lat=37.7749,
                                lon=-122.4194,
                            ),
                            rentable_sqft=1.1,
                            business_hours_start="08:00",
                            business_hours_end="18:00",
                            business_days=[
                                "monday",
                                "tuesday",
                                "wednesday",
                                "thursday",
                                "friday",
                            ],
                            status="active",
                            timezone="America/Los_Angeles",
                        ),
                    ),
                )
            ],
        )
        """
        _response = self._raw_client.bulk_operations(operations=operations, request_options=request_options)
        return _response.data

    def bulk_seat_assignments(
        self,
        *,
        assignments: typing.Sequence[SeatAssignmentByGroup],
        timestamp_ms: typing.Optional[float] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> BulkSeatAssignmentsResponse:
        """
        Set shared and dedicated seat assignment counts by people group for one or more assets in a single batch request.

        Parameters
        ----------
        assignments : typing.Sequence[SeatAssignmentByGroup]

        timestamp_ms : typing.Optional[float]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        BulkSeatAssignmentsResponse
            Seat assignments updated successfully

        Examples
        --------
        from trebellar import SeatAssignmentByGroup, SeatsAssigned, TrebellarApi

        client = TrebellarApi(
            api_key="YOUR_API_KEY",
        )
        client.assets.bulk_seat_assignments(
            assignments=[
                SeatAssignmentByGroup(
                    id="eid:sfo-001",
                    people_group_id="peopleGroupId",
                    seats_assigned=SeatsAssigned(
                        shared=1,
                        dedicated=1,
                    ),
                )
            ],
        )
        """
        _response = self._raw_client.bulk_seat_assignments(
            assignments=assignments, timestamp_ms=timestamp_ms, request_options=request_options
        )
        return _response.data


class AsyncAssetsClient:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._raw_client = AsyncRawAssetsClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> AsyncRawAssetsClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        AsyncRawAssetsClient
        """
        return self._raw_client

    async def list_all(
        self,
        *,
        from_asset_type: typing.Optional[ListAllAssetsRequestFromAssetType] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> ListAllAssetsResponse:
        """
        Retrieve a list of assets with optional filtering by asset type. This operation returns all assets accessible to the authenticated user, optionally filtered to start from a specific asset type level (e.g., only structures, only floors, etc.). Each asset includes its basic properties and immediate children.

        Parameters
        ----------
        from_asset_type : typing.Optional[ListAllAssetsRequestFromAssetType]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ListAllAssetsResponse
            Assets retrieved successfully, potentially filtered by type

        Examples
        --------
        import asyncio

        from trebellar import AsyncTrebellarApi

        client = AsyncTrebellarApi(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.assets.list_all()


        asyncio.run(main())
        """
        _response = await self._raw_client.list_all(from_asset_type=from_asset_type, request_options=request_options)
        return _response.data

    async def add_single(
        self, *, asset: AssetInput, request_options: typing.Optional[RequestOptions] = None
    ) -> AddSingleAssetsResponse:
        """
        Create a single new asset within the hierarchical structure. The asset will be automatically assigned a unique ID and can include children assets for bulk creation. When creating hierarchical assets, ensure parent assets exist or are created first. Supports all asset types: structures, floors, spaces, desks, and sensors.

        Parameters
        ----------
        asset : AssetInput

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AddSingleAssetsResponse
            Asset and any child assets created successfully with assigned IDs

        Examples
        --------
        import asyncio

        from trebellar import (
            AssetInput_Structure,
            AsyncTrebellarApi,
            Coordinates,
            StructureStaticProperties,
        )

        client = AsyncTrebellarApi(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.assets.add_single(
                asset=AssetInput_Structure(
                    label="San Francisco Tower - Floor 42",
                    static_properties=StructureStaticProperties(
                        address="123 Main St, San Francisco, CA 94105",
                        coordinates=Coordinates(
                            lat=37.7749,
                            lon=-122.4194,
                        ),
                        rentable_sqft=1.1,
                        business_hours_start="08:00",
                        business_hours_end="18:00",
                        business_days=[
                            "monday",
                            "tuesday",
                            "wednesday",
                            "thursday",
                            "friday",
                        ],
                        status="active",
                        timezone="America/Los_Angeles",
                    ),
                ),
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.add_single(asset=asset, request_options=request_options)
        return _response.data

    async def get_asset_by_id(
        self, asset_id: GenericId, *, request_options: typing.Optional[RequestOptions] = None
    ) -> AssetOutput:
        """
        Retrieve detailed information about a specific asset including its hierarchical children, static properties, and location data. This operation returns the complete asset structure with all nested children if they exist.

        Parameters
        ----------
        asset_id : GenericId
            A unique identifier for an asset. Can be an AssetId or an ExternalId. ExternalIds are denoted by the "eid:" prefix.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AssetOutput
            Asset retrieved successfully with complete hierarchical structure

        Examples
        --------
        import asyncio

        from trebellar import AsyncTrebellarApi

        client = AsyncTrebellarApi(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.assets.get_asset_by_id(
                asset_id="eid:sfo-001",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.get_asset_by_id(asset_id, request_options=request_options)
        return _response.data

    async def bulk_operations(
        self, *, operations: typing.Sequence[AssetOperations], request_options: typing.Optional[RequestOptions] = None
    ) -> BulkOperationsAssetsResponse:
        """
        Execute multiple asset operations in a single atomic batch request. Supports add, update, delete, move, and get operations within one transaction. All operations succeed or fail together, ensuring data consistency. Ideal for large-scale imports, reorganizations, or synchronized updates across the asset hierarchy.

        Parameters
        ----------
        operations : typing.Sequence[AssetOperations]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        BulkOperationsAssetsResponse
            All batch operations completed successfully as an atomic transaction

        Examples
        --------
        import asyncio

        from trebellar import (
            AssetInput_Structure,
            AssetOperations_Add,
            AsyncTrebellarApi,
            Coordinates,
            StructureStaticProperties,
        )

        client = AsyncTrebellarApi(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.assets.bulk_operations(
                operations=[
                    AssetOperations_Add(
                        asset=AssetInput_Structure(
                            label="San Francisco Tower - Floor 42",
                            static_properties=StructureStaticProperties(
                                address="123 Main St, San Francisco, CA 94105",
                                coordinates=Coordinates(
                                    lat=37.7749,
                                    lon=-122.4194,
                                ),
                                rentable_sqft=1.1,
                                business_hours_start="08:00",
                                business_hours_end="18:00",
                                business_days=[
                                    "monday",
                                    "tuesday",
                                    "wednesday",
                                    "thursday",
                                    "friday",
                                ],
                                status="active",
                                timezone="America/Los_Angeles",
                            ),
                        ),
                    )
                ],
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.bulk_operations(operations=operations, request_options=request_options)
        return _response.data

    async def bulk_seat_assignments(
        self,
        *,
        assignments: typing.Sequence[SeatAssignmentByGroup],
        timestamp_ms: typing.Optional[float] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> BulkSeatAssignmentsResponse:
        """
        Set shared and dedicated seat assignment counts by people group for one or more assets in a single batch request.

        Parameters
        ----------
        assignments : typing.Sequence[SeatAssignmentByGroup]

        timestamp_ms : typing.Optional[float]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        BulkSeatAssignmentsResponse
            Seat assignments updated successfully

        Examples
        --------
        import asyncio

        from trebellar import AsyncTrebellarApi, SeatAssignmentByGroup, SeatsAssigned

        client = AsyncTrebellarApi(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.assets.bulk_seat_assignments(
                assignments=[
                    SeatAssignmentByGroup(
                        id="eid:sfo-001",
                        people_group_id="peopleGroupId",
                        seats_assigned=SeatsAssigned(
                            shared=1,
                            dedicated=1,
                        ),
                    )
                ],
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.bulk_seat_assignments(
            assignments=assignments, timestamp_ms=timestamp_ms, request_options=request_options
        )
        return _response.data
