(()=>{"use strict";var e={4610(e,t,o){var a=o(3751),n=o(641);const i={id:"app"};function r(e,t,o,a,r,l){const s=(0,n.g2)("PdfViewer"),d=(0,n.g2)("WithStreamlitConnection");return(0,n.uX)(),(0,n.CE)("div",i,[(0,n.bF)(d,null,{default:(0,n.k6)(({args:e})=>[(0,n.bF)(s,{args:e},null,8,["args"])]),_:1})])}var l=o(33);const s={class:"zoom-controls"},d={key:0,class:"zoom-panel"},c={class:"zoom-input-container"},u=["onClick"];function p(e,t,o,i,r,p){return(0,n.uX)(),(0,n.CE)("div",{style:(0,l.Tr)(i.pdfContainerStyle),ref:"pdfContainer",id:"pdfContainer",class:"container-wrapper"},[t[15]||(t[15]=(0,n.Lk)("div",{class:"scrolling-container"},[(0,n.Lk)("div",{id:"pdfViewer"})],-1)),(0,n.Lk)("div",s,[(0,n.Lk)("button",{class:"zoom-button",onClick:t[0]||(t[0]=(0,a.D$)((...e)=>i.toggleZoomPanel&&i.toggleZoomPanel(...e),["stop"]))},(0,l.v_)(Math.round(100*i.currentZoom))+"% ",1),i.showZoomPanel?((0,n.uX)(),(0,n.CE)("div",d,[(0,n.Lk)("div",c,[(0,n.bo)((0,n.Lk)("input",{type:"number",class:"zoom-input","onUpdate:modelValue":t[1]||(t[1]=e=>i.manualZoomInput=e),onKeyup:t[2]||(t[2]=(0,a.jR)((...e)=>i.applyManualZoom&&i.applyManualZoom(...e),["enter"])),onBlur:t[3]||(t[3]=(...e)=>i.applyManualZoom&&i.applyManualZoom(...e))},null,544),[[a.Jo,i.manualZoomInput]]),t[8]||(t[8]=(0,n.Lk)("span",{class:"zoom-input-percent"},"%",-1))]),t[13]||(t[13]=(0,n.Lk)("div",{class:"zoom-separator"},null,-1)),(0,n.Lk)("button",{class:"zoom-option",onClick:t[4]||(t[4]=(...e)=>i.zoomIn&&i.zoomIn(...e))},[...t[9]||(t[9]=[(0,n.Lk)("span",{class:"zoom-icon"},"+",-1),(0,n.eW)(" Zoom In ",-1)])]),(0,n.Lk)("button",{class:"zoom-option",onClick:t[5]||(t[5]=(...e)=>i.zoomOut&&i.zoomOut(...e))},[...t[10]||(t[10]=[(0,n.Lk)("span",{class:"zoom-icon"},"−",-1),(0,n.eW)(" Zoom Out ",-1)])]),t[14]||(t[14]=(0,n.Lk)("div",{class:"zoom-separator"},null,-1)),(0,n.Lk)("button",{class:"zoom-option",onClick:t[6]||(t[6]=(...e)=>i.fitToWidth&&i.fitToWidth(...e))},[...t[11]||(t[11]=[(0,n.Lk)("span",{class:"zoom-icon"},"↔",-1),(0,n.eW)(" Fit to Width ",-1)])]),(0,n.Lk)("button",{class:"zoom-option",onClick:t[7]||(t[7]=(...e)=>i.fitToHeight&&i.fitToHeight(...e))},[...t[12]||(t[12]=[(0,n.Lk)("span",{class:"zoom-icon"},"↕",-1),(0,n.eW)(" Fit to Height ",-1)])]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.zoomPresets,e=>((0,n.uX)(),(0,n.CE)("button",{key:e,class:(0,l.C4)(["zoom-option zoom-preset",{active:Math.abs(i.currentZoom-e)<.01}]),onClick:t=>i.setZoom(e)},(0,l.v_)(Math.round(100*e))+"% ",11,u))),128))])):(0,n.Q3)("",!0)])],4)}o(4114),o(8111),o(2489),o(7588);var h=o(953),g=(o(951),o(7609)),v=o(7445),m=o(2543);const w="pdfjs-dist/cmaps/",y=!0,f=!0,_=["solid","dashed","dotted","double","groove","ridge","inset","outset","none",void 0,null],k={props:["args"],setup(e){const t=(0,h.KR)(0),o=(0,h.KR)(0),a=(0,h.KR)([]),i=(0,h.KR)([]),r=(0,h.KR)([]),l=(0,h.KR)(e.args.height||0),s=(0,h.KR)(!1),d=null===e.args.zoom_level||void 0===e.args.zoom_level?"auto":e.args.zoom_level,c=(0,h.KR)(d),u=(0,h.KR)(1),p=[.5,.75,1,1.25,1.5,2],k=(0,h.KR)(null),b=(0,h.KR)(null),x=(0,h.KR)(100),E=(0,h.KR)(!1),C=!0===e.args.render_text,z=!0===e.args.allow_clickable_annotations_with_text_rendering,L=(e,t=window.innerWidth)=>{if("string"===typeof e&&e.endsWith("%")){const t=parseFloat(e);if(!isNaN(t))return{type:"percent",value:t/100}}const o=Number(e);return!isNaN(o)&&o>0?{type:"pixel",value:o}:{type:"pixel",value:t}},R=(0,n.EW)(()=>{const t=L(e.args.width,window.innerWidth),o="percent"===t.type?100*t.value+"%":`${t.value}px`,a={width:o,height:e.args.height?`${e.args.height}px`:"auto",position:"relative"},n=e.args.viewer_align||"center";return"center"===n?(a.marginLeft="auto",a.marginRight="auto"):"left"===n?(a.marginLeft="0",a.marginRight="auto"):"right"===n&&(a.marginLeft="auto",a.marginRight="0"),a}),M=e=>{e&&(e.innerHTML="")},$=(e,t,o,a,n=1)=>{const i=e.getViewport({scale:t,rotation:o}),r=(window.devicePixelRatio||1)*n,l=document.createElement("canvas");return l.id=`canvas_page_${a}`,l.height=i.height*r,l.width=i.width*r,l.style.width=`${i.width}px`,l.style.height=`${i.height}px`,l.style.display="block",l.getContext("2d").scale(r,r),l},Z=(t,o,a,n)=>{const i=document.createElement("div");t.id=`${t.id||o}`,i.id=`annotation-${t.id}`,i.setAttribute("data-index",t.id),i.style.position="absolute",i.style.left=t.x*n+"px",i.style.top=t.y*n+"px",i.style.width=t.width*n+"px",i.style.height=t.height*n+"px";let r=t.border;t.border&&_.includes(t.border)||(r="solid"),i.style.outline=`${e.args.annotation_outline_size*n}px ${r} ${t.color}`;const l=!C||z;i.style.cursor=l?"pointer":"text",i.style.pointerEvents=l?"auto":"none",i.style.zIndex=C&&z?12:10,l&&i.addEventListener("click",()=>{v.wk.setComponentValue({clicked_annotation:{index:t.id,...t}})}),a.appendChild(i)},P=async(t,o,a,n,i)=>{const r={canvasContext:o.getContext("2d"),viewport:a};await t.render(r).promise;const l=document.createElement("div");l.className="page",l.style.position="relative",l.style.width=`${a.width}px`,l.style.height=`${a.height}px`,l.style.marginBottom=`${e.args.pages_vertical_spacing}px`,e.args.show_page_separator&&(l.style.borderBottom="1px solid #ddd");const s=document.createElement("div");if(s.className="canvasWrapper",s.style.position="absolute",s.style.top="0",s.style.left="0",s.appendChild(o),l.appendChild(s),C){const e=await t.getTextContent(),o=document.createElement("div");o.className="textLayer",o.style.zIndex="11",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height=`${a.height}px`,o.style.width=`${a.width}px`;const n=new g.D6({textContentSource:e,container:o,viewport:a,textDivs:[]});await n.render(),l.appendChild(o)}n&&n.length>0&&n.forEach((e,t)=>{const o=i+t;Z(e,o,l,a.scale)});const d=document.getElementById("pdfViewer");d.appendChild(l)},W=t=>0===e.args.pages_to_render.length?Array.from({length:t},(e,t)=>t+1):e.args.pages_to_render,I=async(n,l,s)=>{t.value=0,a.value=[],i.value=[],r.value=[];const d=e.args.resolution_boost||1;let p=0;const h=await n.getPage(1),g=h.getViewport({scale:1});let v;if("auto"===c.value)v=o.value/g.width*.98;else if("auto-height"===c.value){const t=b.value.clientHeight;v=!e.args.height||t<50?o.value/g.width*.98:t/g.height*.98}else v=c.value;u.value=v,x.value=Math.round(100*v);let m=0;for(let o=1;o<=n.numPages;o++){const c=await n.getPage(o),u=c.rotate;a.value.push(v),i.value.push(c.getViewport({scale:1,rotation:u}).height);const h=c.getViewport({scale:v,rotation:u});if(h.width>p&&(p=h.width),s.includes(o)){const a=$(c,v,u,o,d);l.style.setProperty("--scale-factor",v);const n=e.args.annotations.filter(e=>Number(e.page)===o);t.value+=a.height/((window.devicePixelRatio||1)*d),await P(c,a,h,n,m),m+=n.length,a.id&&r.value.push(a.id)}}s.length>0&&(t.value-=e.args.pages_vertical_spacing),l.style.width=`${p}px`,l.style.marginLeft="auto",l.style.marginRight="auto"},K=e=>{console.error(e),window.alert(e.message)},V=async e=>{g.EA.workerSrc="pdfjs-dist/build/pdf.worker.mjs";try{const t=(0,g.YE)({url:e,cMapUrl:w,cMapPacked:y,enableXfa:f}),o=await t.promise;k.value=o;const a=document.getElementById("pdfViewer");M(a);const n=W(o.numPages);await I(o,a,n),N()}catch(t){K(t)}},N=()=>{if(e.args.scroll_to_page){const t=document.getElementById(`canvas_page_${e.args.scroll_to_page}`);t&&t.scrollIntoView({behavior:"smooth"})}else if(e.args.scroll_to_annotation){const t=document.querySelector(`[id^="annotation-"][data-index="${e.args.scroll_to_annotation}"]`);t&&t.scrollIntoView({behavior:"smooth",block:"center"})}},O=()=>{const o=e.args.height?e.args.height:t.value;o!==l.value&&(v.wk.setFrameHeight(o),l.value=o)},T=()=>{const t=L(e.args.width,window.innerWidth);let a;a="percent"===t.type?Math.min(Math.floor(t.value*window.innerWidth),window.innerWidth):t.value,a!==o.value&&(o.value=a)},j=async()=>{if(!E.value){E.value=!0;try{const t=`data:application/pdf;base64,${e.args.binary}`;T(),await V(t),O()}catch(t){console.error(t)}finally{E.value=!1}}};(0,n.wB)(()=>e.args.binary,()=>{j()}),(0,n.wB)(()=>e.args.zoom_level,e=>{c.value=null===e||void 0===e?"auto":e,j()}),(0,n.wB)(()=>e.args.viewer_align,()=>{j()});const F=e=>{c.value=e,s.value=!1,j()},B=()=>{const e=Math.min(1.2*u.value,10);F(e)},D=()=>{const e=Math.max(u.value/1.2,.1);F(e)},S=()=>{F("auto")},H=async()=>{e.args.height?F("auto-height"):F("auto")},X=()=>{s.value=!s.value,s.value&&(x.value=Math.round(100*u.value))},A=()=>{let e=parseFloat(x.value);!isNaN(e)&&e>0?(e=Math.max(10,Math.min(e,1e3)),F(e/100)):x.value=Math.round(100*u.value)},q=e=>{s.value&&!e.target.closest(".zoom-controls")&&(s.value=!1)},G=(0,m.debounce)(j,200);return(0,n.sV)(()=>{G(),window.addEventListener("resize",G),document.addEventListener("click",q)}),(0,n.hi)(()=>{window.removeEventListener("resize",G),document.removeEventListener("click",q)}),{pdfContainer:b,pdfContainerStyle:R,showZoomPanel:s,currentZoom:u,localZoomLevel:c,zoomPresets:p,manualZoomInput:x,setZoom:F,zoomIn:B,zoomOut:D,fitToWidth:S,fitToHeight:H,toggleZoomPanel:X,applyManualZoom:A}}};var b=o(6262);const x=(0,b.A)(k,[["render",p],["__scopeId","data-v-44b767d8"]]),E=x,C={key:0},z={class:"err__msg"};function L(e,t,o,a,i,r){return(0,n.uX)(),(0,n.CE)("div",null,[""!=e.componentError?((0,n.uX)(),(0,n.CE)("div",C,[t[0]||(t[0]=(0,n.Lk)("h1",{class:"err__title"},"Component Error",-1)),(0,n.Lk)("div",z,"Message: "+(0,l.v_)(e.componentError),1)])):null!=e.renderData?(0,n.RG)(e.$slots,"default",{key:1,args:e.renderData.args,disabled:e.renderData.disabled},void 0,!0):(0,n.Q3)("",!0)])}const R=(0,n.pM)({name:"WithStreamlitConnection",setup(){const e=(0,h.KR)(void 0),t=(0,h.KR)(""),o=o=>{const a=o;e.value=a.detail,t.value=""};return(0,n.sV)(()=>{v.wk.events.addEventListener(v.wk.RENDER_EVENT,o),v.wk.setComponentReady()}),(0,n.$u)(()=>{""!=t.value&&v.wk.setFrameHeight()}),(0,n.hi)(()=>{v.wk.events.removeEventListener(v.wk.RENDER_EVENT,o)}),(0,n.qG)(e=>{t.value=String(e)}),{renderData:e,componentError:t}}}),M=(0,b.A)(R,[["render",L],["__scopeId","data-v-bef81972"]]),$=M,Z=(0,n.pM)({name:"App",components:{PdfViewer:E,WithStreamlitConnection:$}}),P=(0,b.A)(Z,[["render",r]]),W=P;(0,a.Ef)(W).mount("#app")}},t={};function o(a){var n=t[a];if(void 0!==n)return n.exports;var i=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=e,(()=>{var e=[];o.O=(t,a,n,i)=>{if(!a){var r=1/0;for(c=0;c<e.length;c++){for(var[a,n,i]=e[c],l=!0,s=0;s<a.length;s++)(!1&i||r>=i)&&Object.keys(o.O).every(e=>o.O[e](a[s]))?a.splice(s--,1):(l=!1,i<r&&(r=i));if(l){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[a,n,i]}})(),(()=>{o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{var e={524:0};o.O.j=t=>0===e[t];var t=(t,a)=>{var n,i,[r,l,s]=a,d=0;if(r.some(t=>0!==e[t])){for(n in l)o.o(l,n)&&(o.m[n]=l[n]);if(s)var c=s(o)}for(t&&t(a);d<r.length;d++)i=r[d],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(c)},a=self["webpackChunkstreamlit_pdf_viewer"]=self["webpackChunkstreamlit_pdf_viewer"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=o.O(void 0,[504],()=>o(4610));a=o.O(a)})();
//# sourceMappingURL=app.e67887e5.js.map