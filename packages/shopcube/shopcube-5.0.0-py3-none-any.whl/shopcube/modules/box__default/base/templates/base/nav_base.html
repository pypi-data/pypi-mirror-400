{% set active_page = active_page|default('none') %}

<nav class="navbar navbar-expand-lg sticky-top bg-white border-bottom py-2 px-4 shadow-sm">
    <div class="container-fluid">
        <!-- Brand/logo -->
        <a class="navbar-brand d-flex align-items-center" href="{{url_for('dashboard.index')}}" style="font-weight: 600; letter-spacing: -0.5px;">
            <img src="/static/shopyo.svg" width="30" height="30" class="mr-2">
            <span class="text-dark">{{OUR_APP_NAME}}</span>
            {% if active_page != 'none' %}
                <span class="text-muted ml-2 font-weight-light" style="font-size: 0.9rem; border-left: 1px solid #dee2e6; padding-left: 10px;">{{active_page.capitalize()}}</span>
            {% endif %}
        </a>

        <!-- Toggler for mobile -->
        <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navbarContent">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarContent">
            <!-- Nav Links Left Aligned -->
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link text-dark" href="{{url_for('dashboard.index')}}" title="Dashboard">
                        <i class="fas fa-th-large mr-1" style="font-size: 1.1rem; opacity: 0.7;"></i> Dashboard
                    </a>
                </li>
            </ul>

            <!-- Nav Links Right Aligned -->
            <ul class="navbar-nav ml-auto align-items-center">
                {% if (active_page != 'login') and (active_page != 'register') %}
                    <li class="nav-item dropdown">
                        <a class="nav-link text-dark d-flex align-items-center" href="#" id="userDropdown" role="button" data-toggle="dropdown">
                            <div class="rounded-circle bg-light d-flex align-items-center justify-content-center mr-2" style="width: 32px; height: 32px; border: 1px solid #eee;">
                                <i class="fas fa-user text-secondary" style="font-size: 0.8rem;"></i>
                            </div>
                            <i class="fas fa-chevron-down text-muted" style="font-size: 0.7rem;"></i>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right border-0 shadow-lg mt-2" style="border-radius: 12px;">
                            <a class="dropdown-item py-2" href="{{url_for('auth.logout', next=request.url)}}">
                                <i class="fas fa-sign-out-alt mr-2 text-danger"></i> Logout
                            </a>
                        </div>
                    </li>
                {% else %}
                    <li class="nav-item">
                        <a class="nav-link text-dark font-weight-medium" href="{{url_for('auth.login')}}">Login</a>
                    </li>
                    <li class="nav-item ml-lg-2">
                        <a class="nav-link btn btn-dark text-white px-4 py-2" href="{{url_for('auth.register')}}" style="border-radius: 20px;">Get Started</a>
                    </li>
                {% endif %}
            </ul>
        </div>
    </div>
</nav>
