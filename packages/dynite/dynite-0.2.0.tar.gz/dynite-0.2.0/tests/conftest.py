"""Pytest fixtures for the Dynite test suite.

This module provides shared fixtures used across multiple test files in the
Dynite test suite. Fixtures help reduce code duplication and ensure consistent
test setup. All fixtures are configured for testing the Dynite client with
mock data and simulated API responses.

Fixtures included:
- auth: Provides mock authentication credentials
- base_url: Provides a mock base URL for the Business Central API
- endpoint: Provides a sample API endpoint for testing
- client: Provides a fully initialized Dynite client instance
- next_link: Provides a sample OData nextLink URL for pagination testing
"""

import pytest

from dynite import Dynite


@pytest.fixture
def auth() -> tuple[str, str]:
    """Provide mock authentication credentials for testing.

    Returns a tuple containing username and password strings that can be used
    for initializing Dynite clients in tests. These are dummy credentials used
    only for testing purposes and have no real authentication value.

    Returns:
        tuple[str, str]: A tuple of (username, password) for mock authentication.
    """
    return ("user", "pass")


@pytest.fixture
def base_url() -> str:
    """Provide a mock base URL for the Business Central OData API.

    Returns a sample HTTPS URL that mimics the structure of a real Business
    Central API endpoint. This URL is used in tests to simulate API calls
    without making actual network requests.

    Returns:
        str: A mock base URL string for testing API endpoints.
    """
    return "https://example.com/odata"


@pytest.fixture
def endpoint() -> str:
    """Provide a sample API endpoint for testing.

    Returns a common endpoint name used in Business Central OData API tests.
    This represents a typical entity set like customers, companies, or sales
    orders that would be queried in real usage.

    Returns:
        str: A sample endpoint name ("customers") for testing API calls.
    """
    return "customers"


@pytest.fixture
def client(auth: tuple[str, str], base_url: str) -> Dynite:
    """Provide a fully initialized Dynite client instance for testing.

    Creates and returns a Dynite client configured with mock authentication
    and base URL. This fixture depends on the auth and base_url fixtures and
    provides a ready-to-use client for testing various Dynite methods.

    Args:
        auth (tuple[str, str]): Mock authentication credentials from auth fixture.
        base_url (str): Mock base URL from base_url fixture.

    Returns:
        Dynite: An initialized Dynite client instance with mock configuration.
    """
    return Dynite(base_url=base_url, auth=auth)


@pytest.fixture
def next_link() -> str:
    """Provide a sample OData nextLink URL for pagination testing.

    Returns a URL that simulates the @odata.nextLink field from OData responses,
    which is used for pagination. This URL includes query parameters that would
    typically be generated by the API for fetching subsequent pages of data.

    Returns:
        str: A sample nextLink URL for testing pagination logic.
    """
    return "https://example.com/odata/customers?$skip=10"
