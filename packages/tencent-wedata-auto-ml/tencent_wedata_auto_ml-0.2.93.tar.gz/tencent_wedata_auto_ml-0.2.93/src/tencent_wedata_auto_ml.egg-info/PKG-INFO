Metadata-Version: 2.4
Name: tencent-wedata-auto-ml
Version: 0.2.93
Summary: AutoML SDK for Tencent Cloud WeData using FLAML with MLflow integration.
Author-email: ZhangChunLin <blueszzhang@tencent.com>
License: MIT
Project-URL: Homepage, https://git.woa.com/WeDataOS/wedata-automl
Project-URL: Repository, https://git.woa.com/WeDataOS/wedata-automl.git
Requires-Python: >=3.9
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: flaml==2.3.6
Requires-Dist: lightgbm>=4.0.0
Requires-Dist: xgboost>=2.0.0
Requires-Dist: prophet>=1.1
Requires-Dist: statsmodels>=0.13
Requires-Dist: holidays>=0.25
Requires-Dist: catboost>=1.0.0
Requires-Dist: scikit-learn<1.7,>=1.5
Requires-Dist: numpy<3.0,>=1.24
Requires-Dist: matplotlib>=3.5
Requires-Dist: seaborn>=0.11
Provides-Extra: xgboost
Requires-Dist: xgboost>=1.6; extra == "xgboost"
Provides-Extra: lightgbm
Requires-Dist: lightgbm>=3.3; extra == "lightgbm"
Provides-Extra: wedata
Requires-Dist: tencent-wedata-feature-engineering; extra == "wedata"
Provides-Extra: shap
Requires-Dist: shap>=0.41; extra == "shap"
Provides-Extra: full
Requires-Dist: xgboost>=1.6; extra == "full"
Requires-Dist: lightgbm>=3.3; extra == "full"
Requires-Dist: tencent-wedata-feature-engineering==0.1.36; extra == "full"
Requires-Dist: shap>=0.41; extra == "full"
Requires-Dist: optuna==4.6.0; extra == "full"
Requires-Dist: flaml[spark]==2.3.6; extra == "full"
Requires-Dist: cachetools>=5.0.0; extra == "full"
Requires-Dist: tencentcloud-sdk-python-common>=3.0.1478; extra == "full"
Provides-Extra: notebook
Requires-Dist: jupyterlab; extra == "notebook"
Requires-Dist: ipykernel; extra == "notebook"
Requires-Dist: ipywidgets; extra == "notebook"
Requires-Dist: matplotlib; extra == "notebook"
Requires-Dist: seaborn; extra == "notebook"
Dynamic: license-file

# WeData AutoML

è…¾è®¯äº‘ WeData å¹³å°çš„ AutoML SDKï¼ŒåŸºäº FLAML æ„å»ºï¼Œé›†æˆ MLflow è¿›è¡Œå®éªŒè¿½è¸ªå’Œæ¨¡å‹æ³¨å†Œã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **å¤šä»»åŠ¡æ”¯æŒ**ï¼šåˆ†ç±»ï¼ˆClassificationï¼‰ã€å›å½’ï¼ˆRegressionï¼‰ã€æ—¶åºé¢„æµ‹ï¼ˆForecastï¼‰
- **FLAML é©±åŠ¨**ï¼šé«˜æ•ˆçš„ AutoML è¶…å‚æ•°æœç´¢ï¼Œæ”¯æŒ LightGBMã€XGBoostã€RandomForest ç­‰ä¼°è®¡å™¨
- **MLflow é›†æˆ**ï¼šè‡ªåŠ¨å®éªŒè¿½è¸ªã€æ¨¡å‹æ—¥å¿—è®°å½•ã€æ¨¡å‹æ³¨å†Œ
- **Spark æ”¯æŒ**ï¼šæ”¯æŒ Spark DataFrame è¾“å…¥ï¼Œå¯é…åˆ DLC ä½¿ç”¨
- **ç‰¹å¾å·¥ç¨‹é›†æˆ**ï¼šä¸ WeData ç‰¹å¾å·¥ç¨‹ SDK æ— ç¼å¯¹æ¥
- **Notebook ç”Ÿæˆ**ï¼šè‡ªåŠ¨ç”Ÿæˆå¯å¤ç°çš„ Jupyter Notebookï¼ˆåˆ†ç±»/å›å½’ä»»åŠ¡ï¼‰
- **å¹¶å‘è®­ç»ƒ**ï¼šæ”¯æŒå¤š Trial å¹¶å‘æ‰§è¡Œ

## ğŸ“¦ å®‰è£…

```bash
# åŸºç¡€å®‰è£…
pip install tencent-wedata-auto-ml

# å¯é€‰ä¾èµ–
pip install "tencent-wedata-auto-ml[xgboost]"     # XGBoost æ”¯æŒ
pip install "tencent-wedata-auto-ml[lightgbm]"   # LightGBM æ”¯æŒ
pip install "tencent-wedata-auto-ml[full]"       # å®Œæ•´å®‰è£…ï¼ˆæ¨èï¼‰
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä¾¿æ·å‡½æ•° API

```python
from wedata_automl import classify, regress, forecast

# åˆ†ç±»ä»»åŠ¡
summary = classify(
    dataset=spark.table("demo.wine_quality"),
    target_col="quality",
    timeout_minutes=10,
    max_trials=100,
    metric="accuracy",
    project_id="your_project_id",
    experiment_name="wine_classification",
    register_model=True,
    model_name="wine_model"
)

# å›å½’ä»»åŠ¡
summary = regress(
    dataset=df,
    target_col="price",
    timeout_minutes=10,
    metric="r2",
    project_id="your_project_id"
)

# æ—¶åºé¢„æµ‹ä»»åŠ¡
summary = forecast(
    dataset=spark.table("demo.sales_data"),
    target_col="sales",
    time_col="date",
    horizon=30,
    frequency="D",
    timeout_minutes=60,
    project_id="your_project_id"
)
```

### ä»»åŠ¡ç±» API

```python
from wedata_automl import Classifier, Regressor, Forecast

# ä½¿ç”¨ Classifier ç±»
classifier = Classifier()
summary = classifier.fit(
    dataset=df,
    target_col="label",
    timeout_minutes=10,
    project_id="your_project_id"
)

# ä½¿ç”¨ Regressor ç±»
regressor = Regressor()
summary = regressor.fit(
    dataset=df,
    target_col="target",
    timeout_minutes=10,
    project_id="your_project_id"
)
```

### æŸ¥çœ‹ç»“æœ

```python
print(summary)
# AutoMLSummary:
#   Experiment ID: 42
#   Run ID: abc123...
#   Best Trial Run ID: def456...
#   Model URI: runs:/abc123.../model
#   Best Estimator: lgbm
#   Metrics:
#     accuracy: 0.9500
#     f1: 0.9400

# ç”Ÿæˆå¯å¤ç° Notebookï¼ˆä»…åˆ†ç±»/å›å½’ä»»åŠ¡ï¼‰
summary.generate_notebook("best_model.ipynb")

# ä¿å­˜ Notebook åˆ° WeData å¹³å°
summary.save_notebook_to_wedata()
```

## ğŸ“‹ ä¸»è¦å‚æ•°

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `dataset` | æ•°æ®é›†ï¼ˆPandas/Spark DataFrame æˆ–è¡¨åï¼‰ | å¿…å¡« |
| `target_col` | ç›®æ ‡åˆ—å | å¿…å¡« |
| `project_id` | WeData é¡¹ç›® ID | å¿…å¡« |
| `timeout_minutes` | è¶…æ—¶æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰ | 5 |
| `max_trials` | æœ€å¤§è¯•éªŒæ¬¡æ•° | 100 |
| `metric` | è¯„ä¼°æŒ‡æ ‡ | auto |
| `estimator_list` | ä¼°è®¡å™¨åˆ—è¡¨ | Noneï¼ˆä½¿ç”¨å…¨éƒ¨ï¼‰ |
| `register_model` | æ˜¯å¦æ³¨å†Œæ¨¡å‹ | True |
| `model_name` | æ³¨å†Œæ¨¡å‹åç§° | None |
| `experiment_name` | MLflow å®éªŒåç§° | None |
| `custom_hp` | è‡ªå®šä¹‰è¶…å‚æ•°æœç´¢ç©ºé—´ | None |

### è¯„ä¼°æŒ‡æ ‡

**åˆ†ç±»ä»»åŠ¡**ï¼š`accuracy`, `f1`, `log_loss`, `roc_auc`, `precision`, `recall`

**å›å½’ä»»åŠ¡**ï¼š`r2`, `mse`, `rmse`, `mae`, `mape`

**æ—¶åºé¢„æµ‹**ï¼š`smape`, `mse`, `rmse`, `mae`, `mdape`

### ä¼°è®¡å™¨åˆ—è¡¨

**åˆ†ç±»/å›å½’**ï¼š`lgbm`, `xgboost`, `rf`, `extra_tree`, `lrl1`ï¼ˆä»…åˆ†ç±»ï¼‰

**æ—¶åºé¢„æµ‹**ï¼š`prophet`, `arima`, `sarimax`

## âš™ï¸ ç¯å¢ƒé…ç½®

```bash
# å¿…éœ€ï¼šé¡¹ç›® ID
export WEDATA_PROJECT_ID="your_project_id"

# å¿…éœ€ï¼šMLflow Tracking URI
export MLFLOW_TRACKING_URI="http://your-mlflow-server:5000"

# å¯é€‰ï¼šè…¾è®¯äº‘å¯†é’¥ï¼ˆç”¨äºä¿å­˜ Notebook åˆ° WeDataï¼‰
export TENCENTCLOUD_SECRET_ID="your_secret_id"
export TENCENTCLOUD_SECRET_KEY="your_secret_key"
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
wedata-automl/
â”œâ”€â”€ src/wedata_automl/
â”‚   â”œâ”€â”€ api.py              # ä¾¿æ·å‡½æ•° (classify, regress, forecast)
â”‚   â”œâ”€â”€ summary.py          # AutoMLSummary ç»“æœå¯¹è±¡
â”‚   â”œâ”€â”€ driver.py           # AutoML é©±åŠ¨ç¨‹åº
â”‚   â”œâ”€â”€ tasks/              # ä»»åŠ¡ç±»
â”‚   â”‚   â”œâ”€â”€ classifier.py   # Classifier ç±»
â”‚   â”‚   â”œâ”€â”€ regressor.py    # Regressor ç±»
â”‚   â”‚   â””â”€â”€ forecast.py     # Forecast ç±»
â”‚   â”œâ”€â”€ engines/            # è®­ç»ƒå¼•æ“
â”‚   â”‚   â”œâ”€â”€ flaml_trainer.py # FLAML è®­ç»ƒå™¨
â”‚   â”‚   â””â”€â”€ trial_hook.py   # Trial æ—¥å¿—é’©å­
â”‚   â”œâ”€â”€ notebook_generator/ # Notebook ç”Ÿæˆå™¨
â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
â”œâ”€â”€ templates/              # Driver æ¨¡æ¿
â”‚   â”œâ”€â”€ classification_driver_template.py
â”‚   â””â”€â”€ forecast_driver_template.py
â”œâ”€â”€ docs/                   # æ–‡æ¡£
â””â”€â”€ examples/               # ç¤ºä¾‹ä»£ç 
```

## ğŸ“š æ–‡æ¡£

### ä½¿ç”¨æŒ‡å—
- [Notebook ç”Ÿæˆå™¨](docs/NOTEBOOK_GENERATOR.md) - è‡ªåŠ¨ç”Ÿæˆå¯å¤ç° Notebook
- [å¹¶è¡Œè®­ç»ƒæ”¯æŒ](docs/FLAML_PARALLEL_SUPPORT.md) - å¤š Trial å¹¶å‘æ‰§è¡Œ
- [æ—¥å¿—æ–‡ä»¶ç®¡ç†](docs/LOG_FILE_MANAGEMENT.md) - FLAML æ—¥å¿—é…ç½®
- [ä¸»è¦æŒ‡æ ‡è®°å½•](docs/PRIMARY_METRIC_LOGGING.md) - è¯„ä¼°æŒ‡æ ‡è¯´æ˜
- [æ¨¡å‹æ³¨å†Œæ ‡ç­¾](docs/REGISTER_MODEL_TAG.md) - æ¨¡å‹æ³¨å†Œé…ç½®

### æŠ€æœ¯å‚è€ƒ
- [MLflow ç‰ˆæœ¬å…¼å®¹æ€§](docs/MLFLOW_VERSION_COMPATIBILITY.md) - MLflow 2.16.x - 2.22.x æ”¯æŒ
- [MLflow è¡¥ä¸è¯´æ˜](docs/MLFLOW_PATCH_README.md) - è‡ªåŠ¨è¡¥ä¸æœºåˆ¶
 - WeData è„šæœ¬åˆ›å»º API
- [Databricks AutoML å®ç°åˆ†æ](docs/DATABRICKS_AUTOML_IMPLEMENTATION.md) - è®¾è®¡å‚è€ƒ

## âš ï¸ æ³¨æ„äº‹é¡¹

- Python >= 3.9
- **Project ID å¿…å¡«**ï¼šé€šè¿‡ `project_id` å‚æ•°æˆ– `WEDATA_PROJECT_ID` ç¯å¢ƒå˜é‡é…ç½®
- MLflow Tracking URI å¿…é¡»æ­£ç¡®é…ç½®

## ğŸ“„ License

MIT
