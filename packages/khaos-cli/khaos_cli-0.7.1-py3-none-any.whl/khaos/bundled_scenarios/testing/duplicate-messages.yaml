name: duplicate-messages
description: "Generate duplicate messages for testing deduplication logic"

topics:
  - name: orders
    partitions: 6
    replication_factor: 3
    num_producers: 2
    num_consumer_groups: 1
    consumers_per_group: 2
    producer_rate: 500

    message_schema:
      key_distribution: uniform
      key_cardinality: 100
      fields:
        - name: order_id
          type: uuid
        - name: customer_id
          type: string
          cardinality: 500
        - name: amount
          type: float
          min: 10.0
          max: 1000.0
        - name: status
          type: enum
          values: [pending, confirmed, shipped]
        - name: created_at
          type: timestamp

    producer_config:
      acks: "all"
      compression_type: lz4
      duplicate_rate: 0.15  # 15% of messages will be duplicated

  - name: events
    partitions: 6
    replication_factor: 3
    num_producers: 1
    num_consumer_groups: 1
    consumers_per_group: 2
    producer_rate: 1000

    message_schema:
      key_distribution: zipfian
      key_cardinality: 50
      fields:
        - name: event_id
          type: uuid
        - name: event_type
          type: enum
          values: [click, view, purchase, add_to_cart]
        - name: user_id
          type: string
          cardinality: 1000
        - name: timestamp
          type: timestamp

    producer_config:
      acks: "1"
      compression_type: snappy
      duplicate_rate: 0.20  # 20% duplicates - higher rate for stress testing
