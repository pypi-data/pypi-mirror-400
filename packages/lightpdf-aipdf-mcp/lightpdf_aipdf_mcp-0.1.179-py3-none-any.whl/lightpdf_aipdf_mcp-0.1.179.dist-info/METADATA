Metadata-Version: 2.4
Name: lightpdf-aipdf-mcp
Version: 0.1.179
Summary: MCP Server for LightPDF AI-PDF
Author: LightPDF Team
License: Proprietary
Requires-Python: >=3.10
Requires-Dist: fastmcp
Requires-Dist: httpx
Requires-Dist: httpx-sse
Requires-Dist: mcp
Requires-Dist: mcp[cli]
Requires-Dist: pillow
Requires-Dist: pydantic
Requires-Dist: pydantic-settings
Requires-Dist: python-dotenv
Requires-Dist: starlette
Requires-Dist: uvicorn
Description-Content-Type: text/markdown

# LightPDF AI-PDF MCP Server ğŸš€

åŸºäº **FastMCP** æ¡†æ¶çš„ç°ä»£åŒ– PDF å¤„ç†å·¥å…·ï¼Œæä¾› 22 ä¸ªä¸“ä¸šçš„æ–‡æ¡£å¤„ç†åŠŸèƒ½ã€‚

## âœ¨ é¡¹ç›®ç‰¹è‰²

- **ğŸš€ é«˜æ•ˆæ¶æ„**ï¼šåŸºäº FastMCPï¼Œç°ä»£åŒ–è®¾è®¡
- **ğŸ”’ ç±»å‹å®‰å…¨**ï¼š100% ç¼–è¯‘æ—¶å‚æ•°éªŒè¯  
- **âš¡ å¼€å‘å‹å¥½**ï¼šæ–°å·¥å…·å¼€å‘é€Ÿåº¦æå‡ 300%+
- **ğŸ”„ å®Œå…¨å…¼å®¹**ï¼šæ ‡å‡† MCP åè®® 100% å…¼å®¹
- **ğŸ› ï¸ åŠŸèƒ½ä¸°å¯Œ**ï¼š22 ä¸ªå·¥å…·æ¶µç›– PDF å¤„ç†æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…å’Œå¯åŠ¨

```bash
# å®‰è£…ä¾èµ–
uv sync

# å¯åŠ¨ stdio æ¨¡å¼ï¼ˆç”¨äº MCP å®¢æˆ·ç«¯ï¼‰
python run.py

# å¯åŠ¨ SSE æœåŠ¡å™¨æ¨¡å¼ï¼ˆç”¨äº Web è°ƒè¯•ï¼‰
python run.py -p 8000 --sse

# å¯åŠ¨ HTTP æœåŠ¡å™¨æ¨¡å¼ï¼ˆç”¨äº HTTP è°ƒè¯•ï¼‰
python run.py -p 8000
```

### éªŒè¯å®‰è£…

```bash
# è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
python test_server.py
```

## ğŸ› ï¸ å¯ç”¨å·¥å…·ï¼ˆå…±22ä¸ªï¼‰

### ğŸ“„ æ–‡æ¡£è½¬æ¢ (3ä¸ª)
- `convert_document` - æ–‡æ¡£æ ¼å¼è½¬æ¢ï¼Œæ”¯æŒ20+æ ¼å¼äº’è½¬
- `add_page_numbers` - ä¸º PDF æ·»åŠ é¡µç 
- `remove_watermark` - å»é™¤ PDF æ°´å°

### ğŸ”§ PDFç¼–è¾‘ (6ä¸ª)  
- `compress_pdf` - PDF å‹ç¼©ä¼˜åŒ–
- `merge_pdfs` - åˆå¹¶å¤šä¸ª PDF
- `split_pdf` - æŒ‰é¡µé¢ã€èŒƒå›´æˆ–ä¹¦ç­¾æ‹†åˆ† PDF
- `rotate_pdf` - æ—‹è½¬ PDF é¡µé¢
- `unlock_pdf` - ç§»é™¤ PDF å¯†ç ä¿æŠ¤
- `protect_pdf` - ä¸º PDF æ·»åŠ å¯†ç ä¿æŠ¤

### ğŸ¨ æ°´å°å·¥å…· (2ä¸ª)
- `add_text_watermark` - æ·»åŠ æ–‡æœ¬æ°´å°
- `add_image_watermark` - æ·»åŠ å›¾ç‰‡æ°´å°

### ğŸ¤– AIåŠŸèƒ½ (4ä¸ª)
- `create_pdf` - åŸºäºæ–‡æœ¬æè¿°ç”Ÿæˆ PDF
- `translate_pdf` - PDF æ–‡æ¡£ç¿»è¯‘ï¼ˆ35ç§è¯­è¨€ï¼‰
- `ocr_document` - OCR æ–‡å­—è¯†åˆ« (æ”¯æŒPDF/DOC/PPT/Excel/å›¾ç‰‡ç­‰)
- `summarize_document` - æ–‡æ¡£æ‘˜è¦ç”Ÿæˆ

### ğŸ”§ ä¸“ä¸šå·¥å…· (7ä¸ª)
- `remove_margin` - å»é™¤ PDF ç™½è¾¹
- `extract_images` - æå– PDF ä¸­çš„å›¾ç‰‡
- `flatten_pdf` - æ‰å¹³åŒ– PDFï¼ˆè¡¨å•è½¬é™æ€ï¼‰
- `repair_pdf` - ä¿®å¤æŸåçš„ PDF
- `curve_pdf` - æ–‡å­—è½¬æ›²ï¼ˆé˜²æ­¢æ–‡å­—æå–ï¼‰
- `double_layer_pdf` - è½¬æ¢ä¸ºåŒå±‚ PDFï¼ˆå¯æœç´¢ï¼‰
- `delete_pdf_pages` - åˆ é™¤æŒ‡å®šé¡µé¢

### ğŸ”’ å®‰å…¨åŠŸèƒ½ (2ä¸ª)
- `restrict_printing` - é™åˆ¶ PDF æ‰“å°æƒé™
- `resize_pdf` - è°ƒæ•´ PDF å¤§å°å’Œåˆ†è¾¨ç‡
- `replace_text` - æ›¿æ¢ PDF æ–‡æœ¬å†…å®¹

## ğŸ“ é¡¹ç›®æ¶æ„

é‡‡ç”¨æ¸…æ™°çš„ç°ä»£åŒ–5å±‚æ¶æ„ï¼š

```
src/lightpdf_aipdf_mcp/
â”œâ”€â”€ api/                    # APIå±‚ - FastMCPæœåŠ¡å™¨ä¸é€‚é…å™¨
â”‚   â”œâ”€â”€ server.py          # FastMCPä¸»æœåŠ¡å™¨ (22ä¸ªå·¥å…·)
â”‚   â””â”€â”€ adapter.py         # ä¸šåŠ¡é€»è¾‘é€‚é…å™¨
â”œâ”€â”€ core/                   # æ ¸å¿ƒå±‚ - ç»Ÿä¸€ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ processor.py       # æ ¸å¿ƒä¸šåŠ¡å¤„ç†å™¨
â”œâ”€â”€ services/              # æœåŠ¡å±‚ - å…·ä½“åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ converter.py       # æ–‡æ¡£è½¬æ¢æœåŠ¡
â”‚   â”œâ”€â”€ editor.py         # PDFç¼–è¾‘æœåŠ¡
â”‚   â”œâ”€â”€ create_pdf.py     # PDFåˆ›å»ºæœåŠ¡
â”‚   â”œâ”€â”€ translator.py     # ç¿»è¯‘æœåŠ¡
â”‚   â”œâ”€â”€ summarizer.py     # æ‘˜è¦æœåŠ¡
â”‚   â””â”€â”€ ocr.py           # OCRæœåŠ¡
â”œâ”€â”€ models/               # æ¨¡å‹å±‚ - æ•°æ®ç»“æ„
â”‚   â””â”€â”€ schemas.py       # Pydanticæ•°æ®æ¨¡å‹
â””â”€â”€ utils/               # å·¥å…·å±‚ - é€šç”¨å·¥å…·
    â””â”€â”€ common.py        # åŸºç¡€å·¥å…·ç±»
```

## ğŸ”„ æ¶æ„ä¼˜åŠ¿

| ç‰¹æ€§ | ä¼ ç»Ÿæ–¹å¼ | FastMCP æ–¹å¼ |
|------|---------|-------------|
| ä»£ç ç®€æ´åº¦ | å¤æ‚å†—é•¿ | ç®€æ´é«˜æ•ˆ |
| Schema å®šä¹‰ | æ‰‹å†™ JSON | è‡ªåŠ¨ç”Ÿæˆ |
| ç±»å‹æ£€æŸ¥ | è¿è¡Œæ—¶ | ç¼–è¯‘æ—¶ |
| å¼€å‘æ–°å·¥å…· | ~200 è¡Œ/å·¥å…· | ~20 è¡Œ/å·¥å…· |
| ç»´æŠ¤éš¾åº¦ | é«˜ | ä½ |
| è°ƒè¯•å‹å¥½åº¦ | ä¸€èˆ¬ | æé«˜ |

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°å·¥å…·

```python
@mcp.tool
async def my_new_tool(
    ctx: Context,  # Contextå‚æ•°å¿…é¡»åœ¨ç¬¬ä¸€ä½
    files: List[FileObject],
    my_param: str,
    optional_param: Optional[int] = None
) -> str:
    """
    æˆ‘çš„æ–°å·¥å…·æè¿°
    
    Args:
        files: è¾“å…¥æ–‡ä»¶åˆ—è¡¨
        my_param: å¿…éœ€å‚æ•°
        optional_param: å¯é€‰å‚æ•°
    
    Returns:
        JSON æ ¼å¼çš„å¤„ç†ç»“æœ
    """
    logger = Logger(ctx, collect_info=False)
    await logger.log("info", f"å¼€å§‹å¤„ç† {len(files)} ä¸ªæ–‡ä»¶...")
    
    # æ„å»ºæ“ä½œé…ç½®
    operation_config = generate_operation_config(
        operation_type="convert",  # æˆ– "edit", "translate", "ocr", "summarize"
        format_value="my-format",
        extra_params={"my_param": my_param}
    )
    
    # è°ƒç”¨é€‚é…å™¨
    result = await process_tool_call_adapter(logger, files, operation_config)
    
    await logger.log("info", "å¤„ç†å®Œæˆ")
    return result
```

### æµ‹è¯•å·¥å…·

```python
# åœ¨ test_server.py ä¸­æ·»åŠ 
result = await client.call_tool("my_new_tool", {
    "files": [{"path": "test.pdf"}],
    "my_param": "test_value"
})
```

## ğŸ“š æŠ€æœ¯æ ˆ

- **FastMCP**: ç°ä»£åŒ–çš„ MCP æœåŠ¡å™¨æ¡†æ¶
- **Pydantic**: æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–
- **asyncio**: å¼‚æ­¥ I/O æ”¯æŒ
- **LightPDF API**: åº•å±‚æ–‡æ¡£å¤„ç†æœåŠ¡

## ğŸ¤ å¼€å‘æœ€ä½³å®è·µ

1. **å‚æ•°é¡ºåº**ï¼š`ctx: Context` å‚æ•°å§‹ç»ˆæ”¾åœ¨ç¬¬ä¸€ä½
2. **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨ Pydantic æ¨¡å‹ç¡®ä¿ç±»å‹æ£€æŸ¥
3. **æ¨¡å—åŒ–**ï¼šæ–°åŠŸèƒ½ä¼˜å…ˆåœ¨ `services/` å±‚å®ç°
4. **æµ‹è¯•é©±åŠ¨**ï¼šæ·»åŠ åŠŸèƒ½æ—¶åŒæ­¥ç¼–å†™æµ‹è¯•ç”¨ä¾‹
5. **æ—¥å¿—è®°å½•**ï¼šä½¿ç”¨ç»Ÿä¸€çš„ Logger è¿›è¡Œæ—¥å¿—ç®¡ç†
6. **é”™è¯¯å¤„ç†**ï¼šæä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œè°ƒè¯•ä¿¡æ¯

## ğŸ¯ æ€§èƒ½ç‰¹ç‚¹

- **å¯åŠ¨é€Ÿåº¦**: å¿«é€Ÿå¯åŠ¨ï¼Œæ”¯æŒå¤šç§è¿è¡Œæ¨¡å¼
- **å†…å­˜æ•ˆç‡**: ä¼˜åŒ–çš„å†…å­˜ä½¿ç”¨ï¼Œæ”¯æŒå¤§æ–‡ä»¶å¤„ç†
- **å¹¶å‘å¤„ç†**: æ™ºèƒ½å¹¶å‘æ§åˆ¶ï¼Œæœ€å¤§åŒ–å¤„ç†æ•ˆç‡
- **ç±»å‹å®‰å…¨**: ç¼–è¯‘æ—¶å‚æ•°éªŒè¯ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯

## ğŸŒ è¿è¡Œæ¨¡å¼

æ”¯æŒå¤šç§è¿è¡Œæ¨¡å¼ï¼š

1. **stdio æ¨¡å¼**ï¼šæ ‡å‡† MCP å®¢æˆ·ç«¯è¿æ¥
   ```bash
   python run.py
   ```

2. **HTTP æ¨¡å¼**ï¼šHTTP API æœåŠ¡
   ```bash
   python run.py -p 8000
   ```

3. **SSE æ¨¡å¼**ï¼šæœåŠ¡å™¨å‘é€äº‹ä»¶æ¨¡å¼
   ```bash
   python run.py -p 8000 --sse
   ```

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [åŠŸèƒ½ä»‹ç»å’Œé…ç½®æŒ‡å—ï¼ˆä¸­æ–‡ï¼‰](./Intro.md)
- [Feature Introduction and Configuration Guide (English)](./Intro.en.md)
- [LightPDF å¼€å‘è€…æ–‡æ¡£](https://lightpdf.cn/edit-api-doc#/)

## ğŸ”‘ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
- `API_KEY`: LightPDF API å¯†é’¥ï¼ˆå¿…éœ€ï¼‰
- `API_ENDPOINT`: API ç«¯ç‚¹åœ°å€ï¼ˆé»˜è®¤ï¼štechsz.aoscdn.com/apiï¼‰

### MCP å®¢æˆ·ç«¯é…ç½®ç¤ºä¾‹

```json
{
  "mcpServers": {
    "lightpdf": {
      "command": "uvx",
      "args": ["lightpdf-aipdf-mcp@latest"],
      "env": {
        "API_KEY": "your_api_key_here",
        "API_ENDPOINT": "techsz.aoscdn.com/api"
      }
    }
  }
}
```

---

**ğŸ‰ ç°ä»£åŒ–ã€é«˜æ•ˆç‡ã€ç±»å‹å®‰å…¨çš„ LightPDF Agent MCP Serverï¼Œè®© PDF å¤„ç†å˜å¾—ç®€å•ï¼** 