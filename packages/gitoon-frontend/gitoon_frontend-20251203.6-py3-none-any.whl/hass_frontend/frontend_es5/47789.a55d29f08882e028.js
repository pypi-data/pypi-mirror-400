"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["47789"],{12814:function(t,e,i){i.d(e,{Vy:function(){return o},fI:function(){return a},ux:function(){return c}});i(23418),i(47764);var n=i(22786),r=i(79468),s=54;function o(t,e){var i=t%s+1;return e.getPropertyValue("--color-".concat(i))}function a(t,e){var i=e.getPropertyValue("--graph-color-".concat(t+1))||o(t,e);return(0,r.RQ)(i)}var c=(0,n.A)(function(t){return Array.from({length:s},function(e,i){return a(i,t)})},function(t,e){return t[0].getPropertyValue("--graph-color-1")===e[0].getPropertyValue("--graph-color-1")&&t[0].getPropertyValue("--color-1")===e[0].getPropertyValue("--color-1")})},15090:function(t,e,i){i.d(e,{n:function(){return d},v:function(){return u}});var n=i(78261),r=i(7739),s=(i(2008),i(23792),i(62062),i(44114),i(26910),i(18111),i(22489),i(61701),i(5506),i(26099),i(31415),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698),i(47764),i(62953),i(69093)),o=i(92025),a=i(71727),c=i(52220),u={alarm_control_panel:["armed_away","armed_custom_bypass","armed_home","armed_night","armed_vacation","arming","disarmed","disarming","pending","triggered"],alert:["on","off","idle"],assist_satellite:["idle","listening","responding","processing"],automation:["on","off"],binary_sensor:["on","off"],button:[],calendar:["on","off"],camera:["idle","recording","streaming"],cover:["closed","closing","open","opening"],device_tracker:["home","not_home"],fan:["on","off"],humidifier:["on","off"],input_boolean:["on","off"],input_button:[],lawn_mower:["error","paused","mowing","returning","docked"],light:["on","off"],lock:["jammed","locked","locking","unlocked","unlocking","opening","open"],media_player:["off","on","idle","playing","paused","standby","buffering"],person:["home","not_home"],plant:["ok","problem"],remote:["on","off"],scene:[],schedule:["on","off"],script:["on","off"],siren:["on","off"],sun:["above_horizon","below_horizon"],switch:["on","off"],timer:["active","idle","paused"],update:["on","off"],vacuum:["cleaning","docked","error","idle","paused","returning"],valve:["closed","closing","open","opening"],weather:["clear-night","cloudy","exceptional","fog","hail","lightning-rainy","lightning","partlycloudy","pouring","rainy","snowy-rainy","snowy","sunny","windy-variant","windy"]},l={alarm_control_panel:{code_format:["number","text"]},binary_sensor:{device_class:["battery","battery_charging","co","cold","connectivity","door","garage_door","gas","heat","light","lock","moisture","motion","moving","occupancy","opening","plug","power","presence","problem","running","safety","smoke","sound","tamper","update","vibration","window"]},button:{device_class:["restart","update"]},camera:{frontend_stream_type:["hls","web_rtc"]},climate:{hvac_action:["off","idle","preheating","defrosting","heating","cooling","drying","fan"]},cover:{device_class:["awning","blind","curtain","damper","door","garage","gate","shade","shutter","window"]},device_tracker:{source_type:["bluetooth","bluetooth_le","gps","router"]},fan:{direction:["forward","reverse"]},humidifier:{device_class:["humidifier","dehumidifier"],action:["off","idle","humidifying","drying"]},media_player:{device_class:["tv","speaker","receiver"],media_content_type:["album","app","artist","channel","channels","composer","contributing_artist","episode","game","genre","image","movie","music","playlist","podcast","season","track","tvshow","url","video"],repeat:["off","one","all"]},number:{device_class:["temperature"]},sensor:{device_class:["apparent_power","aqi","battery","carbon_dioxide","carbon_monoxide","current","date","duration","energy","frequency","gas","humidity","illuminance","monetary","nitrogen_dioxide","nitrogen_monoxide","nitrous_oxide","ozone","ph","pm1","pm10","pm25","pm4","power_factor","power","pressure","reactive_power","signal_strength","sulphur_dioxide","temperature","timestamp","volatile_organic_compounds","volatile_organic_compounds_parts","voltage","volume_flow_rate"],state_class:["measurement","total","total_increasing"]},switch:{device_class:["outlet","switch"]},update:{device_class:["firmware"]},water_heater:{away_mode:["on","off"]}},d=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,d=(0,s.t)(e),h=[];switch(!i&&d in u?h.push.apply(h,(0,r.A)(u[d])):i&&d in l&&i in l[d]&&h.push.apply(h,(0,r.A)(l[d][i])),d){case"climate":i?"fan_mode"===i?h.push.apply(h,(0,r.A)(e.attributes.fan_modes)):"preset_mode"===i?h.push.apply(h,(0,r.A)(e.attributes.preset_modes)):"swing_mode"===i&&h.push.apply(h,(0,r.A)(e.attributes.swing_modes)):h.push.apply(h,(0,r.A)(e.attributes.hvac_modes));break;case"device_tracker":case"person":i||h.push.apply(h,(0,r.A)(Object.entries(t.states).filter(function(t){var e=(0,n.A)(t,2),i=e[0],r=e[1];return"zone"===(0,a.m)(i)&&"zone.home"!==i&&r.attributes.friendly_name}).map(function(t){var e=(0,n.A)(t,2);e[0];return e[1].attributes.friendly_name}).sort(function(e,i){return(0,c.xL)(e,i,t.locale.language)})));break;case"event":"event_type"===i&&h.push.apply(h,(0,r.A)(e.attributes.event_types));break;case"fan":"preset_mode"===i&&h.push.apply(h,(0,r.A)(e.attributes.preset_modes));break;case"humidifier":"mode"===i&&h.push.apply(h,(0,r.A)(e.attributes.available_modes));break;case"input_select":case"select":i||h.push.apply(h,(0,r.A)(e.attributes.options));break;case"light":"effect"===i&&e.attributes.effect_list?h.push.apply(h,(0,r.A)(e.attributes.effect_list)):"color_mode"===i&&e.attributes.supported_color_modes&&h.push.apply(h,(0,r.A)(e.attributes.supported_color_modes));break;case"media_player":"sound_mode"===i?h.push.apply(h,(0,r.A)(e.attributes.sound_mode_list)):"source"===i&&h.push.apply(h,(0,r.A)(e.attributes.source_list));break;case"remote":"current_activity"===i&&h.push.apply(h,(0,r.A)(e.attributes.activity_list));break;case"sensor":i||"enum"!==e.attributes.device_class||h.push.apply(h,(0,r.A)(e.attributes.options));break;case"vacuum":"fan_speed"===i&&h.push.apply(h,(0,r.A)(e.attributes.fan_speed_list));break;case"water_heater":i&&"operation_mode"!==i||h.push.apply(h,(0,r.A)(e.attributes.operation_list))}return i||h.push.apply(h,(0,r.A)(o.s7)),(0,r.A)(new Set(h))}},72190:function(t,e,i){i.d(e,{c:function(){return p}});i(25276),i(23792),i(36033),i(26099),i(47764),i(62953);var n=i(12814),r=i(79468),s=i(39274),o=i(71727),a=i(27120),c=i(92025),u=i(86030),l=i(69093),d=i(15090),h={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};var _=0,f=new Map;function p(t,e,i){return function(t,e,i){var n;if(!i||t===c.Hh)return(0,u.a)("--history-unavailable-color",e);if(t===c.HV)return(0,u.a)("--history-unknown-color",e);var l=(0,a.mg)(i,t);if(l){var d=(0,u.a)(l,e);if(d){var _=(0,o.m)(i.entity_id),f=null===(n=h[_])||void 0===n?void 0:n[t];return f?(0,r.zm)((0,s.T)((0,r.Nc)((0,r.xp)(d)),f)):d}}}(t,e,i)||function(t,e,i){if(i){var r=(0,l.t)(i),s=(d.v[r]||"sensor"===r&&"enum"===i.attributes.device_class&&i.attributes.options||[]).indexOf(t);if(-1!==s)return(0,n.fI)(s,e)}}(t,e,i)||function(t,e){if(f.has(t))return f.get(t);var i=(0,n.fI)(_,e);return _++,f.set(t,i),i}(t,e)}},23528:function(t,e,i){i.a(t,async function(t,n){try{i.d(e,{$3:function(){return g},$O:function(){return H},$j:function(){return v},ED:function(){return c},JE:function(){return I},OQ:function(){return O},PU:function(){return C},Ph:function(){return y},Uf:function(){return S},W1:function(){return m},Wr:function(){return _},Z:function(){return d},gF:function(){return b},iY:function(){return w},jU:function(){return u},nN:function(){return x},p3:function(){return h},pJ:function(){return p},r_:function(){return l},sz:function(){return f}});var r=i(31432),s=(i(74423),i(18111),i(13579),i(69085),i(26099),i(21699),i(28978)),o=i(380),a=t([o]);o=(a.then?(await a)():a)[0];var c=function(t){return t[t.NONE=0]="NONE",t[t.ARITHMETIC=1]="ARITHMETIC",t[t.CIRCULAR=2]="CIRCULAR",t}({}),u=["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"],l=["L","gal","ft³","m³","CCF","MCF"],d=function(t){return t.sendMessagePromise({type:"recorder/info"})},h=function(t,e){return t.callWS({type:"recorder/list_statistic_ids",statistic_type:e})},_=function(t,e){return t.callWS({type:"recorder/get_statistics_metadata",statistic_ids:e})},f=function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"hour",s=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return t.callWS({type:"recorder/statistics_during_period",start_time:e.toISOString(),end_time:null==i?void 0:i.toISOString(),statistic_ids:n,period:r,units:s,types:o})},p=function(t,e,i,n){return t.callWS({type:"recorder/statistic_during_period",statistic_id:e,units:n,fixed_period:i.fixed_period?{start_time:i.fixed_period.start instanceof Date?i.fixed_period.start.toISOString():i.fixed_period.start,end_time:i.fixed_period.end instanceof Date?i.fixed_period.end.toISOString():i.fixed_period.end}:void 0,calendar:i.calendar?Object.assign(Object.assign({},"week"===i.calendar.period?{first_weekday:(0,o.D)(t.locale).substring(0,3)}:{}),i.calendar):void 0,rolling_window:i.rolling_window})},y=function(t){return t.callWS({type:"recorder/validate_statistics"})},m=function(t,e,i,n){return t.callWS({type:"recorder/update_statistics_metadata",statistic_id:e,unit_of_measurement:i,unit_class:n})},g=function(t,e){return t.callWS({type:"recorder/clear_statistics",statistic_ids:e})},v=function(t){var e=null;if(!t)return null;var i,n=(0,r.A)(t);try{for(n.s();!(i=n.n()).done;){var s=i.value;null!==s.change&&void 0!==s.change&&(null===e?e=s.change:e+=s.change)}}catch(o){n.e(o)}finally{n.f()}return e},b=function(t,e){var i,n=null,s=(0,r.A)(e);try{for(s.s();!(i=s.n()).done;){var o=i.value;if(o in t){var a=v(t[o]);null!==a&&(null===n?n=a:n+=a)}}}catch(c){s.e(c)}finally{s.f()}return n},w=function(t,e){return t.some(function(t){return void 0!==t[e]&&null!==t[e]})},k=["mean","min","max"],A=["sum","state","change"],x=function(t,e){return!(!k.includes(e)||0===t.mean_type)||!(!A.includes(e)||!t.has_sum)},S=function(t,e,i,n,r){var s=new Date(i).toISOString();return t.callWS({type:"recorder/adjust_sum_statistics",statistic_id:e,start_time:s,adjustment:n,adjustment_unit_of_measurement:r})},H=function(t,e,i){var n=t.states[e];return n?(0,s.u)(n):(null==i?void 0:i.name)||e},I=function(t,e,i){var n,r;e&&(n=null===(r=t.states[e])||void 0===r?void 0:r.attributes.unit_of_measurement);return void 0===n?null==i?void 0:i.statistics_unit_of_measurement:n},O=function(t){return t.includes(":")},C=function(t){return t.callWS({type:"recorder/update_statistics_issues"})};n()}catch(T){n(T)}})},41544:function(t,e,i){i.a(t,async function(t,n){try{i.r(e),i.d(e,{DEFAULT_HOURS_TO_SHOW:function(){return E},HuiHistoryGraphCard:function(){return j}});var r,s,o,a,c,u=i(72153),l=i(61397),d=i(50264),h=i(44734),_=i(43080),f=i(69683),p=i(6454),y=i(25460),m=(i(16280),i(28706),i(23792),i(62062),i(18111),i(7588),i(61701),i(69085),i(26099),i(3362),i(47764),i(23500),i(62953),i(40445)),g=i(96196),v=i(77845),b=i(94333),w=i(36312),k=i(6030),A=i(66737),x=(i(38962),i(76776),i(43661),i(25064)),S=i(23528),H=i(64808),I=i(37642),O=i(784),C=i(20939),T=t([A,S,x]);[A,S,x]=T.then?(await T)():T;var E=24,j=function(t){function e(){var t;(0,h.A)(this,e);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=(0,f.A)(this,e,[].concat(n)))._names={},t._entityIds=[],t._entities=[],t._hoursToShow=E,t}return(0,p.A)(e,t),(0,_.A)(e,[{key:"getCardSize",value:function(){var t,e;return null!==(t=this._config)&&void 0!==t&&t.title?2:0+2*((null===(e=this._entityIds)||void 0===e?void 0:e.length)||1)}},{key:"getGridOptions",value:function(){return{columns:12,min_columns:6,min_rows:2}}},{key:"setConfig",value:function(t){if(!t.entities||!Array.isArray(t.entities))throw new Error("Entities need to be an array");if(!t.entities.length)throw new Error("You must include at least one entity");this._entities=t.entities?(0,C.L)(t.entities):[],this._entityIds=this._entities.map(function(t){return t.entity}),this._hoursToShow=t.hours_to_show||E,this._config=t,this._computeNames()}},{key:"_computeNames",value:function(){var t=this;this.hass&&this._config&&(this._names={},this._entities.forEach(function(e){var i=t.hass.states[e.entity];t._names[e.entity]=i?(0,I.v)(t.hass,i,e.name):e.entity}))}},{key:"willUpdate",value:function(t){(0,y.A)(e,"willUpdate",this,3)([t]),t.has("hass")&&this._computeNames()}},{key:"connectedCallback",value:function(){(0,y.A)(e,"connectedCallback",this,3)([]),this.hasUpdated&&this._subscribeHistory()}},{key:"disconnectedCallback",value:function(){(0,y.A)(e,"disconnectedCallback",this,3)([]),this._unsubscribeHistory()}},{key:"_subscribeHistory",value:(m=(0,d.A)((0,l.A)().m(function t(){var e,i,n=this;return(0,l.A)().w(function(t){for(;;)switch(t.n){case 0:if((0,w.x)(this.hass,"history")&&!this._subscribed){t.n=1;break}return t.a(2);case 1:return t.n=2,(0,H.KL)(this.hass);case 2:return e=t.v,i=e.numeric_device_classes,this._subscribed=(0,x.IQ)(this.hass,function(t){var e;n._subscribed&&(n._stateHistory=(0,x.Mm)(n.hass,t,n._entityIds,n.hass.localize,i,null===(e=n._config)||void 0===e?void 0:e.split_device_classes),n._mergeHistory())},this._hoursToShow,this._entityIds).catch(function(t){n._subscribed=void 0,n._error=t}),t.n=3,this._fetchStatistics(i);case 3:this._setRedrawTimer();case 4:return t.a(2)}},t,this)})),function(){return m.apply(this,arguments)})},{key:"_mergeHistory",value:function(){var t;this._stateHistory&&(this._history=(0,x.tG)(this._stateHistory,this._statisticsHistory,null===(t=this._config)||void 0===t?void 0:t.split_device_classes))}},{key:"_fetchStatistics",value:(c=(0,d.A)((0,l.A)().m(function t(e){var i,n,r,s;return(0,l.A)().w(function(t){for(;;)switch(t.n){case 0:return n=new Date,(r=new Date).setHours(r.getHours()-this._hoursToShow-1),t.n=1,(0,S.sz)(this.hass,r,n,this._entityIds,"hour",void 0,["mean","state"]);case 1:s=t.v,this._statisticsHistory=(0,x._1)(this.hass,s,this._entityIds,e,null===(i=this._config)||void 0===i?void 0:i.split_device_classes),this._mergeHistory();case 2:return t.a(2)}},t,this)})),function(t){return c.apply(this,arguments)})},{key:"_redrawGraph",value:function(){this._history&&(this._history=Object.assign({},this._history))}},{key:"_setRedrawTimer",value:function(){var t=this;clearInterval(this._interval),this._interval=window.setInterval(function(){return t._redrawGraph()},6e4)}},{key:"_unsubscribeHistory",value:function(){clearInterval(this._interval),this._subscribed&&(this._subscribed.then(function(t){return null==t?void 0:t()}),this._subscribed=void 0)}},{key:"shouldUpdate",value:function(t){return(0,O.pY)(this,t)||t.size>1||!t.has("hass")}},{key:"updated",value:function(t){if((0,y.A)(e,"updated",this,3)([t]),this._config&&this.hass&&this._hoursToShow&&this._entityIds.length&&(t.has("_config")||t.has("hass"))){var i=t.get("_config");!t.has("_config")||(null==i?void 0:i.entities)===this._config.entities&&(null==i?void 0:i.hours_to_show)===this._config.hours_to_show||(this._unsubscribeHistory(),this._subscribeHistory())}}},{key:"render",value:function(){var t,e,i,n;if(!this.hass||!this._config)return g.s6;var c=new Date;c.setHours(c.getHours()-this._hoursToShow);var l="/history?".concat((0,k.KH)({entity_id:this._entityIds.join(","),start_date:c.toISOString()})),d=null!==(t=null===(e=this._config.grid_options)||void 0===e?void 0:e.columns)&&void 0!==t?t:12,h="number"==typeof d&&d<=12,_="number"==typeof(null===(i=this._config.grid_options)||void 0===i?void 0:i.rows);return(0,g.qy)(r||(r=(0,u.A)([" <ha-card> ",' <div class="content ','"> '," </div> </ha-card> "])),this._config.title?(0,g.qy)(s||(s=(0,u.A)([' <h1 class="card-header"> ',' <a href="','"><ha-icon-next></ha-icon-next></a> </h1> '])),this._config.title,l):g.s6,(0,b.H)({"has-header":!!this._config.title,"has-rows":!(null===(n=this._config.grid_options)||void 0===n||!n.rows),"has-height":_}),this._error?(0,g.qy)(o||(o=(0,u.A)([' <ha-alert alert-type="error"> ',": "," </ha-alert> "])),this.hass.localize("ui.components.history_charts.error"),this._error.message||this._error.code):(0,g.qy)(a||(a=(0,u.A)([' <state-history-charts .hass="','" .isLoadingData="','" .historyData="','" .names="','" up-to-now .hoursToShow="','" .showNames="','" .logarithmicScale="','" .minYAxis="','" .maxYAxis="','" .fitYData="','" .height="','" .narrow="','" .expandLegend="','"></state-history-charts> '])),this.hass,!this._history,this._history,this._names,this._hoursToShow,void 0===this._config.show_names||this._config.show_names,this._config.logarithmic_scale||!1,this._config.min_y_axis,this._config.max_y_axis,this._config.fit_y_data||!1,_?"100%":void 0,h,this._config.expand_legend))}}],[{key:"getConfigElement",value:(n=(0,d.A)((0,l.A)().m(function t(){return(0,l.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Promise.all([i.e("44533"),i.e("92769"),i.e("44966"),i.e("52242"),i.e("80445"),i.e("19656"),i.e("33908"),i.e("99143"),i.e("66990"),i.e("37406"),i.e("81804"),i.e("40408")]).then(i.bind(i,67801));case 1:return t.a(2,document.createElement("hui-history-graph-card-editor"))}},t)})),function(){return n.apply(this,arguments)})},{key:"getStubConfig",value:function(){return{type:"history-graph",entities:["sun.sun"]}}}]);var n,c,m}(g.WF);j.styles=(0,g.AH)(c||(c=(0,u.A)(["ha-card{display:flex;flex-direction:column;height:100%}.card-header{justify-content:space-between;display:flex;padding-bottom:0}.card-header ha-icon-next{--mdc-icon-button-size:24px;line-height:24px;color:var(--primary-text-color)}.content{padding:0 16px 8px;flex:1;overflow:hidden}.has-header{padding-top:0}state-history-charts{--timeline-top-margin:16px}.has-height state-history-charts{height:100%}.has-rows{--chart-max-height:100%}"]))),(0,m.__decorate)([(0,v.MZ)({attribute:!1})],j.prototype,"hass",void 0),(0,m.__decorate)([(0,v.wk)()],j.prototype,"_history",void 0),(0,m.__decorate)([(0,v.wk)()],j.prototype,"_statisticsHistory",void 0),(0,m.__decorate)([(0,v.wk)()],j.prototype,"_config",void 0),(0,m.__decorate)([(0,v.wk)()],j.prototype,"_error",void 0),j=(0,m.__decorate)([(0,v.EM)("hui-history-graph-card")],j),n()}catch(z){n(z)}})},49340:function(t){var e=Math.log,i=Math.LOG10E;t.exports=Math.log10||function(t){return e(t)*i}},75376:function(t,e,i){i(46518)({target:"Math",stat:!0},{log10:i(49340)})},13611:function(t,e,i){var n=i(46518),r=i(22195),s=i(62106),o=i(43724),a=TypeError,c=Object.defineProperty,u=r.self!==r;try{if(o){var l=Object.getOwnPropertyDescriptor(r,"self");!u&&l&&l.get&&l.enumerable||s(r,"self",{get:function(){return r},set:function(t){if(this!==r)throw new a("Illegal invocation");c(r,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else n({global:!0,simple:!0,forced:u},{self:r})}catch(d){}}}]);
//# sourceMappingURL=47789.a55d29f08882e028.js.map