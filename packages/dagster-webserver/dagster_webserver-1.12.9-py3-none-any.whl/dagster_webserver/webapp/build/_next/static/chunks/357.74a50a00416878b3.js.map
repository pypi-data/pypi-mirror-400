{"version":3,"file":"static/chunks/357.74a50a00416878b3.js","mappings":"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","sources":["webpack://_N_E/../ui-components/src/components/Page.tsx","webpack://_N_E/../ui-core/src/workspace/ReloadAllButton.tsx","webpack://_N_E/../ui-core/src/assets/AssetsGraphHeader.oss.tsx","webpack://_N_E/../ui-core/src/assets/AssetsGlobalGraphRoot.tsx"],"sourcesContent":["import styled from 'styled-components';\n\nexport const Page = styled.div`\n  height: 100%;\n  overflow-y: auto;\n  padding-bottom: 64px;\n  width: 100%;\n`;\n","import {Button, Dialog, DialogBody, DialogFooter, Icon, Tooltip} from '@dagster-io/ui-components';\nimport {useEffect, useState} from 'react';\n\nimport {RepositoryLocationErrorDialog} from './RepositoryLocationErrorDialog';\nimport {useUnscopedPermissions} from '../app/Permissions';\nimport {PythonErrorInfo} from '../app/PythonErrorInfo';\nimport {\n  reloadFnForWorkspace,\n  useRepositoryLocationReload,\n} from '../nav/useRepositoryLocationReload';\n\ninterface Props {\n  icon?: React.ComponentProps<typeof Button>['icon'];\n  label?: React.ReactNode;\n}\n\nexport const ReloadAllButton = (props: Props) => {\n  const {icon = <Icon name=\"reload_definitions\" />, label = 'Reload all'} = props;\n  const {\n    permissions: {canReloadWorkspace},\n    disabledReasons,\n  } = useUnscopedPermissions();\n  const {reloading, tryReload, error, errorLocationId} = useRepositoryLocationReload({\n    scope: 'workspace',\n    reloadFn: reloadFnForWorkspace,\n  });\n\n  const [isOpen, setIsOpen] = useState(!!error);\n  useEffect(() => setIsOpen(!!error), [error]);\n\n  if (!canReloadWorkspace) {\n    return (\n      <Tooltip content={disabledReasons.canReloadWorkspace}>\n        <Button outlined icon={icon} disabled>\n          {label}\n        </Button>\n      </Tooltip>\n    );\n  }\n\n  return (\n    <>\n      <Button outlined onClick={tryReload} icon={icon} loading={reloading}>\n        {label}\n      </Button>\n      {errorLocationId ? (\n        <RepositoryLocationErrorDialog\n          error={error}\n          location={errorLocationId}\n          reloading={reloading}\n          onTryReload={tryReload}\n          onDismiss={() => setIsOpen(false)}\n          isOpen={isOpen}\n        />\n      ) : (\n        <Dialog\n          icon=\"error\"\n          title=\"Reload error\"\n          canEscapeKeyClose={false}\n          canOutsideClickClose={false}\n          style={{width: '90%'}}\n          isOpen={isOpen}\n        >\n          <DialogBody>{error && <PythonErrorInfo error={error} />}</DialogBody>\n          <DialogFooter>\n            <Button onClick={() => setIsOpen(false)}>Dismiss</Button>\n          </DialogFooter>\n        </Dialog>\n      )}\n    </>\n  );\n};\n","import {PageHeader, Subtitle1} from '@dagster-io/ui-components';\n\nimport {useFullScreen} from '../app/AppTopNav/AppTopNavContext';\nimport {ReloadAllButton} from '../workspace/ReloadAllButton';\n\nexport const AssetsGraphHeader = () => {\n  const {isFullScreen} = useFullScreen();\n  if (isFullScreen) {\n    return null;\n  }\n  return (\n    <PageHeader\n      title={<Subtitle1>Global Asset Lineage</Subtitle1>}\n      right={<ReloadAllButton label=\"Reload definitions\" />}\n    />\n  );\n};\n","import {Page} from '@dagster-io/ui-components';\nimport {useCallback, useMemo} from 'react';\nimport {useHistory, useParams} from 'react-router-dom';\nimport {AssetsGraphHeader} from 'shared/assets/AssetsGraphHeader.oss';\nimport {useFavoriteAssets} from 'shared/assets/useFavoriteAssets.oss';\n\nimport {assetDetailsPathForKey} from './assetDetailsPathForKey';\nimport {\n  globalAssetGraphPathFromString,\n  globalAssetGraphPathToString,\n} from './globalAssetGraphPathToString';\nimport {useTrackPageView} from '../app/analytics';\nimport {AssetGraphExplorer} from '../asset-graph/AssetGraphExplorer';\nimport {AssetGraphViewType, tokenForAssetKey} from '../asset-graph/Utils';\nimport {AssetGraphFetchScope} from '../asset-graph/useAssetGraphData';\nimport {AssetLocation} from '../asset-graph/useFindAssetLocation';\nimport {useDocumentTitle} from '../hooks/useDocumentTitle';\nimport {useOpenInNewTab} from '../hooks/useOpenInNewTab';\nimport {useStateWithStorage} from '../hooks/useStateWithStorage';\nimport {ExplorerPath} from '../pipelines/PipelinePathUtils';\ninterface AssetGroupRootParams {\n  0: string;\n}\n\nexport const AssetsGlobalGraphRoot = () => {\n  useTrackPageView();\n  const {0: path} = useParams<AssetGroupRootParams>();\n  const history = useHistory();\n\n  useDocumentTitle(`Global Asset Lineage`);\n  const openInNewTab = useOpenInNewTab();\n\n  const onChangeExplorerPath = useCallback(\n    (path: ExplorerPath, mode: 'push' | 'replace') => {\n      history[mode]({\n        pathname: globalAssetGraphPathToString(path),\n        search: history.location.search,\n      });\n    },\n    [history],\n  );\n\n  const onNavigateToSourceAssetNode = useCallback(\n    (e: Pick<React.MouseEvent<any>, 'metaKey'>, node: AssetLocation) => {\n      const path = assetDetailsPathForKey(node.assetKey, {view: 'definition'});\n      if (e.metaKey) {\n        openInNewTab(path);\n      } else {\n        history.push(path);\n      }\n    },\n    [history, openInNewTab],\n  );\n\n  const [hideEdgesToNodesOutsideQuery, setHideEdgesToNodesOutsideQuery] = useStateWithStorage(\n    'hideEdgesToNodesOutsideQuery',\n    (json) => {\n      if (json === 'false' || json === false) {\n        return false;\n      }\n      return true;\n    },\n  );\n\n  const {favorites, loading: favoritesLoading} = useFavoriteAssets();\n\n  const fetchOptions = useMemo(() => {\n    const options: AssetGraphFetchScope = {\n      hideEdgesToNodesOutsideQuery,\n      hideNodesMatching: favorites\n        ? (node) => !favorites.has(tokenForAssetKey(node.assetKey))\n        : undefined,\n      loading: favoritesLoading,\n    };\n    return options;\n  }, [hideEdgesToNodesOutsideQuery, favorites, favoritesLoading]);\n\n  return (\n    <Page style={{display: 'flex', flexDirection: 'column', paddingBottom: 0}}>\n      <AssetsGraphHeader />\n\n      <AssetGraphExplorer\n        fetchOptions={fetchOptions}\n        options={{preferAssetRendering: true, explodeComposites: true}}\n        explorerPath={globalAssetGraphPathFromString(path)}\n        onChangeExplorerPath={onChangeExplorerPath}\n        onNavigateToSourceAssetNode={onNavigateToSourceAssetNode}\n        viewType={AssetGraphViewType.GLOBAL}\n        setHideEdgesToNodesOutsideQuery={setHideEdgesToNodesOutsideQuery}\n      />\n    </Page>\n  );\n};\n\n// Imported via React.lazy, which requires a default export.\n// eslint-disable-next-line import/no-default-export\nexport default AssetsGlobalGraphRoot;\n"],"names":["Page","styled","div","ReloadAllButton","icon","Icon","name","label","props","permissions","canReloadWorkspace","disabledReasons","useUnscopedPermissions","reloading","tryReload","error","errorLocationId","useRepositoryLocationReload","scope","reloadFn","reloadFnForWorkspace","isOpen","setIsOpen","useState","useEffect","Button","outlined","onClick","loading","RepositoryLocationErrorDialog","location","onTryReload","onDismiss","Dialog","title","canEscapeKeyClose","canOutsideClickClose","style","width","DialogBody","PythonErrorInfo","DialogFooter","Tooltip","content","disabled","AssetsGraphHeader","isFullScreen","useFullScreen","PageHeader","Subtitle1","right","AssetsGlobalGraphRoot","useTrackPageView","path","useParams","history","useHistory","useDocumentTitle","openInNewTab","useOpenInNewTab","onChangeExplorerPath","useCallback","mode","pathname","globalAssetGraphPathToString","search","onNavigateToSourceAssetNode","e","node","assetDetailsPathForKey","assetKey","view","metaKey","push","hideEdgesToNodesOutsideQuery","setHideEdgesToNodesOutsideQuery","useStateWithStorage","json","favorites","favoritesLoading","useFavoriteAssets","fetchOptions","useMemo","hideNodesMatching","has","tokenForAssetKey","undefined","display","flexDirection","paddingBottom","AssetGraphExplorer","options","preferAssetRendering","explodeComposites","explorerPath","globalAssetGraphPathFromString","viewType","AssetGraphViewType","GLOBAL"],"sourceRoot":"","ignoreList":[]}