{% extends "base.html.jinja" %}

{% block title %}{{ property_info.label or property_info.qname }} - {{ ontology.title or "Documentation" }}{% endblock %}

{% block content %}
<article class="entity-card">
    <h1>
        {{ property_info.label or property_info.qname }}
        <span class="entity-type {{ property_info.property_type }}">{{ property_info.property_type }} property</span>
    </h1>
    <p class="uri">{{ property_info.uri }}</p>

    {% if property_info.definition %}
    <p class="definition">{{ property_info.definition }}</p>
    {% endif %}

    {% if property_info.domain %}
    <section class="section">
        <h3>Domain</h3>
        <ul class="entity-list">
            {% for uri in property_info.domain %}
            <li>
                {% set found = namespace(value=false) %}
                {% for c in classes %}
                    {% if c.uri|string == uri|string %}
                    <a href="{{ c.qname | entity_url('class') }}">{{ c.label or c.qname }}</a>
                    {% set found.value = true %}
                    {% endif %}
                {% endfor %}
                {% if not found.value %}
                <code>{{ uri }}</code>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    </section>
    {% endif %}

    {% if property_info.range %}
    <section class="section">
        <h3>Range</h3>
        <ul class="entity-list">
            {% for uri in property_info.range %}
            <li>
                {% set found = namespace(value=false) %}
                {% for c in classes %}
                    {% if c.uri|string == uri|string %}
                    <a href="{{ c.qname | entity_url('class') }}">{{ c.label or c.qname }}</a>
                    {% set found.value = true %}
                    {% endif %}
                {% endfor %}
                {% if not found.value %}
                <code>{{ uri }}</code>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    </section>
    {% endif %}

    {% if property_info.is_functional or property_info.is_inverse_functional or property_info.inverse_of %}
    <section class="section">
        <h3>Characteristics</h3>
        <ul class="entity-list">
            {% if property_info.is_functional %}
            <li><span class="annotation">Functional</span></li>
            {% endif %}
            {% if property_info.is_inverse_functional %}
            <li><span class="annotation">Inverse Functional</span></li>
            {% endif %}
            {% if property_info.inverse_of %}
            <li>Inverse of: <code>{{ property_info.inverse_of }}</code></li>
            {% endif %}
        </ul>
    </section>
    {% endif %}

    {% if property_info.superproperties %}
    <section class="section">
        <h3>Superproperties</h3>
        <ul class="entity-list">
            {% for uri in property_info.superproperties %}
            <li><code>{{ uri }}</code></li>
            {% endfor %}
        </ul>
    </section>
    {% endif %}

    {% if property_info.subproperties %}
    <section class="section">
        <h3>Subproperties</h3>
        <ul class="entity-list">
            {% for uri in property_info.subproperties %}
            <li><code>{{ uri }}</code></li>
            {% endfor %}
        </ul>
    </section>
    {% endif %}

    {% if property_info.annotations %}
    <section class="section">
        <h3>Annotations</h3>
        <table>
            <thead>
                <tr>
                    <th>Property</th>
                    <th>Value</th>
                </tr>
            </thead>
            <tbody>
                {% for name, values in property_info.annotations.items() %}
                {% for value in values %}
                <tr>
                    <td><code>{{ name }}</code></td>
                    <td>{{ value }}</td>
                </tr>
                {% endfor %}
                {% endfor %}
            </tbody>
        </table>
    </section>
    {% endif %}
</article>
{% endblock %}
