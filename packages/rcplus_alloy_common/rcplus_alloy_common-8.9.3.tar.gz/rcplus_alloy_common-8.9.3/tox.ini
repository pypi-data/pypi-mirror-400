[tox]
isolated_build = True
envlist =
    # this list should be aligned with /.github/workflows/test.yml. NOTE: only the "py*" ones
    style
    py310
    py311

[testenv]
allowlist_externals = uv
commands =
    uv sync --no-progress --color never --all-extras
    uv run coverage run --source=src -m pytest
    uv run coverage xml

[testenv:style]
allowlist_externals = uv
commands =
    uv sync --no-progress --color never --all-extras
    uv run mypy .
    uv run ruff check src
