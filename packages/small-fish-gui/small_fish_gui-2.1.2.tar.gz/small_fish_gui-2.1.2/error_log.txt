version 2.0.2error : 'dict' object has no attribute 'default'traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 106, in <module>
    result_df, cell_result_df, acquisition_id, user_parameters, user_parameters['segmentation_done'], cytoplasm_label,nucleus_label = batch_promp(
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/batch/prompt.py", line 102, in batch_promp
    cellprob_threshold=preset.default("cellprob_threshold", default.cellprob_threshold),
AttributeError: 'dict' object has no attribute 'default'
version 2.0.2error : _segmentation_layout() missing 4 required positional arguments: 'other_nucleus_image_preset', 'show_segmentation_preset', 'save_segmentation_visual_preset', and 'saving_path_preset'traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 106, in <module>
    result_df, cell_result_df, acquisition_id, user_parameters, user_parameters['segmentation_done'], cytoplasm_label,nucleus_label = batch_promp(
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/batch/prompt.py", line 87, in batch_promp
    segmentation_layout = _segmentation_layout(
TypeError: _segmentation_layout() missing 4 required positional arguments: 'other_nucleus_image_preset', 'show_segmentation_preset', 'save_segmentation_visual_preset', and 'saving_path_preset'
version 2.0.2error : path_layout() got an unexpected keyword argument 'preset'traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 106, in <module>
    result_df, cell_result_df, acquisition_id, user_parameters, user_parameters['segmentation_done'], cytoplasm_label,nucleus_label = batch_promp(
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/batch/prompt.py", line 87, in batch_promp
    segmentation_layout = _segmentation_layout(
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/layout.py", line 244, in _segmentation_layout
    layout += path_layout(['other_nucleus_image'], preset=other_nucleus_image_preset)
TypeError: path_layout() got an unexpected keyword argument 'preset'
version 2.0.2error : too many values to unpack (expected 2)traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 43, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 68, in add_detection
    new_parameters = ask_input_parameters(ask_for_segmentation= False) #The image is open and stored inside user_parameters
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/_preprocess.py", line 382, in ask_input_parameters
    image_input_values = input_image_prompt(
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/prompts.py", line 76, in input_image_prompt
    event, values = prompt(layout_image_path, add_scrollbar=False)
ValueError: too many values to unpack (expected 2)
version 2.0.2error : name 'do_background_removal' is not definedtraceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 43, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 68, in add_detection
    new_parameters = ask_input_parameters(ask_for_segmentation= False) #The image is open and stored inside user_parameters
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/_preprocess.py", line 384, in ask_input_parameters
    image_input_values = input_image_prompt(
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/prompts.py", line 72, in input_image_prompt
    layout_image_path += bool_layout(['3D stack', 'Multichannel stack', "Autofluorescence background removal"],keys= ['is_3D_stack', 'is_multichannel', 'do_background_removal'], preset= [is_3D_stack_preset, multichannel_preset, do_background_removal])
NameError: name 'do_background_removal' is not defined
version 2.0.2error : 'x'traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 43, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 74, in add_detection
    map_ = map_channels(user_parameters)
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/_preprocess.py", line 78, in map_channels
    map_ = _show_mapping(image.shape, map_, is_3D_stack, is_time_stack, multichannel,)
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/_preprocess.py", line 169, in _show_mapping
    map_['x'], map_['y'], map_.get('z'), map_.get("c"), map_.get('t')
KeyError: 'x'
version 2.0.2error : 'x'traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 43, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 74, in add_detection
    map_ = map_channels(user_parameters)
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/_preprocess.py", line 78, in map_channels
    map_ = _show_mapping(image.shape, map_, is_3D_stack, is_time_stack, multichannel,)
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/_preprocess.py", line 169, in _show_mapping
    map_['x'], map_['y'], map_.get('z'), map_.get("c"), map_.get('t')
KeyError: 'x'
version 2.0.2error : expected integer but got "bold"traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 43, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 74, in add_detection
    map_ = map_channels(user_parameters)
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/_preprocess.py", line 79, in map_channels
    map_ = _show_mapping(image.shape, map_, is_3D_stack, is_time_stack, multichannel,)
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/_preprocess.py", line 180, in _show_mapping
    map_ = _ask_channel_map(shape, is_3D_stack, is_time_stack, multichannel, preset_map=map_)
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/_preprocess.py", line 147, in _ask_channel_map
    event, preset_map = prompt(layout, add_scrollbar=False)
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/prompts.py", line 33, in prompt
    event, values = window.read(timeout=timeout, timeout_key=timeout_key)
  File "/home/floric/python_env/3.9_dev/lib/python3.9/site-packages/FreeSimpleGUI/window.py", line 959, in read
    results = self._read(timeout=timeout, timeout_key=timeout_key)
  File "/home/floric/python_env/3.9_dev/lib/python3.9/site-packages/FreeSimpleGUI/window.py", line 1038, in _read
    self._Show()
  File "/home/floric/python_env/3.9_dev/lib/python3.9/site-packages/FreeSimpleGUI/window.py", line 762, in _Show
    StartupTK(self)
  File "/home/floric/python_env/3.9_dev/lib/python3.9/site-packages/FreeSimpleGUI/__init__.py", line 7025, in StartupTK
    _convert_window_to_tk(window)
  File "/home/floric/python_env/3.9_dev/lib/python3.9/site-packages/FreeSimpleGUI/__init__.py", line 6905, in _convert_window_to_tk
    PackFormIntoFrame(window, master, window)
  File "/home/floric/python_env/3.9_dev/lib/python3.9/site-packages/FreeSimpleGUI/__init__.py", line 4815, in PackFormIntoFrame
    PackFormIntoFrame(element, element.TKColFrame.TKFrame, toplevel_form)
  File "/home/floric/python_env/3.9_dev/lib/python3.9/site-packages/FreeSimpleGUI/__init__.py", line 4972, in PackFormIntoFrame
    tktext_label = element.Widget = tk.Label(tk_row_frame, textvariable=stringvar, width=width, height=height, justify=justify, bd=bd, font=font)
  File "/usr/lib/python3.9/tkinter/__init__.py", line 3151, in __init__
    Widget.__init__(self, master, 'label', cnf, kw)
  File "/usr/lib/python3.9/tkinter/__init__.py", line 2575, in __init__
    self.tk.call(
_tkinter.TclError: expected integer but got "bold"
version 2.0.2error : `newbyteorder` was removed from the ndarray class in NumPy 2.0. Use `arr.view(arr.dtype.newbyteorder(order))` instead.traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 43, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 68, in add_detection
    new_parameters = ask_input_parameters(user_parameters, ask_for_segmentation= False) #The image is open and stored inside user_parameters
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/_preprocess.py", line 394, in ask_input_parameters
    image_input_values = input_image_prompt(
                         ^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/prompts.py", line 93, in input_image_prompt
    image = open_image(im_path)
            ^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/interface/image.py", line 14, in open_image
    else : im = read_image(full_path)
                ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/big-fish/bigfish/stack/io.py", line 49, in read_image
    image = io.imread(path)
            ^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/skimage/_shared/utils.py", line 328, in fixed_func
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/skimage/io/_io.py", line 82, in imread
    img = call_plugin('imread', fname, plugin=plugin, **plugin_args)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/skimage/_shared/utils.py", line 538, in wrapped
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/skimage/io/manage_plugins.py", line 254, in call_plugin
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/skimage/io/_plugins/tifffile_plugin.py", line 74, in imread
    return tifffile_imread(fname, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/tifffile/tifffile.py", line 1064, in imread
    return tif.asarray(
           ^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/tifffile/tifffile.py", line 4195, in asarray
    result = self.filehandle.read_array(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/tifffile/tifffile.py", line 13922, in read_array
    result = result.newbyteorder()
             ^^^^^^^^^^^^^^^^^^^
AttributeError: `newbyteorder` was removed from the ndarray class in NumPy 2.0. Use `arr.view(arr.dtype.newbyteorder(order))` instead.
version 2.0.2error : `newbyteorder` was removed from the ndarray class in NumPy 2.0. Use `arr.view(arr.dtype.newbyteorder(order))` instead.traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 43, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 68, in add_detection
    new_parameters = ask_input_parameters(user_parameters, ask_for_segmentation= False) #The image is open and stored inside user_parameters
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/_preprocess.py", line 394, in ask_input_parameters
    image_input_values = input_image_prompt(
                         ^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/prompts.py", line 93, in input_image_prompt
    image = open_image(im_path)
            ^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/interface/image.py", line 14, in open_image
    else : im = read_image(full_path)
                ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/big-fish/bigfish/stack/io.py", line 49, in read_image
    image = io.imread(path)
            ^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/skimage/_shared/utils.py", line 328, in fixed_func
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/skimage/io/_io.py", line 82, in imread
    img = call_plugin('imread', fname, plugin=plugin, **plugin_args)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/skimage/_shared/utils.py", line 538, in wrapped
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/skimage/io/manage_plugins.py", line 254, in call_plugin
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/skimage/io/_plugins/tifffile_plugin.py", line 74, in imread
    return tifffile_imread(fname, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/tifffile/tifffile.py", line 1064, in imread
    return tif.asarray(
           ^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/tifffile/tifffile.py", line 4195, in asarray
    result = self.filehandle.read_array(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/tifffile/tifffile.py", line 13922, in read_array
    result = result.newbyteorder()
             ^^^^^^^^^^^^^^^^^^^
AttributeError: `newbyteorder` was removed from the ndarray class in NumPy 2.0. Use `arr.view(arr.dtype.newbyteorder(order))` instead.
version 2.0.2error : `newbyteorder` was removed from the ndarray class in NumPy 2.0. Use `arr.view(arr.dtype.newbyteorder(order))` instead.traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 43, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 68, in add_detection
    new_parameters = ask_input_parameters(user_parameters, ask_for_segmentation= False) #The image is open and stored inside user_parameters
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/_preprocess.py", line 394, in ask_input_parameters
    image_input_values = input_image_prompt(
                         ^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/prompts.py", line 93, in input_image_prompt
    image = open_image(im_path)
            ^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/interface/image.py", line 14, in open_image
    else : im = read_image(full_path)
                ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/big-fish/bigfish/stack/io.py", line 50, in read_image
    image = iio.imread(path)
            ^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/imageio/v3.py", line 54, in imread
    return np.asarray(img_file.read(**call_kwargs))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/imageio/plugins/tifffile_v3.py", line 169, in read
    ndimage = self._fh.asarray(series=index, **kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/tifffile/tifffile.py", line 4195, in asarray
    result = self.filehandle.read_array(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/tifffile/tifffile.py", line 13922, in read_array
    result = result.newbyteorder()
             ^^^^^^^^^^^^^^^^^^^
AttributeError: `newbyteorder` was removed from the ndarray class in NumPy 2.0. Use `arr.view(arr.dtype.newbyteorder(order))` instead.
version 2.0.2error : `newbyteorder` was removed from the ndarray class in NumPy 2.0. Use `arr.view(arr.dtype.newbyteorder(order))` instead.traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 43, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 68, in add_detection
    new_parameters = ask_input_parameters(user_parameters, ask_for_segmentation= False) #The image is open and stored inside user_parameters
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/_preprocess.py", line 394, in ask_input_parameters
    image_input_values = input_image_prompt(
                         ^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/prompts.py", line 93, in input_image_prompt
    image = open_image(im_path)
            ^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/interface/image.py", line 14, in open_image
    else : im = read_image(full_path)
                ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/big-fish/bigfish/stack/io.py", line 51, in read_image
    image = tifffile.imread(path)
            ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/tifffile/tifffile.py", line 1064, in imread
    return tif.asarray(
           ^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/tifffile/tifffile.py", line 4195, in asarray
    result = self.filehandle.read_array(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/tifffile/tifffile.py", line 13922, in read_array
    result = result.newbyteorder()
             ^^^^^^^^^^^^^^^^^^^
AttributeError: `newbyteorder` was removed from the ndarray class in NumPy 2.0. Use `arr.view(arr.dtype.newbyteorder(order))` instead.
version 2.0.2error : _segmentation_layout() missing 10 required positional arguments: 'other_nucleus_image_preset', 'show_segmentation_preset', 'save_segmentation_visual_preset', 'saving_path_preset', 'filename_preset', 'cytoplasm_segmentation_3D', 'nucleus_segmentation_3D', 'cellprob_threshold', 'flow_threshold', and 'anisotropy'traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 106, in <module>
    result_df, cell_result_df, acquisition_id, user_parameters, user_parameters['segmentation_done'], cytoplasm_label,nucleus_label = batch_promp(
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/batch/prompt.py", line 87, in batch_promp
    segmentation_layout = _segmentation_layout(
TypeError: _segmentation_layout() missing 10 required positional arguments: 'other_nucleus_image_preset', 'show_segmentation_preset', 'save_segmentation_visual_preset', 'saving_path_preset', 'filename_preset', 'cytoplasm_segmentation_3D', 'nucleus_segmentation_3D', 'cellprob_threshold', 'flow_threshold', and 'anisotropy'
version 2.0.2error : 'anisotropy'traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 55, in <module>
    nucleus_label, cytoplasm_label, user_parameters = segment_cells(
                                                      ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 51, in segment_cells
    nucleus_label, cytoplasm_label, user_parameters = launch_segmentation(
                                                      ^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/segmentation.py", line 90, in launch_segmentation
    values, relaunch = _check_integrity_segmentation_parameters(values, segmentation_parameters, available_channels=available_channels, available_slices=available_slices)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/segmentation.py", line 436, in _check_integrity_segmentation_parameters
    if not isinstance(values["anisotropy"], (float,int)) :
                      ~~~~~~^^^^^^^^^^^^^^
KeyError: 'anisotropy'
version 2.0.2error : Sequence [np.uint16(0), np.uint16(0)] must be monotonically increasing.traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 114, in add_detection
    raise(error)
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 270, in interactive_detection
    spot_detector.widget() #First occurence with auto or entered threshold.
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/magicgui/widgets/_function_gui.py", line 361, in __call__
    callback(self, value, return_type)
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/_magicgui.py", line 272, in add_layer_data_tuples_to_viewer
    _add_layer_data_tuples_to_viewer(
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/_qt/_qapp_model/injection/_qprocessors.py", line 63, in _add_layer_data_tuples_to_viewer
    viewer._add_layer_from_data(*datum)
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/components/viewer_model.py", line 1703, in _add_layer_from_data
    layer = add_method(data, **(meta or {}))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/components/viewer_model.py", line 1157, in add_image
    layer = Image(data, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/layers/base/base.py", line 115, in __call__
    obj = super().__call__(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/layers/image/image.py", line 316, in __init__
    self.contrast_limits_range = contrast_limits
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/layers/intensity_mixin.py", line 141, in contrast_limits_range
    _validate_increasing(value)
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/validators.py", line 126, in _validate_increasing
    raise ValueError(
ValueError: Sequence [np.uint16(0), np.uint16(0)] must be monotonically increasing.
version 2.0.2error : Sequence [np.uint16(0), np.uint16(0)] must be monotonically increasing.traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 114, in add_detection
    raise(error)
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 252, in interactive_detection
    image_layer = Viewer.add_image(
                  ^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/components/viewer_model.py", line 1157, in add_image
    layer = Image(data, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/layers/base/base.py", line 115, in __call__
    obj = super().__call__(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/layers/image/image.py", line 316, in __init__
    self.contrast_limits_range = contrast_limits
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/layers/intensity_mixin.py", line 141, in contrast_limits_range
    _validate_increasing(value)
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/validators.py", line 126, in _validate_increasing
    raise ValueError(
ValueError: Sequence [np.uint16(0), np.uint16(0)] must be monotonically increasing.
version 2.0.2error : value 100 is outside of the allowed range: (0, 0)traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 114, in add_detection
    raise(error)
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 267, in interactive_detection
    spot_detector = _interactive_threshold_selection(image, voxel_size, **kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 311, in _interactive_threshold_selection
    spot_detector = SpotDetector(
                    ^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/_napari_widgets.py", line 559, in __init__
    super().__init__()
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/_napari_widgets.py", line 36, in __init__
    self.widget = self._create_widget()
                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/_napari_widgets.py", line 585, in _create_widget
    @magicgui(
     ^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/magicgui/type_map/_type_map.py", line 1078, in inner_func
    "widgets.FunctionGui", magic_class(func, type_map=self, **kwargs)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/magicgui/widgets/_function_gui.py", line 207, in __init__
    widgets=list(sig.widgets(app, type_map).values()),
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/magicgui/signature.py", line 305, in widgets
    {n: p.to_widget(app, type_map=type_map) for n, p in self.parameters.items()}
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/magicgui/signature.py", line 205, in to_widget
    widget = type_map.create_widget(
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/magicgui/type_map/_type_map.py", line 502, in create_widget
    widget = wdg_class(**{**kwargs, **opts, **options_})
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/magicgui/widgets/_concrete.py", line 123, in __init__
    super(cls, self).__init__(**kwargs)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/magicgui/widgets/bases/_ranged_widget.py", line 80, in __init__
    self.value = value
    ^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/magicgui/widgets/bases/_value_widget.py", line 103, in value
    return self.set_value(value)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/magicgui/widgets/bases/_ranged_widget.py", line 125, in set_value
    raise ValueError(
ValueError: value 100 is outside of the allowed range: (0, 0)
version 2.0.2error : 'int' object has no attribute 'filter'traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 267, in interactive_detection
    spot_detector = _interactive_threshold_selection(image, voxel_size, **kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 311, in _interactive_threshold_selection
    spot_detector = SpotDetector(
                    ^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/_napari_widgets.py", line 559, in __init__
    super().__init__()
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/_napari_widgets.py", line 36, in __init__
    self.widget = self._create_widget()
                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/_napari_widgets.py", line 585, in _create_widget
    threshold_value = self.default_threshold if self.default_threshold < self.filtered_image.max() else self.default_threshold.filter
                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'int' object has no attribute 'filter'
version 2.0.2error : cannot access local variable 'threshold_value' where it is not associated with a valuetraceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 267, in interactive_detection
    spot_detector = _interactive_threshold_selection(image, voxel_size, **kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 311, in _interactive_threshold_selection
    spot_detector = SpotDetector(
                    ^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/_napari_widgets.py", line 559, in __init__
    super().__init__()
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/_napari_widgets.py", line 36, in __init__
    self.widget = self._create_widget()
                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/_napari_widgets.py", line 585, in _create_widget
    threshold_value = max(threshold_value, self.filtered_image.max)
                          ^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'threshold_value' where it is not associated with a value
version 2.0.2error : 'Event' object has no attribute 'subscribe'traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 268, in interactive_detection
    background_remover.events.signal_updated.subscribe(spot_detector.on_background_updated)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/event.py", line 199, in __getattr__
    return object.__getattribute__(self, name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'subscribe'
version 2.0.2error : 'Event' object has no attribute 'connect'traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 268, in interactive_detection
    background_remover.events.signal_updated.connect(spot_detector.on_background_updated)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/event.py", line 199, in __getattr__
    return object.__getattribute__(self, name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Event' object has no attribute 'connect'
version 2.0.2error : Sequence [np.uint16(0), np.uint16(0)] must be monotonically increasing.traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 114, in add_detection
    raise(error)
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 252, in interactive_detection
    image_layer = Viewer.add_image(
                  ^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/components/viewer_model.py", line 1157, in add_image
    layer = Image(data, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/layers/base/base.py", line 115, in __call__
    obj = super().__call__(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/layers/image/image.py", line 316, in __init__
    self.contrast_limits_range = contrast_limits
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/layers/intensity_mixin.py", line 141, in contrast_limits_range
    _validate_increasing(value)
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/validators.py", line 126, in _validate_increasing
    raise ValueError(
ValueError: Sequence [np.uint16(0), np.uint16(0)] must be monotonically increasing.
version 2.0.2error : Sequence [np.uint16(0), np.uint16(0)] must be monotonically increasing.traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 114, in add_detection
    raise(error)
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 252, in interactive_detection
    image_layer = Viewer.add_image(
                  ^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/components/viewer_model.py", line 1157, in add_image
    layer = Image(data, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/layers/base/base.py", line 115, in __call__
    obj = super().__call__(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/layers/image/image.py", line 316, in __init__
    self.contrast_limits_range = contrast_limits
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/layers/intensity_mixin.py", line 141, in contrast_limits_range
    _validate_increasing(value)
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/validators.py", line 126, in _validate_increasing
    raise ValueError(
ValueError: Sequence [np.uint16(0), np.uint16(0)] must be monotonically increasing.
version 2.0.2error : cannot access local variable 'spots' where it is not associated with a valuetraceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 269, in interactive_detection
    spot_detector.widget() #First occurence with auto or entered threshold.
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/magicgui/widgets/_function_gui.py", line 351, in __call__
    value = self._function(*bound.args, **bound.kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/_napari_widgets.py", line 745, in find_spots
    (spots, spot_layer_args, 'points')
     ^^^^^
UnboundLocalError: cannot access local variable 'spots' where it is not associated with a value
version 2.0.2error : 'SpotDetector' object has no attribute 'widget'traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 266, in interactive_detection
    spot_detector = _interactive_threshold_selection(image, voxel_size, background_remover_instance= background_remover, **kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 309, in _interactive_threshold_selection
    spot_detector = SpotDetector(
                    ^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/_napari_widgets.py", line 627, in __init__
    self._update_filtered_image()
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/_napari_widgets.py", line 644, in _update_filtered_image
    self.widget.threshold.max = self.filtered_image.max() + 1
    ^^^^^^^^^^^
AttributeError: 'SpotDetector' object has no attribute 'widget'
version 2.0.2error : '<' not supported between instances of 'int' and 'NoneType'traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 266, in interactive_detection
    spot_detector = _interactive_threshold_selection(image, voxel_size, background_remover_instance= background_remover, **kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 309, in _interactive_threshold_selection
    spot_detector = SpotDetector(
                    ^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/_napari_widgets.py", line 631, in __init__
    super().__init__()
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/_napari_widgets.py", line 34, in __init__
    self.widget = self._create_widget()
                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/_napari_widgets.py", line 660, in _create_widget
    default_threshold = min(self.default_threshold, self.filtered_image.max())
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: '<' not supported between instances of 'int' and 'NoneType'
version 2.0.2error : cannot access local variable 'default_threshold' where it is not associated with a valuetraceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 266, in interactive_detection
    spot_detector = _interactive_threshold_selection(image, voxel_size, background_remover_instance= background_remover, **kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 309, in _interactive_threshold_selection
    spot_detector = SpotDetector(
                    ^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/_napari_widgets.py", line 631, in __init__
    super().__init__()
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/_napari_widgets.py", line 34, in __init__
    self.widget = self._create_widget()
                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/_napari_widgets.py", line 664, in _create_widget
    threshold = {"widget_type" : SpinBox, "min" : 0, "value" : default_threshold, "max" : self.filtered_image.max() + 1},
                                                               ^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'default_threshold' where it is not associated with a value
version 2.0.2error : "'single spots' is not in list"traceback :
Traceback (most recent call last):
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 142, in __getitem__
    return self.__getitem__(self.index(key))
                            ^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 232, in index
    raise ValueError(
ValueError: 'single spots' is not in list

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 289, in interactive_detection
    spots = Viewer.layers['single spots'].data.astype(np.int32)
            ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/components/layerlist.py", line 215, in __getitem__
    return super().__getitem__(item)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 144, in __getitem__
    raise KeyError(str(e)) from e
KeyError: "'single spots' is not in list"
version 2.0.2error : "'single spots' is not in list"traceback :
Traceback (most recent call last):
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 142, in __getitem__
    return self.__getitem__(self.index(key))
                            ^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 232, in index
    raise ValueError(
ValueError: 'single spots' is not in list

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 289, in interactive_detection
    spots = Viewer.layers['single spots'].data.astype(np.int32)
            ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/components/layerlist.py", line 215, in __getitem__
    return super().__getitem__(item)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 144, in __getitem__
    raise KeyError(str(e)) from e
KeyError: "'single spots' is not in list"
version 2.0.2error : "'single spots' is not in list"traceback :
Traceback (most recent call last):
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 142, in __getitem__
    return self.__getitem__(self.index(key))
                            ^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 232, in index
    raise ValueError(
ValueError: 'single spots' is not in list

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 289, in interactive_detection
    spots = Viewer.layers['single spots'].data.astype(np.int32)
            ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/components/layerlist.py", line 215, in __getitem__
    return super().__getitem__(item)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 144, in __getitem__
    raise KeyError(str(e)) from e
KeyError: "'single spots' is not in list"
version 2.0.2error : "'single spots' is not in list"traceback :
Traceback (most recent call last):
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 142, in __getitem__
    return self.__getitem__(self.index(key))
                            ^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 232, in index
    raise ValueError(
ValueError: 'single spots' is not in list

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 289, in interactive_detection
    spots = Viewer.layers['single spots'].data.astype(np.int32)
            ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/components/layerlist.py", line 215, in __getitem__
    return super().__getitem__(item)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 144, in __getitem__
    raise KeyError(str(e)) from e
KeyError: "'single spots' is not in list"
version 2.0.2error : "'single spots' is not in list"traceback :
Traceback (most recent call last):
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 142, in __getitem__
    return self.__getitem__(self.index(key))
                            ^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 232, in index
    raise ValueError(
ValueError: 'single spots' is not in list

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 289, in interactive_detection
    spots = Viewer.layers['single spots'].data.astype(np.int32)
            ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/components/layerlist.py", line 215, in __getitem__
    return super().__getitem__(item)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 144, in __getitem__
    raise KeyError(str(e)) from e
KeyError: "'single spots' is not in list"
version 2.0.2error : "'single spots' is not in list"traceback :
Traceback (most recent call last):
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 142, in __getitem__
    return self.__getitem__(self.index(key))
                            ^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 232, in index
    raise ValueError(
ValueError: 'single spots' is not in list

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 289, in interactive_detection
    spots = Viewer.layers['single spots'].data.astype(np.int32)
            ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/components/layerlist.py", line 215, in __getitem__
    return super().__getitem__(item)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 144, in __getitem__
    raise KeyError(str(e)) from e
KeyError: "'single spots' is not in list"
version 2.0.2error : "'single spots' is not in list"traceback :
Traceback (most recent call last):
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 142, in __getitem__
    return self.__getitem__(self.index(key))
                            ^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 232, in index
    raise ValueError(
ValueError: 'single spots' is not in list

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 289, in interactive_detection
    spots = Viewer.layers['single spots'].data.astype(np.int32)
            ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/components/layerlist.py", line 215, in __getitem__
    return super().__getitem__(item)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/events/containers/_typed.py", line 144, in __getitem__
    raise KeyError(str(e)) from e
KeyError: "'single spots' is not in list"
version 2.0.2error : float() argument must be a string or a real number, not 'NoneType'traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 45, in <module>
    new_result_df, new_cell_result_df, acquisition_id, user_parameters =  add_detection(
                                                                          ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 101, in add_detection
    user_parameters, frame_result, spots, clusters, spots_cluster_id, image = launch_detection(
                                                                              ^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/detection.py", line 626, in launch_detection
    spots, image, updated_parameters = interactive_detection(
                                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 269, in interactive_detection
    spot_detector.widget() #First occurence with auto or entered threshold.
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/magicgui/widgets/_function_gui.py", line 351, in __call__
    value = self._function(*bound.args, **bound.kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/_napari_widgets.py", line 716, in find_spots
    self.widget.threshold.value = threshold
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/magicgui/widgets/bases/_value_widget.py", line 103, in value
    return self.set_value(value)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/magicgui/widgets/bases/_ranged_widget.py", line 124, in set_value
    if any(float(v) < self.min or float(v) > self.max for v in val):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/magicgui/widgets/bases/_ranged_widget.py", line 124, in <genexpr>
    if any(float(v) < self.min or float(v) > self.max for v in val):
           ^^^^^^^^
TypeError: float() argument must be a string or a real number, not 'NoneType'
version 2.0.2error : Sequence [np.uint16(0), np.uint16(0)] must be monotonically increasing.traceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 55, in <module>
    nucleus_label, cytoplasm_label, user_parameters = segment_cells(
                                                      ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 51, in segment_cells
    nucleus_label, cytoplasm_label, user_parameters = launch_segmentation(
                                                      ^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/segmentation.py", line 124, in launch_segmentation
    nucleus_label, cytoplasm_label = napari_show_segmentation(
                                     ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/napari_visualiser.py", line 196, in show_segmentation
    nuc_signal_layer = Viewer.add_image(nuc_image, name= "nucleus signal", blending= 'additive', colormap='blue', contrast_limits=[nuc_image.min(), nuc_image.max()], scale=scale)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/components/viewer_model.py", line 1157, in add_image
    layer = Image(data, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/layers/base/base.py", line 115, in __call__
    obj = super().__call__(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/layers/image/image.py", line 316, in __init__
    self.contrast_limits_range = contrast_limits
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/layers/intensity_mixin.py", line 141, in contrast_limits_range
    _validate_increasing(value)
  File "/home/floric/python_env/small_fish_3.12/lib/python3.12/site-packages/napari/utils/validators.py", line 126, in _validate_increasing
    raise ValueError(
ValueError: Sequence [np.uint16(0), np.uint16(0)] must be monotonically increasing.
version 2.1.0error : cannot access local variable 'radio_3D_seg' where it is not associated with a valuetraceback :
Traceback (most recent call last):
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/main_menu.py", line 55, in <module>
    nucleus_label, cytoplasm_label, user_parameters = segment_cells(
                                                      ^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/actions.py", line 51, in segment_cells
    nucleus_label, cytoplasm_label, user_parameters = launch_segmentation(
                                                      ^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/pipeline/segmentation.py", line 76, in launch_segmentation
    event, values = segmentation_prompt(
                    ^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/prompts.py", line 170, in segmentation_prompt
    layout, event_dict = _segmentation_layout(**segmentation_parameters)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/layout.py", line 237, in _segmentation_layout
    nucleus_parameters_col, nucleus_event_dict = _segmentate_object_layout(
                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/floric/my_projects/small_fish_gui/src/small_fish_gui/gui/layout.py", line 365, in _segmentate_object_layout
    object_key + "_radio_3D_seg" : radio_3D_seg,
                                   ^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'radio_3D_seg' where it is not associated with a value
