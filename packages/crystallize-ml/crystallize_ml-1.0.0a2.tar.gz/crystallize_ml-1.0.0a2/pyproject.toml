[build-system]
requires = ["setuptools >= 61.0"]
build-backend = "setuptools.build_meta"

[project]
name = "crystallize-ml"
version = "1.0.0a2"
authors = [{ name = "Bryson Tang", email = "brysontang@gmail.com" }]
description = "From Play to Proof. Run experiments, then crystallize your findings."
readme = "README.md"
requires-python = ">=3.10"
license = { text = "MIT" }
classifiers = [
    "Programming Language :: Python :: 3",
    "License :: OSI Approved :: MIT License",
    "Operating System :: OS Independent",
    "Development Status :: 3 - Alpha",
]
dependencies = [
    "rich >=13.0.0,<14",
]

[project.optional-dependencies]
stats = ["scipy >=1.10.0,<2", "numpy >=1.24.0,<3"]
http = ["requests >=2.28.0,<3"]
dev = ["pytest", "pytest-cov", "ruff", "scipy", "numpy", "requests"]

[project.urls]
Homepage = "https://github.com/brysontang/crystallize"
Documentation = "https://github.com/brysontang/crystallize"

[tool.setuptools.packages.find]
where = ["."]
include = ["crystallize*"]

[tool.pytest.ini_options]
pythonpath = ["."]

[tool.ruff]
line-length = 88
target-version = "py310"

[tool.pixi.project]
name = "crystallize-ml"
authors = ["Bryson Tang <brysontang@gmail.com>"]
channels = ["conda-forge"]
platforms = ["osx-arm64", "linux-64", "win-64"]

[tool.pixi.feature.dev.tasks]
test = "pytest -q"
cov = "pytest --cov=crystallize --cov-report=xml"
lint = "ruff check crystallize tests"
format = "ruff format crystallize tests"

[tool.pixi.environments]
default = { features = [] }
dev = { features = ["dev"] }

[tool.pixi.dependencies]
python = "3.10.*"

[tool.pixi.feature.dev.dependencies]
pytest = "*"
pytest-cov = "*"
numpy = ">=1.24.0,<3"
scipy = ">=1.10.0,<2"
ruff = "*"

[tool.pixi.feature.dev.pypi-dependencies]
crystallize-ml = { path = ".", editable = true }

[tool.uv.sources]
crystallize-ml = { path = ".", editable = true }
