from typing import Any, Dict


def 取值(
    数据: Dict[str, Any],
    键: Any,
    默认值: Any = None
) -> Any:
    """
    从字典中安全地获取指定键对应的值。

    本函数用于替代直接使用 `dict[key]` 或不安全的取值方式，
    以避免因键不存在、数据类型不正确等情况导致的异常。

    设计特性：
        - 若传入对象不是字典类型，直接返回默认值；
        - 键会被统一转换为字符串后再进行查找，以保证与写入逻辑一致；
        - 当键不存在时，不抛出 KeyError，而是返回默认值；
        - 不对返回值做任何修改或拷贝，保持原始对象语义；
        - 全程不抛异常，适合作为底层工具函数广泛使用。

    行为说明：
        - 数据为 dict 且键存在     → 返回对应的值；
        - 数据为 dict 但键不存在   → 返回默认值；
        - 数据不是 dict            → 返回默认值。

    Args:
        数据 (dict): 用于取值的字典对象。
        键: 要读取的键，内部将转换为字符串。
        默认值: 当取值失败时返回的值，默认为 None。

    Returns:
        Any:
            - 成功：返回字典中对应键的值；
            - 失败：返回默认值。
    """
    try:
        if not isinstance(数据, dict):
            return 默认值

        return 数据.get(str(键), 默认值)
    except Exception:
        return 默认值