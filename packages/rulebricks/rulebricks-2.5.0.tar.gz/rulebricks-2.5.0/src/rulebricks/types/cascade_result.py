# This file was auto-generated by Fern from our API Definition.

import typing

import pydantic
from ..core.pydantic_utilities import IS_PYDANTIC_V2, UniversalBaseModel
from .cascade_result_status import CascadeResultStatus


class CascadeResult(UniversalBaseModel):
    """
    Result of an auto-executed or cascaded rule/flow evaluation.
    """

    context: typing.Optional[str] = pydantic.Field(default=None)
    """
    Combined identifier in format 'contextSlug:instanceId'.
    """

    rule: typing.Optional[str] = pydantic.Field(default=None)
    """
    The rule slug (if this was a rule evaluation).
    """

    flow: typing.Optional[str] = pydantic.Field(default=None)
    """
    The flow slug (if this was a flow evaluation).
    """

    status: typing.Optional[CascadeResultStatus] = pydantic.Field(default=None)
    """
    Whether the evaluation succeeded.
    """

    result: typing.Optional[typing.Dict[str, typing.Any]] = pydantic.Field(default=None)
    """
    The evaluation output.
    """

    auto_executed: typing.Optional[bool] = pydantic.Field(default=None)
    """
    Whether this was auto-executed (true) or from a registered pending evaluation (false).
    """

    written_to_context: typing.Optional[typing.List[str]] = pydantic.Field(default=None)
    """
    List of field keys written back to the context (for rule evaluations).
    """

    error: typing.Optional[str] = pydantic.Field(default=None)
    """
    Error message if the evaluation failed.
    """

    if IS_PYDANTIC_V2:
        model_config: typing.ClassVar[pydantic.ConfigDict] = pydantic.ConfigDict(extra="allow", frozen=True)  # type: ignore # Pydantic v2
    else:

        class Config:
            frozen = True
            smart_union = True
            extra = pydantic.Extra.allow
