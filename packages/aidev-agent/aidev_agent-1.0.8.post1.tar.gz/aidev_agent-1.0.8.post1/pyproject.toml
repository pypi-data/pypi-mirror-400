[project]
authors = [
    { name = "blueking" },
]
requires-python = "<4.0,>=3.10.5"
dependencies = [
    "environs<15.0.0,>=14.1.0",
    "langchain<1.0.0,>=0.3.14",
    "langchain-openai<1.0.0,>=0.3.0",
    "langchain-community==0.3.28",
    "pyro4<5.0,>=4.82",
    "langfuse<3",
    "bkapi-client-core<2.0.0,>=1.2.0",
    "jinja2<4.0.0,>=3.1.6",
    "cachetools<6.0.0,>=5.5.2",
    "asgiref<4.0.0,>=3.8.1",
    "werkzeug<4.0.0,>=3.1.3",
    "pytz<2026.0,>=2025.2",
    "h11==0.16.0",
    "langchain-mcp-adapters<1.0.0,>=0.1.9",
    "langchain-core>0.3.79",
    "mcp==1.25.0",
    "urllib3>=2.6.0",
]
name = "aidev-agent"
version = "1.0.8.post1"
description = "bkaidev agent builder"

[project.license]
text = "MIT"

[dependency-groups]
dev = [
    "ipdb<0.14.0,>=0.13.13",
    "pytest<7.5.0,>=7.4.4",
    "pytest-asyncio<0.24.0,>=0.23.3",
    "pytest-env<1.2.0,>=1.1.3",
    "pytest-cov<4.2.0,>=4.1.0",
    "pytest-timeout==2.3.1",
    "pre-commit==4.0.1",
    "faker<38.0.0,>=37.0.0",
    "pytest-mock<4.0.0,>=3.14.0",
    "pytest-dotenv<1.0.0,>=0.5.2",
    "responses<1.0.0,>=0.25.0",
]

[tool.pdm.build]
includes = [
    "aidev_agent",
]

[tool.ruff]
exclude = [
    "*/config/",
    "*/migrations/",
]
force-exclude = true
line-length = 120
indent-width = 4

[tool.ruff.lint]
select = [
    "E",
    "F",
    "I",
    "PIE",
    "PERF",
    "SIM",
]
ignore = [
    "PERF401",
    "E501",
]

[tool.ruff.lint.isort]
section-order = [
    "future",
    "standard-library",
    "third-party",
    "first-party",
    "local-folder",
]
relative-imports-order = "closest-to-furthest"

[tool.ruff.format]
quote-style = "double"

[tool.pytest.ini_options]
env_override_existing_values = 1
env_files = [
    ".env",
]
asyncio_default_fixture_loop_scope = "session"
addopts = "-vvv --maxfail=2 -s"
asyncio_mode = "auto"

[tool.pyright]
venvPath = "."
venv = ".venv"

[build-system]
requires = [
    "pdm-backend",
]
build-backend = "pdm.backend"
