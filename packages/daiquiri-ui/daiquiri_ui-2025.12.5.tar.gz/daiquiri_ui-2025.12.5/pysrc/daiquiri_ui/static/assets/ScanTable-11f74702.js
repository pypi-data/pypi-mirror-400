import{r as o,j as s,p as g,E as S,B as m,a5 as x,az as d,au as h,x as i,O as p,w as E,c as P,s as c,a0 as v,q as N}from"./index-4cf586ed.js";const F={CREATED:"light",PREPARING:"info",RUNNING:"info",FINISHED:"success",ABORTED:"warning",FAILED:"danger"};function b(e){return s.jsx(h,{bg:F[e],children:e})}function j(e){const n=s.jsxs(i,{id:"popover-filename",children:[s.jsx(i.Header,{as:"h3",children:"File Name"}),s.jsx(i.Body,{children:e})]});return e?s.jsx(p,{trigger:"click",placement:"left",overlay:n,rootClose:!0,children:s.jsx(m,{size:"sm",children:s.jsx("i",{className:"fa fa-file"})})}):null}function D(e){const{scans:n,actions:t,selected:a}=e,l=Object.values(n);o.useEffect(()=>{t.setPageSize(10),t.fetch()},[t]),o.useEffect(()=>{a&&t.fetchData(a)},[a]);const f=[{dataField:"scan_number",text:"#"},{dataField:"title",text:"Title",classes:"text-break"},{dataField:"start_timestamp",text:"Start",formatter:d,formatExtraData:{format:"DD-MM-YYYY HH:mm:ss"},classes:"text-nowrap"},{dataField:"end_timestamp",text:"End",formatter:d,formatExtraData:{format:"DD-MM-YYYY HH:mm:ss"},classes:"text-nowrap"},{dataField:"npoints",text:"Points"},{dataField:"count_time",text:"Count Time"},{dataField:"status",text:"Status",formatter:b},{dataField:"filename",text:"File",formatter:j}],u={page:e.page,per_page:e.per_page,total:e.total,setPage:e.actions.setPage,setPageSize:e.actions.setPageSize,fetch:e.actions.fetch};return s.jsx(g,{children:s.jsxs(S,{children:[s.jsx(m,{size:"sm",onClick:()=>{var r;return(r=t.resetSelection)==null?void 0:r.call(t)},disabled:e.selected===null,className:"mb-1",children:"Follow"}),s.jsx(x,{keyField:"scanid",data:l,pages:u,columns:f,bordered:!1,classes:"table-sm scan-table",noDataIndication:"No scans available",loading:e.fetching,overlay:!0,multiple:!0,selectedItems:e.selectedItems,page:e.page,actions:{addSelection:e.actions.addSelection,removeSelection:e.actions.removeSelection,resetSelection:e.actions.resetSelection}})]})})}const T=(e,n)=>{const{list:t}=n.providers.scans;return{selected:c.selector("selectedScan",e),selectedItems:c.selector("selectedScans",e),scans:t.selector("ordered",e),params:t.selector("params",e),per_page:t.selector("per_page",e),page:t.selector("page",e),total:t.selector("total",e),fetching:t.selector("fetching",e)}},C=(e,n)=>{const{list:t}=n.providers.scans;return{actions:{fetchData:a=>(n.providers.scans.data.setPage(1),n.providers.scans.data.setParams({scanid:a},!0)),fetch:()=>t.fetch(),setParams:a=>t.setParams(a,!0),setPage:a=>t.setPage(a),setPageSize:a=>t.setPageSize(a),addSelection:a=>c.dispatch("SELECT_SCAN",a),removeSelection:a=>c.dispatch("UNSELECT_SCAN",a),resetSelection:()=>c.dispatch("RESET_SCAN_SELECTION")}}},_=E({scans:c})(P(T,C)(D));function I(e){const{providers:n,yamlNode:t,events:a,...l}=e;return v(t,"events",a),N(t,l),s.jsx(_,{providers:n})}export{I as default};
