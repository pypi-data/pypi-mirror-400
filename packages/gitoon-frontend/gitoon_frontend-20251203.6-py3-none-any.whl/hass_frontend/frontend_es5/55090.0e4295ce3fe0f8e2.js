"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["55090"],{78870:function(t,e,a){a.d(e,{M:function(){return i},l:function(){return r}});a(23792),a(26099),a(31415),a(17642),a(58004),a(33853),a(45876),a(32475),a(15024),a(31698),a(47764),a(62953);var r=new Set(["primary","accent","disabled","red","pink","purple","deep-purple","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","deep-orange","brown","light-grey","grey","dark-grey","blue-grey","black","white"]);function i(t){return r.has(t)?"var(--".concat(t,"-color)"):t}},91069:function(t,e,a){a.a(t,async function(t,r){try{a.d(e,{EO:function(){return w},Yq:function(){return x},_U:function(){return A},eE:function(){return k},fU:function(){return H},ol:function(){return m},xo:function(){return b}});var i=a(78016),n=a(31810),o=a(49134),s=a(81977),c=a(36307),d=a(35932),l=a(73983),u=a(6946),h=a(92913),f=a(83339),p=a(77972),v=a(31886),_=a(46927),g=t([v]);v=(g.then?(await g)():g)[0];var y=function(t,e,a,r){var i=a(new v.BB(t,e),r);return i instanceof Date?new Date(i.getTime()):i},m=function(t,e,a,r,i){return a.time_zone===_.Wj.server?y(t,r.time_zone,e,i):e(t,i)},b=function(t,e,a,r,i){return a.time_zone===_.Wj.server?y(t,r.time_zone,e,i):e(t,i)},w=function(t,e,a,r,i){return b(t,a,r,i,r.time_zone===_.Wj.server?new v.BB(e,i.time_zone):e)},k=function(t,e,a,r,v){var _,g;if(b(t,i.e,r,v)&&b(e,n.c,r,v)){var y=(w(e,t,o.W,r,v)+1)*(a?1:-1);_=m(t,s.P,r,v,y),g=m(m(e,s.P,r,v,y),c.p,r,v)}else if(b(t,function(t){return(0,d.o)(t).getMilliseconds()===t.getMilliseconds()},r,v)&&b(e,function(t){return(0,l.D)(t).getMilliseconds()===t.getMilliseconds()},r,v)){var k=(w(e,t,u.c,r,v)+1)*(a?1:-1);_=m(t,h.f,r,v,k),g=m(e,h.f,r,v,k)}else{var A=w(e,t,f.b,r,v)*(a?1:-1);_=m(t,p.A,r,v,A),g=m(e,p.A,r,v,A)}return{start:_,end:g}},A=function(t,e){var a=new v.BB(t,e);return new Date(a.getTime())},x=function(t,e){return new v.BB(t,e).toISOString().split("T")[0]},H=function(t,e){return new v.BB(t,e).toISOString().split("T")[1].split(".")[0]};r()}catch(M){r(M)}})},46223:function(t,e,a){a.a(t,async function(t,r){try{a.d(e,{b:function(){return w}});var i=a(35932),n=a(73983),o=a(92913),s=a(52640),c=a(69137),d=a(35660),l=a(36307),u=a(11650),h=a(15797),f=a(33977),p=a(69748),v=a(55144),_=a(21828),g=a(66708),y=a(91069),m=a(380),b=t([m,y]);[m,y]=b.then?(await b)():b;var w=function(t,e){var a=new Date,r=(0,m.P)(t.locale);switch(e){case"today":return[(0,y.ol)(a,i.o,t.locale,t.config,{weekStartsOn:r}),(0,y.ol)(a,n.D,t.locale,t.config,{weekStartsOn:r})];case"yesterday":return[(0,y.ol)((0,o.f)(a,-1),i.o,t.locale,t.config,{weekStartsOn:r}),(0,y.ol)((0,o.f)(a,-1),n.D,t.locale,t.config,{weekStartsOn:r})];case"this_week":return[(0,y.ol)(a,s.k,t.locale,t.config,{weekStartsOn:r}),(0,y.ol)(a,c.$,t.locale,t.config,{weekStartsOn:r})];case"this_month":return[(0,y.ol)(a,d.w,t.locale,t.config),(0,y.ol)(a,l.p,t.locale,t.config)];case"this_quarter":return[(0,y.ol)(a,u.a,t.locale,t.config),(0,y.ol)(a,h.j,t.locale,t.config)];case"this_year":return[(0,y.ol)(a,f.D,t.locale,t.config),(0,y.ol)(a,p.Q,t.locale,t.config)];case"now-7d":return[(0,y.ol)(a,v.e,t.locale,t.config,7),(0,y.ol)(a,v.e,t.locale,t.config,0)];case"now-30d":return[(0,y.ol)(a,v.e,t.locale,t.config,30),(0,y.ol)(a,v.e,t.locale,t.config,0)];case"now-12m":return[(0,y.ol)((0,_.a)(a,12),d.w,t.locale,t.config),(0,y.ol)((0,_.a)(a,1),l.p,t.locale,t.config)];case"now-1h":return[(0,y.ol)(a,g.O,t.locale,t.config,1),(0,y.ol)(a,g.O,t.locale,t.config,0)];case"now-12h":return[(0,y.ol)(a,g.O,t.locale,t.config,12),(0,y.ol)(a,g.O,t.locale,t.config,0)];case"now-24h":return[(0,y.ol)(a,g.O,t.locale,t.config,24),(0,y.ol)(a,g.O,t.locale,t.config,0)]}return[a,a]};r()}catch(k){r(k)}})},51758:function(t,e,a){a.d(e,{Z:function(){return r}});var r=function(t){var e=window.location.pathname;return t?e+"?"+t:e}},34218:function(t,e,a){a.d(e,{P:function(){return o}});var r=a(47075),i=a(78261),n=a(31432);a(23792),a(44114),a(72712),a(18111),a(18237),a(36033),a(2892),a(26099),a(47764),a(62953);function o(t,e,a,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!t)return[];if(t.length<=e)return t;var c,d=null!=a?a:s(t[0])[0],l=null!=r?r:s(t[t.length-1])[0],u=Math.ceil((l-d)/Math.floor(e)),h=new Map,f=(0,n.A)(t);try{for(f.s();!(c=f.n()).done;){var p=c.value,v=s(p);if(Array.isArray(v)){var _=Number(v[0]),g=Number(v[1]);if(!isNaN(_)&&!isNaN(g)){var y=Math.floor((_-d)/u),m=h.get(y);m?m.push({point:p,x:_,y:g}):h.set(y,[{point:p,x:_,y:g}])}}}}catch(j){f.e(j)}finally{f.f()}var b=[];if(o){var w,k=(0,n.A)(h);try{for(k.s();!(w=k.n()).done;){var A=(0,i.A)(w.value,2),x=(A[0],A[1]),H=x.reduce(function(t,e){return t+e.y},0),M=H/x.length,L=x.reduce(function(t,e){return t+e.x},0),C=L/x.length,D=s(x[0].point),E=Array.isArray(D)?[C,M]:{value:[C,M]};b.push(E)}}catch(j){k.e(j)}finally{k.f()}}else{var O,P=(0,n.A)(h);try{for(P.s();!(O=P.n()).done;){var S,z=(0,i.A)(O.value,2),V=(z[0],z[1]),B=V[0],T=V[0],R=(0,n.A)(V);try{for(R.s();!(S=R.n()).done;){var Z=S.value;Z.y<B.y&&(B=Z),Z.y>T.y&&(T=Z)}}catch(j){R.e(j)}finally{R.f()}B.x>T.x&&b.push(T.point),b.push(B.point),B.x<T.x&&b.push(T.point)}}catch(j){P.e(j)}finally{P.f()}}return b}function s(t){return t&&"object"===(0,r.A)(t)&&"value"in t?t.value:t}},72190:function(t,e,a){a.d(e,{c:function(){return v}});a(25276),a(23792),a(36033),a(26099),a(47764),a(62953);var r=a(12814),i=a(79468),n=a(39274),o=a(71727),s=a(27120),c=a(92025),d=a(86030),l=a(69093),u=a(15090),h={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};var f=0,p=new Map;function v(t,e,a){return function(t,e,a){var r;if(!a||t===c.Hh)return(0,d.a)("--history-unavailable-color",e);if(t===c.HV)return(0,d.a)("--history-unknown-color",e);var l=(0,s.mg)(a,t);if(l){var u=(0,d.a)(l,e);if(u){var f=(0,o.m)(a.entity_id),p=null===(r=h[f])||void 0===r?void 0:r[t];return p?(0,i.zm)((0,n.T)((0,i.Nc)((0,i.xp)(u)),p)):u}}}(t,e,a)||function(t,e,a){if(a){var i=(0,l.t)(a),n=(u.v[i]||"sensor"===i&&"enum"===a.attributes.device_class&&a.attributes.options||[]).indexOf(t);if(-1!==n)return(0,r.fI)(n,e)}}(t,e,a)||function(t,e){if(p.has(t))return p.get(t);var a=(0,r.fI)(f,e);return f++,p.set(t,a),a}(t,e)}},5745:function(t,e,a){var r=a(43080),i=a(44734),n=a(69683),o=a(6454),s=a(40445),c=a(82339),d=a(77845),l=function(t){function e(){return(0,i.A)(this,e),(0,n.A)(this,e,arguments)}return(0,o.A)(e,t),(0,r.A)(e)}(c.Y);l=(0,s.__decorate)([(0,d.EM)("ha-chip-set")],l)},99611:function(t,e,a){a.a(t,async function(t,r){try{a.d(e,{r:function(){return b}});var i,n,o=a(72153),s=a(31432),c=a(44734),d=a(43080),l=a(69683),u=a(6454),h=a(25460),f=(a(28706),a(40445)),p=a(1126),v=a(96196),_=a(77845),g=a(60353),y=a(14503),m=t([p]);p=(m.then?(await m)():m)[0];var b=300,w=function(t){function e(){var t;(0,c.A)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=(0,l.A)(this,e,[].concat(r))).open=!1,t.flexContent=!1,t._drawerOpen=!1,t._gestureRecognizer=new g.u,t._isDragging=!1,t._handleTouchStart=function(e){var a,r=(0,s.A)(e.composedPath());try{for(r.s();!(a=r.n()).done;){var i=a.value;if(i===t._drawer)break;if(i.scrollTop>0)return}}catch(n){r.e(n)}finally{r.f()}t._startResizing(e.touches[0].clientY)},t._handleTouchMove=function(e){var a=e.touches[0].clientY,r=t._gestureRecognizer.move(a);r<0&&(e.preventDefault(),t._isDragging=!0,requestAnimationFrame(function(){t._isDragging&&t.style.setProperty("--dialog-transform","translateY(".concat(-1*r,"px)"))}))},t._handleTouchEnd=function(){var e;t._unregisterResizeHandlers(),t._isDragging=!1;var a=t._gestureRecognizer.end();if(a.isSwipe)a.isDownwardSwipe?t._drawerOpen=!1:t._animateSnapBack();else{var r=null===(e=t._drawer.shadowRoot)||void 0===e?void 0:e.querySelector('[part="body"]'),i=(null==r?void 0:r.offsetHeight)||0;i>0&&a.delta<0&&Math.abs(a.delta)>.5*i?t._drawerOpen=!1:t._animateSnapBack()}},t._unregisterResizeHandlers=function(){document.removeEventListener("touchmove",t._handleTouchMove),document.removeEventListener("touchend",t._handleTouchEnd),document.removeEventListener("touchcancel",t._handleTouchEnd)},t}return(0,u.A)(e,t),(0,d.A)(e,[{key:"_handleAfterHide",value:function(t){t.stopPropagation(),this.open=!1;var e=new Event("closed",{bubbles:!0,composed:!0});this.dispatchEvent(e)}},{key:"updated",value:function(t){(0,h.A)(e,"updated",this,3)([t]),t.has("open")&&(this._drawerOpen=this.open)}},{key:"render",value:function(){return(0,v.qy)(i||(i=(0,o.A)([' <wa-drawer id="drawer" placement="bottom" .open="','" @wa-after-hide="','" without-header @touchstart="','"> <slot name="header"></slot> <div id="body" class="body ha-scrollbar"> <slot></slot> </div> </wa-drawer> '])),this._drawerOpen,this._handleAfterHide,this._handleTouchStart)}},{key:"_startResizing",value:function(t){document.addEventListener("touchmove",this._handleTouchMove,{passive:!1}),document.addEventListener("touchend",this._handleTouchEnd),document.addEventListener("touchcancel",this._handleTouchEnd),this._gestureRecognizer.start(t)}},{key:"_animateSnapBack",value:function(){var t=this;this.style.setProperty("--dialog-transition","transform ".concat(b,"ms ease-out")),this.style.removeProperty("--dialog-transform"),setTimeout(function(){t.style.removeProperty("--dialog-transition")},b)}},{key:"disconnectedCallback",value:function(){(0,h.A)(e,"disconnectedCallback",this,3)([]),this._unregisterResizeHandlers(),this._isDragging=!1}}])}(v.WF);w.styles=[y.dp,(0,v.AH)(n||(n=(0,o.A)(["wa-drawer{--wa-color-surface-raised:transparent;--spacing:0;--size:var(--ha-bottom-sheet-height, auto);--show-duration:","ms;--hide-duration:","ms}wa-drawer::part(dialog){max-height:var(--ha-bottom-sheet-max-height,90vh);align-items:center;transform:var(--dialog-transform);transition:var(--dialog-transition)}wa-drawer::part(body){max-width:var(--ha-bottom-sheet-max-width);width:100%;border-top-left-radius:var(--ha-bottom-sheet-border-radius,var(--ha-dialog-border-radius,var(--ha-border-radius-2xl)));border-top-right-radius:var(--ha-bottom-sheet-border-radius,var(--ha-dialog-border-radius,var(--ha-border-radius-2xl)));background-color:var(--ha-bottom-sheet-surface-background,var(--ha-dialog-surface-background,var(--mdc-theme-surface,#fff)));padding:var(--ha-bottom-sheet-padding,0 var(--safe-area-inset-right) var(--safe-area-inset-bottom) var(--safe-area-inset-left))}:host([flexcontent]) wa-drawer::part(body){display:flex;flex-direction:column}:host([flexcontent]) .body{flex:1;max-width:100%;display:flex;flex-direction:column;padding:var(--ha-bottom-sheet-padding,0 var(--safe-area-inset-right) var(--safe-area-inset-bottom) var(--safe-area-inset-left))}"])),b,b)],(0,f.__decorate)([(0,_.MZ)({type:Boolean})],w.prototype,"open",void 0),(0,f.__decorate)([(0,_.MZ)({type:Boolean,reflect:!0,attribute:"flexcontent"})],w.prototype,"flexContent",void 0),(0,f.__decorate)([(0,_.wk)()],w.prototype,"_drawerOpen",void 0),(0,f.__decorate)([(0,_.P)("#drawer")],w.prototype,"_drawer",void 0),w=(0,f.__decorate)([(0,_.EM)("ha-bottom-sheet")],w),r()}catch(k){r(k)}})},13416:function(t,e,a){var r,i,n=a(72153),o=a(44734),s=a(43080),c=a(69683),d=a(6454),l=a(25460),u=(a(28706),a(18111),a(7588),a(2892),a(26099),a(89907),a(23500),a(40445)),h=a(96196),f=a(77845),p=a(63091),v=(a(22444),a(79817),function(t){function e(){var t;(0,o.A)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=(0,c.A)(this,e,[].concat(r))).corner="BOTTOM_START",t.menuCorner="START",t.x=null,t.y=null,t.multi=!1,t.activatable=!1,t.disabled=!1,t.fixed=!1,t.noAnchor=!1,t}return(0,d.A)(e,t),(0,s.A)(e,[{key:"items",get:function(){var t;return null===(t=this._menu)||void 0===t?void 0:t.items}},{key:"selected",get:function(){var t;return null===(t=this._menu)||void 0===t?void 0:t.selected}},{key:"focus",value:function(){var t,e;null!==(t=this._menu)&&void 0!==t&&t.open?this._menu.focusItemAtIndex(0):null===(e=this._triggerButton)||void 0===e||e.focus()}},{key:"render",value:function(){return(0,h.qy)(r||(r=(0,n.A)([' <div @click="','"> <slot name="trigger" @slotchange="','"></slot> </div> <ha-menu .corner="','" .menuCorner="','" .fixed="','" .multi="','" .activatable="','" .y="','" .x="','"> <slot></slot> </ha-menu> '])),this._handleClick,this._setTriggerAria,this.corner,this.menuCorner,this.fixed,this.multi,this.activatable,this.y,this.x)}},{key:"firstUpdated",value:function(t){var a=this;(0,l.A)(e,"firstUpdated",this,3)([t]),"rtl"===p.G.document.dir&&this.updateComplete.then(function(){a.querySelectorAll("ha-list-item").forEach(function(t){var e=document.createElement("style");e.innerHTML="span.material-icons:first-of-type { margin-left: var(--mdc-list-item-graphic-margin, 32px) !important; margin-right: 0px !important;}",t.shadowRoot.appendChild(e)})})}},{key:"_handleClick",value:function(){this.disabled||(this._menu.anchor=this.noAnchor?null:this,this._menu.show())}},{key:"_triggerButton",get:function(){return this.querySelector('ha-icon-button[slot="trigger"], ha-button[slot="trigger"]')}},{key:"_setTriggerAria",value:function(){this._triggerButton&&(this._triggerButton.ariaHasPopup="menu")}}])}(h.WF));v.styles=(0,h.AH)(i||(i=(0,n.A)([":host{display:inline-block;position:relative}::slotted([disabled]){color:var(--disabled-text-color)}"]))),(0,u.__decorate)([(0,f.MZ)()],v.prototype,"corner",void 0),(0,u.__decorate)([(0,f.MZ)({attribute:"menu-corner"})],v.prototype,"menuCorner",void 0),(0,u.__decorate)([(0,f.MZ)({type:Number})],v.prototype,"x",void 0),(0,u.__decorate)([(0,f.MZ)({type:Number})],v.prototype,"y",void 0),(0,u.__decorate)([(0,f.MZ)({type:Boolean})],v.prototype,"multi",void 0),(0,u.__decorate)([(0,f.MZ)({type:Boolean})],v.prototype,"activatable",void 0),(0,u.__decorate)([(0,f.MZ)({type:Boolean})],v.prototype,"disabled",void 0),(0,u.__decorate)([(0,f.MZ)({type:Boolean})],v.prototype,"fixed",void 0),(0,u.__decorate)([(0,f.MZ)({type:Boolean,attribute:"no-anchor"})],v.prototype,"noAnchor",void 0),(0,u.__decorate)([(0,f.P)("ha-menu",!0)],v.prototype,"_menu",void 0),v=(0,u.__decorate)([(0,f.EM)("ha-button-menu")],v)},11382:function(t,e,a){var r,i,n,o,s=a(61397),c=a(50264),d=a(72153),l=a(44734),u=a(43080),h=a(69683),f=a(6454),p=a(25460),v=(a(28706),a(40445)),_=a(96196),g=a(77845),y=a(94333),m=a(1087),b=a(12587),w=(a(67094),function(t){function e(){var t;(0,l.A)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=(0,h.A)(this,e,[].concat(r))).expanded=!1,t.outlined=!1,t.leftChevron=!1,t.noCollapse=!1,t._showContent=t.expanded,t}return(0,f.A)(e,t),(0,u.A)(e,[{key:"render",value:function(){var t=this.noCollapse?_.s6:(0,_.qy)(r||(r=(0,d.A)([' <ha-svg-icon .path="','" class="summary-icon ','"></ha-svg-icon> '])),"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",(0,y.H)({expanded:this.expanded}));return(0,_.qy)(i||(i=(0,d.A)([' <div class="top ','"> <div id="summary" class="','" @click="','" @keydown="','" @focus="','" @blur="','" role="button" tabindex="','" aria-expanded="','" aria-controls="sect1" part="summary"> ',' <slot name="leading-icon"></slot> <slot name="header"> <div class="header"> ',' <slot class="secondary" name="secondary">',"</slot> </div> </slot> ",' <slot name="icons"></slot> </div> </div> <div class="container ','" @transitionend="','" role="region" aria-labelledby="summary" aria-hidden="','" tabindex="-1"> '," </div> "])),(0,y.H)({expanded:this.expanded}),(0,y.H)({noCollapse:this.noCollapse}),this._toggleContainer,this._toggleContainer,this._focusChanged,this._focusChanged,this.noCollapse?-1:0,this.expanded,this.leftChevron?t:_.s6,this.header,this.secondary,this.leftChevron?_.s6:t,(0,y.H)({expanded:this.expanded}),this._handleTransitionEnd,!this.expanded,this._showContent?(0,_.qy)(n||(n=(0,d.A)(["<slot></slot>"]))):"")}},{key:"willUpdate",value:function(t){var a=this;(0,p.A)(e,"willUpdate",this,3)([t]),t.has("expanded")&&(this._showContent=this.expanded,setTimeout(function(){a._container.style.overflow=a.expanded?"initial":"hidden"},300))}},{key:"_handleTransitionEnd",value:function(){this._container.style.removeProperty("height"),this._container.style.overflow=this.expanded?"initial":"hidden",this._showContent=this.expanded}},{key:"_toggleContainer",value:(a=(0,c.A)((0,s.A)().m(function t(e){var a,r,i=this;return(0,s.A)().w(function(t){for(;;)switch(t.n){case 0:if(!e.defaultPrevented){t.n=1;break}return t.a(2);case 1:if("keydown"!==e.type||"Enter"===e.key||" "===e.key){t.n=2;break}return t.a(2);case 2:if(e.preventDefault(),!this.noCollapse){t.n=3;break}return t.a(2);case 3:if(a=!this.expanded,(0,m.r)(this,"expanded-will-change",{expanded:a}),this._container.style.overflow="hidden",!a){t.n=4;break}return this._showContent=!0,t.n=4,(0,b.E)();case 4:r=this._container.scrollHeight,this._container.style.height="".concat(r,"px"),a||setTimeout(function(){i._container.style.height="0px"},0),this.expanded=a,(0,m.r)(this,"expanded-changed",{expanded:this.expanded});case 5:return t.a(2)}},t,this)})),function(t){return a.apply(this,arguments)})},{key:"_focusChanged",value:function(t){this.noCollapse||this.shadowRoot.querySelector(".top").classList.toggle("focused","focus"===t.type)}}]);var a}(_.WF));w.styles=(0,_.AH)(o||(o=(0,d.A)([":host{display:block}.top{display:flex;align-items:center;border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg))}.top.expanded{border-bottom-left-radius:0px;border-bottom-right-radius:0px}.top.focused{background:var(--input-fill-color)}:host([outlined]){box-shadow:none;border-width:1px;border-style:solid;border-color:var(--outline-color);border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg))}.summary-icon{transition:transform 150ms cubic-bezier(.4, 0, .2, 1);direction:var(--direction);margin-left:8px;margin-inline-start:8px;margin-inline-end:initial;border-radius:var(--ha-border-radius-circle)}#summary:focus-visible ha-svg-icon.summary-icon{background-color:var(--ha-color-fill-neutral-normal-active)}::slotted([slot=leading-icon]),:host([left-chevron]) .summary-icon{margin-left:0;margin-right:8px;margin-inline-start:0;margin-inline-end:8px}#summary{flex:1;display:flex;padding:var(--expansion-panel-summary-padding,0 8px);min-height:48px;align-items:center;cursor:pointer;overflow:hidden;font-weight:var(--ha-font-weight-medium);outline:0}#summary.noCollapse{cursor:default}.summary-icon.expanded{transform:rotate(180deg)}.header,::slotted([slot=header]){flex:1;overflow-wrap:anywhere;color:var(--primary-text-color)}.container{padding:var(--expansion-panel-content-padding,0 8px);overflow:hidden;transition:height .3s cubic-bezier(.4, 0, .2, 1);height:0px}.container.expanded{height:auto}.secondary{display:block;color:var(--secondary-text-color);font-size:var(--ha-font-size-s)}"]))),(0,v.__decorate)([(0,g.MZ)({type:Boolean,reflect:!0})],w.prototype,"expanded",void 0),(0,v.__decorate)([(0,g.MZ)({type:Boolean,reflect:!0})],w.prototype,"outlined",void 0),(0,v.__decorate)([(0,g.MZ)({attribute:"left-chevron",type:Boolean,reflect:!0})],w.prototype,"leftChevron",void 0),(0,v.__decorate)([(0,g.MZ)({attribute:"no-collapse",type:Boolean,reflect:!0})],w.prototype,"noCollapse",void 0),(0,v.__decorate)([(0,g.MZ)()],w.prototype,"header",void 0),(0,v.__decorate)([(0,g.MZ)()],w.prototype,"secondary",void 0),(0,v.__decorate)([(0,g.wk)()],w.prototype,"_showContent",void 0),(0,v.__decorate)([(0,g.P)(".container")],w.prototype,"_container",void 0),w=(0,v.__decorate)([(0,g.EM)("ha-expansion-panel")],w)},90248:function(t,e,a){a.r(e),a.d(e,{HaIconButtonArrowPrev:function(){return f}});var r,i=a(72153),n=a(44734),o=a(43080),s=a(69683),c=a(6454),d=(a(28706),a(40445)),l=a(96196),u=a(77845),h=a(63091),f=(a(26300),function(t){function e(){var t;(0,n.A)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=(0,s.A)(this,e,[].concat(r))).disabled=!1,t._icon="rtl"===h.G.document.dir?"M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z":"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z",t}return(0,c.A)(e,t),(0,o.A)(e,[{key:"render",value:function(){var t;return(0,l.qy)(r||(r=(0,i.A)([' <ha-icon-button .disabled="','" .label="','" .path="','"></ha-icon-button> '])),this.disabled,this.label||(null===(t=this.hass)||void 0===t?void 0:t.localize("ui.common.back"))||"Back",this._icon)}}])}(l.WF));(0,d.__decorate)([(0,u.MZ)({attribute:!1})],f.prototype,"hass",void 0),(0,d.__decorate)([(0,u.MZ)({type:Boolean})],f.prototype,"disabled",void 0),(0,d.__decorate)([(0,u.MZ)()],f.prototype,"label",void 0),(0,d.__decorate)([(0,u.wk)()],f.prototype,"_icon",void 0),f=(0,d.__decorate)([(0,u.EM)("ha-icon-button-arrow-prev")],f)},2846:function(t,e,a){a.d(e,{G:function(){return _},J:function(){return v}});var r,i,n=a(44734),o=a(43080),s=a(69683),c=a(6454),d=a(72153),l=a(40445),u=a(97154),h=a(82553),f=a(96196),p=a(77845),v=(a(54276),[h.R,(0,f.AH)(r||(r=(0,d.A)([":host{--ha-icon-display:block;--md-sys-color-primary:var(--primary-text-color);--md-sys-color-secondary:var(--secondary-text-color);--md-sys-color-surface:var(--card-background-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--secondary-text-color)}md-item{overflow:var(--md-item-overflow,hidden);align-items:var(--md-item-align-items,center);gap:var(--ha-md-list-item-gap,16px)}"])))]),_=function(t){function e(){return(0,n.A)(this,e),(0,s.A)(this,e,arguments)}return(0,c.A)(e,t),(0,o.A)(e,[{key:"renderRipple",value:function(){return"text"===this.type?f.s6:(0,f.qy)(i||(i=(0,d.A)(['<ha-ripple part="ripple" for="item" ?disabled="','"></ha-ripple>'])),this.disabled&&"link"!==this.type)}}])}(u.n);_.styles=v,_=(0,l.__decorate)([(0,p.EM)("ha-md-list-item")],_)},79817:function(t,e,a){var r,i=a(72153),n=a(44734),o=a(43080),s=a(69683),c=a(6454),d=a(40445),l=a(43976),u=a(703),h=a(96196),f=a(77845),p=a(94333),v=(a(8630),function(t){function e(){return(0,n.A)(this,e),(0,s.A)(this,e,arguments)}return(0,c.A)(e,t),(0,o.A)(e,[{key:"listElement",get:function(){return this.listElement_||(this.listElement_=this.renderRoot.querySelector("ha-list")),this.listElement_}},{key:"renderList",value:function(){var t="menu"===this.innerRole?"menuitem":"option",e=this.renderListClasses();return(0,h.qy)(r||(r=(0,i.A)(['<ha-list rootTabbable .innerAriaLabel="','" .innerRole="','" .multi="','" class="','" .itemRoles="','" .wrapFocus="','" .activatable="','" @action="','"> <slot></slot> </ha-list>'])),this.innerAriaLabel,this.innerRole,this.multi,(0,p.H)(e),t,this.wrapFocus,this.activatable,this.onAction)}}])}(l.ZR));v.styles=u.R,v=(0,d.__decorate)([(0,f.EM)("ha-menu")],v)},27330:function(t,e,a){var r,i=a(72153),n=a(43080),o=a(44734),s=a(69683),c=a(6454),d=(a(28706),a(40445)),l=a(29781),u=a(71467),h=a(96196),f=a(77845),p=function(t){function e(){var t;(0,o.A)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=(0,s.A)(this,e,[].concat(r))).narrow=!1,t}return(0,c.A)(e,t),(0,n.A)(e)}(l.$);p.styles=[u.R,(0,h.AH)(r||(r=(0,i.A)(["header{padding-top:var(--safe-area-inset-top)}.mdc-top-app-bar__row{height:var(--header-height);border-bottom:var(--app-header-border-bottom)}.mdc-top-app-bar--fixed-adjust{padding-top:calc(var(--header-height,0px) + var(--safe-area-inset-top,0px));padding-bottom:var(--safe-area-inset-bottom);padding-right:var(--safe-area-inset-right)}:host([narrow]) .mdc-top-app-bar--fixed-adjust{padding-left:var(--safe-area-inset-left)}.mdc-top-app-bar{--mdc-typography-headline6-font-weight:var(--ha-font-weight-normal);color:var(--app-header-text-color,var(--mdc-theme-on-primary,#fff));background-color:var(--app-header-background-color,var(--mdc-theme-primary));padding-top:var(--safe-area-inset-top);padding-right:var(--safe-area-inset-right)}:host([narrow]) .mdc-top-app-bar{padding-left:var(--safe-area-inset-left)}.mdc-top-app-bar__title{font-size:var(--ha-font-size-xl);padding-inline-start:24px;padding-inline-end:initial}"])))],(0,d.__decorate)([(0,f.MZ)({type:Boolean,reflect:!0})],p.prototype,"narrow",void 0),p=(0,d.__decorate)([(0,f.EM)("ha-top-app-bar-fixed")],p)},95311:function(t,e,a){a.d(e,{DF:function(){return g},Lo:function(){return A},MH:function(){return f},MM:function(){return y},Qz:function(){return _},Ru:function(){return b},UU:function(){return w},_7:function(){return v},bZ:function(){return p},m0:function(){return h},tD:function(){return k},vX:function(){return m},wY:function(){return x}});var r=a(7739),i=a(20054),n=(a(2008),a(78350),a(23418),a(74423),a(23792),a(44114),a(30237),a(18111),a(22489),a(30531),a(7588),a(13579),a(69085),a(26099),a(16034),a(31415),a(17642),a(58004),a(33853),a(45876),a(32475),a(15024),a(31698),a(21699),a(47764),a(23500),a(62953),a(44537)),o=a(69093),s=a(82286),c=a(24367),d=a(52708),l=["domain","integration","device_class"],u=["integration","manufacturer","model"],h=function(t,e,a,r,i,n,o){var s=[],c=[],d=[];return Object.values(a).forEach(function(a){a.labels.includes(e)&&_(t,i,r,a.area_id,n,o)&&d.push(a.area_id)}),Object.values(r).forEach(function(a){a.labels.includes(e)&&g(t,Object.values(i),a,n,o)&&c.push(a.id)}),Object.values(i).forEach(function(a){a.labels.includes(e)&&y(t.states[a.entity_id],n,o)&&s.push(a.entity_id)}),{areas:d,devices:c,entities:s}},f=function(t,e,a,r,i){var n=[];return Object.values(a).forEach(function(a){a.floor_id===e&&_(t,t.entities,t.devices,a.area_id,r,i)&&n.push(a.area_id)}),{areas:n}},p=function(t,e,a,r,i,n){var o=[],s=[];return Object.values(a).forEach(function(a){a.area_id===e&&g(t,Object.values(r),a,i,n)&&s.push(a.id)}),Object.values(r).forEach(function(a){a.area_id===e&&y(t.states[a.entity_id],i,n)&&o.push(a.entity_id)}),{devices:s,entities:o}},v=function(t,e,a,r,i){var n=[];return Object.values(a).forEach(function(a){a.device_id===e&&y(t.states[a.entity_id],r,i)&&n.push(a.entity_id)}),{entities:n}},_=function(t,e,a,r,i,n){return!!Object.values(a).some(function(a){return!(a.area_id!==r||!g(t,Object.values(e),a,i,n))})||Object.values(e).some(function(e){return!(e.area_id!==r||!y(t.states[e.entity_id],i,n))})},g=function(t,e,a,r,i){var o,s,c=i?(0,d.fk)(i,e):void 0;return!(null!==(o=r.target)&&void 0!==o&&o.device&&!(0,n.e)(r.target.device).some(function(t){return m(t,a,c)}))&&(null===(s=r.target)||void 0===s||!s.entity||e.filter(function(t){return t.device_id===a.id}).some(function(e){var a=t.states[e.entity_id];return y(a,r,i)}))},y=function(t,e,a){var r;return!!t&&(null===(r=e.target)||void 0===r||!r.entity||(0,n.e)(e.target.entity).some(function(e){return b(e,t,a)}))},m=function(t,e,a){var r,i=t.manufacturer,n=t.model,o=t.model_id,s=t.integration;if(i&&e.manufacturer!==i)return!1;if(n&&e.model!==n)return!1;if(o&&e.model_id!==o)return!1;if(s&&a&&(null==a||null===(r=a[e.id])||void 0===r||!r.has(s)))return!1;return!0},b=function(t,e,a){var r,i=t.domain,c=t.device_class,d=t.supported_features,l=t.integration;if(i){var u=(0,o.t)(e);if(Array.isArray(i)?!i.includes(u):u!==i)return!1}if(c){var h=e.attributes.device_class;if(h&&Array.isArray(c)?!c.includes(h):h!==c)return!1}return!(d&&!(0,n.e)(d).some(function(t){return(0,s.$)(e,t)}))&&(!l||(null==a||null===(r=a[e.entity_id])||void 0===r?void 0:r.domain)===l)},w=function(t){if(!t.entity)return{entity:null};if("filter"in t.entity)return t;var e=t.entity,a=e.domain,r=e.integration,n=e.device_class,o=(0,i.A)(e,l);return a||r||n?{entity:Object.assign(Object.assign({},o),{},{filter:{domain:a,integration:r,device_class:n}})}:{entity:o}},k=function(t){if(!t.device)return{device:null};if("filter"in t.device)return t;var e=t.device,a=e.integration,r=e.manufacturer,n=e.model,o=(0,i.A)(e,u);return a||r||n?{device:Object.assign(Object.assign({},o),{},{filter:{integration:a,manufacturer:r,model:n}})}:{device:o}},A=function(t){var e,a;if("target"in t)e=(0,n.e)(null===(a=t.target)||void 0===a?void 0:a.entity);else if("entity"in t){var i,o;if(null!==(i=t.entity)&&void 0!==i&&i.include_entities)return;e=(0,n.e)(null===(o=t.entity)||void 0===o?void 0:o.filter)}if(e){var s=e.flatMap(function(t){return t.integration||t.device_class||t.supported_features||!t.domain?[]:(0,n.e)(t.domain).filter(function(t){return(0,c.zd)(t)})});return(0,r.A)(new Set(s))}},x=function(t,e,a,r,i){if(!e)return[];var o={target:{}},s=new Set((0,n.e)(e.entity_id)),c=new Set((0,n.e)(e.device_id)),d=new Set((0,n.e)(e.area_id)),l=new Set((0,n.e)(e.floor_id));return new Set((0,n.e)(e.label_id)).forEach(function(e){var n=h(t,e,i,r,a,o);n.devices.forEach(function(t){return c.add(t)}),n.entities.forEach(function(t){return s.add(t)}),n.areas.forEach(function(t){return d.add(t)})}),l.forEach(function(e){f(t,e,i,o).areas.forEach(function(t){return d.add(t)})}),d.forEach(function(e){var i=p(t,e,r,a,o);i.devices.forEach(function(t){return c.add(t)}),i.entities.forEach(function(t){return s.add(t)})}),c.forEach(function(e){v(t,e,a,o).entities.forEach(function(t){return s.add(t)})}),Array.from(s)}},19711:function(t,e,a){a.d(e,{$:function(){return n}});a(23792),a(26099),a(3362),a(47764),a(62953);var r=a(1087),i=function(){return Promise.all([a.e("93785"),a.e("96477"),a.e("80131"),a.e("12036"),a.e("94943")]).then(a.bind(a,79029))},n=function(t,e){(0,r.r)(t,"show-dialog",{dialogTag:"dialog-helper-detail",dialogImport:i,dialogParams:e})}},49131:function(t,e,a){a.a(t,async function(t,r){try{a.r(e);var i,n,o,s,c,d,l,u,h=a(78261),f=a(31432),p=a(7739),v=a(61397),_=a(50264),g=a(72153),y=a(44734),m=a(43080),b=a(69683),w=a(6454),k=a(25460),A=(a(28706),a(23792),a(44114),a(26910),a(5506),a(79432),a(26099),a(27495),a(90906),a(31415),a(17642),a(58004),a(33853),a(45876),a(32475),a(15024),a(31698),a(47764),a(25440),a(79978),a(62953),a(3296),a(27208),a(48408),a(14603),a(47566),a(98721),a(40445)),x=a(44018),H=a(96196),M=a(77845),L=a(22786),C=a(44537),D=a(93905),E=a(71727),O=a(91926),P=a(51758),S=a(6030),z=a(44439),V=a(66737),B=(a(13416),a(15397)),T=(a(26300),a(90248),a(28732),a(2054),a(65829)),R=a(79286),Z=(a(27330),a(25064)),j=a(23528),I=a(95311),q=a(64808),U=a(65063),F=a(14503),W=a(33668),N=a(12496),Y=t([V,B,T,R,j,Z,z]);[V,B,T,R,j,Z,z]=Y.then?(await Y)():Y;var G=function(t){function e(){var t;(0,y.A)(this,e),(t=(0,b.A)(this,e)).narrow=!1,t.rtl=!1,t._targetPickerValue={},t._isLoading=!1,t.__getEntityIds=(0,L.A)(function(e,a,r,i){return(0,I.wY)(t.hass,e,a,r,i)});var a=new Date;a.setHours(a.getHours()-1,0,0,0),t._startDate=a;var r=new Date;return r.setHours(r.getHours()+2,0,0,0),t._endDate=r,t}return(0,w.A)(e,t),(0,m.A)(e,[{key:"connectedCallback",value:function(){(0,k.A)(e,"connectedCallback",this,3)([]),this.hasUpdated&&this._getHistory()}},{key:"disconnectedCallback",value:function(){(0,k.A)(e,"disconnectedCallback",this,3)([]),this._unsubscribeHistory()}},{key:"_goBack",value:function(){(0,O.O)()}},{key:"render",value:function(){var t=this._getEntityIds().length>0;return(0,H.qy)(i||(i=(0,g.A)([' <ha-top-app-bar-fixed .narrow="','"> ',' <div slot="title">',"</div> ",' <ha-button-menu slot="actionItems" @action="','"> <ha-icon-button slot="trigger" .label="','" .path="','"></ha-icon-button> <ha-list-item graphic="icon" .disabled="','"> ',' <ha-svg-icon slot="graphic" .path="','"></ha-svg-icon> </ha-list-item> <ha-list-item graphic="icon" .disabled="','"> ',' <ha-svg-icon slot="graphic" .path="','"></ha-svg-icon> </ha-list-item> </ha-button-menu> <div class="flex content"> <div class="filters"> <ha-date-range-picker .hass="','" ?disabled="','" .startDate="','" .endDate="','" extended-presets time-picker @value-changed="','"></ha-date-range-picker> <ha-target-picker .hass="','" .value="','" .disabled="','" add-on-top @value-changed="','" compact="compact"></ha-target-picker> </div> '," </div> </ha-top-app-bar-fixed> "])),this.narrow,this._showBack?(0,H.qy)(n||(n=(0,g.A)([' <ha-icon-button-arrow-prev slot="navigationIcon" @click="','"></ha-icon-button-arrow-prev> '])),this._goBack):(0,H.qy)(o||(o=(0,g.A)([' <ha-menu-button slot="navigationIcon" .hass="','" .narrow="','"></ha-menu-button> '])),this.hass,this.narrow),this.hass.localize("panel.history"),t?(0,H.qy)(s||(s=(0,g.A)([' <ha-icon-button slot="actionItems" @click="','" .disabled="','" .path="','" .label="','"></ha-icon-button> '])),this._removeAll,this._isLoading,"M14.76,20.83L17.6,18L14.76,15.17L16.17,13.76L19,16.57L21.83,13.76L23.24,15.17L20.43,18L23.24,20.83L21.83,22.24L19,19.4L16.17,22.24L14.76,20.83M12,12V19.88C12.04,20.18 11.94,20.5 11.71,20.71C11.32,21.1 10.69,21.1 10.3,20.71L8.29,18.7C8.06,18.47 7.96,18.16 8,17.87V12H7.97L2.21,4.62C1.87,4.19 1.95,3.56 2.38,3.22C2.57,3.08 2.78,3 3,3V3H17V3C17.22,3 17.43,3.08 17.62,3.22C18.05,3.56 18.13,4.19 17.79,4.62L12.03,12H12Z",this.hass.localize("ui.panel.history.remove_all")):"",this._handleMenuAction,this.hass.localize("ui.common.menu"),"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",this._isLoading,this.hass.localize("ui.panel.history.download_data"),"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",this._isLoading,this.hass.localize("ui.panel.history.add_card"),"M18 15V18H15V20H18V23H20V20H23V18H20V15H18M13.3 21H5C3.9 21 3 20.1 3 19V5C3 3.9 3.9 3 5 3H19C20.1 3 21 3.9 21 5V13.3C20.4 13.1 19.7 13 19 13C17.9 13 16.8 13.3 15.9 13.9L14.5 12L11 16.5L8.5 13.5L5 18H13.1C13 18.3 13 18.7 13 19C13 19.7 13.1 20.4 13.3 21Z",this.hass,this._isLoading,this._startDate,this._endDate,this._dateRangeChanged,this.hass,this._targetPickerValue,this._isLoading,this._targetsChanged,this._isLoading?(0,H.qy)(c||(c=(0,g.A)(['<div class="progress-wrapper"> <ha-spinner></ha-spinner> </div>']))):t?(0,H.qy)(l||(l=(0,g.A)([' <state-history-charts .hass="','" .historyData="','" .startTime="','" .endTime="','" .narrow="','" sync-charts> </state-history-charts> '])),this.hass,this._mungedStateHistory,this._startDate,this._endDate,this.narrow):(0,H.qy)(d||(d=(0,g.A)(['<div class="start-search"> '," </div>"])),this.hass.localize("ui.panel.history.start_search")))}},{key:"willUpdate",value:function(t){if((0,k.A)(e,"willUpdate",this,3)([t]),(t.has("_stateHistory")||t.has("_statisticsHistory")||t.has("_startDate")||t.has("_endDate")||t.has("_targetPickerValue"))&&(this._statisticsHistory&&this._stateHistory?this._mungedStateHistory=(0,Z.tG)(this._stateHistory,this._statisticsHistory):this._mungedStateHistory=this._stateHistory||this._statisticsHistory),!this.hasUpdated){var a=(0,S.px)(),r=a.entity_id,i=a.device_id,n=a.area_id,o=a.floor_id,s=a.label_id;if((r||i||n||o||s)&&(this._targetPickerValue={}),r){var c=r.split(",");this._targetPickerValue.entity_id=c}if(i){var d=i.split(",");this._targetPickerValue.device_id=d}if(n){var l=n.split(",");this._targetPickerValue.area_id=l}if(o){var u=o.split(",");this._targetPickerValue.floor_id=u}if(s){var h=s.split(",");this._targetPickerValue.label_id=h}var f=a.start_date;f&&(this._startDate=new Date(f));var p=a.end_date;p&&(this._endDate=new Date(p))}}},{key:"firstUpdated",value:function(t){(0,k.A)(e,"firstUpdated",this,3)([t]),"1"===(0,S.px)().back&&history.length>1&&(this._showBack=!0,(0,O.o)((0,P.Z)((0,S.s8)("back")),{replace:!0}))}},{key:"updated",value:function(t){(t.has("_startDate")||t.has("_endDate")||t.has("_targetPickerValue")||!this._stateHistory&&(t.has("_deviceEntityLookup")||t.has("_areaEntityLookup")||t.has("_areaDeviceLookup")))&&(this._getHistory(),this._getStats())}},{key:"_removeAll",value:function(){this._targetPickerValue={},this._updatePath()}},{key:"_getStats",value:(A=(0,_.A)((0,v.A)().m(function t(){var e,a,r,i,n;return(0,v.A)().w(function(t){for(;;)switch(t.n){case 0:if(0!==(e=this._getEntityIds()).length){t.n=1;break}return this._statisticsHistory=void 0,t.a(2);case 1:return(a=new Date(this._startDate)).setHours(a.getHours()-1),t.n=2,(0,j.sz)(this.hass,a,this._endDate,e,"hour",void 0,["mean","state"]);case 2:return r=t.v,t.n=3,(0,q.KL)(this.hass);case 3:i=t.v,n=i.numeric_device_classes,this._statisticsHistory=(0,Z._1)(this.hass,r,e,n,!0);case 4:return t.a(2)}},t,this)})),function(){return A.apply(this,arguments)})},{key:"_getHistory",value:(r=(0,_.A)((0,v.A)().m(function t(){var e,a,r,i,n=this;return(0,v.A)().w(function(t){for(;;)switch(t.n){case 0:if(0!==(e=this._getEntityIds()).length){t.n=1;break}return this._stateHistory=void 0,t.a(2);case 1:return this._isLoading=!0,this._subscribed&&this._unsubscribeHistory(),a=new Date,t.n=2,(0,q.KL)(this.hass);case 2:r=t.v,i=r.numeric_device_classes,this._subscribed=(0,Z.Jo)(this.hass,function(t){n._isLoading=!1,n._stateHistory=(0,Z.Mm)(n.hass,t,e,n.hass.localize,i,!0)},this._startDate,this._endDate,e),this._subscribed.catch(function(){n._isLoading=!1,n._unsubscribeHistory()}),this._endDate>a&&this._setRedrawTimer();case 3:return t.a(2)}},t,this)})),function(){return r.apply(this,arguments)})},{key:"_setRedrawTimer",value:function(){var t=this;clearInterval(this._interval);var e=new Date,a=this._endDate>e?e:this._endDate,r=(0,x.M)(a,this._startDate);this._interval=window.setInterval(function(){var e;return null===(e=t._stateHistoryCharts)||void 0===e?void 0:e.requestUpdate()},r<2?1e4:r<10?6e4:z.p)}},{key:"_unsubscribeHistory",value:function(){this._interval&&(clearInterval(this._interval),this._interval=void 0),this._subscribed&&(this._subscribed.then(function(t){return null==t?void 0:t()}),this._subscribed=void 0)}},{key:"_getEntityIds",value:function(){return this.__getEntityIds(this._targetPickerValue,this.hass.entities,this.hass.devices,this.hass.areas)}},{key:"_dateRangeChanged",value:function(t){this._startDate=t.detail.value.startDate,this._endDate=t.detail.value.endDate,this._updatePath()}},{key:"_targetsChanged",value:function(t){this._targetPickerValue=t.detail.value||{},this._updatePath()}},{key:"_updatePath",value:function(){var t={};this._targetPickerValue.entity_id&&(t.entity_id=(0,C.e)(this._targetPickerValue.entity_id).join(",")),this._targetPickerValue.label_id&&(t.label_id=(0,C.e)(this._targetPickerValue.label_id).join(",")),this._targetPickerValue.floor_id&&(t.floor_id=(0,C.e)(this._targetPickerValue.floor_id).join(",")),this._targetPickerValue.area_id&&(t.area_id=(0,C.e)(this._targetPickerValue.area_id).join(",")),this._targetPickerValue.device_id&&(t.device_id=(0,C.e)(this._targetPickerValue.device_id).join(",")),this._startDate&&(t.start_date=this._startDate.toISOString()),this._endDate&&(t.end_date=this._endDate.toISOString()),(0,O.o)("/history?".concat((0,S.KH)(t)),{replace:!0})}},{key:"_handleMenuAction",value:(a=(0,_.A)((0,v.A)().m(function t(e){var a;return(0,v.A)().w(function(t){for(;;)switch(t.n){case 0:a=e.detail.index,t.n=0===a?1:1===a?2:3;break;case 1:return this._downloadHistory(),t.a(3,3);case 2:return this._suggestCard(),t.a(3,3);case 3:return t.a(2)}},t,this)})),function(t){return a.apply(this,arguments)})},{key:"_downloadHistory",value:function(){if(0!==(0,p.A)(this._getEntityIds()).sort().length&&this._mungedStateHistory){var t,e=[""],a=["entity_id","state","last_changed"],r=new Set,i={climate:{current_temperature:0,hvac_action:0,target_temp_high:0,target_temp_low:0,temperature:0},humidifier:{action:0,current_humidity:0,humidity:0},water_heater:{current_temperature:0,operation_mode:0,temperature:0}},n=function(t){return new Date(t).toISOString()},o=(0,f.A)(this._mungedStateHistory.line);try{for(o.s();!(t=o.n()).done;){var s,c=t.value,d=(0,f.A)(c.data);try{for(d.s();!(s=d.n()).done;){var l=s.value,u=l.entity_id,v=(0,E.m)(u),_=i[v];if(_&&!r.has(v)){r.add(v);for(var g=a.length,y=0,m=Object.keys(_);y<m.length;y++){var b=m[y];a.push(b),_[b]=g,g+=1}}if(l.statistics){var w,k=(0,f.A)(l.statistics);try{for(k.s();!(w=k.n()).done;){var A=w.value;e.push("".concat(u,",").concat(A.state,",").concat(n(A.last_changed),"\n"))}}catch(G){k.e(G)}finally{k.f()}}var x,H=(0,f.A)(l.states);try{for(H.s();!(x=H.n()).done;){var M=x.value,L=n(M.last_changed),C=[u,M.state,L];if(M.attributes&&_)for(var D=M.attributes,O=0,P=Object.entries(_);O<P.length;O++){var S=(0,h.A)(P[O],2),z=S[0],V=S[1];z in D&&(C[V]=D[z])}e.push(C.join(",")+"\n")}}catch(G){H.e(G)}finally{H.f()}}}catch(G){d.e(G)}finally{d.f()}}}catch(G){o.e(G)}finally{o.f()}var B,T=(0,f.A)(this._mungedStateHistory.timeline);try{for(T.s();!(B=T.n()).done;){var R,Z=B.value,j=Z.entity_id,I=(0,f.A)(Z.data);try{for(I.s();!(R=I.n()).done;){var q=R.value,F=/,|"/.test(q.state)?'"'.concat(q.state.replaceAll('"','""'),'"'):q.state;e.push("".concat(j,",").concat(F,",").concat(n(q.last_changed),"\n"))}}catch(G){I.e(G)}finally{I.f()}}}catch(G){T.e(G)}finally{T.f()}e[0]=a.join(",")+"\n";var N=new Blob(e,{type:"text/csv"}),Y=window.URL.createObjectURL(N);(0,W.R)(Y,"history.csv")}else(0,U.showAlertDialog)(this,{title:this.hass.localize("ui.panel.history.download_data_error"),text:this.hass.localize("ui.panel.history.error_no_data"),warning:!0})}},{key:"_suggestCard",value:function(){var t=this._getEntityIds();if(0!==t.length&&this._mungedStateHistory){var e=Math.min(this._endDate.getTime(),Date.now()),a=[{title:this.hass.localize("panel.history"),type:"history-graph",hours_to_show:Math.round((e-this._startDate.getTime())/1e3/60/60),entities:t}];(0,N.Q)(this,this.hass,a,{title:this.hass.localize("panel.history"),cards:a},t)}else(0,U.showAlertDialog)(this,{title:this.hass.localize("ui.panel.history.add_card_error"),text:this.hass.localize("ui.panel.history.error_no_data"),warning:!0})}}],[{key:"styles",get:function(){return[F.RF,(0,H.AH)(u||(u=(0,g.A)(["ha-top-app-bar-fixed{height:100vh;overflow-x:hidden;overflow-y:visible}.content{padding:0 16px 16px}:host([virtualize]){height:100%;--ha-generic-picker-max-width:400px}.progress-wrapper{position:relative;display:flex;align-items:center;flex-direction:column;padding:16px}.filters{display:flex;align-items:flex-start;margin-top:16px}ha-date-range-picker{margin-right:16px;margin-inline-end:16px;margin-inline-start:initial;max-width:100%;direction:var(--direction)}ha-target-picker{flex:1}@media all and (max-width:1025px){.filters{flex-direction:column}ha-date-range-picker{width:100%;margin-bottom:8px}}.start-search{padding-top:16px;text-align:center;color:var(--secondary-text-color)}"])))]}}]);var a,r,A}(H.WF);(0,A.__decorate)([(0,M.MZ)({attribute:!1})],G.prototype,"hass",void 0),(0,A.__decorate)([(0,M.MZ)({reflect:!0,type:Boolean})],G.prototype,"narrow",void 0),(0,A.__decorate)([(0,M.MZ)({reflect:!0,type:Boolean})],G.prototype,"rtl",void 0),(0,A.__decorate)([(0,M.wk)()],G.prototype,"_startDate",void 0),(0,A.__decorate)([(0,M.wk)()],G.prototype,"_endDate",void 0),(0,A.__decorate)([(0,M.wk)(),(0,D.I)({key:"historyPickedValue",state:!0,subscribe:!1})],G.prototype,"_targetPickerValue",void 0),(0,A.__decorate)([(0,M.wk)()],G.prototype,"_isLoading",void 0),(0,A.__decorate)([(0,M.wk)()],G.prototype,"_stateHistory",void 0),(0,A.__decorate)([(0,M.wk)()],G.prototype,"_statisticsHistory",void 0),(0,A.__decorate)([(0,M.wk)()],G.prototype,"_showBack",void 0),(0,A.__decorate)([(0,M.P)("state-history-charts")],G.prototype,"_stateHistoryCharts",void 0),customElements.define("ha-panel-history",G),r()}catch(Q){r(Q)}})},44144:function(t,e,a){a.d(e,{MR:function(){return r},QR:function(){return i},a_:function(){return n},bg:function(){return o}});a(28706),a(11392);var r=function(t){return"https://brands.home-assistant.io/".concat(t.brand?"brands/":"").concat(t.useFallback?"_/":"").concat(t.domain,"/").concat(t.darkOptimized?"dark_":"").concat(t.type,".png")},i=function(t){return"https://brands.home-assistant.io/hardware/".concat(t.category,"/").concat(t.darkOptimized?"dark_":"").concat(t.manufacturer).concat(t.model?"_".concat(t.model):"",".png")},n=function(t){return t.split("/")[4]},o=function(t){return t.startsWith("https://brands.home-assistant.io/")}}}]);
//# sourceMappingURL=55090.0e4295ce3fe0f8e2.js.map