Metadata-Version: 2.4
Name: py-spam-hunter-client
Version: 3.1.3
Summary: A client for SpamHunter API
Home-page: https://github.com/MakarMS/py-spam-hunter-client
Author: Makar
Author-email: makar.mikhalchenko@bk.ru
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.6
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: aiohttp
Requires-Dist: requests
Requires-Dist: langdetect
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: license-file
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary

# ðŸ“¦ Spam Hunter Client

A Python client for the SpamHunter API to check messages for spam probability.  
This package supports both synchronous and asynchronous usage.

ðŸ“š Documentation: [https://spam-hunter.ru/documentation](https://spam-hunter.ru/documentation)

---

## ðŸš€ Installation

You can install the library via pip:

```bash
pip install py-spam-hunter-client
```

---

## âš¡ Usage

### ðŸŒ€ Asynchronous Example

To use the asynchronous version of the API, create an `AsyncSpamHunterClient` instance and call `check` in an async context:

```python
import asyncio
from py_spam_hunter_client import AsyncSpamHunterClient, Message

async def check_messages():
    spam_hunter = AsyncSpamHunterClient('Your API key')

    checked_messages = await spam_hunter.check(
        [
            Message('Who wants to make money? PM ME!', ['Hey, everybody.', 'Did you like the movie?'], 'en'),
            Message('Who wants to make money? PM ME!', ['Hey, everybody.', 'Did you like the movie?']),
            Message('ÐšÑ‚Ð¾ Ñ…Ð¾Ñ‡ÐµÑ‚ Ð·Ð°Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ? Ð’ Ð›Ð¡!', ['ÐŸÑ€Ð¸Ð²ÐµÑ‚ Ð²ÑÐµÐ¼.', 'Ð¢ÐµÐ±Ðµ Ð¿Ð¾Ð½Ñ€Ð°Ð²Ð¸Ð»ÑÑ Ñ„Ð¸Ð»ÑŒÐ¼?'], 'ru'),
            Message('ÐšÑ‚Ð¾ Ñ…Ð¾Ñ‡ÐµÑ‚ Ð·Ð°Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ? Ð’ Ð›Ð¡!', ['ÐŸÑ€Ð¸Ð²ÐµÑ‚ Ð²ÑÐµÐ¼.', 'Ð¢ÐµÐ±Ðµ Ð¿Ð¾Ð½Ñ€Ð°Ð²Ð¸Ð»ÑÑ Ñ„Ð¸Ð»ÑŒÐ¼?'])
        ]
    )

    for checked_message in checked_messages:
        print(checked_message.get_spam_probability())

asyncio.run(check_messages())
```

---

### ðŸ” Synchronous Example

To use the synchronous version of the API, use `SyncSpamHunterClient`:

```python
from py_spam_hunter_client import SyncSpamHunterClient, Message

spam_hunter = SyncSpamHunterClient('Your API key')

checked_messages = spam_hunter.check(
    [
        Message('Who wants to make money? PM ME!', ['Hey, everybody.', 'Did you like the movie?'], 'en'),
        Message('Who wants to make money? PM ME!', ['Hey, everybody.', 'Did you like the movie?']),
        Message('ÐšÑ‚Ð¾ Ñ…Ð¾Ñ‡ÐµÑ‚ Ð·Ð°Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ? Ð’ Ð›Ð¡!', ['ÐŸÑ€Ð¸Ð²ÐµÑ‚ Ð²ÑÐµÐ¼.', 'Ð¢ÐµÐ±Ðµ Ð¿Ð¾Ð½Ñ€Ð°Ð²Ð¸Ð»ÑÑ Ñ„Ð¸Ð»ÑŒÐ¼?'], 'ru'),
        Message('ÐšÑ‚Ð¾ Ñ…Ð¾Ñ‡ÐµÑ‚ Ð·Ð°Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ? Ð’ Ð›Ð¡!', ['ÐŸÑ€Ð¸Ð²ÐµÑ‚ Ð²ÑÐµÐ¼.', 'Ð¢ÐµÐ±Ðµ Ð¿Ð¾Ð½Ñ€Ð°Ð²Ð¸Ð»ÑÑ Ñ„Ð¸Ð»ÑŒÐ¼?'])
    ]
)

for checked_message in checked_messages:
    print(checked_message.get_spam_probability())
```

---

## ðŸ“˜ API Reference

### `check(messages: List[Message]) -> List[CheckedMessage]`

Available in both async and sync clients:

- `AsyncSpamHunterClient.check(messages)` â€” asynchronous
- `SyncSpamHunterClient.check(messages)` â€” synchronous

**Parameters:**

- `messages`: A list of [`Message`](#-message-object) instances to be checked.

**Returns:**

- A list of [`CheckedMessage`](#-checkedmessage-object) instances with spam probability results.

**Raises:**

- `CheckException`: Raised if the request fails or the API returns an error.

---

## ðŸ“© Message Object

Represents a message submitted for spam analysis.

**Constructor:**

```python
Message(
    text: str,
    contexts: List[str],
    language: Optional[str] = None,
    id: Optional[str] = None
)
```

**Attributes:**

- `id` (`str`, optional): A custom identifier for the message.
- `text` (`str`): The main content of the message.
- `contexts` (`List[str]`): Previous messages or context (e.g., recent chat history).
- `language` (`str`, optional): Language code:
  - `'en'` â€” English
  - `'ru'` â€” Russian
  - `None` â€” for automatic detection

---

## ðŸ”¢ CheckedMessage Object

Represents the result of a spam check returned by the API.

**Attributes:**

- `id` (`str`, optional): The custom ID of the original message.
- `spam_probability` (`float`): A float between `0` and `1` indicating spam likelihood.

**Methods:**

```python
get_spam_probability() -> float
```

Returns the spam probability score for the message.
