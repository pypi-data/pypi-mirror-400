[
  {
    "name": "ipybox_register_mcp_server",
    "parameters_json_schema": {
      "properties": {
        "server_name": {
          "title": "Server Name",
          "type": "string"
        },
        "server_params": {
          "additionalProperties": true,
          "title": "Server Params",
          "type": "object"
        }
      },
      "required": [
        "server_name",
        "server_params"
      ],
      "type": "object"
    },
    "description": "Register an MCP server and generate importable Python tool functions.\n\nConnects to an MCP server, generates a package at mcptools/{server_name}/ with\ntype-safe client functions. Use generated tools via:\n    from mcptools.{server_name} import {tool_name}\n    result = {tool_name}.run({tool_name}.Params(...))\n\n- Environment variable placeholders like {API_KEY} in server_params are auto-replaced\n- Re-registering overwrites previous; call reset() to re-import updated tools\n- Generated mcptools/ persists across reset() calls\n\nArgs:\n    server_name: Package name (valid Python identifier: lowercase, underscores, no leading digit).\n    server_params: Server config - stdio: {\"command\", \"args\", \"env\"} or http: {\"url\", \"headers\"}.\n\nReturns:\n    List of tool names available for import from mcptools.{server_name}.\n",
    "sequential": true
  },
  {
    "name": "ipybox_execute_ipython_cell",
    "parameters_json_schema": {
      "properties": {
        "code": {
          "description": "Python code to execute in the IPython kernel",
          "title": "Code",
          "type": "string"
        },
        "max_output_chars": {
          "default": 5000,
          "description": "Maximum number of characters to return in output (truncates if exceeded)",
          "title": "Max Output Chars",
          "type": "integer"
        }
      },
      "required": [
        "code"
      ],
      "type": "object"
    },
    "description": "Execute Python code in a stateful IPython kernel.\n\nState (variables, imports, definitions) persists across calls. Executions are sequential.\nFor async code, use 'await' directly (kernel has an active event loop).\n\nReturns:\n    Execution output (stdout, stderr, last expression) plus image paths as markdown links.\n    Empty string if no output.\n\nRaises:\n    ExecutionError: Code raised an exception (includes traceback).\n    ToolRunnerError: MCP tool call failed.\n    asyncio.TimeoutError: Execution exceeded timeout.\n",
    "sequential": true
  },
  {
    "name": "ipybox_reset",
    "parameters_json_schema": {
      "properties": {},
      "type": "object"
    },
    "description": "Reset the IPython kernel to a clean state.\n\nCreates a new kernel, clearing all variables, imports, and definitions.\n\n- Cleared: all in-memory state, MCP server connections (auto-reconnect on next use)\n- Persists: installed packages, filesystem files, mcptools/ directory\n",
    "sequential": true
  }
]
