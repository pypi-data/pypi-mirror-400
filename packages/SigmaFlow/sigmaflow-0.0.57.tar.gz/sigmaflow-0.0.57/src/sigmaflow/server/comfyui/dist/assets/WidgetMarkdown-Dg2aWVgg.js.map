{"version":3,"file":"WidgetMarkdown-Dg2aWVgg.js","sources":["../../../../../../ComfyUI_frontend/src/renderer/extensions/vueNodes/widgets/components/WidgetMarkdown.vue"],"sourcesContent":["<template>\n  <div\n    class=\"widget-expands widget-markdown relative w-full\"\n    @dblclick=\"startEditing\"\n  >\n    <!-- Display mode: Rendered markdown -->\n    <div\n      class=\"comfy-markdown-content lod-toggle size-full min-h-[60px] overflow-y-auto rounded-lg px-4 py-2 text-sm\"\n      :class=\"isEditing === false ? 'visible' : 'invisible'\"\n      v-html=\"renderedHtml\"\n    />\n\n    <!-- Edit mode: Textarea -->\n    <Textarea\n      v-show=\"isEditing\"\n      ref=\"textareaRef\"\n      v-model=\"localValue\"\n      :aria-label=\"`${$t('g.edit')} ${widget.name || $t('g.markdown')} ${$t('g.content')}`\"\n      class=\"absolute inset-0 min-h-[60px] w-full resize-none\"\n      :pt=\"{\n        root: {\n          class: 'text-sm w-full h-full',\n          onBlur: handleBlur\n        }\n      }\"\n      data-capture-wheel=\"true\"\n      @update:model-value=\"onChange\"\n      @click.stop\n      @keydown.stop\n    />\n    <LODFallback />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Textarea from 'primevue/textarea'\nimport { computed, nextTick, ref } from 'vue'\n\nimport { useStringWidgetValue } from '@/composables/graph/useWidgetValue'\nimport type { SimplifiedWidget } from '@/types/simplifiedWidget'\nimport { renderMarkdownToHtml } from '@/utils/markdownRendererUtil'\n\nimport LODFallback from '../../components/LODFallback.vue'\n\nconst props = defineProps<{\n  widget: SimplifiedWidget<string>\n  modelValue: string\n}>()\n\nconst emit = defineEmits<{\n  'update:modelValue': [value: string]\n}>()\n\n// State\nconst isEditing = ref(false)\nconst textareaRef = ref<InstanceType<typeof Textarea> | undefined>()\n\n// Use the composable for consistent widget value handling\nconst { localValue, onChange } = useStringWidgetValue(\n  props.widget,\n  props.modelValue,\n  emit\n)\n\n// Computed\nconst renderedHtml = computed(() => {\n  return renderMarkdownToHtml(localValue.value || '')\n})\n\n// Methods\nconst startEditing = async () => {\n  if (isEditing.value) return\n\n  isEditing.value = true\n  await nextTick()\n\n  // Focus the textarea\n  // @ts-expect-error - $el is an internal property of the Textarea component\n  textareaRef.value?.$el?.focus()\n}\n\nconst handleBlur = () => {\n  isEditing.value = false\n}\n</script>\n"],"names":["props","__props","emit","__emit","isEditing","ref","textareaRef","localValue","onChange","useStringWidgetValue","renderedHtml","computed","renderMarkdownToHtml","startEditing","__name","nextTick","handleBlur"],"mappings":"uuEA4CA,MAAMA,EAAQC,EAKRC,EAAOC,EAKPC,EAAYC,EAAI,EAAK,EACrBC,EAAcD,IAGd,CAAE,WAAAE,EAAY,SAAAC,CAAA,EAAaC,EAC/BT,EAAM,OACNA,EAAM,WACNE,CAAA,EAIIQ,EAAeC,EAAS,IACrBC,EAAqBL,EAAW,OAAS,EAAE,CACnD,EAGKM,EAAeC,EAAA,SAAY,CAC3BV,EAAU,QAEdA,EAAU,MAAQ,GAClB,MAAMW,EAAS,EAIHT,EAAA,OAAO,KAAK,QAAM,EARX,gBAWfU,EAAaF,EAAA,IAAM,CACvBV,EAAU,MAAQ,EAAA,EADD"}