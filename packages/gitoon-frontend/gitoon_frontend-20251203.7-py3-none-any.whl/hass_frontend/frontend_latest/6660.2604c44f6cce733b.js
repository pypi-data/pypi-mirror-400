export const __webpack_id__="6660";export const __webpack_ids__=["6660"];export const __webpack_modules__={76538:function(a,e,i){var t=i(62826),o=i(96196),r=i(44457);class s extends o.WF{render(){const a=o.qy`<div class="header-title"> <slot name="title"></slot> </div>`,e=o.qy`<div class="header-subtitle"> <slot name="subtitle"></slot> </div>`;return o.qy` <header class="header"> <div class="header-bar"> <section class="header-navigation-icon"> <slot name="navigationIcon"></slot> </section> <section class="header-content"> ${"above"===this.subtitlePosition?o.qy`${e}${a}`:o.qy`${a}${e}`} </section> <section class="header-action-items"> <slot name="actionItems"></slot> </section> </div> <slot></slot> </header> `}static get styles(){return[o.AH`:host{display:block}:host([show-border]){border-bottom:1px solid var(--mdc-dialog-scroll-divider-color,rgba(0,0,0,.12))}.header-bar{display:flex;flex-direction:row;align-items:center;padding:0 var(--ha-space-1);box-sizing:border-box}.header-content{flex:1;padding:10px var(--ha-space-1);display:flex;flex-direction:column;justify-content:center;min-height:var(--ha-space-12);min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.header-title{height:var(--ha-dialog-header-title-height,calc(var(--ha-font-size-xl) + var(--ha-space-1)));font-size:var(--ha-font-size-xl);line-height:var(--ha-line-height-condensed);font-weight:var(--ha-font-weight-medium);color:var(--ha-dialog-header-title-color,var(--primary-text-color))}.header-subtitle{font-size:var(--ha-font-size-m);line-height:var(--ha-line-height-normal);color:var(--ha-dialog-header-subtitle-color,var(--secondary-text-color))}@media all and (min-width:450px) and (min-height:500px){.header-bar{padding:0 var(--ha-space-2)}}.header-navigation-icon{flex:none;min-width:var(--ha-space-2);height:100%;display:flex;flex-direction:row}.header-action-items{flex:none;min-width:var(--ha-space-2);height:100%;display:flex;flex-direction:row}`]}constructor(...a){super(...a),this.subtitlePosition="below",this.showBorder=!1}}(0,t.__decorate)([(0,r.MZ)({type:String,attribute:"subtitle-position"})],s.prototype,"subtitlePosition",void 0),(0,t.__decorate)([(0,r.MZ)({type:Boolean,reflect:!0,attribute:"show-border"})],s.prototype,"showBorder",void 0),s=(0,t.__decorate)([(0,r.EM)("ha-dialog-header")],s)},91380:function(a,e,i){i.d(e,{O:()=>m,jB:()=>g});var t=i(62826),o=i(76974),r=i(5101),s=i(68649),l=i(96196),n=i(44457);let d;o.l.addInitializer(async a=>{await a.updateComplete;const e=a;e.dialog.prepend(e.scrim),e.scrim.style.inset=0,e.scrim.style.zIndex=0;const{getOpenAnimation:i,getCloseAnimation:t}=e;e.getOpenAnimation=()=>{const a=i.call(void 0);return a.container=[...a.container??[],...a.dialog??[]],a.dialog=[],a},e.getCloseAnimation=()=>{const a=t.call(void 0);return a.container=[...a.container??[],...a.dialog??[]],a.dialog=[],a}});class h extends o.l{async _handleOpen(a){if(a.preventDefault(),this._polyfillDialogRegistered)return;this._polyfillDialogRegistered=!0,this._loadPolyfillStylesheet("/static/polyfills/dialog-polyfill.css");const e=this.shadowRoot?.querySelector("dialog");(await d).default.registerDialog(e),this.removeEventListener("open",this._handleOpen),this.show()}async _loadPolyfillStylesheet(a){const e=document.createElement("link");return e.rel="stylesheet",e.href=a,new Promise((i,t)=>{e.onload=()=>i(),e.onerror=()=>t(new Error(`Stylesheet failed to load: ${a}`)),this.shadowRoot?.appendChild(e)})}_handleCancel(a){if(this.disableCancelAction){a.preventDefault();const e=this.shadowRoot?.querySelector("dialog .container");void 0!==this.animate&&e?.animate([{transform:"rotate(-1deg)","animation-timing-function":"ease-in"},{transform:"rotate(1.5deg)","animation-timing-function":"ease-out"},{transform:"rotate(0deg)","animation-timing-function":"ease-in"}],{duration:200,iterations:2})}}constructor(){super(),this.disableCancelAction=!1,this._polyfillDialogRegistered=!1,this.addEventListener("cancel",this._handleCancel),"function"!=typeof HTMLDialogElement&&(this.addEventListener("open",this._handleOpen),d||(d=i.e("98017").then(i.bind(i,44984)))),void 0===this.animate&&(this.quick=!0),void 0===this.animate&&(this.quick=!0)}}h.styles=[r.R,l.AH`:host{--md-dialog-container-color:var(--card-background-color);--md-dialog-headline-color:var(--primary-text-color);--md-dialog-supporting-text-color:var(--primary-text-color);--md-sys-color-scrim:#000000;--md-dialog-headline-weight:var(--ha-font-weight-normal);--md-dialog-headline-size:var(--ha-font-size-xl);--md-dialog-supporting-text-size:var(--ha-font-size-m);--md-dialog-supporting-text-line-height:var(--ha-line-height-normal);--md-divider-color:var(--divider-color)}:host([type=alert]){min-width:320px}@media all and (max-width:450px),all and (max-height:500px){:host(:not([type=alert])){min-width:var(--mdc-dialog-min-width,100vw);min-height:100%;max-height:100%;--md-dialog-container-shape:0}.container{margin-top:var(--safe-area-inset-top,var(--ha-space-0));margin-bottom:var(--safe-area-inset-bottom,var(--ha-space-0));margin-left:var(--safe-area-inset-left,var(--ha-space-0));margin-right:var(--safe-area-inset-right,var(--ha-space-0))}}::slotted(ha-dialog-header[slot=headline]){display:contents}slot[name=actions]::slotted(*){padding:var(--ha-space-4)}.scroller{overflow:var(--dialog-content-overflow,auto)}slot[name=content]::slotted(*){padding:var(--dialog-content-padding,var(--ha-space-6))}.scrim{z-index:10}`],(0,t.__decorate)([(0,n.MZ)({attribute:"disable-cancel-action",type:Boolean})],h.prototype,"disableCancelAction",void 0),h=(0,t.__decorate)([(0,n.EM)("ha-md-dialog")],h);const c={...s.T,dialog:[[[{transform:"translateY(50px)"},{transform:"translateY(0)"}],{duration:500,easing:"cubic-bezier(.3,0,0,1)"}]],container:[[[{opacity:0},{opacity:1}],{duration:50,easing:"linear",pseudoElement:"::before"}]]},p={...s.N,dialog:[[[{transform:"translateY(0)"},{transform:"translateY(50px)"}],{duration:150,easing:"cubic-bezier(.3,0,0,1)"}]],container:[[[{opacity:"1"},{opacity:"0"}],{delay:100,duration:50,easing:"linear",pseudoElement:"::before"}]]},m=()=>window.matchMedia("all and (max-width: 450px), all and (max-height: 500px)").matches?c:s.T,g=()=>window.matchMedia("all and (max-width: 450px), all and (max-height: 500px)").matches?p:s.N},2846:function(a,e,i){i.d(e,{G:()=>d,J:()=>n});var t=i(62826),o=i(97154),r=i(82553),s=i(96196),l=i(44457);i(54276);const n=[r.R,s.AH`:host{--ha-icon-display:block;--md-sys-color-primary:var(--primary-text-color);--md-sys-color-secondary:var(--secondary-text-color);--md-sys-color-surface:var(--card-background-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--secondary-text-color)}md-item{overflow:var(--md-item-overflow,hidden);align-items:var(--md-item-align-items,center);gap:var(--ha-md-list-item-gap,16px)}`];class d extends o.n{renderRipple(){return"text"===this.type?s.s6:s.qy`<ha-ripple part="ripple" for="item" ?disabled="${this.disabled&&"link"!==this.type}"></ha-ripple>`}}d.styles=n,d=(0,t.__decorate)([(0,l.EM)("ha-md-list-item")],d)},17308:function(a,e,i){var t=i(62826),o=i(49838),r=i(11245),s=i(96196),l=i(44457);class n extends o.B{}n.styles=[r.R,s.AH`:host{--md-sys-color-surface:var(--card-background-color)}`],n=(0,t.__decorate)([(0,l.EM)("ha-md-list")],n)},54607:function(a,e,i){i.a(a,async function(a,t){try{i.r(e);i(44114),i(18111),i(22489),i(61701);var o=i(62826),r=i(96196),s=i(44457),l=i(4937),n=i(89020),d=i(1087),h=i(18350),c=(i(76538),i(18198),i(88945),i(26300),i(91380),i(17308),i(2846),i(85938),i(67094),i(21489)),p=i(32250),m=i(14503),g=i(81619),f=a([h]);h=(f.then?(await f)():f)[0];const v="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",_="M21 11H3V9H21V11M21 13H3V15H21V13Z",u="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z",y="__unassigned__";class x extends r.WF{async showDialog(a){this._open=!0,this._computeHierarchy()}_computeHierarchy(){this._hierarchy=(0,n.cs)(Object.values(this.hass.floors),Object.values(this.hass.areas))}closeDialog(){this._dialog?.close()}_dialogClosed(){this._open=!1,this._hierarchy=void 0,this._saving=!1,(0,d.r)(this,"dialog-closed",{dialog:this.localName})}render(){if(!this._open||!this._hierarchy)return r.s6;const a=this._hierarchy.floors.length>0,e=this.hass.localize(a?"ui.panel.config.areas.dialog.reorder_floors_areas_title":"ui.panel.config.areas.dialog.reorder_areas_title");return r.qy` <ha-md-dialog open @closed="${this._dialogClosed}"> <ha-dialog-header slot="headline"> <ha-icon-button slot="navigationIcon" .label="${this.hass.localize("ui.common.close")}" .path="${v}" @click="${this.closeDialog}"></ha-icon-button> <span slot="title" .title="${e}">${e}</span> </ha-dialog-header> <div slot="content" class="content"> <ha-sortable handle-selector=".floor-handle" draggable-selector=".floor" @item-moved="${this._floorMoved}" invert-swap> <div class="floors"> ${(0,l.u)(this._hierarchy.floors,a=>a.id,a=>this._renderFloor(a))} </div> </ha-sortable> ${this._renderUnassignedAreas()} </div> <div slot="actions"> <ha-button @click="${this.closeDialog}" appearance="plain"> ${this.hass.localize("ui.common.cancel")} </ha-button> <ha-button @click="${this._save}" .disabled="${this._saving}"> ${this.hass.localize("ui.common.save")} </ha-button> </div> </ha-md-dialog> `}_renderFloor(a){const e=this.hass.floors[a.id];return e?r.qy` <div class="floor"> <div class="floor-header"> <ha-floor-icon .floor="${e}"></ha-floor-icon> <span class="floor-name">${e.name}</span> <ha-svg-icon class="floor-handle" .path="${_}"></ha-svg-icon> </div> <ha-sortable handle-selector=".area-handle" draggable-selector="ha-md-list-item" @item-moved="${this._areaMoved}" @item-added="${this._areaAdded}" group="areas" .floor="${a.id}"> <ha-md-list> ${a.areas.length>0?a.areas.map(a=>this._renderArea(a)):r.qy`<p class="empty"> ${this.hass.localize("ui.panel.config.areas.dialog.empty_floor")} </p>`} </ha-md-list> </ha-sortable> </div> `:r.s6}_renderUnassignedAreas(){const a=this._hierarchy.floors.length>0;return r.qy` <div class="floor unassigned"> ${a?r.qy`<div class="floor-header"> <span class="floor-name"> ${this.hass.localize("ui.panel.config.areas.dialog.other_areas")} </span> </div>`:r.s6} <ha-sortable handle-selector=".area-handle" draggable-selector="ha-md-list-item" @item-moved="${this._areaMoved}" @item-added="${this._areaAdded}" group="areas" .floor="${y}"> <ha-md-list> ${this._hierarchy.areas.length>0?this._hierarchy.areas.map(a=>this._renderArea(a)):r.qy`<p class="empty"> ${this.hass.localize("ui.panel.config.areas.dialog.empty_unassigned")} </p>`} </ha-md-list> </ha-sortable> </div> `}_renderArea(a){const e=this.hass.areas[a];return e?r.qy` <ha-md-list-item .sortableData="${e}"> ${e.icon?r.qy`<ha-icon slot="start" .icon="${e.icon}"></ha-icon>`:r.qy`<ha-svg-icon slot="start" .path="${u}"></ha-svg-icon>`} <span slot="headline">${e.name}</span> <ha-svg-icon class="area-handle" slot="end" .path="${_}"></ha-svg-icon> </ha-md-list-item> `:r.s6}_floorMoved(a){if(a.stopPropagation(),!this._hierarchy)return;const{oldIndex:e,newIndex:i}=a.detail,t=[...this._hierarchy.floors],[o]=t.splice(e,1);t.splice(i,0,o),this._hierarchy={...this._hierarchy,floors:t}}_areaMoved(a){if(a.stopPropagation(),!this._hierarchy)return;const{floor:e}=a.currentTarget,{oldIndex:i,newIndex:t}=a.detail,o=e===y?null:e;if(null===o){const a=[...this._hierarchy.areas],[e]=a.splice(i,1);a.splice(t,0,e),this._hierarchy={...this._hierarchy,areas:a}}else this._hierarchy={...this._hierarchy,floors:this._hierarchy.floors.map(a=>{if(a.id===o){const e=[...a.areas],[o]=e.splice(i,1);return e.splice(t,0,o),{...a,areas:e}}return a})}}_areaAdded(a){if(a.stopPropagation(),!this._hierarchy)return;const{floor:e}=a.currentTarget,{data:i,index:t}=a.detail,o=e===y?null:e,r=this._hierarchy.areas.filter(a=>a!==i.area_id);null===o&&r.splice(t,0,i.area_id),this._hierarchy={...this._hierarchy,floors:this._hierarchy.floors.map(a=>{if(a.id===o){const e=[...a.areas];return e.splice(t,0,i.area_id),{...a,areas:e}}return{...a,areas:a.areas.filter(a=>a!==i.area_id)}}),areas:r}}_computeFloorChanges(){if(!this._hierarchy)return[];const a=[];for(const e of this._hierarchy.floors)for(const i of e.areas){const t=this.hass.areas[i]?.floor_id??null;e.id!==t&&a.push({areaId:i,floorId:e.id})}for(const e of this._hierarchy.areas){null!==(this.hass.areas[e]?.floor_id??null)&&a.push({areaId:e,floorId:null})}return a}async _save(){if(this._hierarchy&&!this._saving){this._saving=!0;try{const a=(0,n.Xz)(this._hierarchy),e=(0,n.Vu)(this._hierarchy),i=this._computeFloorChanges().map(({areaId:a,floorId:e})=>(0,c.gs)(this.hass,a,{floor_id:e}));await Promise.all(i),await(0,c.WT)(this.hass,a),await(0,p.Rj)(this.hass,e),this.closeDialog()}catch(a){(0,g.P)(this,{message:a.message||this.hass.localize("ui.panel.config.areas.dialog.reorder_failed")}),this._saving=!1}}}static get styles(){return[m.RF,m.nA,r.AH`ha-md-dialog{min-width:600px;max-height:90%;--dialog-content-padding:8px 24px}@media all and (max-width:600px),all and (max-height:500px){ha-md-dialog{--md-dialog-container-shape:0;min-width:100%;min-height:100%}}.floors{display:flex;flex-direction:column;gap:16px}.floor{border:1px solid var(--divider-color);border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg));overflow:hidden}.floor.unassigned{margin-top:16px}.floor-header{display:flex;align-items:center;padding:12px 16px;background-color:var(--secondary-background-color);gap:12px}.floor-name{flex:1;font-weight:var(--ha-font-weight-medium)}.floor-handle{cursor:grab;color:var(--secondary-text-color)}ha-md-list{padding:0;--md-list-item-leading-space:16px;--md-list-item-trailing-space:16px;display:flex;flex-direction:column}ha-md-list-item{--md-list-item-one-line-container-height:48px;--md-list-item-container-shape:0}ha-md-list-item.sortable-ghost{border-radius:calc(var(--ha-card-border-radius,var(--ha-border-radius-lg)) - 1px);box-shadow:inset 0 0 0 2px var(--primary-color)}.area-handle{cursor:grab;color:var(--secondary-text-color)}.empty{text-align:center;color:var(--secondary-text-color);font-style:italic;margin:0;padding:12px 16px;order:1}ha-md-list:has(ha-md-list-item) .empty{display:none}.content{padding-top:16px;padding-bottom:16px}`]}constructor(...a){super(...a),this._open=!1,this._saving=!1}}(0,o.__decorate)([(0,s.MZ)({attribute:!1})],x.prototype,"hass",void 0),(0,o.__decorate)([(0,s.wk)()],x.prototype,"_open",void 0),(0,o.__decorate)([(0,s.wk)()],x.prototype,"_hierarchy",void 0),(0,o.__decorate)([(0,s.wk)()],x.prototype,"_saving",void 0),(0,o.__decorate)([(0,s.P)("ha-md-dialog")],x.prototype,"_dialog",void 0),x=(0,o.__decorate)([(0,s.EM)("dialog-areas-floors-order")],x),t()}catch(a){t(a)}})}};
//# sourceMappingURL=6660.2604c44f6cce733b.js.map