Metadata-Version: 2.4
Name: cmapfile
Version: 2026.1.8
Summary: Write Chimera Map (CMAP) files
Home-page: https://www.cgohlke.com
Author: Christoph Gohlke
Author-email: cgohlke@cgohlke.com
License: BSD-3-Clause
Project-URL: Bug Tracker, https://github.com/cgohlke/cmapfile/issues
Project-URL: Source Code, https://github.com/cgohlke/cmapfile
Platform: any
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Science/Research
Classifier: Intended Audience :: Developers
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3 :: Only
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Programming Language :: Python :: 3.14
Requires-Python: >=3.11
Description-Content-Type: text/x-rst
License-File: LICENSE
Requires-Dist: numpy
Requires-Dist: scipy
Requires-Dist: h5py
Requires-Dist: tifffile
Requires-Dist: oiffile
Provides-Extra: all
Requires-Dist: imagecodecs; extra == "all"
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: license
Dynamic: license-file
Dynamic: platform
Dynamic: project-url
Dynamic: provides-extra
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary

Write Chimera Map (CMAP) files
==============================

Cmapfile is a Python library and console script to write Chimera Map (CMAP)
files, HDF5 files containing series of 3D XYZ datasets.

CMAP files can be created from numpy arrays and various file formats
containing volume data, for example, BIN, TIFF, LSM, OIF, and OIB.

CMAP files can be visualized using UCSF Chimera [2], a program for interactive
visualization and analysis of molecular structures and related data.

:Author: `Christoph Gohlke <https://www.cgohlke.com>`_
:License: BSD-3-Clause
:Version: 2026.1.8
:DOI: `10.5281/zenodo.17979877 <https://doi.org/10.5281/zenodo.17979877>`_

Quickstart
----------

Install the cmapfile package and all dependencies from the
`Python Package Index <https://pypi.org/project/cmapfile/>`_::

    python -m pip install -U cmapfile[all]

Print the command line usage::

    python -m cmapfile --help

See `Examples`_ for usage cases.

Source code and support are available on
`GitHub <https://github.com/cgohlke/cmapfile>`_.

Requirements
------------

This revision was tested with the following requirements and dependencies
(other versions may work):

- `CPython <https://www.python.org>`_ 3.11.9, 3.12.10, 3.13.11, 3.14.2 64-bit
- `NumPy <https://pypi.org/project/numpy/>`_ 2.4.0
- `Scipy <https://pypi.org/project/scipy/>`_ 1.16.3
- `H5py <https://pypi.org/project/h5py/>`_ 3.15.1
- `Tifffile <https://pypi.org/project/tifffile/>`_ 2025.12.20
- `Oiffile <https://pypi.org/project/oiffile/>`_ 2026.1.8

Revisions
---------

2026.1.8

- Improve code quality.

2025.12.18

- Improve code quality.
- Drop support for Python 3.10, support Python 3.14.

2025.1.1

- Improve type hints.
- Support Python 3.13.

2024.8.28

- â€¦

Refer to the CHANGES file for older revisions.

Notes
-----

The CMAP file format according to [1]::

    Example of HDF format written by Chimera (Chimera map format) follows.
    The Chimera map file reader will allow all fields to be missing (except
    the 3D data).

    /image (group, any name allowed)
     name "centriole" (attribute)
     step (1.2, 1.2, 1.2) (attribute)
     origin (-123.4, -522, 34.5) (attribute)
     cell_angles (90.0, 90.0, 90.0) (attribute)
     rotation_axis (0.0, 0.0, 1.0) (attribute)
     rotation_angle 45.0 (attribute, degrees)
     color (1.0, 1.0, 0, 1.0) (attribute, rgba 0-1 float)
     time 5 (attribute, time series frame number)
     channel 0 (attribute, integer for multichannel data)
     /data (3d array of uint8 (123,542,82)) (dataset, any name allowed)
     /data_x (3d array of uint8 (123,542,82), alternate chunk shape) (dataset)
     /data_2 (3d array of uint8 (61,271,41)) (dataset, any name allowed)
        subsample_spacing (2, 2, 2) (attribute)
     (more subsampled or alternate chunkshape versions of same data)

References
----------

1. Thomas Goddard. [Chimera-users] reading in hdf5 files in chimera.
   https://www.cgl.ucsf.edu/pipermail/chimera-users/2008-September/003052.html
2. UCSF Chimera, an extensible molecular modeling system.
   https://www.cgl.ucsf.edu/chimera/
3. Globals for Images - SimFCS. https://www.lfd.uci.edu/globals/

Examples
--------

Convert a 5D LSM file to CMAP file::

    $ python -m cmapfile "/my data directory/large.lsm"

Convert all BIN files in the current directory to test.cmap. The BIN files
are known to contain 128x128x64 samples of 16-bit integers. The CMAP file
will store float32 maps using subsampling up to 16::

    $ python -m cmapfile --shape 128,128,64 --step 1,1,2 --dtype i2 \
                         --cmap test.cmap --subsample 16 --astype float32 *.bin

Change the step size in the CMAP file::

    $ python -m cmapfile --step 1,1,1.5 test.cmap

Print the cmapfile script usage::

    $ python -m cmapfile --help

    Usage: cmapfile [options] files

    Convert volume data files to Chimera MAP files.

    Options:
    --version             show program's version number and exit
    -h, --help            show this help message and exit
    -q, --quiet
    --filetype=FILETYPE   type of input file(s).
                          For example, BIN, LSM, OIF, TIF
    --dtype=DTYPE         type of data in BIN files. For example, uint16
    --shape=SHAPE         shape of data in BIN files in F order.
                          For example, 256,256,32
    --offset=OFFSET       number of bytes to skip at beginning of BIN files
    --step=STEP           stepsize of data in files in F order.
                          For example, 1.0,1.0,8.0
    --cmap=CMAP           name of output CMAP file
    --astype=ASTYPE       type of data in CMAP file. For example, float32
    --subsample=SUBSAMPLE
                          write subsampled datasets to CMAP file
