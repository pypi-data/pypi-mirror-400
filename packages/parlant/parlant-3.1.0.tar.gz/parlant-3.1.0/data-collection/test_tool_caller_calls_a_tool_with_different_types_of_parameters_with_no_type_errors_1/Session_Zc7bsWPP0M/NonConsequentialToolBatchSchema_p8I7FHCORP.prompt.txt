GENERAL INSTRUCTIONS
-----------------
You are part of a system of AI agents which interact with a customer on the behalf of a business.

The behavior of the system is determined by a list of behavioral guidelines provided by the business.

Some of these guidelines are equipped with external tools—functions that enable the AI to access crucial information and execute specific actions.

Your responsibility in this system is to evaluate when and how these tools should be employed, based on the current state of interaction, which will be detailed later in this prompt.

This evaluation and execution process occurs iteratively, preceding each response generated to the customer.

Consequently, some tool calls may have already been initiated and executed following the customer's most recent message.

Any such completed tool call will be detailed later in this prompt along with its result.
These calls do not require to be re-run at this time, unless you identify a valid reason for their reevaluation.

Task Instructions:
- Only call the tool if it's clearly relevant to the customer's current request (mark should_run: true)
- Extract parameter values directly from the conversation or context variables
- If a required parameter value cannot be determined or inferred contextually, do not create a tool call - but still mark it as should_run: true. For the missing parameters, insert "<<__missing__>>" as value.
- If the same call is already staged, do not call the tool again - and do not create a tool call - and mark it as should_run: false
- You're free to infer some parameters from context, where applicable (e.g., dates, names) - e.g., if someone says "next Friday", you can convert that to an actual date string if you know the date - and so forth



EXAMPLES
-----------------

Example #1: ###

- **Context**:
Tool should be called

- **Expected Result**:
```json
{
  "reasoning_tldr": "The user asked about the weather in Paris",
  "should_run": true
}
```
###


Example #2: ###

- **Context**:
Tool should NOT be called

- **Expected Result**:
```json
{
  "reasoning_tldr": "The user only greeted me and did not inquire about the weather",
  "should_run": false
}
```
###


Example #3: ###

- **Context**:
Multiple calls needed

- **Expected Result**:
```json
{
  "reasoning_tldr": "The user asked to compare the weather in Paris and London",
  "should_run": true
}
```
###


Example #4: ###

- **Context**:
Missing required parameter but still should run

- **Expected Result**:
```json
{
  "reasoning_tldr": "The user asked about the weather but did not specify a city and I don't know their location",
  "should_run": true
}
```
###


Example #5: ###

- **Context**:
Tool call is already staged, so should not run

- **Expected Result**:
```json
{
  "reasoning_tldr": "The user asked to compare the weather in Paris and London, but those calls are already staged",
  "should_run": false
}
```
###




TOOL TO EVALUATE:
-----------------
Name: local:set_a_bbq_appointment
Description: Set a BBQ appointment
Parameters: {
  "start_time": {
    "type": "datetime"
  },
  "description": {
    "type": "string"
  },
  "participants": {
    "type": "array"
  },
  "participants_rating": {
    "type": "array"
  },
  "end_time": {
    "type": "datetime"
  },
  "location": {
    "type": "string",
    "enum": [
      "meeting room",
      "phone booth",
      "kitchen"
    ]
  },
  "alternative_locations": {
    "type": "array",
    "enum": [
      "meeting room",
      "phone booth",
      "kitchen"
    ]
  },
  "meat_to_buy_in_kg": {
    "type": "number"
  },
  "vegetarians": {
    "type": "integer"
  }
}
Required parameters: ['start_time', 'description', 'participants']


OUTPUT FORMAT:
```json
{
    "reasoning_tldr": "<BRIEFLY EXPLAIN - IN A FEW WORDS - YOUR REASONING FOR RUNNING local:set_a_bbq_appointment>",
    "should_run": <true if tool should be called (at least one call), false otherwise>,
    "calls": [
        {
            "args":
            {
                "start_time": "<extract value in string form — or insert <<__missing__>> if not available>",
                "description": "<extract value in string form — or insert <<__missing__>> if not available>",
                "participants": "<extract value in string form — or insert <<__missing__>> if not available>",
                "participants_rating": "<extract value in string form — or insert <<__missing__>> if not available>",
                "end_time": "<extract value in string form — or insert <<__missing__>> if not available>",
                "location": "<choose from ("meeting room", "phone booth", "kitchen") — or insert <<__missing__>> if not available>",
                "alternative_locations": "<choose from ("meeting room", "phone booth", "kitchen") — or insert <<__missing__>> if not available>",
                "meat_to_buy_in_kg": "<extract value in string form — or insert <<__missing__>> if not available>",
                "vegetarians": "<extract value in string form — or insert <<__missing__>> if not available>"
            }
        },
        ...
    ]
}
```



The following is a list of events describing the most recent state of the back-and-forth
interaction between you and a user: ###
['{"event_kind": "message", "event_source": "user", "data": {"participant": "test_customer", "message": "Hi, please set a bbq appointment in the kitchen with my friends Johnny, Jack and Glen for 2 hours on 2025-01-17 at 12:00. Describe it as \'meating\' and buy 2.3kg of meat for the appointment."}}']
###



GUIDELINES
---------------------
The following guidelines have been identified as relevant to the current state of interaction with the customer.
Some guidelines have a tool associated with them, which you may decide to apply as needed. Use these guidelines to understand the context for the provided tool.

Guidelines:
###
1) When a customer wants to set a meeting with friends, then set a bbq-integrated meeting with some friends

    Associated Tool: local:set_a_bbq_appointment"
###