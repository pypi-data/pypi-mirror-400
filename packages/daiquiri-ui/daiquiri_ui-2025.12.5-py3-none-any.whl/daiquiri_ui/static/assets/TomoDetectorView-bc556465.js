import{u as me,j as e,ay as L,aj as S,B as W,g as ue,R as M,C as j,aU as C,aM as xe,aO as fe,a_ as pe,r as b,aN as he,aL as E,ab as F,a7 as je,aZ as ye,aX as ve,aY as ge,aP as H,a1 as we,aw as Se,q as ze}from"./index-4cf586ed.js";import{O as De}from"./OptionsProcess-9e8d1dd6.js";import{u as Ne,T as Me,D as Ce,S as _,L as Q}from"./UseMouseModeInteraction-9b6c111c.js";import{p as A,a as R,f as be,g as k}from"./geometry-252a228f.js";import{I as Ie,a as Pe,A as Fe,T as D}from"./AutoscaleOption-e2ee098d.js";import{u as ke}from"./colormap-0981f7dc.js";import{O as Ve,w as J}from"./index-19c84627.js";import{u as Te,b as He,D as Oe}from"./DropdownDetector-705d3a9d.js";import{S as ee}from"./SceneScale-47e8e288.js";import{P as We}from"./SelectionPoint-7fbd4e1f.js";import{L as se}from"./LoadingMessage-072bb4e8.js";import{H as Ye}from"./HistogramDomainSlider-9c6d3e2d.js";import{R as Le,a as te}from"./RulerButton-ebbb7ca3.js";import{r as O}from"./HSegment-26c3fd51.js";import{L as ae}from"./Label-7daca8b6.js";import{c as Re}from"./colors-5bf0897d.js";import{S as Ee}from"./ScreenScale-fdd43179.js";import{C as Xe}from"./CrossMarker-cc495eca.js";import{C as _e}from"./Cross-80ee2b29.js";import{V as Ae}from"./VSegment-5d77576e.js";import"./hooks-e7539055.js";import"./Image-c1578ac2.js";import"./QtyHelper-8429914f.js";import"./Anchor-f3716b7b.js";import"./DraggableRect-8e897252.js";import"./types-0be7083b.js";function Ue(t){const{mouseMode:r,setOrResetMouseMode:a}=t,s=me();function n(x,c){return x?x.alias??x.name:c}function l(x){if(!s)return"You must have the control to the session to move motors";if(!x)return"This motor is not available";if(!x.online)return"This motor is not online";const{state:c}=x.properties;if(!c.includes("READY"))return`This motor is not ready (found ${x.properties.state})`}const i=l(t.sy),o=l(t.sz),m=l(t.sampy),d=n(t.sy,"sy"),u=n(t.sz,"sz"),y=n(t.sampy,"sampy");return e.jsxs(L,{as:S,className:t.className,children:[t.sampy!==null&&e.jsxs(W,{variant:r==="sampy"?"danger":"secondary",onClick:()=>{a==null||a("sampy")},disabled:m!==void 0,title:m,children:[e.jsx("i",{className:"fa fam-arrow-h-over-rot"})," ",y]}),e.jsxs(W,{variant:r==="sy"?"danger":"secondary",onClick:()=>{a==null||a("sy")},disabled:i!==void 0,title:i,children:[e.jsx("i",{className:"fa fam-arrow-h-under-rot"})," ",d]}),e.jsxs(W,{variant:r==="sz"?"danger":"secondary",onClick:()=>{a==null||a("sz")},disabled:o!==void 0,title:o,children:[e.jsx("i",{className:"fa fa-arrows-v"})," ",u]})]})}function qe(t,r,a){const s=ie(t);if(s===null)return null;const{y:n,z:l,fov:i}=s;if(i===null)return null;function o(){if(r===null||a.follow==="motors")return[n,l];const u=re(t,r);return u===null?[0,0]:[u.y,u.z]}const[m,d]=o();return{detectorCenter:[n,l],minDetectorPos:[n-i[0]*.5,l-i[1]*.5],maxDetectorPos:[n+i[0]*.5,l+i[1]*.5],viewCenter:[m-i[0]*.5,d-i[1]*.5*a.fieldOfView],minViewPos:[m-i[0]*.5,d-i[1]*.5*a.fieldOfView],maxViewPos:[m+i[0]*.5,d+i[1]*.5*a.fieldOfView]}}function ie(t){const{sy:r,sz:a,sampy:s,tomoDetector:n,detector:l}=t;if(r===null||a===null)return null;const i=A(a),o=R(s)??0,m=A(r),d=be(n,l);return{y:m+o,z:i,fov:d}}function re(t,r){const{imagePixelSize:a,sampyPosition:s,syPosition:n,szPosition:l,detectorCenterY:i,detectorCenterZ:o}=r;if(a===null||a.units()==="pixel"||n===null||l===null)return null;const{sampleStage:m}=t,d=(m==null?void 0:m.properties.detector_center)??[0,0],u=d[0]??0,y=d[1]??0,x=(i==null?void 0:i.to("mm").scalar)??0,c=(o==null?void 0:o.to("mm").scalar)??0,N=a.to("mm").scalar,I=n.to("mm").scalar,P=l.to("mm").scalar,v=s?s.to("mm").scalar:0,V=I+v+(u-x),w=P+(y-c);return{y:V,z:w,px:N}}function Be(t,r){return t===r?"primary":"secondary"}function p(t){return e.jsx(W,{variant:Be(t.var,t.value),onClick:()=>{t.setter(t.value)},className:"text-nowrap",size:"sm",children:t.children})}function $e(t){const{as:r=void 0,variant:a="secondary",config:s}=t;return e.jsxs(L,{as:r,children:[e.jsx(L.Toggle,{id:"dropdown-basic",variant:a,className:"d-flex align-items-center",children:e.jsx("i",{className:"fa fa-sliders fa-fw fa-lg"})}),e.jsx(L.Menu,{className:"dropdown-menu-center",children:e.jsx("div",{className:"ms-1 me-1",style:{minWidth:"300px"},children:e.jsxs(ue,{children:[e.jsxs(M,{children:[e.jsx(j,{className:"my-auto",children:"Display axes"}),e.jsx(j,{xs:7,children:e.jsxs(S,{children:[e.jsx(p,{var:s.displayAxes,value:!0,setter:s.setDisplayAxes,children:"Yes"}),e.jsx(p,{var:s.displayAxes,value:!1,setter:s.setDisplayAxes,children:"No"})]})})]}),e.jsxs(M,{className:"mt-1",children:[e.jsx(j,{className:"my-auto",children:"Follow"}),e.jsx(j,{xs:7,children:e.jsxs(S,{children:[e.jsx(p,{var:s.follow,value:"motors",setter:s.setFollow,children:"Motors"}),e.jsx(p,{var:s.follow,value:"last-image",setter:s.setFollow,children:"Last image"})]})})]}),e.jsxs(M,{className:"mt-1",children:[e.jsx(j,{className:"my-auto",children:"Field of view"}),e.jsx(j,{xs:7,children:e.jsxs(S,{children:[e.jsx(p,{var:s.fieldOfView,value:1,setter:s.setFieldOfView,children:"×1"}),e.jsx(p,{var:s.fieldOfView,value:1.5,setter:s.setFieldOfView,children:"×1.5"}),e.jsx(p,{var:s.fieldOfView,value:2,setter:s.setFieldOfView,children:"×2"}),e.jsx(p,{var:s.fieldOfView,value:3,setter:s.setFieldOfView,children:"×3"})]})})]}),e.jsxs(M,{className:"mt-1",children:[e.jsx(j,{className:"my-auto",children:"Crosshair"}),e.jsx(j,{xs:7,children:e.jsxs(S,{children:[e.jsx(p,{var:s.crossHair,value:!0,setter:s.setCrossHair,children:"Yes"}),e.jsx(p,{var:s.crossHair,value:!1,setter:s.setCrossHair,children:"No"})]})})]}),e.jsxs(M,{className:"mt-1",children:[e.jsx(j,{className:"my-auto",children:"Mean level"}),e.jsx(j,{xs:7,children:e.jsxs(S,{children:[e.jsx(p,{var:s.displayMean,value:!0,setter:s.setDisplayMean,children:"Show"}),e.jsx(p,{var:s.displayMean,value:!1,setter:s.setDisplayMean,children:"Hide"})]})})]}),e.jsxs(M,{className:"mt-1",children:[e.jsx(j,{className:"my-auto",children:"Timestamp"}),e.jsx(j,{xs:7,children:e.jsxs(S,{children:[e.jsx(p,{var:s.displayEpoch,value:!0,setter:s.setDisplayEpoch,children:"Show"}),e.jsx(p,{var:s.displayEpoch,value:!1,setter:s.setDisplayEpoch,children:"Hide"})]})})]}),e.jsxs(M,{className:"mt-1",children:[e.jsx(j,{className:"my-auto",children:"Histogram"}),e.jsx(j,{xs:7,children:e.jsxs(S,{children:[e.jsx(p,{var:s.displayHistogram,value:!0,setter:s.setDisplayHistogram,children:"Show"}),e.jsx(p,{var:s.displayHistogram,value:!1,setter:s.setDisplayHistogram,children:"Hide"})]})})]})]})})})]})}function Ge(){const[t,r]=C("tomo/detectorview/follow","last-image"),[a,s]=C("tomo/detectorview/axes",!0),[n,l]=C("tomo/detectorview/field-of-view",1),[i,o]=C("tomo/detectorview/crosshair",!1),[m,d]=C("tomo/detectorview/mean",!0),[u,y]=C("tomo/detectorview/epoch",!1),[x,c]=C("tomo/detectorview/histogram",!1);return{follow:t,setFollow:r,displayAxes:a,setDisplayAxes:s,fieldOfView:n,setFieldOfView:l,crossHair:i,setCrossHair:o,displayMean:m,setDisplayMean:d,displayEpoch:u,setDisplayEpoch:y,displayHistogram:x,setDisplayHistogram:c}}class Ze extends fe{constructor(){super({uniforms:{color:{value:new pe},lineWidth:{value:0},sizeXInScreen:{value:0},sizeYInScreen:{value:0},inner:{value:0}},vertexShader:`
out vec2 pixelCoord;

void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    pixelCoord = vec2(position.x, position.y);
}
      `,fragmentShader:`
uniform vec4 color;
uniform float lineWidth;
uniform float sizeXInScreen;  // signed size
uniform float sizeYInScreen;  // signed size
uniform int inner;            // 0 or 1

in vec2 pixelCoord;

/**
 * Exact signed distance function to compute an
 * orthogonal rectangle.
 *
 * @param pos: Pixel position
 * @param center: Center of the rectangle
 * @param size: Size of the rectangle
 */
float sdf_rect(vec2 pos, vec2 center, vec2 size) {
    vec2 d = abs(pos - center) - size * 0.5;
    return length(max(d, 0.0)) + min(max(d.x, d.y), 0.0);
}

void main() {
  float is_inner = float(inner);
  float d1 = sdf_rect(
    pixelCoord,
    vec2(
      (sizeXInScreen - (1.0 - is_inner) * lineWidth * sign(sizeXInScreen)) * 0.5,
      is_inner * lineWidth * sign(sizeYInScreen) * 0.5
    ),
    vec2(abs(sizeXInScreen), lineWidth)
  );
  float d2 = sdf_rect(
    pixelCoord,
    vec2(
      is_inner * lineWidth * sign(sizeXInScreen) * 0.5,
      (sizeYInScreen - (1.0 - is_inner) * lineWidth * sign(sizeYInScreen)) * 0.5
    ),
    vec2(lineWidth, abs(sizeYInScreen))
  );
  float d = min(d1, d2);

  if (d > 0.2) {
    discard;
  }

  float alpha;
  if (lineWidth >= 1.0) {
    alpha = smoothstep(0.2, 0.0, d);
  } else {
    // simulate line thiner than 1px with alpha
    alpha = lineWidth;
  }

  gl_FragColor = vec4(color.r, color.g, color.b, alpha * color.a);
}
      `})}}xe({CornerMarkerMaterial:Ze});function Y(t){const{x:r,y:a,color:s="black",opacity:n,sizeXInScreen:l,sizeYInScreen:i,lineWidth:o=1,inner:m=!1,zIndex:d=0}=t,u=b.useRef(null);return b.useEffect(()=>{const y=Re(s,n);if(u.current){const x=u.current.uniforms;x.color.value=y,x.lineWidth.value=o,x.sizeXInScreen.value=l,x.sizeYInScreen.value=i,x.inner.value=m?1:0,he()}},[s,n,o,l,i,m]),e.jsx("group",{position:[r,a,d],children:e.jsx(Ee,{screenDirection:!1,children:e.jsxs("mesh",{children:[e.jsx("ambientLight",{}),e.jsx("planeGeometry",{attach:"geometry",args:[Math.abs(l)*2+o,Math.abs(i)*2+o,1,1]}),e.jsx("cornerMarkerMaterial",{attach:"material",transparent:!0,ref:u})]})})})}const Ke=E("daiquiri.components.tomo.detectorview.ActualDetectorLocation");function Qe(t){const{x:r,y:a,fov:s}=t,n=s[0]*.5,l=s[1]*.5,i=40,o=40;return e.jsxs(e.Fragment,{children:[e.jsx(Y,{x:r+n,y:a+l,sizeXInScreen:-i,sizeYInScreen:-o,color:F.danger,lineWidth:4,inner:!0}),e.jsx(Y,{x:r-n,y:a-l,sizeXInScreen:i,sizeYInScreen:o,color:F.danger,lineWidth:4,inner:!0}),e.jsx(Y,{x:r-n,y:a+l,sizeXInScreen:i,sizeYInScreen:-o,color:F.danger,lineWidth:4,inner:!0}),e.jsx(Y,{x:r+n,y:a-l,sizeXInScreen:-i,sizeYInScreen:o,color:F.danger,lineWidth:4,inner:!0})]})}function Je(t){const{tomoHardware:r}=t,{detector:a}=r,s=ie(r);if(s===null)return Ke("Skipped: one of sy, sz is missing."),e.jsx(e.Fragment,{});const{y:n,z:l,fov:i}=s;return e.jsxs(e.Fragment,{children:[e.jsx(Xe,{x:n,y:l,color:F.danger,sizeInScreen:40,lineWidth:3,zIndex:.5}),i!==null&&e.jsxs(e.Fragment,{children:[e.jsx(ae,{datapos:[n-i[0]*.5,l-i[1]*.5],color:F.danger,text:(a==null?void 0:a.name)??"Detector",anchor:"top-right"}),e.jsx(Qe,{x:n,y:l,fov:i})]})]})}E("daiquiri.components.tomo.detectorview.DetectorPositionMesh");function es(t){const{x:r,y:a,showMean:s,mean:n,showEpoch:l,epoch:i}=t,o=b.useMemo(()=>{if(i!==void 0)return new Date(i*1e3)},[i]);if(!l&&(!s||n===void 0))return e.jsx(e.Fragment,{});function m(d){return d===void 0?"Undefined":`${d.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:1})}`}return e.jsxs(Ve,{x:r,y:a,children:[s&&n!==void 0&&e.jsx("div",{className:"ms-2 mt-2",title:"Mean grey level",children:e.jsxs("div",{className:"bg-dark text-light p-1 rounded font-tabular-nums",children:[e.jsx("i",{className:"fa-solid fa-circle-half-stroke fa-fw fa-lg"})," ",n.toFixed(2)]})}),l&&e.jsx("div",{className:"ms-2 mt-2",title:`Timestamp (${(o==null?void 0:o.toUTCString())??"undefined"})`,children:e.jsxs("div",{className:"bg-dark text-light p-1 rounded font-tabular-nums",children:[e.jsx("i",{className:"fa-solid fa-clock fa-fw fa-lg"})," ",m(o)]})})]})}function oe(t){const{config:r,detectorArray:a}=t,{displayArray:s,statistics:n,detectorSize:l,epoch:i}=a,o=re(t.tomoHardware,a);if(o===null)return null;const{y:m,z:d,px:u}=o;return e.jsxs(e.Fragment,{children:[e.jsx(Ie,{ref:t.imageRef,values:s,domain:t.domain,colorMap:t.lut,invertColorMap:t.isColorMapInverted,scaleType:t.scale,position:[m,d,0],scale:[-u,u,u],size:l}),e.jsx(es,{x:m+l.width*u*.5,y:d-l.height*u*.5,showMean:r.displayMean,mean:(n==null?void 0:n.mean)??void 0,showEpoch:r.displayEpoch,epoch:i}),e.jsx(_e,{centerX:m,centerY:d,width:l.width*u,height:l.height*u,color:"white",gapColor:"black",dashSize:5,gapSize:5,lineWidth:1})]})}function ne(t){function r(d,u){return Math.round(d)===d?d.toFixed(0):d.toFixed(u)}const{sampleStage:a}=t,s=R(a.sy);R(a.sz);const n=R(a.sampy),l=k(a.sy,"sy"),i=k(a.sampy,"sampy"),o=k(a.sz,"sz"),m=2;return e.jsx("table",{children:e.jsxs("tbody",{children:[n===null&&s!==null&&e.jsxs("tr",{className:"flex-nowrap text-nowrap",children:[e.jsx("td",{children:l}),e.jsx("td",{className:"text-end",children:t.px.toFixed(m)}),e.jsx("td",{className:"text-start",children:"mm"})]}),n!==null&&s!==null&&e.jsxs("tr",{className:"flex-nowrap text-nowrap",children:[e.jsx("td",{children:l}),e.jsx("td",{className:"text-end",children:(s+n-t.px).toFixed(m)}),e.jsx("td",{className:"text-start",children:"mm"})]}),n!==null&&s!==null&&e.jsxs("tr",{className:"flex-nowrap text-nowrap",children:[e.jsx("td",{children:i}),e.jsx("td",{className:"text-end",children:(t.px-s).toFixed(m)}),e.jsx("td",{className:"text-start",children:"mm"})]}),e.jsxs("tr",{className:"flex-nowrap text-nowrap",children:[e.jsx("td",{style:{minWidth:"7em"},children:o}),e.jsx("td",{style:{minWidth:"4em"},className:"text-end",children:t.py.toFixed(m)}),e.jsx("td",{className:"text-start",children:"mm"})]}),t.pixel!==void 0&&e.jsxs("tr",{className:"flex-nowrap text-nowrap",children:[e.jsx("td",{children:"pixel"}),e.jsx("td",{className:"text-end",children:r(t.pixel,m)}),e.jsx("td",{className:"text-start"})]})]})})}E("daiquiri.components.tomo.detectorview.ActualRotationAxisLocation");function ss(t){var u,y;const{tomoHardware:r,sampleStageGeometry:a}=t;if(r.sy===null)return e.jsx(e.Fragment,{});const s=((y=(u=r.sampleStage)==null?void 0:u.properties.detector_center)==null?void 0:y[0])??0,n=a.detectorCenter[0]+A(r.sy)-s,l=a.maxDetectorPos[1],i=a.maxDetectorPos[1]-a.minDetectorPos[1],o=l-i*.1,m=new je(n,o),d=10;return e.jsxs(e.Fragment,{children:[e.jsx(Ae,{x:n,y1:l,y2:o,color:"red",gapColor:"white",dashSize:d,gapSize:d,lineWidth:2,zIndex:1.5}),e.jsx(ae,{datapos:[m.x,m.y],color:"#FF0000",text:"Theorical rotation axis"})]})}E("daiquiri.components.tomo.detectorview.Default");function ts(t,r){return t??r}function os(t){var $,G,Z,K;const{options:r}=t,a=ye(),s=ve(r.tomoconfig??""),n=ge(s),l=(($=n.detector)==null?void 0:$.id)??"",i=a[l],o=Te(),m=ts(r.moveenabled,!0),d=Ge(),[u,y]=b.useState(Pe.Flatfield),x=He({detector:i,sampleStage:n,profile:o.profile,normalization:o.scaleType,autoscale:o.autoscale,autoscaleMode:o.autoscaleMode,domain:o.scaleDomain,histogram:d.displayHistogram,enabled:!0,minRefreshPeriod:.5,processing:u}),c=x.data;ke({statistics:c==null?void 0:c.statistics,...o});const N=b.useRef(null),I=b.useRef(null),P=Ne("zoom"),{mouseMode:v,setMouseMode:V}=P,w=qe(n,c,d);function U(f){if(!n)return null;const h=n[f]||null;if(!h)return null;const z=h.properties.position;return z===null?null:new H(z,h.properties.unit)}const X=U("sampy"),T=U("sy"),le=b.useCallback(f=>{const h=f.dataPt.x,z=f.dataPt.y;switch(v){case"pan":break;case"zoom":break;case"sampy":if(V("pan"),T!==null){const g=new H(h,"mm").sub(T);O({sampy:g})}else console.error("sy axis is not defined");break;case"sy":if(V("pan"),T!==null)if(X!==null){const g=T.add(X).sub(new H(h,"mm"));O({sy:g})}else{const g=new H(h,"mm");O({sy:g})}else console.error("sy axis is not defined");break;case"sz":V("pan"),O({sz:new H(z,"mm")});break;default:console.error(`Unexpected ${v}`)}},[v,X,T,O,c]),q=c==null?void 0:c.statistics,ce=!(c!=null&&c.imagePixelSize)||((G=c==null?void 0:c.imagePixelSize)==null?void 0:G.units())==="pixel";function de(f){return f?{[D.Dark]:"Dark",[D.Flat]:"Flat",[D.Proj]:"Proj",[D.Unknown]:"Unknown data",[D.FlatfieldNorm]:void 0,[D.ProjNorm]:"Only normalized proj",[D.ProjDarkNorm]:"Only normalized proj-dark",[D.ProjFlatNorm]:"Only normalized proj/flat"}[f]:void 0}const B=de(c==null?void 0:c.datakind);return e.jsxs("div",{className:"plot2d-container w-100 h-100",style:{flex:"1 1 0%",display:"flex",flexDirection:"column"},children:[e.jsxs(Me,{align:"center",children:[e.jsx(Ce,{mouseModeInteraction:P}),e.jsx(W,{title:"Reset zoom (sample stage overview)",variant:"secondary",onClick:()=>{var f;(f=N==null?void 0:N.current)==null||f.actions.resetZoom()},children:e.jsx("i",{className:"fa fa-expand fa-fw fa-lg"})}),e.jsx(_,{}),e.jsx(Le,{mouseModeInteraction:P}),m&&e.jsx(Ue,{mouseMode:v,setOrResetMouseMode:P.setOrResetMouseMode,sy:n.sy,sz:n.sz,sampy:n.sampy}),e.jsx(_,{}),e.jsx(Oe,{showDisplayed:!1,variant:"secondary",isInverted:o.invertColorMap,onSelectInvertion:o.setInvertColorMap,isDisplayed:!0,onSelectDisplayed:()=>{},lut:o.colorMap,onSelectLut:o.setColorMap,norm:o.scaleType,onSelectNorm:o.setScaleType,autoscale:o.autoscale,onSelectAutoscale:o.setAutoscale,autoscaleMode:o.autoscaleMode,onSelectAutoscaleMode:o.setAutoscaleMode,profile:o.profile,onSelectProfile:o.setProfile,array:c}),e.jsx(Fe,{disabled:q===void 0,...o}),e.jsx(Ye,{disabled:q===void 0,statistics:c==null?void 0:c.statistics,histogram:c==null?void 0:c.histogram,...o}),e.jsx(De,{as:S,value:u,onSelect:y,detector:i}),e.jsx(_,{}),e.jsx($e,{config:d})]}),e.jsxs("div",{style:{flex:"1 1 auto",display:"flex",margin:0,minHeight:0},children:[w!==null&&e.jsxs(Q,{plotRef:N,abscissaConfig:{visDomain:[w.minViewPos[0],w.maxViewPos[0]],label:`${k(n.sy,"sy")} + ${k(n.sampy,"sampy")} (mm)`,flip:!0},ordinateConfig:{visDomain:[w.minViewPos[1],w.maxViewPos[1]],label:`${k(n.sz,"sz")} (mm)`,flip:!0},showAxes:d.displayAxes,mouseMode:v,aspect:"equal",children:[e.jsx(se,{loading:x.loading,info:B,warning:c===null?"No data":void 0,danger:x.error}),e.jsx(te,{mouseMode:v,plotUnit:"mm"}),c&&e.jsx(oe,{tomoHardware:n,config:d,detectorArray:c,lut:o.colorMap,isColorMapInverted:o.invertColorMap,scale:o.scaleType,domain:o.scaleDomain,imageRef:I}),e.jsx(ss,{tomoHardware:n,sampleStageGeometry:w}),e.jsx(Je,{tomoHardware:n}),e.jsx(J,{guides:d.crossHair?"both":void 0,renderTooltip:(f,h)=>{var g;const z=(g=I.current)==null?void 0:g.pick(f,h);return e.jsx(ne,{sampleStage:n,px:f,py:h,pixel:z})}}),(v==="sz"||v==="sampy"||v==="sy")&&e.jsx(We,{onClick:le}),e.jsx(ee,{unit:"mm"})]}),w===null&&e.jsxs(Q,{plotRef:N,abscissaConfig:{visDomain:[0,((Z=c==null?void 0:c.detectorSize)==null?void 0:Z.width)??1],label:"width (px)",flip:!0},ordinateConfig:{visDomain:[0,((K=c==null?void 0:c.detectorSize)==null?void 0:K.height)??1],label:"height (px)",flip:!0},showAxes:d.displayAxes,mouseMode:v,children:[e.jsx(se,{loading:x.loading,info:B,warning:c===null?"No data":ce?"No sample pixel size defined":void 0,danger:x.error}),c&&e.jsx(e.Fragment,{children:e.jsx(oe,{tomoHardware:n,config:d,detectorArray:c,lut:o.colorMap,isColorMapInverted:o.invertColorMap,scale:o.scaleType,domain:o.scaleDomain,imageRef:I})}),e.jsx(J,{guides:d.crossHair?"both":void 0,renderTooltip:(f,h)=>{var g;const z=(g=I.current)==null?void 0:g.pick(f,h);return e.jsx(ne,{sampleStage:n,px:f,py:h,pixel:z})}}),e.jsx(ee,{unit:"px"}),e.jsx(te,{mouseMode:v,plotUnit:"px"})]})]})]})}function ns(t){return e.jsx(os,{...t})}function Fs(t){const{yamlNode:r,tomoconfig:a,moveenabled:s,...n}=t;we(r,"tomoconfig",a),Se(r,"moveenabled",s),ze(r,n);const l={tomoconfig:a,moveenabled:s};return e.jsx(ns,{options:l})}export{Fs as default};
