import{ag as qa,p as ke,C as At,h as Y,w as T,g as t,$ as Ke,t as l,c as je,ah as La,ai as Va,Z as ft,J as M,N as g,aj as Ia,F as Ne,f as p,a1 as Ha,a2 as Ua,n as r,k as s,a3 as Wa,a4 as Ja,r as a,Q as ia,y as da,o as Ba,l as Jt,e,m as f,d as sa,H as ot,b as Ka,i as ca,z as ut,G as V,I as u,K as la,P as oa,M as Vt,O as It,s as Ya,S as ue,a9 as Za,U as na,X as Ga,R as Qa,v as Xa,x as tr}from"../chunks/tJ-1PvYF.js";import{_ as er}from"../chunks/PPVm8Dsz.js";import{C as ar,a as rr,b as sr,c as lr,d as or}from"../chunks/DuXojj3O.js";import{c as nr,B as Ft}from"../chunks/DZ5Aek4G.js";import"../chunks/BJMC0GYJ.js";import{h as ir,f as dr,d as cr,z as vr,i as ur,j as fr,k as pr,w as _r}from"../chunks/DAWgyOON.js";import{D as mr}from"../chunks/BRt1D930.js";const gr=()=>({title:"Data Overview",subtitle:"Overview of all data available for the selected well"}),hs=Object.freeze(Object.defineProperty({__proto__:null,load:gr},Symbol.toStringTag,{value:"Module"})),hr={light:"",dark:".dark"},xr=Symbol("chart-context");function br(U){return qa(xr,U)}function yr(U,x){ke(x,!0);const j=Ke(()=>x.config?Object.entries(x.config).filter(([,E])=>E.theme||E.color):null),S=Ke(()=>{if(!t(j)||!t(j).length)return;const E=[];for(let[A,$]of Object.entries(hr)){let y=`${$} [data-chart=${x.id}] {
`;const tt=t(j).map(([F,pt])=>{const vt=A,w=pt.theme?.[vt]||pt.color;return w?`	--color-${F}: ${w};`:null});y+=tt.join(`
`)+`
}`,E.push(y)}return E.join(`
`)});var W=At(),nt=Y(W);{var Rt=E=>{var A=At(),$=Y(A);La($,()=>x.id,y=>{var tt=At(),F=Y(tt);Va(F,()=>"style",!1,(pt,vt)=>{var w=ft();M(()=>g(w,t(S))),l(vt,w)}),l(y,tt)}),l(E,A)};T(nt,E=>{t(S)&&E(Rt)})}l(U,W),je()}var $r=p("<div><!> <!></div>");function wr(U,x){const j=Ia();ke(x,!0);let S=Ne(x,"ref",15,null),W=Ne(x,"id",3,j),nt=Ua(x,["$$slots","$$events","$$legacy","ref","id","class","children","config"]);const Rt=Ke(()=>`chart-${W()||j.replace(/:/g,"")}`);br({get config(){return x.config}});var E=$r();Ha(E,y=>({"data-chart":t(Rt),"data-slot":"chart",class:y,...nt}),[()=>nr("flex aspect-video justify-center overflow-visible text-xs","[&_.stroke-white]:stroke-transparent","[&_.lc-line]:stroke-border/50","[&_.lc-highlight-line]:stroke-0","[&_.lc-area-path]:opacity-100 [&_.lc-highlight-line]:opacity-100 [&_.lc-highlight-point]:opacity-100 [&_.lc-spline-path]:opacity-100 [&_.lc-text-svg]:overflow-visible [&_.lc-text]:text-xs","[&_.lc-axis-tick]:stroke-0","[&_.lc-rule-x-line:not(.lc-grid-x-rule)]:stroke-0 [&_.lc-rule-y-line:not(.lc-grid-y-rule)]:stroke-0","[&_.lc-grid-x-radial-line]:stroke-border [&_.lc-grid-x-radial-circle]:stroke-border","[&_.lc-grid-y-radial-line]:stroke-border [&_.lc-grid-y-radial-circle]:stroke-border","[&_.lc-legend-swatch-button]:items-center [&_.lc-legend-swatch-button]:gap-1.5","[&_.lc-legend-swatch-group]:items-center [&_.lc-legend-swatch-group]:gap-4","[&_.lc-legend-swatch]:size-2.5 [&_.lc-legend-swatch]:rounded-[2px]","[&_.lc-labels-text:not([fill])]:fill-foreground [&_text]:stroke-transparent","[&_.lc-axis-tick-label]:fill-muted-foreground [&_.lc-axis-tick-label]:font-normal","[&_.lc-tooltip-rects-g]:fill-transparent","[&_.lc-layout-svg-g]:fill-transparent","[&_.lc-root-container]:w-full",x.class)]);var A=r(E);yr(A,{get id(){return t(Rt)},get config(){return x.config}});var $=s(A,2);Wa($,()=>x.children??Ja),a(E),ia(E,y=>S(y),()=>S()),l(U,E),je()}function Cr(U,x,j){return!x||!j||x===j?U:U.map(S=>{const W={};for(const nt of Object.keys(S))nt===x?W[j]=S[nt]:W[nt]=S[nt];return W})}function Pr(U,x){return x?U.map(j=>{const S=j[x],W=typeof S=="number"?S:S==null||S===""?NaN:Number(String(S).replace("%",""));if(isNaN(W))return{...j};const nt=W>1?W/100:W;return{...j,[x]:nt}}):U}function Sr(U,x,j){return!x||!j||x===j?U:U.map(S=>S===x?j:S)}var Nr=p('<span class="unsaved-dot" aria-hidden="true" style="background:#ef4444; margin-left:.5rem;"></span>'),kr=p("Save Edits <!>",1),jr=p('<!> <!> <div class="ml-auto flex items-center gap-2"><!> <!></div>',1),Fr=p('<div class="text-sm">Loading…</div>'),Dr=p('<div class="text-sm text-red-500"> </div>'),Mr=p('<div class="text-xs"><span class="text-muted-foreground">min:</span> <span class="text-muted-foreground">max:</span> <span class="text-muted-foreground">mean:</span> </div>'),Tr=p('<div class="text-xs truncate max-w-xs"> <!></div>'),Er=p('<div class="text-xs text-muted-foreground"> </div>'),Ar=p('<tr class="border-b hover:bg-panel/50"><td class="p-2 font-medium"> </td><td class="p-2 text-muted-foreground"> </td><td class="p-2 text-right"> </td><td class="p-2 text-right"> </td><td class="p-2 text-right"> </td><td class="p-2 text-right"> </td><td class="p-2"><!></td></tr>'),Rr=p('<div class="bg-surface rounded p-3 space-y-3"><div class="font-medium">Data Profile</div> <div class="grid grid-cols-2 gap-2 text-sm"><div class="p-2 bg-panel rounded"><div class="text-muted-foreground">Total Columns</div> <div class="font-semibold"> </div></div> <div class="p-2 bg-panel rounded"><div class="text-muted-foreground">Total Rows</div> <div class="font-semibold"> </div></div></div> <div class="overflow-auto max-h-96"><table class="w-full text-xs"><thead class="sticky top-0 bg-surface"><tr class="border-b"><th class="p-2 text-left">Column</th><th class="p-2 text-left">Type</th><th class="p-2 text-right">Non-Null</th><th class="p-2 text-right">Missing</th><th class="p-2 text-right">Missing %</th><th class="p-2 text-right">Unique</th><th class="p-2 text-left">Stats / Values</th></tr></thead><tbody></tbody></table></div></div>'),zr=p("<option> </option>"),Or=p("<li> </li>"),qr=p('<div class="mt-2"><div class="text-sm font-medium">Formation Tops</div> <ul class="text-sm"></ul></div>'),Lr=p("<li> </li>"),Vr=p('<div class="mt-2"><div class="text-sm font-medium">Fluid Contacts</div> <ul class="text-sm"></ul></div>'),Ir=p('<div class="absolute inset-0 flex items-center justify-center text-sm text-muted-foreground"> </div>'),Hr=p('<div class="w-full h-[240px]"></div> <!>',1),Ur=p('<div class="text-center py-4 text-sm text-muted-foreground">Loading data...</div>'),Wr=p('<th class="p-1 text-left"> </th>'),Jr=p('<td class="p-1"> </td>'),Br=p("<tr></tr>"),Kr=p('<div class="flex items-center justify-between mt-2 text-xs text-muted-foreground"><div> </div> <div class="flex gap-2"><!> <span> </span> <!></div></div>'),Yr=p('<table class="w-full text-sm"><thead><tr></tr></thead><tbody></tbody></table> <!>',1),Zr=p('<div class="mt-2 space-y-2"><!> <div class="flex items-center gap-2"><div class="text-sm text-muted-foreground">Plot log:</div> <select class="input"><!></select></div> <!> <!> <div class="bg-surface rounded p-2"><!></div> <div class="overflow-auto max-h-48 mt-2 bg-panel rounded p-2"><!></div></div>'),Gr=p('<!> <div class="grid grid-cols-2 gap-2"><div class="p-3 bg-surface rounded"><div class="text-sm text-muted-foreground">Formation Tops</div> <div class="font-semibold"> </div></div> <div class="p-3 bg-surface rounded"><div class="text-sm text-muted-foreground">Fluid Contacts</div> <div class="font-semibold"> </div></div> <div class="p-3 bg-surface rounded"><div class="text-sm text-muted-foreground">Pressure Tests</div> <div class="font-semibold"> </div></div> <div class="p-3 bg-surface rounded"><div class="text-sm text-muted-foreground">Core Samples</div> <div class="font-semibold"> </div></div></div> <div class="mt-4"><div class="flex items-center justify-between"><div class="font-medium">Property vs Depth Data</div> <div class="flex gap-2"><!> <!></div></div> <!></div>',1),Qr=p("<!> <!>",1),Xr=p("<!> <!>",1),ts=p('<div class="text-sm text-muted-foreground-foreground mb-2"> </div>'),es=p("<option> </option>"),as=p("<option>(no columns)</option>"),rs=p('<tr><td class="p-1"> </td><td class="p-1"> </td><td class="p-1"> </td></tr>'),ss=p('<div class="mt-2 bg-panel rounded p-2 max-h-40 overflow-auto"><div class="text-xs text-muted-foreground mb-1"> </div> <table class="w-full text-xs"><thead><tr><th class="p-1 text-left">Depth</th><th class="p-1 text-left">Old</th><th class="p-1 text-left">New</th></tr></thead><tbody></tbody></table></div>'),ls=p('<div class="fixed inset-0 z-50 flex items-start justify-center p-6"><button type="button" class="absolute inset-0 bg-black/40" aria-label="Close modal"></button> <div class="relative bg-white dark:bg-surface rounded shadow-lg w-full max-w-md p-4 z-10"><div class="flex items-center justify-between mb-2"><div class="font-medium">Edit Columns</div> <div class="flex gap-2"><!> <!></div></div> <!> <div class="space-y-2"><div><label for="editColumn" class="text-xs text-muted-foreground">Column</label> <select id="editColumn" class="input w-full"><!></select></div> <div><label for="editNewName" class="text-xs text-muted-foreground">Rename to (optional)</label> <input id="editNewName" class="input w-full" placeholder="e.g. NPHI"/></div> <div class="flex items-center gap-2"><input id="conv" type="checkbox"/> <label for="conv" class="text-sm">Convert % → fraction</label></div> <div class="flex gap-2"><!> <!> <!></div> <!></div></div></div>'),os=p("<!> <!>",1);function ns(U,x){ke(x,!1);const j=()=>sa(cr,"$depthFilter",W),S=()=>sa(vr,"$zoneFilter",W),[W,nt]=Ya(),Rt=f(),E=f(),A=f();let $=Ne(x,"projectId",8),y=Ne(x,"wellName",8);const tt="http://localhost:6312";let F=f(!1),pt=f(null),vt=f(!1),w=f({formation_tops:0,fluid_contacts:0,pressure_tests:0,core_samples:0}),zt=f([]),ae=[],Ht=f(null),Fe=f([]),De=null,Ut=f(null),Bt=f(!1),q=f([]),$e=f([]),N=f([]),et=f(null),Kt=f([]),Yt=f([]),Me=f([]),Te=f([]),fe=f({}),we=f(null),R=f([]),_t=f(0),re=100,Ot=f(!1),Zt=f(!1),Ee=f(!1),J=f(null),Gt=f(""),pe=f(!1),$t=f([]),Ae=[],_e=f(new Set),se=f({}),wt=f(!1),at=f(null),Re=f({log:"",rowsLength:0,prop:""});function va(){const n={},d=Math.min(t(R).length,1e4),o=t(R).length>d?t(R).filter((c,_)=>_%Math.ceil(t(R).length/d)===0).slice(0,d):t(R);for(const c of t(N)){const _=o.map(P=>P[c]),C=_.filter(P=>P!=null&&P!==""),v=_.length-C.length,i=C.find(P=>P!=null);let b=typeof i;b==="string"&&!isNaN(Number(i))&&(b="numeric (string)");const I=new Set(C.slice(0,1e3)),Z=I.size;let mt=null;if(b==="number"||b==="numeric (string)"){const P=C.map(H=>Number(H)).filter(H=>!isNaN(H));if(P.length>0){const gt=P.reduce((Ct,Pt)=>Ct+Pt,0)/P.length,ht=Math.min(...P),bt=Math.max(...P);mt={min:ht,max:bt,mean:gt,median:gt,count:P.length}}}n[c]={dataType:b,totalCount:_.length,nonNullCount:C.length,nullCount:v,missingPercent:(v/_.length*100).toFixed(2),uniqueCount:Z,uniqueValues:Z<=20?Array.from(I).slice(0,20):null,stats:mt,sampled:o.length<t(R).length}}e(fe,n)}async function Ye(n=!1){if(!$()||!y())return;const d=ur($(),y());if(!n&&d){const o=d.data;e(w,o.counts),e(zt,o.samples),ae=o.propOptions,e(Ht,o.selectedProp),e(q,o.fullRows||[]),e($e,o.originalFullRows||[]),e(N,o.fullColumns||[]),e(et,o.selectedLog),e(Kt,o.formationTops||[]),e(Yt,o.fluidContacts||[]),e(Me,o.pressureTestsFull||[]),e(Te,o.coreSamplesFull||[]),e(Zt,t(q).length>0);return}e(F,!0),e(pt,null);try{const o={formation_tops:`${tt}/quick_pp/database/projects/${$()}/formation_tops?well_name=${encodeURIComponent(String(y()))}`,fluid_contacts:`${tt}/quick_pp/database/projects/${$()}/fluid_contacts?well_name=${encodeURIComponent(String(y()))}`,pressure_tests:`${tt}/quick_pp/database/projects/${$()}/pressure_tests?well_name=${encodeURIComponent(String(y()))}`,core_samples:`${tt}/quick_pp/database/projects/${$()}/core_samples?well_name=${encodeURIComponent(String(y()))}`},[c,_,C,v]=await Promise.all([fetch(o.formation_tops),fetch(o.fluid_contacts),fetch(o.pressure_tests),fetch(o.core_samples)]);if(c.ok){const i=await c.json();ue(w,t(w).formation_tops=Array.isArray(i)?i.length:i?.formation_tops?.length??0)}if(_.ok){const i=await _.json();ue(w,t(w).fluid_contacts=Array.isArray(i)?i.length:i?.fluid_contacts?.length??0)}if(C.ok){const i=await C.json();ue(w,t(w).pressure_tests=Array.isArray(i)?i.length:i?.pressure_tests?.length??0)}if(v.ok){const i=await v.json();e(zt,Array.isArray(i)?i:i?.core_samples??[]),ue(w,t(w).core_samples=t(zt).length);const b=new Set;for(const I of t(zt))if(I.measurements&&Array.isArray(I.measurements))for(const Z of I.measurements)Z.property_name&&b.add(String(Z.property_name));ae=Array.from(b).sort(),e(Ht,ae[0]??null)}fr($(),y(),{counts:t(w),samples:t(zt),propOptions:ae,selectedProp:t(Ht),fullRows:t(q),originalFullRows:t($e),fullColumns:t(N),selectedLog:t(et),formationTops:t(Kt),fluidContacts:t(Yt),pressureTestsFull:t(Me),coreSamplesFull:t(Te)})}catch(o){console.warn("WsWellStats fetch error",o),e(pt,String(o?.message??o))}finally{e(F,!1)}}function ua(n,d,o,c){const _=(v,i)=>{if(!v||!i)return NaN;if(i in v)return Number(v[i]);const b=i.toLowerCase();for(const I of Object.keys(v))if(I.toLowerCase()===b)return Number(v[I]);return NaN},C=v=>{if(!v)return NaN;for(const i of["depth","DEPTH","Depth","depth_m","DEPTH_M","MD","md"])if(i in v&&v[i]!==null&&v[i]!==void 0)return Number(v[i]);return NaN};if(d&&d.length&&n){const v=d.map(i=>({depth:C(i),value:_(i,n)})).filter(i=>!isNaN(i.depth)&&!isNaN(i.value)&&isFinite(i.value));if(v.sort((i,b)=>i.depth-b.depth),console.debug("buildChartData:",{selectedLog:n,visibleRowsCount:d.length,validRowsCount:v.length,sampleValues:v.slice(0,5).map(i=>i.value)}),v.length)return v}if(o&&c&&c.length>0){const v=[];for(const i of c){const b=Number(i.depth??NaN);if(isNaN(b))continue;const I=(i.measurements||[]).find(mt=>String(mt.property_name)===String(o)),Z=I?Number(I.value):NaN;!isNaN(Z)&&isFinite(Z)&&v.push({depth:b,value:Z})}if(v.sort((i,b)=>i.depth-b.depth),v.length>0)return v}return console.warn("buildChartData: No valid data found for",{selectedLog:n,selectedProp:o}),[]}async function fa(){if(!De){const n=await er(()=>import("../chunks/BJMC0GYJ.js").then(d=>d.p),[],import.meta.url);De=n?.default??n}return De}async function pa(){if(!t(Ut))return;const n=await fa();if(!t(A)||t(A).length===0){console.debug("renderChartPlot: no chartPoints to plot",{selectedLog:t(et),chartPointsLength:t(A)?.length});try{n.purge(t(Ut))}catch{}return}const d=t(A).map(b=>b.x),o=t(A).map(b=>b.y);let c=Math.min(...o),_=Math.max(...o);(!isFinite(c)||!isFinite(_))&&(c=0,_=1);const C=(_-c)*.05||Math.abs(_)*.05||1,v={height:240,margin:{l:60,r:20,t:20,b:40},dragmode:"zoom",xaxis:{title:"Depth",fixedrange:!1},yaxis:{title:t(et)??"value",range:[c-C,_+C],fixedrange:!0},showlegend:!1},i=[{x:d,y:o,type:"scatter",mode:"lines",fill:"tozeroy",fillcolor:"rgba(37,99,235,0.2)",line:{color:"#2563eb"}}];console.debug("renderChartPlot: plotting",{selectedLog:t(et),points:t(A).length,xSample:d.slice(0,3),ySample:o.slice(0,3)});try{n.react(t(Ut),i,v,{responsive:!0})}catch{n.newPlot(t(Ut),i,v,{responsive:!0})}}async function Ze(){if(!$()||!y()){e(at,"Missing project/well context");return}if(!t(wt)){e(at,"No changes to save");return}e(at,"Saving...");const n=d=>d?d.depth??d.DEPTH??d.depth_m??d.DEPTH_M??d.Depth??d.depth_m??null:null;try{const o={data:t(q).map(_=>{const C={};return C.DEPTH=n(_),C.WELL_NAME=String(y()),t(J)&&(C[t(J)]=_[t(J)]),C})},c=await fetch(`${tt}/quick_pp/database/projects/${$()}/wells/${encodeURIComponent(String(y()))}/data`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!c.ok)throw new Error(await c.text());e($e,t(q).map(_=>({..._}))),e(_e,new Set),e(se,{}),e(wt,!1),Ae=[],e(at,"Saved edits to server"),xa()}catch(d){e(at,`Save failed: ${String(d?.message??d)}`)}}function _a(){e(J,t(N)[0]??null),e(Gt,""),e(pe,!1),e($t,[]),e(at,null),e(Ee,!0)}function Ge(){e(Ee,!1),e($t,[]),e(at,null)}function ma(){if(!t(J)){e(at,"Choose column to preview");return}const n=(o,c)=>{if(o==null)return;if(c in o)return o[c];const _=String(c).toUpperCase();if(_ in o)return o[_];const C=String(c).toLowerCase();if(C in o)return o[C]},d=t(q).filter(o=>{const c=n(o,t(J));return!(c==null||c===""||typeof c=="number"&&isNaN(c))}).slice(0,12);e($t,d.map(o=>{const c=n(o,t(J));let _=c;if(t(pe)){const v=typeof c=="number"?c:c==null||c===""?NaN:Number(String(c).replace("%",""));isNaN(v)?_=c:_=v>1?v/100:v}return{depth:n(o,"depth")??n(o,"DEPTH")??n(o,"depth_m")??"",oldValue:c,newValue:_}})),t($t).length===0?e(at,"No data available in that column for preview"):e(at,`Previewing first ${t($t).length} rows with data`)}function ga(){if(!t(J)){e(at,"Choose column to apply");return}Ae.push({rows:t(q).slice(0,50).map(d=>({...d})),columns:t(N).slice(),editedColumns:Array.from(t(_e)),renameMap:{...t(se)}});const n=t(J);if(t(Gt)&&t(Gt).trim()){const d=t(Gt).trim();e(q,Cr(t(q),t(J),d)),e(N,Sr(t(N),t(J),d)),t(et)===t(J)&&e(et,d),ue(se,t(se)[n]=d),e(J,d),e(Gt,"")}t(pe)&&e(q,Pr(t(q),t(J))),t(_e).add(t(J)),e(wt,!0),e(at,"Applied edits in-memory"),e($t,[])}function ha(){const n=Ae.pop();if(!n){e(at,"Nothing to undo");return}if(n.rows.length===t(q).length)e(q,n.rows.map(d=>({...d})));else for(let d=0;d<n.rows.length;d++)ue(q,t(q)[d]={...n.rows[d]});e(N,n.columns.slice()),n.editedColumns&&e(_e,new Set(n.editedColumns)),n.renameMap&&e(se,{...n.renameMap}),e(wt,!0),e(at,"Undid last action (partial restore)")}Ba(()=>{$()&&y()&&Ye(!0)});function xa(){pr($(),y())}Jt(()=>(t(q),j(),S()),()=>{e(R,(()=>{let n=t(q)||[];return n=ir(n,j()),n=dr(n,S()),n})())}),Jt(()=>(t(et),t(R),t(Ht),t(Re),t(zt)),()=>{const n={log:t(et)||"",rowsLength:t(R).length,prop:t(Ht)||""};JSON.stringify(n)!==JSON.stringify(t(Re))&&(e(Fe,ua(t(et),t(R),t(Ht),t(zt))),e(Re,n))}),Jt(()=>(t(R),t(N),t(Ot),t(we)),()=>{t(R).length>0&&t(N).length>0&&t(Ot)&&(t(we)&&clearTimeout(t(we)),e(we,setTimeout(()=>va(),300)))}),Jt(()=>(t(R),t(_t)),()=>{e(Rt,t(R).slice(t(_t)*re,(t(_t)+1)*re))}),Jt(()=>t(R),()=>{e(E,Math.ceil(t(R).length/re))}),Jt(()=>t(Fe),()=>{e(A,t(Fe).map(n=>({x:n.depth,y:n.value})))}),Jt(()=>(t(Ut),t(A)),()=>{t(Ut)&&t(A)&&t(A).length>0&&pa()}),Jt(()=>(ot($()),ot(y())),()=>{$()&&y()&&Ye(!0)}),Ka(),ca();var Qe=os(),Xe=Y(Qe);ar(Xe,{children:(n,d)=>{var o=Xr(),c=Y(o);rr(c,{children:(C,v)=>{var i=jr(),b=Y(i);sr(b,{children:(H,gt)=>{ut();var ht=ft("Well Statistics");l(H,ht)},$$slots:{default:!0}});var I=s(b,2);lr(I,{children:(H,gt)=>{ut();var ht=ft("Summary for the selected well");l(H,ht)},$$slots:{default:!0}});var Z=s(I,2),mt=r(Z);{let H=V(()=>t(F)||!t(Zt)),gt=V(()=>t(F)||!t(Zt)?"opacity:0.5; pointer-events:none;":"");Ft(mt,{variant:"ghost",size:"sm",onclick:_a,title:"Open edits modal","aria-label":"Open edits modal",get disabled(){return t(H)},get style(){return t(gt)},children:(ht,bt)=>{ut();var Ct=ft("✏️ Edits");l(ht,Ct)},$$slots:{default:!0}})}var P=s(mt,2);{let H=V(()=>t(wt)?"default":"ghost"),gt=V(()=>t(F)||!t(wt)||!t(Zt)),ht=V(()=>t(F)||!t(wt)||!t(Zt)?"opacity:0.5; pointer-events:none;":"");Ft(P,{get variant(){return t(H)},size:"sm",onclick:Ze,get disabled(){return t(gt)},title:"Save edits to server","aria-label":"Save edits to server",get style(){return t(ht)},children:(bt,Ct)=>{ut();var Pt=kr(),le=s(Y(Pt));{var qt=Lt=>{var oe=Nr();l(Lt,oe)};T(le,Lt=>{t(wt)&&Lt(qt)})}l(bt,Pt)},$$slots:{default:!0}})}a(Z),l(C,i)},$$slots:{default:!0}});var _=s(c,2);or(_,{class:"p-3",children:(C,v)=>{var i=Qr(),b=Y(i);mr(b,{});var I=s(b,2);{var Z=P=>{var H=Fr();l(P,H)},mt=P=>{var H=Gr(),gt=Y(H);{var ht=xt=>{var it=Dr(),Dt=r(it);a(it),M(()=>g(Dt,`Error: ${t(pt)??""}`)),l(xt,it)};T(gt,xt=>{t(pt)&&xt(ht)})}var bt=s(gt,2),Ct=r(bt),Pt=s(r(Ct),2),le=r(Pt,!0);a(Pt),a(Ct);var qt=s(Ct,2),Lt=s(r(qt),2),oe=r(Lt,!0);a(Lt),a(qt);var me=s(qt,2),Ce=s(r(me),2),ze=r(Ce,!0);a(Ce),a(me);var h=s(me,2),D=s(r(h),2),G=r(D,!0);a(D),a(h),a(bt);var St=s(bt,2),yt=r(St),Nt=s(r(yt),2),ne=r(Nt);{let xt=V(()=>t(Ot)?"Hide Profile":"Show Profile"),it=V(()=>t(Ot)?"Hide Profile":"Show Profile"),Dt=V(()=>t(F)?"opacity:0.5; pointer-events:none;":"");Ft(ne,{variant:"ghost",size:"sm",onclick:()=>{e(Ot,!t(Ot))},get title(){return t(xt)},get"aria-label"(){return t(it)},get disabled(){return t(F)},get style(){return t(Dt)},children:(dt,z)=>{ut();var B=ft();M(()=>g(B,`${t(Ot)?"Hide":"Show"} Profile`)),l(dt,B)},$$slots:{default:!0}})}var kt=s(ne,2);{let xt=V(()=>t(Bt)?"Hide full well data":"Show full well data"),it=V(()=>t(Bt)?"Hide full well data":"Show full well data"),Dt=V(()=>t(F)?"opacity:0.5; pointer-events:none;":"");Ft(kt,{variant:"ghost",size:"sm",get title(){return t(xt)},get"aria-label"(){return t(it)},get disabled(){return t(F)},get style(){return t(Dt)},onclick:async()=>{if(e(Bt,!t(Bt)),t(Bt)&&!t(Zt)){e(vt,!0);try{const dt=await fetch(`${tt}/quick_pp/database/projects/${$()}/wells/${encodeURIComponent(String(y()))}/data?include_ancillary=true`);if(dt.ok){const z=await dt.json();console.log("Well data fetched on demand:",z);let B=[];Array.isArray(z)?B=z:z&&Array.isArray(z.data)&&(B=z.data,z.formation_tops&&e(Kt,z.formation_tops),z.fluid_contacts&&e(Yt,z.fluid_contacts),z.pressure_tests&&e(Me,z.pressure_tests),z.core_samples&&e(Te,z.core_samples)),B.length>0?(e(q,B),e(Zt,!0),e($e,B.slice()),e(N,Object.keys(B[0]??{})),e(et,t(et)??t(N).find(xe=>xe!=="depth")??null),e(_e,new Set),e(se,{}),e(wt,!1),console.log(`Loaded ${t(q).length} rows with ${t(N).length} columns`)):e(pt,"No well data available")}else e(pt,`Failed to load well data: ${dt.status}`)}catch(dt){console.error("Error loading well data:",dt),e(pt,`Error: ${dt.message}`)}finally{e(vt,!1)}}},children:(dt,z)=>{ut();var B=ft();M(()=>g(B,t(Bt)?"Hide":"Show")),l(dt,B)},$$slots:{default:!0}})}a(Nt),a(yt);var ge=s(yt,2);{var he=xt=>{var it=Zr(),Dt=r(it);{var dt=k=>{var L=Rr(),K=s(r(L),2),rt=r(K),O=s(r(rt),2),Q=r(O,!0);a(O),a(rt);var st=s(rt,2),Mt=s(r(st),2),ct=r(Mt,!0);a(Mt),a(st),a(K);var X=s(K,2),lt=r(X),jt=s(r(lt));Vt(jt,5,()=>t(N),It,(Qt,Tt)=>{const m=V(()=>(t(fe),t(Tt),u(()=>t(fe)[t(Tt)])));var ie=At(),Le=Y(ie);{var Xt=te=>{var be=Ar(),ee=r(be),ka=r(ee,!0);a(ee);var Ve=s(ee),ja=r(Ve,!0);a(Ve);var Ie=s(Ve),Fa=r(Ie,!0);a(Ie);var He=s(Ie),Da=r(He,!0);a(He);var Ue=s(He),Ma=r(Ue);a(Ue);var We=s(Ue),Ta=r(We,!0);a(We);var ra=s(We),Ea=r(ra);{var Aa=de=>{var ce=Mr(),Pe=s(r(ce)),Se=s(Pe,2),Je=s(Se,2);a(ce),M((Wt,Et,ve)=>{g(Pe,` ${Wt??""}, `),g(Se,` ${Et??""}, `),g(Je,` ${ve??""}`)},[()=>(ot(t(m)),u(()=>t(m).stats.min.toFixed(2))),()=>(ot(t(m)),u(()=>t(m).stats.max.toFixed(2))),()=>(ot(t(m)),u(()=>t(m).stats.mean.toFixed(2)))]),l(de,ce)},Ra=de=>{var ce=At(),Pe=Y(ce);{var Se=Wt=>{var Et=Tr(),ve=r(Et),za=s(ve);{var Oa=ye=>{var Be=ft("...");l(ye,Be)};T(za,ye=>{ot(t(m)),u(()=>t(m).uniqueValues.length>5)&&ye(Oa)})}a(Et),M((ye,Be)=>{Za(Et,"title",ye),g(ve,`${Be??""} `)},[()=>(ot(t(m)),u(()=>t(m).uniqueValues.join(", "))),()=>(ot(t(m)),u(()=>t(m).uniqueValues.slice(0,5).join(", ")))]),l(Wt,Et)},Je=Wt=>{var Et=Er(),ve=r(Et);a(Et),M(()=>g(ve,`${ot(t(m)),u(()=>t(m).uniqueCount)??""} unique values`)),l(Wt,Et)};T(Pe,Wt=>{ot(t(m)),u(()=>t(m).uniqueValues)?Wt(Se):Wt(Je,!1)},!0)}l(de,ce)};T(Ea,de=>{ot(t(m)),u(()=>t(m).stats)?de(Aa):de(Ra,!1)})}a(ra),a(be),M(()=>{g(ka,t(Tt)),g(ja,(ot(t(m)),u(()=>t(m).dataType))),g(Fa,(ot(t(m)),u(()=>t(m).nonNullCount))),g(Da,(ot(t(m)),u(()=>t(m).nullCount))),g(Ma,`${ot(t(m)),u(()=>t(m).missingPercent)??""}%`),g(Ta,(ot(t(m)),u(()=>t(m).uniqueCount)))}),l(te,be)};T(Le,te=>{t(m)&&te(Xt)})}l(Qt,ie)}),a(jt),a(lt),a(X),a(L),M(()=>{g(Q,(t(N),u(()=>t(N).length))),g(ct,(t(q),u(()=>t(q).length)))}),l(k,L)};T(Dt,k=>{t(Ot),t(fe),u(()=>t(Ot)&&Object.keys(t(fe)).length>0)&&k(dt)})}var z=s(Dt,2),B=s(r(z),2);M(()=>{t(et),la(()=>{t(N)})});var xe=r(B);{var Oe=k=>{var L=At(),K=Y(L);Vt(K,1,()=>t(N),It,(rt,O)=>{var Q=At(),st=Y(Q);{var Mt=ct=>{var X=zr(),lt=r(X,!0);a(X);var jt={};M(()=>{g(lt,t(O)),jt!==(jt=t(O))&&(X.value=(X.__value=t(O))??"")}),l(ct,X)};T(st,ct=>{t(O)!=="depth"&&ct(Mt)})}l(rt,Q)}),l(k,L)};T(xe,k=>{t(N),u(()=>t(N).length)&&k(Oe)})}a(B),a(z);var ta=s(z,2);{var $a=k=>{var L=qr(),K=s(r(L),2);Vt(K,5,()=>t(Kt),It,(rt,O)=>{var Q=Or(),st=r(Q);a(Q),M(()=>g(st,`${t(O),u(()=>t(O).name)??""} — ${t(O),u(()=>t(O).depth)??""}`)),l(rt,Q)}),a(K),a(L),l(k,L)};T(ta,k=>{t(Kt),u(()=>t(Kt)&&t(Kt).length)&&k($a)})}var ea=s(ta,2);{var wa=k=>{var L=Vr(),K=s(r(L),2);Vt(K,5,()=>t(Yt),It,(rt,O)=>{var Q=Lr(),st=r(Q);a(Q),M(()=>g(st,`${t(O),u(()=>t(O).name)??""} — ${t(O),u(()=>t(O).depth)??""}`)),l(rt,Q)}),a(K),a(L),l(k,L)};T(ea,k=>{t(Yt),u(()=>t(Yt)&&t(Yt).length)&&k(wa)})}var qe=s(ea,2),Ca=r(qe);wr(Ca,{class:"h-[240px] w-full",config:{},children:(k,L)=>{var K=Hr(),rt=Y(K);ia(rt,st=>e(Ut,st),()=>t(Ut));var O=s(rt,2);{var Q=st=>{var Mt=Ir(),ct=r(Mt);a(Mt),M(()=>g(ct,`No data available for ${t(et)??"selected log"??""}`)),l(st,Mt)};T(O,st=>{t(A),u(()=>t(A).length===0)&&st(Q)})}l(k,K)},$$slots:{default:!0}}),a(qe);var aa=s(qe,2),Pa=r(aa);{var Sa=k=>{var L=Ur();l(k,L)},Na=k=>{var L=Yr(),K=Y(L),rt=r(K),O=r(rt);Vt(O,5,()=>t(N),It,(ct,X)=>{var lt=Wr(),jt=r(lt,!0);a(lt),M(()=>g(jt,t(X))),l(ct,lt)}),a(O),a(rt);var Q=s(rt);Vt(Q,5,()=>t(Rt),It,(ct,X)=>{var lt=Br();Vt(lt,5,()=>t(N),It,(jt,Qt)=>{var Tt=Jr(),m=r(Tt,!0);a(Tt),M(ie=>g(m,ie),[()=>(t(X),t(Qt),u(()=>String(t(X)[t(Qt)]??"")))]),l(jt,Tt)}),a(lt),l(ct,lt)}),a(Q),a(K);var st=s(K,2);{var Mt=ct=>{var X=Kr(),lt=r(X),jt=r(lt);a(lt);var Qt=s(lt,2),Tt=r(Qt);{let Xt=V(()=>t(_t)===0);Ft(Tt,{variant:"ghost",size:"sm",onclick:()=>e(_t,Math.max(0,t(_t)-1)),get disabled(){return t(Xt)},children:(te,be)=>{ut();var ee=ft("Previous");l(te,ee)},$$slots:{default:!0}})}var m=s(Tt,2),ie=r(m);a(m);var Le=s(m,2);{let Xt=V(()=>t(_t)>=t(E)-1);Ft(Le,{variant:"ghost",size:"sm",onclick:()=>e(_t,Math.min(t(E)-1,t(_t)+1)),get disabled(){return t(Xt)},children:(te,be)=>{ut();var ee=ft("Next");l(te,ee)},$$slots:{default:!0}})}a(Qt),a(X),M(Xt=>{g(jt,`Showing ${t(_t)*re+1}-${Xt??""} of ${t(R),u(()=>t(R).length)??""} rows`),g(ie,`Page ${t(_t)+1} of ${t(E)??""}`)},[()=>(t(_t),t(R),u(()=>Math.min((t(_t)+1)*re,t(R).length)))]),l(ct,X)};T(st,ct=>{t(R),u(()=>t(R).length>re)&&ct(Mt)})}l(k,L)};T(Pa,k=>{t(vt)?k(Sa):k(Na,!1)})}a(aa),a(it),oa(B,()=>t(et),k=>e(et,k)),l(xt,it)};T(ge,xt=>{t(Bt)&&xt(he)})}a(St),M(()=>{g(le,(t(w),u(()=>t(w).formation_tops))),g(oe,(t(w),u(()=>t(w).fluid_contacts))),g(ze,(t(w),u(()=>t(w).pressure_tests))),g(G,(t(w),u(()=>t(w).core_samples)))}),l(P,H)};T(I,P=>{t(F)?P(Z):P(mt,!1)})}l(C,i)},$$slots:{default:!0}}),l(n,o)},$$slots:{default:!0}});var ba=s(Xe,2);{var ya=n=>{var d=ls(),o=r(d);o.__click=Ge;var c=s(o,2),_=r(c),C=s(r(_),2),v=r(C);Ft(v,{variant:"ghost",size:"sm",onclick:ha,title:"Undo last","aria-label":"Undo last",children:(h,D)=>{ut();var G=ft("Undo");l(h,G)},$$slots:{default:!0}});var i=s(v,2);Ft(i,{variant:"ghost",size:"sm",onclick:Ge,title:"Close modal","aria-label":"Close modal",children:(h,D)=>{ut();var G=ft("Close");l(h,G)},$$slots:{default:!0}}),a(C),a(_);var b=s(_,2);{var I=h=>{var D=ts(),G=r(D,!0);a(D),M(()=>g(G,t(at))),l(h,D)};T(b,h=>{t(at)&&h(I)})}var Z=s(b,2),mt=r(Z),P=s(r(mt),2);M(()=>{t(J),la(()=>{t(N)})});var H=r(P);{var gt=h=>{var D=At(),G=Y(D);Vt(G,1,()=>t(N),It,(St,yt)=>{var Nt=es(),ne=r(Nt,!0);a(Nt);var kt={};M(()=>{g(ne,t(yt)),kt!==(kt=t(yt))&&(Nt.value=(Nt.__value=t(yt))??"")}),l(St,Nt)}),l(h,D)},ht=h=>{var D=as();D.value=D.__value="",l(h,D)};T(H,h=>{t(N),u(()=>t(N).length)?h(gt):h(ht,!1)})}a(P),a(mt);var bt=s(mt,2),Ct=s(r(bt),2);na(Ct),a(bt);var Pt=s(bt,2),le=r(Pt);na(le),ut(2),a(Pt);var qt=s(Pt,2),Lt=r(qt);{let h=V(()=>t(F)?"opacity:0.5; pointer-events:none;":"");Ft(Lt,{variant:"ghost",size:"sm",onclick:ma,title:"Preview changes",get disabled(){return t(F)},get style(){return t(h)},children:(D,G)=>{ut();var St=ft("Preview");l(D,St)},$$slots:{default:!0}})}var oe=s(Lt,2);{let h=V(()=>t(F)?"opacity:0.5; pointer-events:none;":"");Ft(oe,{variant:"default",onclick:ga,title:"Apply edits in-memory",get disabled(){return t(F)},get style(){return t(h)},children:(D,G)=>{ut();var St=ft("Apply");l(D,St)},$$slots:{default:!0}})}var me=s(oe,2);{let h=V(()=>t(F)||!t(wt)),D=V(()=>t(F)||!t(wt)?"opacity:0.5; pointer-events:none;":"");Ft(me,{variant:"default",size:"sm",onclick:Ze,get disabled(){return t(h)},title:"Save edits to server",get style(){return t(D)},children:(G,St)=>{ut();var yt=ft("Save");l(G,yt)},$$slots:{default:!0}})}a(qt);var Ce=s(qt,2);{var ze=h=>{var D=ss(),G=r(D),St=r(G);a(G);var yt=s(G,2),Nt=s(r(yt));Vt(Nt,5,()=>t($t),It,(ne,kt)=>{var ge=rs(),he=r(ge),xt=r(he,!0);a(he);var it=s(he),Dt=r(it,!0);a(it);var dt=s(it),z=r(dt,!0);a(dt),a(ge),M((B,xe,Oe)=>{g(xt,B),g(Dt,xe),g(z,Oe)},[()=>(t(kt),u(()=>String(t(kt).depth))),()=>(t(kt),u(()=>String(t(kt).oldValue))),()=>(t(kt),u(()=>String(t(kt).newValue)))]),l(ne,ge)}),a(Nt),a(yt),a(D),M(()=>g(St,`Preview (first ${t($t),u(()=>t($t).length)??""} rows)`)),l(h,D)};T(Ce,h=>{t($t),u(()=>t($t).length)&&h(ze)})}a(Z),a(c),a(d),oa(P,()=>t(J),h=>e(J,h)),Ga(Ct,()=>t(Gt),h=>e(Gt,h)),Qa(le,()=>t(pe),h=>e(pe,h)),l(n,d)};T(ba,n=>{t(Ee)&&n(ya)})}l(U,Qe),je(),nt()}da(["click"]);var is=p('<div class="bg-panel rounded p-4 min-h-[300px]"><!></div>'),ds=p('<div class="bg-panel rounded p-4 min-h-[300px]"><div class="text-center py-12"><div class="font-semibold">No well selected</div> <div class="text-sm text-muted mt-2">Select a well to view its data.</div></div></div>'),cs=p('<div class="bg-panel rounded p-6 text-center"><div class="font-semibold">No project selected</div> <div class="text-sm text-muted mt-2">Select a project in the Projects workspace to begin.</div> <div class="mt-4"><button class="btn btn-primary">Open Projects</button></div></div>');function xs(U,x){ke(x,!1);let j=f(null),S=f(null);const W=_r.subscribe($=>{e(j,$?.project??null),e(S,$?.selectedWell??null)});Xa(()=>W()),ca();var nt=At(),Rt=Y(nt);{var E=$=>{var y=At(),tt=Y(y);{var F=vt=>{var w=is(),zt=r(w);{let ae=V(()=>t(j)?.project_id??""),Ht=V(()=>t(S)?.name??"");ns(zt,{get projectId(){return t(ae)},get wellName(){return t(Ht)}})}a(w),l(vt,w)},pt=vt=>{var w=ds();l(vt,w)};T(tt,vt=>{t(S)?vt(F):vt(pt,!1)})}l($,y)},A=$=>{var y=cs(),tt=s(r(y),4),F=r(tt);F.__click=()=>tr("/projects"),a(tt),a(y),l($,y)};T(Rt,$=>{t(j)?$(E):$(A,!1)})}l(U,nt),je()}da(["click"]);export{xs as component,hs as universal};
