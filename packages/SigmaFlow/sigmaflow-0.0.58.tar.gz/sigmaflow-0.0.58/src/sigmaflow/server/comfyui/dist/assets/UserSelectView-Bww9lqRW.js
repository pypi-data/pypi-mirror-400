var S=Object.defineProperty;var y=(a,t)=>S(a,"name",{value:t,configurable:!0});import{defineComponent as x,ref as m,onMounted as U,nextTick as V,openBlock as h,createElementBlock as C,normalizeClass as $,withDirectives as E,createElementVNode as o,vShow as N,unref as i,renderSlot as T,computed as d,createBlock as _,withCtx as b,toDisplayString as f,createVNode as n,withKeys as B,createTextVNode as M,createCommentVNode as R}from"vue";import z from"primevue/button";import D from"primevue/divider";import I from"primevue/inputtext";import J from"primevue/message";import K from"primevue/select";import{h as j}from"./vendor-vue-CrN17A9b.js";import{T as A,aV as O,bJ as P,aZ as W}from"./index-6STX4Oia.js";import"./vendor-other-_sromytg.js";import"@primevue/themes";import"@primevue/themes/aura";import"primevue/config";import"primevue/confirmationservice";import"primevue/toastservice";import"primevue/tooltip";import"vue-i18n";import"primevue/skeleton";import"primevue/multiselect";import"primevue/checkbox";import"primevue/scrollpanel";import"primevue/usetoast";import"primevue/card";import"primevue/listbox";import"primevue/progressbar";import"primevue/floatlabel";import"@primevue/forms";import"@primevue/forms/resolvers/zod";import"primevue/password";import"primevue/progressspinner";import"primevue/tag";import"primevue/inputnumber";import"primevue/tabpanels";import"primevue/tabs";import"primevue/iconfield";import"primevue/inputicon";import"primevue/badge";import"primevue/chip";import"primevue/tabpanel";import"primevue/toggleswitch";import"primevue/colorpicker";import"primevue/radiobutton";import"primevue/knob";import"primevue/slider";import"primevue/panel";import"primevue/tabmenu";import"primevue/popover";import"primevue/tab";import"primevue/tablist";import"primevue";import"primevue/autocomplete";import"primevue/dropdown";import"./vendor-xterm-DV1MVhAx.js";import"./vendor-three-zdhtZbSm.js";import"primevue/galleria";import"primevue/tabview";import"primevue/contextmenu";import"primevue/tree";import"primevue/toolbar";import"primevue/selectbutton";import"primevue/dialog";import"primevue/confirmpopup";import"primevue/useconfirm";import"primevue/confirmdialog";import"./vendor-tiptap-D1RRboMA.js";import"primevue/blockui";const Z={class:"flex w-full grow items-center justify-center overflow-auto"},q=x({__name:"BaseViewTemplate",props:{dark:{type:Boolean,default:!1}},setup(a){const t={color:"rgba(0, 0, 0, 0)",symbolColor:"#d4d4d4"},p={color:"rgba(0, 0, 0, 0)",symbolColor:"#171717"},l=m(null);return U(async()=>{A()&&(await V(),O().changeTheme({...a.dark?t:p,height:l.value?.getBoundingClientRect().height??0}))}),(r,u)=>(h(),C("div",{class:$(["flex h-svh w-screen flex-col font-sans",[r.dark?"dark-theme bg-neutral-900 text-neutral-300":"bg-neutral-300 text-neutral-900"]])},[E(o("div",{ref_key:"topMenuRef",ref:l,class:"app-drag h-(--comfy-topbar-height) w-full"},null,512),[[N,i(P)()]]),o("div",Z,[T(r.$slots,"default")])],2))}}),F={id:"comfy-user-selection",class:"relative min-w-84 rounded-lg bg-(--comfy-menu-bg) p-5 px-10 shadow-lg"},G={class:"flex w-full flex-col items-center"},H={class:"flex w-full flex-col gap-2"},L={for:"new-user-input"},Q={class:"flex w-full flex-col gap-2"},X={for:"existing-user-select"},Y={class:"mt-5"},ct=x({__name:"UserSelectView",setup(a){const t=W(),p=j(),l=m(null),r=m(""),u=m(""),v=d(()=>r.value.trim()!==""),k=d(()=>t.users.find(e=>e.username===r.value)?`User "${r.value}" already exists`:""),w=d(()=>k.value||u.value),g=y(async()=>{try{const e=v.value?await t.createUser(r.value):l.value;if(!e)throw new Error("No user selected");await t.login(e),await p.push("/")}catch(e){u.value=e instanceof Error?e.message:JSON.stringify(e)}},"login");return U(async()=>{t.initialized||await t.initialize()}),(e,s)=>(h(),_(q,{dark:""},{default:b(()=>[o("main",F,[s[2]||(s[2]=o("h1",{class:"my-2.5 mb-7 font-normal"},"ComfyUI",-1)),o("div",G,[o("div",H,[o("label",L,f(e.$t("userSelect.newUser"))+":",1),n(i(I),{id:"new-user-input",modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=c=>r.value=c),placeholder:e.$t("userSelect.enterUsername"),onKeyup:B(g,["enter"])},null,8,["modelValue","placeholder"])]),n(i(D)),o("div",Q,[o("label",X,f(e.$t("userSelect.existingUser"))+":",1),n(i(K),{modelValue:l.value,"onUpdate:modelValue":s[1]||(s[1]=c=>l.value=c),class:"w-full","input-id":"existing-user-select",options:i(t).users,"option-label":"username",placeholder:e.$t("userSelect.selectUser"),disabled:v.value},null,8,["modelValue","options","placeholder","disabled"]),w.value?(h(),_(i(J),{key:0,severity:"error"},{default:b(()=>[M(f(w.value),1)]),_:1})):R("",!0)]),o("footer",Y,[n(i(z),{label:e.$t("userSelect.next"),onClick:g},null,8,["label"])])])])]),_:1}))}});export{ct as default};
//# sourceMappingURL=UserSelectView-Bww9lqRW.js.map
