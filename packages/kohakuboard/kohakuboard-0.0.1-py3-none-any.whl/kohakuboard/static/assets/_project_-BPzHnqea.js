import"./map-D3rdFka2.js";import"./_initCloneObject-w666mXAM.js";import"./_baseClone-BEd4hvTE.js";import"./_baseEach-BN0HOvWa.js";import"./isArrayLikeObject-CPqL_9mx.js";import"./merge-CBnaWh74.js";import"./flatMap-CTTB_rc6.js";import{a as e,c as t,d as n,h as r,i,l as a,m as o,n as s,o as c,p as l,r as u,s as d,t as f,u as p}from"./ConfigurableChartCard-DXBpeDOb.js";import"./clone-BmyFpy2t.js";import"./now-ByUdnbf_.js";import{n as m,o as h,r as g,t as ee}from"./css-CzALU0nX.js";import{$ as te,$r as _,Br as ne,Cr as v,Er as y,Gr as b,H as re,Hr as ie,I as x,Ir as S,Jr as ae,K as C,Kn as oe,L as se,Lr as ce,Nr as le,O as ue,P as w,Pr as de,Pt as T,Q as fe,Qr as pe,Rr as me,Sr as E,Tr as D,V as O,Vt as k,W as he,Xr as ge,_i as _e,_r as A,_t as j,a as ve,ai as M,ct as ye,dr as be,er as xe,gr as N,gt as P,hi as F,hr as I,ht as Se,kr as Ce,li as we,lr as Te,mr as L,mt as Ee,n as De,o as R,pr as Oe,qr as z,r as ke,t as B,tt as Ae,ur as je,vi as V,vr as H,vt as U,wr as W,xr as G,yt as K}from"./index-EnPYNmIz.js";var Me=Symbol(`elPaginationKey`),Ne=j({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:w}}),q={click:e=>e instanceof MouseEvent},Pe=v({name:`ElPaginationPrev`}),Fe=v({...Pe,props:Ne,emits:q,setup(e){let t=e,{t:n}=K(),r=L(()=>t.disabled||t.currentPage<=1);return(e,t)=>(S(),H(`button`,{type:`button`,class:`btn-prev`,disabled:M(r),"aria-label":e.prevText||M(n)(`el.pagination.prev`),"aria-disabled":M(r),onClick:t=>e.$emit(`click`,t)},[e.prevText?(S(),H(`span`,{key:0},V(e.prevText),1)):(S(),N(M(fe),{key:1},{default:z(()=>[(S(),N(ie(e.prevIcon)))]),_:1}))],8,[`disabled`,`aria-label`,`aria-disabled`,`onClick`]))}}),J=ye(Fe,[[`__file`,`prev.vue`]]),Y=j({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:w}}),X=v({name:`ElPaginationNext`}),Ie=v({...X,props:Y,emits:[`click`],setup(e){let t=e,{t:n}=K(),r=L(()=>t.disabled||t.currentPage===t.pageCount||t.pageCount===0);return(e,t)=>(S(),H(`button`,{type:`button`,class:`btn-next`,disabled:M(r),"aria-label":e.nextText||M(n)(`el.pagination.next`),"aria-disabled":M(r),onClick:t=>e.$emit(`click`,t)},[e.nextText?(S(),H(`span`,{key:0},V(e.nextText),1)):(S(),N(M(fe),{key:1},{default:z(()=>[(S(),N(ie(e.nextIcon)))]),_:1}))],8,[`disabled`,`aria-label`,`aria-disabled`,`onClick`]))}}),Le=ye(Ie,[[`__file`,`next.vue`]]),Re=()=>y(Me,{}),ze=j({pageSize:{type:Number,required:!0},pageSizes:{type:U(Array),default:()=>ue([10,20,30,40,50,100])},popperClass:{type:String},popperStyle:{type:U([String,Object])},disabled:Boolean,teleported:Boolean,size:{type:String,values:P},appendSizeTo:String}),Be=v({name:`ElPaginationSizes`}),Ve=v({...Be,props:ze,emits:[`page-size-change`],setup(e,{emit:t}){let n=e,{t:r}=K(),i=oe(`pagination`),a=Re(),o=_(n.pageSize);b(()=>n.pageSizes,(e,r)=>{if(!k(e,r)&&we(e)){let r=e.includes(n.pageSize)?n.pageSize:n.pageSizes[0];t(`page-size-change`,r)}}),b(()=>n.pageSize,e=>{o.value=e});let s=L(()=>n.pageSizes);function l(e){var t;e!==o.value&&(o.value=e,(t=a.handleSizeChange)==null||t.call(a,Number(e)))}return(e,t)=>(S(),H(`span`,{class:F(M(i).e(`sizes`))},[E(M(d),{"model-value":o.value,disabled:e.disabled,"popper-class":e.popperClass,"popper-style":e.popperStyle,size:e.size,teleported:e.teleported,"validate-event":!1,"append-to":e.appendSizeTo,onChange:l},{default:z(()=>[(S(!0),H(Oe,null,me(M(s),e=>(S(),N(M(c),{key:e,value:e,label:e+M(r)(`el.pagination.pagesize`)},null,8,[`value`,`label`]))),128))]),_:1},8,[`model-value`,`disabled`,`popper-class`,`popper-style`,`size`,`teleported`,`append-to`])],2))}}),He=ye(Ve,[[`__file`,`sizes.vue`]]),Ue=j({size:{type:String,values:P}}),We=v({name:`ElPaginationJumper`}),Z=v({...We,props:Ue,setup(e){let{t}=K(),n=oe(`pagination`),{pageCount:r,disabled:i,currentPage:a,changeEvent:o}=Re(),s=_(),c=L(()=>s.value??a?.value);function l(e){s.value=e?+e:``}function u(e){e=Math.trunc(+e),o?.(e),s.value=void 0}return(e,a)=>(S(),H(`span`,{class:F(M(n).e(`jump`)),disabled:M(i)},[I(`span`,{class:F([M(n).e(`goto`)])},V(M(t)(`el.pagination.goto`)),3),E(M(g),{size:e.size,class:F([M(n).e(`editor`),M(n).is(`in-pagination`)]),min:1,max:M(r),disabled:M(i),"model-value":M(c),"validate-event":!1,"aria-label":M(t)(`el.pagination.page`),type:`number`,"onUpdate:modelValue":l,onChange:u},null,8,[`size`,`class`,`max`,`disabled`,`model-value`,`aria-label`]),I(`span`,{class:F([M(n).e(`classifier`)])},V(M(t)(`el.pagination.pageClassifier`)),3)],10,[`disabled`]))}}),Ge=ye(Z,[[`__file`,`jumper.vue`]]),Ke=j({total:{type:Number,default:1e3}}),qe=v({name:`ElPaginationTotal`}),Je=v({...qe,props:Ke,setup(e){let{t}=K(),n=oe(`pagination`),{disabled:r}=Re();return(e,i)=>(S(),H(`span`,{class:F(M(n).e(`total`)),disabled:M(r)},V(M(t)(`el.pagination.total`,{total:e.total})),11,[`disabled`]))}}),Ye=ye(Je,[[`__file`,`total.vue`]]),Xe=j({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),Ze=v({name:`ElPaginationPager`}),Qe=v({...Ze,props:Xe,emits:[h],setup(e,{emit:t}){let n=e,r=oe(`pager`),i=oe(`icon`),{t:a}=K(),o=_(!1),s=_(!1),c=_(!1),l=_(!1),u=_(!1),d=_(!1),f=L(()=>{let e=n.pagerCount,t=(e-1)/2,r=Number(n.currentPage),i=Number(n.pageCount),a=!1,o=!1;i>e&&(r>e-t&&(a=!0),r<i-t&&(o=!0));let s=[];if(a&&!o){let t=i-(e-2);for(let e=t;e<i;e++)s.push(e)}else if(!a&&o)for(let t=2;t<e;t++)s.push(t);else if(a&&o){let t=Math.floor(e/2)-1;for(let e=r-t;e<=r+t;e++)s.push(e)}else for(let e=2;e<i;e++)s.push(e);return s}),p=L(()=>[`more`,`btn-quickprev`,i.b(),r.is(`disabled`,n.disabled)]),m=L(()=>[`more`,`btn-quicknext`,i.b(),r.is(`disabled`,n.disabled)]),g=L(()=>n.disabled?-1:0);b(()=>[n.pageCount,n.pagerCount,n.currentPage],([e,t,n])=>{let r=(t-1)/2,i=!1,a=!1;e>t&&(i=n>t-r,a=n<e-r),c.value&&=i,l.value&&=a,o.value=i,s.value=a},{immediate:!0});function ee(e=!1){n.disabled||(e?c.value=!0:l.value=!0)}function te(e=!1){e?u.value=!0:d.value=!0}function ne(e){let r=e.target;if(r.tagName.toLowerCase()===`li`&&Array.from(r.classList).includes(`number`)){let e=Number(r.textContent);e!==n.currentPage&&t(h,e)}else r.tagName.toLowerCase()===`li`&&Array.from(r.classList).includes(`more`)&&v(e)}function v(e){let r=e.target;if(r.tagName.toLowerCase()===`ul`||n.disabled)return;let i=Number(r.textContent),a=n.pageCount,o=n.currentPage,s=n.pagerCount-2;r.className.includes(`more`)&&(r.className.includes(`quickprev`)?i=o-s:r.className.includes(`quicknext`)&&(i=o+s)),Number.isNaN(+i)||(i<1&&(i=1),i>a&&(i=a)),i!==o&&t(h,i)}return(e,t)=>(S(),H(`ul`,{class:F(M(r).b()),onClick:v,onKeyup:je(ne,[`enter`])},[e.pageCount>0?(S(),H(`li`,{key:0,class:F([[M(r).is(`active`,e.currentPage===1),M(r).is(`disabled`,e.disabled)],`number`]),"aria-current":e.currentPage===1,"aria-label":M(a)(`el.pagination.currentPage`,{pager:1}),tabindex:M(g)},` 1 `,10,[`aria-current`,`aria-label`,`tabindex`])):A(`v-if`,!0),o.value?(S(),H(`li`,{key:1,class:F(M(p)),tabindex:M(g),"aria-label":M(a)(`el.pagination.prevPages`,{pager:e.pagerCount-2}),onMouseenter:e=>ee(!0),onMouseleave:e=>c.value=!1,onFocus:e=>te(!0),onBlur:e=>u.value=!1},[(c.value||u.value)&&!e.disabled?(S(),N(M(O),{key:0})):(S(),N(M(C),{key:1}))],42,[`tabindex`,`aria-label`,`onMouseenter`,`onMouseleave`,`onFocus`,`onBlur`])):A(`v-if`,!0),(S(!0),H(Oe,null,me(M(f),t=>(S(),H(`li`,{key:t,class:F([[M(r).is(`active`,e.currentPage===t),M(r).is(`disabled`,e.disabled)],`number`]),"aria-current":e.currentPage===t,"aria-label":M(a)(`el.pagination.currentPage`,{pager:t}),tabindex:M(g)},V(t),11,[`aria-current`,`aria-label`,`tabindex`]))),128)),s.value?(S(),H(`li`,{key:2,class:F(M(m)),tabindex:M(g),"aria-label":M(a)(`el.pagination.nextPages`,{pager:e.pagerCount-2}),onMouseenter:e=>ee(),onMouseleave:e=>l.value=!1,onFocus:e=>te(),onBlur:e=>d.value=!1},[(l.value||d.value)&&!e.disabled?(S(),N(M(re),{key:0})):(S(),N(M(C),{key:1}))],42,[`tabindex`,`aria-label`,`onMouseenter`,`onMouseleave`,`onFocus`,`onBlur`])):A(`v-if`,!0),e.pageCount>1?(S(),H(`li`,{key:3,class:F([[M(r).is(`active`,e.currentPage===e.pageCount),M(r).is(`disabled`,e.disabled)],`number`]),"aria-current":e.currentPage===e.pageCount,"aria-label":M(a)(`el.pagination.currentPage`,{pager:e.pageCount}),tabindex:M(g)},V(e.pageCount),11,[`aria-current`,`aria-label`,`tabindex`])):A(`v-if`,!0)],42,[`onKeyup`]))}}),$e=ye(Qe,[[`__file`,`pager.vue`]]),Q=e=>typeof e!=`number`,et=j({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:e=>T(e)&&Math.trunc(e)===e&&e>4&&e<22&&e%2==1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:[`prev`,`pager`,`next`,`jumper`,`->`,`total`].join(`, `)},pageSizes:{type:U(Array),default:()=>ue([10,20,30,40,50,100])},popperClass:{type:String,default:``},popperStyle:{type:U([String,Object])},prevText:{type:String,default:``},prevIcon:{type:w,default:()=>x},nextText:{type:String,default:``},nextIcon:{type:w,default:()=>se},teleported:{type:Boolean,default:!0},small:Boolean,size:Se,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean,appendSizeTo:String}),tt={"update:current-page":e=>T(e),"update:page-size":e=>T(e),"size-change":e=>T(e),change:(e,t)=>T(e)&&T(t),"current-change":e=>T(e),"prev-click":e=>T(e),"next-click":e=>T(e)},nt=`ElPagination`,rt=v({name:nt,props:et,emits:tt,setup(e,{emit:t,slots:n}){let{t:r}=K(),i=oe(`pagination`),a=W().vnode.props||{},o=Ee(),s=L(()=>e.small?`small`:e.size??o.value);R({from:`small`,replacement:`size`,version:`3.0.0`,scope:`el-pagination`,ref:`https://element-plus.org/zh-CN/component/pagination.html`},L(()=>!!e.small));let c=`onUpdate:currentPage`in a||`onUpdate:current-page`in a||`onCurrentChange`in a,l=`onUpdate:pageSize`in a||`onUpdate:page-size`in a||`onSizeChange`in a,u=L(()=>{if(Q(e.total)&&Q(e.pageCount)||!Q(e.currentPage)&&!c)return!1;if(e.layout.includes(`sizes`)){if(Q(e.pageCount)){if(!Q(e.total)&&!Q(e.pageSize)&&!l)return!1}else if(!l)return!1}return!0}),d=_(Q(e.defaultPageSize)?10:e.defaultPageSize),f=_(Q(e.defaultCurrentPage)?1:e.defaultCurrentPage),p=L({get(){return Q(e.pageSize)?d.value:e.pageSize},set(n){Q(e.pageSize)&&(d.value=n),l&&(t(`update:page-size`,n),t(`size-change`,n))}}),m=L(()=>{let t=0;return Q(e.pageCount)?Q(e.total)||(t=Math.max(1,Math.ceil(e.total/p.value))):t=e.pageCount,t}),g=L({get(){return Q(e.currentPage)?f.value:e.currentPage},set(n){let r=n;n<1?r=1:n>m.value&&(r=m.value),Q(e.currentPage)&&(f.value=r),c&&(t(`update:current-page`,r),t(`current-change`,r))}});b(m,e=>{g.value>e&&(g.value=e)}),b([g,p],e=>{t(h,...e)},{flush:`post`});function ee(e){g.value=e}function te(e){p.value=e;let t=m.value;g.value>t&&(g.value=t)}function ne(){e.disabled||(--g.value,t(`prev-click`,g.value))}function v(){e.disabled||(g.value+=1,t(`next-click`,g.value))}function y(e,t){e&&(e.props||={},e.props.class=[e.props.class,t].join(` `))}return ce(Me,{pageCount:m,disabled:L(()=>e.disabled),currentPage:g,changeEvent:ee,handleSizeChange:te}),()=>{if(!u.value)return Ae(nt,r(`el.pagination.deprecationWarning`)),null;if(!e.layout||e.hideOnSinglePage&&m.value<=1)return null;let t=[],a=[],o=D(`div`,{class:i.e(`rightwrapper`)},a),c={prev:D(J,{disabled:e.disabled,currentPage:g.value,prevText:e.prevText,prevIcon:e.prevIcon,onClick:ne}),jumper:D(Ge,{size:s.value}),pager:D($e,{currentPage:g.value,pageCount:m.value,pagerCount:e.pagerCount,onChange:ee,disabled:e.disabled}),next:D(Le,{disabled:e.disabled,currentPage:g.value,pageCount:m.value,nextText:e.nextText,nextIcon:e.nextIcon,onClick:v}),sizes:D(He,{pageSize:p.value,pageSizes:e.pageSizes,popperClass:e.popperClass,popperStyle:e.popperStyle,disabled:e.disabled,teleported:e.teleported,size:s.value,appendSizeTo:e.appendSizeTo}),slot:(n?.default)?.call(n)??null,total:D(Ye,{total:Q(e.total)?0:e.total})},l=e.layout.split(`,`).map(e=>e.trim()),d=!1;return l.forEach(e=>{if(e===`->`){d=!0;return}d?a.push(c[e]):t.push(c[e])}),y(t[0],i.is(`first`)),y(t[t.length-1],i.is(`last`)),d&&a.length>0&&(y(a[0],i.is(`first`)),y(a[a.length-1],i.is(`last`)),t.push(o)),D(`div`,{class:[i.b(),i.is(`background`,e.background),i.m(s.value)]},t)}}}),it=te(rt),at={class:`run-selection-list`},ot={class:`flex items-center justify-between gap-2`},st={class:`flex items-center gap-2 flex-1 min-w-0`},ct={class:`relative flex-shrink-0`},lt=[`value`,`onInput`],ut={class:`flex flex-col min-w-0`},dt={class:`text-sm font-medium truncate text-gray-900 dark:text-gray-100`},ft={class:`text-xs truncate text-gray-500 dark:text-gray-400`},pt={__name:`RunSelectionList`,props:{runs:Array,selectedRunIds:Set,displayedRunIds:Array,runColors:Object,project:String},emits:[`toggle`,`update-color`],setup(e,{emit:t}){let n=t;function r(e,t){t.preventDefault(),t.stopPropagation(),n(`toggle`,e)}function i(e,t){t.stopPropagation();let r=t.target.value;n(`update-color`,e,r)}let a=e=>`${e.annotation&&e.annotation.trim().length>0?e.annotation:`No annotation`}(${e.run_id})`;return(t,n)=>{let o=ve,s=ne(`router-link`);return S(),H(`div`,at,[(S(!0),H(Oe,null,me(e.runs,t=>(S(),N(s,{key:t.run_id,to:`/projects/${e.project}/${t.run_id}`,class:`run-item block px-2 py-1 hover:bg-gray-100 dark:hover:bg-gray-800 border-b border-gray-200 dark:border-gray-700 no-underline`},{default:z(()=>[I(`div`,ot,[I(`div`,st,[I(`div`,ct,[I(`input`,{type:`color`,value:e.runColors[t.run_id]||`#ccc`,onInput:e=>i(t.run_id,e),class:`absolute inset-0 w-3 h-3 opacity-0 cursor-pointer`,onClick:n[0]||=be(()=>{},[`stop`])},null,40,lt),I(`span`,{class:`w-3 h-3 rounded-full block cursor-pointer border border-gray-300 dark:border-gray-600`,style:_e({backgroundColor:e.runColors[t.run_id]||`#ccc`}),title:`Click to change color`},null,4)]),I(`div`,ut,[I(`span`,dt,V(t.name||t.run_id),1),I(`span`,ft,V(a(t)),1)])]),E(o,{type:e.selectedRunIds.has(t.run_id)?`primary`:`default`,size:`small`,circle:``,onClick:e=>r(t.run_id,e),title:e.selectedRunIds.has(t.run_id)?`Visible in charts`:`Hidden from charts`},{default:z(()=>[I(`i`,{class:F(e.selectedRunIds.has(t.run_id)?`i-ep-view`:`i-ep-hide`)},null,2)]),_:2},1032,[`type`,`onClick`,`title`])])]),_:2},1032,[`to`]))),128))])}}},mt=B(pt,[[`__scopeId`,`data-v-fb26b93e`]]),ht={class:`project-comparison flex h-screen overflow-hidden`},gt={class:`p-4 border-b border-gray-200 dark:border-gray-700`},_t={class:`text-lg font-bold mb-2`},vt={class:`flex gap-2`},yt={class:`flex-1 overflow-y-auto`},bt={key:0,class:`p-4 text-center`},xt={class:`p-4 border-t border-gray-200 dark:border-gray-700`},St={class:`flex-1 flex flex-col overflow-hidden bg-gray-50 dark:bg-gray-800`},Ct={class:`p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 flex flex-wrap justify-between items-start gap-4`},wt={class:`text-xl font-bold`},Tt={class:`text-sm text-gray-500 dark:text-gray-400`},Et={class:`flex flex-col gap-3 sm:flex-row sm:items-center`},Dt={class:`flex items-center gap-2`},Ot={class:`flex items-center gap-2`},kt={class:`flex-1 overflow-y-auto p-4`},At={class:`mb-4 flex items-center justify-end gap-2`},jt={class:`flex items-center gap-2`},Mt={key:0,class:`flex items-center justify-center gap-4 mb-4`},Nt={class:`text-sm text-gray-600 dark:text-gray-400`},Pt={class:`text-xs ml-2`},Ft=20,It=200,Lt=600,Rt=`Metrics`,zt=`project-dashboard-layout`,Bt=`project-layout`,Vt=B({__name:`index`,setup(h){let g=xe(),{animationsEnabled:te}=De(),{hoverSyncEnabled:ne,toggleHoverSync:v}=s(),y=L(()=>g.params.project),re=L(()=>`legend-mode-${y.value??`default`}`),ie=_(`annotation`);b(()=>y.value,()=>{ie.value=localStorage.getItem(re.value)||`annotation`},{immediate:!0}),b(ie,e=>{localStorage.setItem(re.value,e)});let x=_([]),C=_(new Set),oe=_(1),se=_(!1);function ce(e){let t=Date.parse(e?.updated_at??``);if(!Number.isNaN(t))return t;let n=Date.parse(e?.created_at??``);return Number.isNaN(n)?0:n}function ue(e){let t=2166136261;for(let n=0;n<e.length;n++)t^=e.charCodeAt(n),t=Math.imul(t,16777619);t>>>=0;let n=(e,t,n)=>Math.max(t,Math.min(n,e)),r=(t&65535)/65535,i=((t>>16&255)/255-.5)*60,a=(r*360+i+360)%360,o=((t>>24&255)/255-.5)*.3,s=n(.65+o,.5,.95),c=((t>>8&255)/255-.5)*.25,l=n(.55+c,.35,.7),u=a/360,d=s,f=l,p=(e,t,n)=>(n<0&&(n+=1),n>1&&--n,n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e),m,h,g;if(d===0)m=h=g=f;else{let e=f<.5?f*(1+d):f+d-f*d,t=2*f-e;m=p(t,e,u+1/3),h=p(t,e,u),g=p(t,e,u-1/3)}let ee=e=>{let t=Math.round(e*255).toString(16);return t.length===1?`0${t}`:t};return`#${ee(m)}${ee(h)}${ee(g)}`}let w=_({}),T=_([]),D=_({}),O=_([{name:`Metrics`,cards:[]}]),k=_(`Metrics`),j=_(1),ye=_(!1),P=_(!1);_(!1),_(``);let Se=_(!1),we=_(!1),Ee=_(`line`),R=_([]),B=_(new Set),Ae=_(!0),je=_(12),U=_(0),W=_(window.innerWidth<=900),K=window.matchMedia(`(max-width: 900px)`),Me=e=>{W.value=e.matches,W.value?q.value=!0:q.value=!1};le(()=>{K.addEventListener(`change`,Me)}),de(()=>{K.removeEventListener(`change`,Me)});let Ne=_(300),q=_(!0),Pe=_(!1),Fe=()=>({xAxis:`global_step`,smoothing:`disabled`,smoothingValue:.9,downsampleRate:-1}),J=pe({[Rt]:Fe()});function Y(e){let t=e||Rt;J[t]||(J[t]=Fe())}let X=L(()=>{let e=k.value||Rt;return Y(e),J[e]}),Ie=L(()=>`${zt}-${g.params.project}`),Le=L(()=>`${Bt}-${g.params.project}`);function Re(e,t){if(!e)return null;try{let t=JSON.parse(e);return ze(t)?(Array.isArray(t.hiddenRunIds)||(t.hiddenRunIds=[]),Array.isArray(t.removedMetrics)||(t.removedMetrics=[]),t):null}catch(e){return console.warn(`[ProjectLayout] Failed to parse ${t}:`,e),null}}function ze(e){return!(!e||typeof e!=`object`||!Array.isArray(e.tabs)||!(`hiddenRunIds`in e))}function Be(){let e=Re(localStorage.getItem(Ie.value),Ie.value);if(e)return e;if(Le.value===Ie.value)return null;let t=Re(localStorage.getItem(Le.value),Le.value);return t?(localStorage.setItem(Ie.value,JSON.stringify(t)),localStorage.removeItem(Le.value),t):null}let Ve=new Set([`step`,`global_step`,`timestamp`,`walltime`,`relative_walltime`]),He=_({}),Ue=L(()=>{let e={};return x.value.forEach(t=>{e[t.run_id]=He.value[t.run_id]||ue(t.run_id)}),e}),We=L(()=>{let e={};return x.value.forEach(t=>{ie.value===`name`?e[t.run_id]=t.name||t.annotation||t.run_id:e[t.run_id]=t.annotation||t.run_id}),e}),Z=L(()=>Array.from(C.value).map(e=>x.value.find(t=>t.run_id===e)).filter(Boolean).slice(0,10)),Ge=L(()=>{let e=(oe.value-1)*Ft;return x.value.slice(e,e+Ft)}),Ke=L(()=>x.value.length);L(()=>Math.ceil(Ke.value/Ft));let qe=null;async function Je(){se.value=!0;try{let e=await fetch(`/api/projects/${y.value}/runs`);if(!e.ok)throw Error(`Failed to fetch runs: ${e.status}`);x.value=((await e.json()).runs||[]).sort((e,t)=>ce(t)-ce(e));let t=Be()?.hiddenRunIds||[],n=x.value.map(e=>e.run_id);C.value=new Set(n.filter(e=>!t.includes(e))),await tt()}catch(e){console.error(`Failed to fetch runs:`,e),ke.error(`Failed to fetch project runs`)}finally{se.value=!1}}async function Ye(){try{console.log(`[Polling] Starting poll check...`);let e=await fetch(`/api/projects/${y.value}/runs`);if(!e.ok){console.log(`[Polling] Failed to fetch runs: ${e.status}`);return}let t=((await e.json()).runs||[]).sort((e,t)=>ce(t)-ce(e));console.log(`[Polling] Fetched ${t.length} runs from server`),console.log(`[Polling] Current allRuns count:`,x.value.length),console.log(`[Polling] Current visible runs:`,Array.from(C.value));let n=new Set(x.value.map(e=>e.run_id)),r=new Map(x.value.map(e=>[e.run_id,e.updated_at]));console.log(`[Polling] Old runs map:`,Object.fromEntries(r)),console.log(`[Polling] New runs updated_at:`,t.map(e=>({id:e.run_id,updated_at:e.updated_at})));let i=t.some(e=>!n.has(e.run_id));console.log(`[Polling] Has new runs: ${i}`);let a=new Set(t.map(e=>e.run_id)),o=x.value.filter(e=>!a.has(e.run_id)),s=o.length>0;console.log(`[Polling] Has deleted runs: ${s}`),s&&console.log(`[Polling] Deleted runs:`,o.map(e=>e.run_id));let c=[];for(let e of t){if(!C.value.has(e.run_id)){console.log(`[Polling] Skipping hidden run: ${e.run_id}`);continue}let t=r.get(e.run_id);console.log(`[Polling] Checking run ${e.run_id}:`),console.log(`[Polling]   - Old updated_at: ${t} (type: ${typeof t})`),console.log(`[Polling]   - New updated_at: ${e.updated_at} (type: ${typeof e.updated_at})`),console.log(`[Polling]   - Are equal: ${t===e.updated_at}`),e.updated_at&&t!==e.updated_at?(console.log(`[Polling]   - UPDATE DETECTED!`),c.push({run_id:e.run_id,old:t,new:e.updated_at})):console.log(`[Polling]   - No change detected`)}let l=c.length>0;if(console.log(`[Polling] Has updated visible runs: ${l}`),l&&console.log(`[Polling] Updated runs:`,c),i||s||l)if(i||s){console.log(`[Polling] Runs added/deleted, updating list and chart data`),x.value=t;let e=Be()?.hiddenRunIds||[],n=x.value.map(e=>e.run_id);C.value=new Set(n.filter(t=>!e.includes(t))),console.log(`[Polling] Calling initializeProject()`),await tt(),console.log(`[Polling] initializeProject() completed`)}else l&&(console.log(`[Polling] Existing runs updated, refreshing chart data`),x.value=t,console.log(`[Polling] Calling refreshMetricData()`),await Xe(),console.log(`[Polling] refreshMetricData() completed`));else console.log(`[Polling] No changes detected, skipping refresh`)}catch(e){console.error(`[Polling] Error:`,e)}}async function Xe(){try{if(console.log(`[Refresh] Refreshing metric data for updated runs`),Z.value.length===0){console.log(`[Refresh] No displayed runs, skipping`);return}let e=Z.value.map(e=>e.run_id);console.log(`[Refresh] Fetching summaries for runs:`,e);let t=await fetch(`/api/projects/${y.value}/runs/batch/summary`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({run_ids:e})});if(!t.ok)throw Error(`Failed to fetch summaries: ${t.status}`);D.value=await t.json(),console.log(`[Refresh] Received summaries:`,D.value);let n=new Set;for(let t of e){let e=D.value[t];if(e?.available_data?.scalars)for(let t of e.available_data.scalars)n.add(t)}let r=Array.from(n).sort();T.value.includes(`timestamp`)&&(r.push(`walltime`),r.push(`relative_walltime`)),console.log(`[Refresh] Available metrics:`,r),T.value=r,console.log(`[Refresh] Calling fetchMetricsForTab(true)`),await lt(!0),console.log(`[Refresh] Metric data refreshed successfully`)}catch(e){console.error(`[Refresh] Failed to refresh metric data:`,e)}}async function Ze(e){let t=C.value.has(e);t?C.value.delete(e):C.value.add(e),C.value=new Set(C.value),t||(console.log(`Run ${e} made visible, triggering refresh`),await Ye(),Z.value.some(t=>t.run_id===e)&&await Xe())}function Qe(e,t){He.value[e]=t,He.value={...He.value},$()}function $e(){for(let e of Ge.value)C.value.add(e.run_id);C.value=new Set(C.value)}function Q(){C.value.clear(),C.value=new Set(C.value)}function et(e){oe.value=e}b(Z,async()=>{Ae.value||await tt()},{deep:!0});async function tt(){try{if(Ae.value=!0,Z.value.length===0){O.value=[{name:`Metrics`,cards:[]}],w.value={},T.value=[],Ae.value=!1;return}let e=Z.value.map(e=>e.run_id),t=await fetch(`/api/projects/${y.value}/runs/batch/summary`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({run_ids:e})});if(!t.ok)throw Error(`Failed to fetch summaries: ${t.status}`);D.value=await t.json();let n=new Set;for(let t of e){let e=D.value[t];if(e?.available_data?.scalars)for(let t of e.available_data.scalars)n.add(t)}T.value=Array.from(n).sort(),T.value.includes(`timestamp`)&&(T.value.push(`walltime`),T.value.push(`relative_walltime`));let r=Be();if(r){if(k.value=r.activeTab||`Metrics`,j.value=r.nextCardId||1,r.tabSettings)for(let[e,t]of Object.entries(r.tabSettings))J[e]={...Fe(),...t};else r.globalSettings?J[Rt]={...Fe(),...r.globalSettings}:J[Rt]=Fe();r.customRunColors&&(He.value=r.customRunColors),r.sidebarWidth&&(Ne.value=r.sidebarWidth),B.value=new Set(r.removedMetrics||[])}else B.value=new Set;if(r?.tabs){O.value=at(r.tabs);for(let e of O.value)Y(e.name)}else ct();st()&&$(),await lt(),nt(),Ae.value=!1}catch(e){console.error(`Failed to initialize project:`,e),Ae.value=!1}}function nt(){for(let e of O.value)for(let t of e.cards)if(t.config.type===`line`&&t.config.yMetrics&&t.config.yMetrics.length>0){let e=t.config.yMetrics.map(e=>e.includes(` (`)?e.substring(0,e.lastIndexOf(` (`)):e);t.config.yMetrics=[...new Set(e)],Array.isArray(t.defaultMetrics)?t.defaultMetrics=t.defaultMetrics.map(rt).filter(e=>t.config.yMetrics.includes(e)):t.config.yMetrics.length===1?t.defaultMetrics=[t.config.yMetrics[0]]:t.defaultMetrics=[],console.log(`Updated card ${t.id} yMetrics to base metrics only:`,t.config.yMetrics)}}function rt(e){if(typeof e!=`string`)return e;let t=e.lastIndexOf(` (`);return t===-1?e:e.substring(0,t)}function at(e){if(!Array.isArray(e))return[{name:`Metrics`,cards:[]}];let t=[];e.forEach((e,n)=>{let r=(e?.cards||[]).filter(t=>{let r=t?.config?.type||`line`;return r===`line`?!0:(console.warn(`[Project Layout] Dropping unsupported card type '${r}' in tab '${e?.name??n}'`),!1)}).map(e=>{let t=e.config||{},n=Array.isArray(t.yMetrics)?t.yMetrics.map(rt).filter(Boolean):[],r=Array.isArray(e.defaultMetrics)?e.defaultMetrics.map(rt).filter(Boolean):n.length===1?[n[0]]:[];return{id:e.id||`card-${j.value++}`,config:{type:`line`,title:t.title||(n.length?n.join(`, `):`Chart`),widthPercent:t.widthPercent||33,height:t.height||400,xMetric:t.xMetric||`global_step`,yMetrics:n},defaultMetrics:r}});t.push({name:e?.name||`Tab ${n+1}`,cards:r})});let n=t.length>0?t:[{name:`Metrics`,cards:[]}];return n.forEach(e=>Y(e.name)),n}function ot(e,t=`global_step`){return{id:`card-${j.value++}`,config:{type:`line`,title:e,widthPercent:33,height:400,xMetric:t,yMetrics:[e]},defaultMetrics:[e]}}function st(){if(!T.value||T.value.length===0)return!1;let e=new Set;for(let t of O.value)for(let n of t.cards||[])if(n.config?.type===`line`)for(let t of n.config.yMetrics||[])e.add(rt(t));let t=T.value.filter(t=>Ve.has(t)||B.value.has(t)?!1:!e.has(t));if(t.length===0)return!1;let n=new Map;n.set(``,[]);for(let e of t){let t=e.indexOf(`/`);if(t>0){let r=e.substring(0,t);n.has(r)||n.set(r,[]),n.get(r).push(e)}else n.get(``).push(e)}O.value.length===0&&(O.value=[{name:`Metrics`,cards:[]}],Y(`Metrics`));let r=O.value.find(e=>e.name===`Metrics`);r||(r={name:`Metrics`,cards:[]},O.value.unshift(r),Y(`Metrics`));for(let e of n.get(``)||[])r.cards.push(ot(e,`global_step`));for(let[e,t]of n.entries()){if(e===``||t.length===0)continue;let n=O.value.find(t=>t.name===e);n||(n={name:e,cards:[]},O.value.push(n),Y(e));for(let e of t)n.cards.push(ot(e,`step`))}return O.value=O.value.map(e=>({...e,cards:[...e.cards]})),!0}function ct(){let e=new Map;e.set(``,[]);for(let t of T.value){if(Ve.has(t)||B.value.has(t))continue;let n=t.indexOf(`/`);if(n>0){let r=t.substring(0,n);e.has(r)||e.set(r,[]),e.get(r).push(t)}else e.get(``).push(t)}let t=[],n=1,r=e.get(``);if(r.length>0){let e=r.map(e=>({id:`card-${n++}`,config:{type:`line`,title:e,widthPercent:33,height:400,xMetric:`global_step`,yMetrics:[e]},defaultMetrics:[e]}));t.push({name:`Metrics`,cards:e})}for(let[r,i]of e.entries())if(r!==``&&i.length>0){let e=i.map(e=>({id:`card-${n++}`,config:{type:`line`,title:e,widthPercent:33,height:400,xMetric:`step`,yMetrics:[e]},defaultMetrics:[e]}));t.push({name:r,cards:e})}O.value=t.length>0?t:[{name:`Metrics`,cards:[]}];for(let e of O.value)Y(e.name);j.value=n}async function lt(e=!1){try{console.log(`[fetchMetricsForTab] Starting fetch, forceRefresh: ${e}`);let t=O.value.find(e=>e.name===k.value);if(!t)return;let n=new Set([`walltime`,`relative_walltime`]),r=new Set;for(let e of t.cards)if(e.config.type===`line`&&(e.config.xMetric&&!n.has(e.config.xMetric)&&r.add(e.config.xMetric),e.config.yMetrics)){for(let t of e.config.yMetrics)if(!n.has(t)){let e=t.includes(` (`)?t.substring(0,t.lastIndexOf(` (`)):t;r.add(e)}}if(console.log(`[fetchMetricsForTab] Needed metrics for tab ${k.value}:`,Array.from(r)),r.size===0){console.log(`[fetchMetricsForTab] No metrics needed, returning`);return}let i=Z.value.map(e=>e.run_id);console.log(`[fetchMetricsForTab] Fetching scalars for runs:`,i),console.log(`[fetchMetricsForTab] Requesting metrics:`,Array.from(r));let a={run_ids:i,metrics:Array.from(r)};console.log(`[fetchMetricsForTab] Request body:`,a);let o=await fetch(`/api/projects/${y.value}/runs/batch/scalars`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify(a)});if(!o.ok)throw console.error(`[fetchMetricsForTab] Failed to fetch scalars: ${o.status}`),Error(`Failed to fetch scalars: ${o.status}`);let s=await o.json();console.log(`[fetchMetricsForTab] Batch data received:`,s);for(let[e,t]of Object.entries(s)){console.log(`[fetchMetricsForTab] Run ${e}:`,Object.keys(t).length,`metrics`);for(let[e,n]of Object.entries(t))console.log(`[fetchMetricsForTab]   - ${e}: ${n.steps?.length||0} steps`)}let c={},l=(e,t)=>{for(;e.length<=t;)e.push(null)},u=e=>{if(e==null)return null;if(typeof e==`number`&&Number.isFinite(e))return{seconds:e,iso:new Date(e*1e3).toISOString()};if(typeof e==`string`){let t=Date.parse(e);if(!Number.isNaN(t))return{seconds:t/1e3,iso:e}}return null},d=(e,t,n)=>{let r=u(n);r&&(l(e.timestamp,t),l(e.walltime,t),l(e.relative,t),!(e.timestamp[t]!==null&&e.walltime[t]!==null)&&(e.timestamp[t]=r.iso,e.walltime[t]=r.seconds,e.startTime===null&&(e.startTime=r.seconds),e.relative[t]=r.seconds-e.startTime))};for(let e of Z.value){let t=e.run_id,n=s[t];if(!n){console.warn(`No batch data for run ${t}`);continue}c[t]={};let r={timestamp:[],walltime:[],relative:[],startTime:null},i=0;for(let[e,a]of Object.entries(n)){if(console.log(`Processing ${t}/${e}:`,a),!a.steps||!a.values){console.warn(`Invalid data structure for ${t}/${e}`);continue}if(a.steps.length===0){console.warn(`Empty steps for ${t}/${e}`),c[t][e]=[];continue}let n=Math.max(...a.steps);if(n>i&&(i=n),!isFinite(n)||n<0||n>1e7){console.warn(`Invalid maxStep ${n} for ${e} in ${t}, skipping`);continue}let o=Array(n+1).fill(null);for(let e=0;e<a.steps.length;e++){let t=a.steps[e],n=a.values[e];n===`NaN`?n=NaN:n===`Infinity`?n=1/0:n===`-Infinity`&&(n=-1/0),o[t]=n}if(c[t][e]=o,console.log(`Stored ${t}/${e}: ${o.length} slots, ${o.filter(e=>e!==null).length} values`),Array.isArray(a.timestamps)&&a.timestamps.length>0){let e=Math.min(a.steps.length,a.timestamps.length);for(let t=0;t<e;t++){let e=a.steps[t];d(r,e,a.timestamps[t])}}}if(r.timestamp.some(e=>e!==null)){let e=i+1,n=t=>{for(;t.length<e;)t.push(null);return t};c[t].timestamp=n(r.timestamp),c[t].walltime=n(r.walltime),c[t].relative_walltime=n(r.relative)}}w.value=c,console.log(`[fetchMetricsForTab] multiRunDataCache updated with`,Object.keys(c).length,`runs`),console.log(`[fetchMetricsForTab] Full cache:`,w.value),console.log(`[fetchMetricsForTab] Fetch completed successfully`)}catch(e){console.error(`[fetchMetricsForTab] Error:`,e)}}let ut=L(()=>{let e={};for(let t of Z.value){let n=t.run_id,r=w.value[n];if(r)for(let[t,i]of Object.entries(r)){let r=`${t} (${n})`;e[r]=i,console.log(`Added ${r}: ${i.length} slots, ${i.filter(e=>e!==null).length} non-null`)}}return console.log(`sparseData computed with ${Object.keys(e).length} series:`),console.log(`sparseData keys:`,Object.keys(e)),console.log(`sparseData full:`,e),e}),dt=L({get(){let e=O.value.find(e=>e.name===k.value);return e?e.cards:[]},set(e){let t=O.value.find(e=>e.name===k.value);t&&(t.cards=e,$())}}),ft=L(()=>W.value?2:je.value),pt=L(()=>W.value?280:400),Vt=L(()=>{let e=dt.value,t=0,n=[],r=[];for(let i of e)i.config.type===`line`||i.config.type===`histogram`?(t++,t>ft.value?(n.push(r),r=[i],t=1):r.push(i)):r.push(i);return r.length>0&&n.push(r),n}),Ht=L(()=>Vt.value.length),Ut=L(()=>{if(Vt.value.length===0)return[];let e=Math.min(U.value,Vt.value.length-1);return Vt.value[e]||[]});b(k,()=>{Ae.value||(U.value=0,lt(),$())}),b(()=>O.value.map(e=>e.cards.map(e=>({id:e.id,width:e.config.widthPercent,height:e.config.height}))),()=>{Kt()},{deep:!0}),b(J,()=>{Kt()},{deep:!0});function Wt(){let e={};for(let[t,n]of Object.entries(J))e[t]={...n};return e}function $(){let e=new Set(x.value.map(e=>e.run_id)),t=Array.from(e).filter(e=>!C.value.has(e)),n={tabs:O.value,activeTab:k.value,nextCardId:j.value,tabSettings:Wt(),customRunColors:He.value,sidebarWidth:Ne.value,hiddenRunIds:t,removedMetrics:Array.from(B.value)};localStorage.setItem(Ie.value,JSON.stringify(n))}let Gt=null;function Kt(){Ae.value||(Gt&&clearTimeout(Gt),Gt=setTimeout(()=>{$(),Gt=null},250))}function qt(e){let t=[],n=[],r=0;for(let i=0;i<e.length;i++){let a=e[i].config.widthPercent||100;r>0&&r+a>102&&(t.push([...n]),n=[],r=0),n.push(i),r+=a}return n.length>0&&t.push(n),t}function Jt(e,t){if(!e||!t)return!1;let n=e.type||`line`,r=t.type||n;if(n!==`line`||r!==`line`)return!1;let i=e.xMetric,a=t.xMetric===void 0?i:t.xMetric;if(i!==a)return!0;let o=Array.isArray(e.yMetrics)?[...new Set(e.yMetrics)]:[],s=t.yMetrics===void 0?o:Array.isArray(t.yMetrics)?[...new Set(t.yMetrics)]:[];if(o.length!==s.length)return!0;let c=new Set(o);for(let e of s)if(!c.has(e))return!0;return!1}function Yt({id:e,config:t,syncAll:n,realtime:r}){if(!t)return;let i=O.value.find(e=>e.name===k.value);if(!i)return;let a=i.cards.findIndex(t=>t.id===e);if(a===-1)return;let o=i.cards[a].config,s=o.height!==t.height,c=o.widthPercent!==t.widthPercent,l=Jt(o,t);if(n){if(r&&P.value)return;if(!r){if(P.value)return;P.value=!0}try{for(let e=0;e<i.cards.length;e++){let n={};s&&(n.height=t.height),c&&(n.widthPercent=t.widthPercent),Object.keys(n).length>0&&(i.cards[e].config={...i.cards[e].config,...n})}}finally{r||($(),l&&lt(),Ce(()=>{P.value=!1}))}return}if(i.cards[a].config=t,!P.value){P.value=!0;try{if(s&&!c){let e=qt(i.cards).find(e=>e.includes(a));if(e&&e.length>1)for(let n of e)n!==a&&(i.cards[n].config={...i.cards[n].config,height:t.height})}else if(c){let e=qt(i.cards);for(let t of e)if(t.length>1){let e=t.includes(a),n=null,r=t.filter(e=>e!==a);if(r.length>0?n=i.cards[r[0]].config.height:e&&(n=i.cards[a].config.height),n!==null)for(let e of t)i.cards[e].config.height!==n&&(i.cards[e].config={...i.cards[e].config,height:n})}}}finally{$(),l&&lt(),Ce(()=>{P.value=!1})}}}function Xt(e){let t=O.value.find(e=>e.name===k.value);if(t){let n=t.cards.find(t=>t.id===e);n&&(n.defaultMetrics&&n.defaultMetrics.length>0?n.defaultMetrics:n.config?.yMetrics?.length===1?n.config.yMetrics:[]).forEach(e=>{let t=rt(e);t&&B.value.add(t)}),t.cards=t.cards.filter(t=>t.id!==e),$()}}function Zt(e){let t=O.value.find(e=>e.name===k.value);if(!t)return;let n=e.newIndex,r=e.oldIndex;if(n===void 0||r===void 0){$();return}let i=qt(t.cards);for(let e of i)if(e.length>1){let n={};for(let r of e){let e=t.cards[r].config.height;n[e]=(n[e]||0)+1}let r=null,i=0;for(let[e,t]of Object.entries(n))t>i&&(i=t,r=parseInt(e));if(r!==null)for(let n of e)t.cards[n].config.height!==r&&(t.cards[n].config={...t.cards[n].config,height:r})}$()}function Qt(){let e=O.value.findIndex(e=>e.name===k.value);if(e===-1)return;let t=X.value,n=O.value[e].cards.map(e=>{let n={...e.config};return e.config.type===`line`&&(n.xMetric=t.xAxis,n.smoothingMode=t.smoothing,n.smoothingValue=t.smoothingValue,n.downsampleRate=t.downsampleRate),{...e,config:n}});O.value=[...O.value.slice(0,e),{...O.value[e],cards:n},...O.value.slice(e+1)],Ce(()=>{$(),Se.value=!1,ke.success(`Applied global settings to all cards`),lt()})}function $t(){we.value=!0,Ee.value=`line`,R.value=[]}let en=L(()=>T.value.filter(e=>!Ve.has(e)));function tn(){let e=O.value.find(e=>e.name===k.value);if(!e)return;if(!Array.isArray(R.value)||R.value.length===0){ke.warning(`Please select at least one metric`);return}let t=R.value.join(`, `),n={id:`card-${j.value++}`,config:{type:`line`,title:t,widthPercent:33,height:400,xMetric:`global_step`,yMetrics:R.value},defaultMetrics:[]};e.cards.push(n),$(),we.value=!1,R.value=[],lt()}function nn(){if(confirm(`Reset to default layout? This will remove all customizations.`)){B.value=new Set;for(let e of Object.keys(J))delete J[e];Y(Rt),localStorage.removeItem(Ie.value),location.reload()}}function rn(){q.value=!q.value}function an(e){if(W.value)return;e.preventDefault(),Pe.value=!0;let t=e.clientX,n=Ne.value,r=e=>{let r=e.clientX-t;Ne.value=Math.max(It,Math.min(Lt,n+r))},i=()=>{Pe.value=!1,document.removeEventListener(`mousemove`,r),document.removeEventListener(`mouseup`,i),$()};document.addEventListener(`mousemove`,r),document.addEventListener(`mouseup`,i)}return b([W,q],()=>{W.value?window.__projectSidebarState={showToggle:!0,collapsed:q.value,toggle:rn}:window.__projectSidebarState=null},{immediate:!0}),le(()=>{Je(),qe=setInterval(()=>{Ye()},5e3)}),de(()=>{window.__projectSidebarState=null,qe&&clearInterval(qe),Gt&&=(clearTimeout(Gt),null)}),(s,h)=>{let g=ve,_=r,b=fe,re=it,x=l,ce=o,le=i,ue=e,w=a,de=c,pe=d,D=m,j=ee,xe=n,P=p,Ce=t;return S(),H(`div`,ht,[M(W)&&!M(q)?(S(),H(`div`,{key:0,onClick:rn,class:`sidebar-backdrop`})):A(``,!0),ae(I(`aside`,{class:F([{"sidebar-mobile":M(W),resizing:M(Pe)},`border-r border-gray-200 dark:border-gray-700 flex flex-col bg-white dark:bg-gray-900 relative`]),style:_e({width:M(W)?`100%`:`${M(Ne)}px`})},[I(`div`,gt,[I(`h3`,_t,`Runs (`+V(M(Ke))+`)`,1),I(`div`,vt,[E(g,{size:`small`,onClick:$e,class:`flex-1`},{default:z(()=>[...h[16]||=[G(` Select Page `,-1)]]),_:1}),E(g,{size:`small`,onClick:Q,class:`flex-1`},{default:z(()=>[...h[17]||=[G(` Clear `,-1)]]),_:1})])]),M(C).size>10?(S(),N(_,{key:0,type:`warning`,closable:!1,class:`m-2`},{title:z(()=>[G(V(M(C).size)+` runs selected`,1)]),default:z(()=>[h[18]||=G(` Only showing last 10 in charts for performance. `,-1)]),_:1})):A(``,!0),I(`div`,yt,[M(se)?(S(),H(`div`,bt,[E(b,{class:`is-loading`},{default:z(()=>[E(M(he))]),_:1}),h[19]||=I(`p`,{class:`mt-2 text-sm`},`Loading runs...`,-1)])):(S(),N(mt,{key:1,runs:M(Ge),"selected-run-ids":M(C),"displayed-run-ids":M(Z).map(e=>e.run_id),"run-colors":M(Ue),project:M(y),onToggle:Ze,onUpdateColor:Qe},null,8,[`runs`,`selected-run-ids`,`displayed-run-ids`,`run-colors`,`project`]))]),I(`div`,xt,[E(re,{total:M(Ke),"page-size":Ft,"current-page":M(oe),layout:`prev, pager, next`,small:``,onCurrentChange:et},null,8,[`total`,`current-page`])]),M(W)?A(``,!0):(S(),H(`div`,{key:1,onMousedown:an,class:`sidebar-resize-handle`,title:`Drag to resize sidebar`},null,32))],6),[[Te,!M(W)||!M(q)]]),I(`main`,St,[I(`div`,Ct,[I(`div`,null,[I(`h2`,wt,V(M(y)),1),I(`p`,Tt,` Comparing `+V(M(Z).length)+` runs `,1)]),I(`div`,Et,[I(`div`,Dt,[h[22]||=I(`span`,{class:`text-sm text-gray-600 dark:text-gray-400`},`Legend labels:`,-1),E(ce,{modelValue:M(ie),"onUpdate:modelValue":h[0]||=e=>ge(ie)?ie.value=e:null,size:`small`},{default:z(()=>[E(x,{value:`annotation`},{default:z(()=>[...h[20]||=[G(`Annotation`,-1)]]),_:1}),E(x,{value:`name`},{default:z(()=>[...h[21]||=[G(`Run Name`,-1)]]),_:1})]),_:1},8,[`modelValue`])]),I(`div`,Ot,[h[26]||=I(`span`,{class:`text-sm text-gray-600 dark:text-gray-400`},`Charts per page:`,-1),E(ce,{modelValue:M(je),"onUpdate:modelValue":h[1]||=e=>ge(je)?je.value=e:null,size:`small`},{default:z(()=>[E(x,{value:6},{default:z(()=>[...h[23]||=[G(`6`,-1)]]),_:1}),E(x,{value:8},{default:z(()=>[...h[24]||=[G(`8`,-1)]]),_:1}),E(x,{value:12},{default:z(()=>[...h[25]||=[G(`12`,-1)]]),_:1})]),_:1},8,[`modelValue`])])])]),I(`div`,kt,[I(`div`,At,[E(g,{type:`primary`,size:`small`,onClick:$t},{default:z(()=>[...h[27]||=[I(`i`,{class:`i-ep-plus mr-1`},null,-1),G(` Add Chart `,-1)]]),_:1}),E(g,{size:`small`,onClick:nn,type:`danger`,plain:``},{default:z(()=>[...h[28]||=[I(`i`,{class:`i-ep-refresh-left mr-1`},null,-1),G(` Reset Layout `,-1)]]),_:1})]),E(ue,{modelValue:M(k),"onUpdate:modelValue":h[3]||=e=>ge(k)?k.value=e:null,type:`card`},{default:z(()=>[(S(!0),H(Oe,null,me(M(O),e=>(S(),N(le,{key:e.name,label:e.name,name:e.name},{label:z(()=>[I(`div`,jt,[I(`span`,null,V(e.name),1),e.name===M(k)&&!M(ye)?(S(),N(g,{key:0,size:`small`,circle:``,onClick:be(M(v),[`stop`]),title:M(ne)?`Disable Hover Sync`:`Enable Hover Sync`,type:M(ne)?`primary`:`default`},{default:z(()=>[...h[29]||=[I(`i`,{class:`i-ep-connection`},null,-1)]]),_:1},8,[`onClick`,`title`,`type`])):A(``,!0),e.name===M(k)&&!M(ye)?(S(),N(g,{key:1,size:`small`,circle:``,onClick:h[2]||=be(e=>Se.value=!0,[`stop`]),title:`Global Tab Settings`},{default:z(()=>[...h[30]||=[I(`i`,{class:`i-ep-setting`},null,-1)]]),_:1})):A(``,!0)])]),_:2},1032,[`label`,`name`]))),128))]),_:1},8,[`modelValue`]),M(Ht)>1?(S(),H(`div`,Mt,[E(g,{size:`small`,disabled:M(U)===0,onClick:h[4]||=e=>U.value--,icon:`ArrowLeft`},{default:z(()=>[...h[31]||=[G(` Previous `,-1)]]),_:1},8,[`disabled`]),I(`span`,Nt,[G(` Page `+V(M(U)+1)+` / `+V(M(Ht))+` `,1),I(`span`,Pt,` (`+V(M(Ut).length)+` charts, max `+V(M(ft))+` WebGL per page) `,1)]),E(g,{size:`small`,disabled:M(U)>=M(Ht)-1,onClick:h[5]||=e=>U.value++,icon:`ArrowRight`},{default:z(()=>[...h[32]||=[G(` Next `,-1)]]),_:1},8,[`disabled`])])):A(``,!0),E(M(u),{modelValue:M(dt),"onUpdate:modelValue":h[6]||=e=>ge(dt)?dt.value=e:null,animation:M(te)?200:0,handle:`.card-drag-handle`,class:`flex flex-wrap gap-4`,onEnd:Zt},{default:z(()=>[(S(!0),H(Oe,null,me(M(Ut),e=>(S(),N(f,{key:e.id,"card-id":e.id,"experiment-id":M(Z)[0]?.run_id,project:M(y),"sparse-data":M(ut),"available-metrics":M(T),"initial-config":{...e.config,height:M(W)?M(pt):e.config.height},"tab-name":M(k),"hover-sync-enabled":M(ne),"multi-run-mode":!0,"run-colors":M(Ue),"run-names":M(We),"onUpdate:config":Yt,onRemove:t=>Xt(e.id)},null,8,[`card-id`,`experiment-id`,`project`,`sparse-data`,`available-metrics`,`initial-config`,`tab-name`,`hover-sync-enabled`,`run-colors`,`run-names`,`onRemove`]))),128))]),_:1},8,[`modelValue`,`animation`]),M(dt).length===0?(S(),N(w,{key:1,description:`No charts in this tab`})):A(``,!0)])]),E(xe,{modelValue:M(we),"onUpdate:modelValue":h[9]||=e=>ge(we)?we.value=e:null,title:`Add Chart`,width:`500px`},{footer:z(()=>[E(g,{onClick:h[8]||=e=>we.value=!1},{default:z(()=>[...h[33]||=[G(`Cancel`,-1)]]),_:1}),E(g,{type:`primary`,onClick:tn},{default:z(()=>[...h[34]||=[G(`Add`,-1)]]),_:1})]),default:z(()=>[E(j,{"label-width":`120px`},{default:z(()=>[E(D,{label:`Select Metrics`},{default:z(()=>[E(pe,{modelValue:M(R),"onUpdate:modelValue":h[7]||=e=>ge(R)?R.value=e:null,class:`w-full`,placeholder:`Choose one or more metrics`,multiple:``,filterable:``,"collapse-tags":``,"collapse-tags-tooltip":``},{default:z(()=>[(S(!0),H(Oe,null,me(M(en),e=>(S(),N(de,{key:e,label:e,value:e},null,8,[`label`,`value`]))),128))]),_:1},8,[`modelValue`])]),_:1})]),_:1})]),_:1},8,[`modelValue`]),E(xe,{modelValue:M(Se),"onUpdate:modelValue":h[15]||=e=>ge(Se)?Se.value=e:null,title:`Global Tab Settings`,width:`600px`},{footer:z(()=>[E(g,{onClick:h[14]||=e=>Se.value=!1},{default:z(()=>[...h[36]||=[G(`Cancel`,-1)]]),_:1}),E(g,{type:`primary`,onClick:Qt},{default:z(()=>[...h[37]||=[G(` Apply to All Cards `,-1)]]),_:1})]),default:z(()=>[E(j,{"label-width":`160px`},{default:z(()=>[E(P,{"content-position":`left`},{default:z(()=>[...h[35]||=[G(`Line Chart Settings`,-1)]]),_:1}),E(D,{label:`X-Axis`},{default:z(()=>[E(pe,{modelValue:M(X).xAxis,"onUpdate:modelValue":h[10]||=e=>M(X).xAxis=e,class:`w-full`},{default:z(()=>[(S(!0),H(Oe,null,me(M(T),e=>(S(),N(de,{key:e,label:e,value:e},null,8,[`label`,`value`]))),128))]),_:1},8,[`modelValue`])]),_:1}),E(D,{label:`Smoothing`},{default:z(()=>[E(pe,{modelValue:M(X).smoothing,"onUpdate:modelValue":h[11]||=e=>M(X).smoothing=e,class:`w-full`},{default:z(()=>[E(de,{label:`Disabled`,value:`disabled`}),E(de,{label:`EMA`,value:`ema`}),E(de,{label:`Moving Average`,value:`ma`}),E(de,{label:`Gaussian`,value:`gaussian`})]),_:1},8,[`modelValue`])]),_:1}),M(X).smoothing===`disabled`?A(``,!0):(S(),N(D,{key:0,label:`Smoothing Value`},{default:z(()=>[E(Ce,{modelValue:M(X).smoothingValue,"onUpdate:modelValue":h[12]||=e=>M(X).smoothingValue=e,min:0,max:M(X).smoothing===`ema`?1:1e3,step:M(X).smoothing===`ema`?.01:1,class:`w-full`},null,8,[`modelValue`,`max`,`step`])]),_:1})),E(D,{label:`Downsample Rate`},{default:z(()=>[E(Ce,{modelValue:M(X).downsampleRate,"onUpdate:modelValue":h[13]||=e=>M(X).downsampleRate=e,min:-1,max:100,class:`w-full`},null,8,[`modelValue`])]),_:1})]),_:1})]),_:1},8,[`modelValue`])])}}},[[`__scopeId`,`data-v-c022893a`]]);export{Vt as default};