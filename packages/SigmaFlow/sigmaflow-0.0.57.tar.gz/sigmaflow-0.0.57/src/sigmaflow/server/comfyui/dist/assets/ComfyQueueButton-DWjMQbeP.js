var Q=Object.defineProperty;var u=(_,m)=>Q(_,"name",{value:m,configurable:!0});import{defineComponent as $,computed as c,resolveDirective as T,withDirectives as f,openBlock as l,createElementBlock as d,createVNode as v,unref as t,isRef as D,createBlock as I,withCtx as k,createCommentVNode as M}from"vue";import{s as S}from"./vendor-vue-CrN17A9b.js";import w from"primevue/button";import V from"primevue/buttongroup";import z from"primevue/splitbutton";import{useI18n as E}from"vue-i18n";import"./vendor-other-_sromytg.js";import{bS as q,u as N,d as x,z as W,bZ as F,p as K}from"./index-6STX4Oia.js";import"primevue/message";import"primevue/skeleton";import"primevue/checkbox";import"primevue/divider";import"primevue/scrollpanel";import"primevue/usetoast";import"primevue/card";import"primevue/listbox";import"primevue/progressbar";import"primevue/floatlabel";import"primevue/inputtext";import"@primevue/forms";import"@primevue/forms/resolvers/zod";import"primevue/password";import"primevue/progressspinner";import"primevue/tag";import L from"primevue/inputnumber";import"primevue/tabpanels";import"primevue/tabs";import"primevue/iconfield";import"primevue/inputicon";import"primevue/badge";import"primevue/chip";import"primevue/tabpanel";import"primevue/select";import"primevue/toggleswitch";import"primevue/colorpicker";import"primevue/radiobutton";import"primevue/knob";import"primevue/slider";import"primevue/panel";import"primevue/tabmenu";import"primevue/popover";import"primevue/tab";import"primevue/tablist";import"primevue";import"@primevue/themes";import"@primevue/themes/aura";import"primevue/config";import"primevue/confirmationservice";import"primevue/toastservice";import"primevue/tooltip";import"primevue/multiselect";import"primevue/autocomplete";import"primevue/dropdown";import"./vendor-xterm-DV1MVhAx.js";import"./vendor-three-zdhtZbSm.js";import"primevue/galleria";import"primevue/tabview";import"primevue/contextmenu";import"primevue/tree";import"primevue/toolbar";import"primevue/selectbutton";import"primevue/dialog";import"primevue/confirmpopup";import"primevue/useconfirm";import"primevue/confirmdialog";import"./vendor-tiptap-D1RRboMA.js";import"primevue/blockui";const R=["aria-label"],j=1,G=$({__name:"BatchCountEdit",setup(_){const m=q(),{batchCount:n}=S(m),e=N(),y=c(()=>e.get("Comfy.QueueButton.BatchCountLimit")),i=u(r=>{let a;if(r){const s=n.value-1;a=Math.min(s*2,y.value)}else{const s=n.value+1;a=Math.floor(s/2)}n.value=a},"handleClick");return(r,a)=>{const s=T("tooltip");return f((l(),d("div",{class:"batch-count","aria-label":r.$t("menu.batchCount")},[v(t(L),{modelValue:t(n),"onUpdate:modelValue":a[0]||(a[0]=h=>D(n)?n.value=h:null),class:"w-14",min:j,max:y.value,fluid:"","show-buttons":"",pt:{incrementButton:{class:"w-6",onmousedown:u(()=>{i(!0)},"onmousedown")},decrementButton:{class:"w-6",onmousedown:u(()=>{i(!1)},"onmousedown")}}},null,8,["modelValue","max","pt"])],8,R)),[[s,{value:r.$t("menu.batchCount"),showDelay:600},void 0,{bottom:!0}]])}}}),O=x(G,[["__scopeId","data-v-19217ad4"]]),U={class:"queue-button-group flex"},Z={key:0,class:"icon-[lucide--list-start]"},A={key:1,class:"icon-[lucide--play]"},H={key:2,class:"icon-[lucide--fast-forward]"},J={key:3,class:"icon-[lucide--step-forward]"},X=$({__name:"ComfyQueueButton",setup(_){const m=W(),n=S(F()),{mode:e,batchCount:y}=S(q()),{t:i}=E(),r=c(()=>{const o={disabled:{key:"disabled",label:i("menu.run"),tooltip:i("menu.disabledTooltip"),command:u(()=>{e.value="disabled"},"command")},change:{key:"change",label:`${i("menu.run")} (${i("menu.onChange")})`,tooltip:i("menu.onChangeTooltip"),command:u(()=>{e.value="change"},"command")}};return o.instant={key:"instant",label:`${i("menu.run")} (${i("menu.instant")})`,tooltip:i("menu.instantTooltip"),command:u(()=>{e.value="instant"},"command")},o}),a=c(()=>r.value[e.value]||r.value.disabled),s=c(()=>Object.values(r.value)),h=c(()=>!!n.count.value),B=c(()=>n.count.value>1||e.value!=="disabled"),g=K(),P=u(async o=>{const p="shiftKey"in o&&o.shiftKey?"Comfy.QueuePromptFront":"Comfy.QueuePrompt";y.value>1,await g.execute(p,{metadata:{subscribe_to_run:!1,trigger_source:"button"}})},"queuePrompt");return(o,b)=>{const p=T("tooltip");return l(),d("div",U,[f((l(),I(t(z),{class:"comfyui-queue-button",label:String(a.value?.label??""),severity:"primary",size:"small",model:s.value,"data-testid":"queue-button",onClick:P},{icon:k(()=>[t(m).shiftDown?(l(),d("i",Z)):t(e)==="disabled"?(l(),d("i",A)):t(e)==="instant"?(l(),d("i",H)):t(e)==="change"?(l(),d("i",J)):M("",!0)]),item:k(({item:C})=>[f(v(t(w),{label:String(C.label??""),icon:C.icon,severity:C.key===t(e)?"primary":"secondary",size:"small",text:""},null,8,["label","icon","severity"]),[[p,{value:C.tooltip,showDelay:600}]])]),_:1},8,["label","model"])),[[p,{value:t(m).shiftDown?o.$t("menu.runWorkflowFront"):o.$t("menu.runWorkflow"),showDelay:600},void 0,{bottom:!0}]]),v(O),v(t(V),{class:"execution-actions flex flex-nowrap"},{default:k(()=>[f(v(t(w),{icon:"pi pi-times",severity:h.value?"danger":"secondary",disabled:!h.value,text:"","aria-label":o.$t("menu.interrupt"),onClick:b[0]||(b[0]=()=>t(g).execute("Comfy.Interrupt"))},null,8,["severity","disabled","aria-label"]),[[p,{value:o.$t("menu.interrupt"),showDelay:600},void 0,{bottom:!0}]]),f(v(t(w),{icon:"pi pi-stop",severity:B.value?"danger":"secondary",disabled:!B.value,text:"","aria-label":o.$t("sideToolbar.queueTab.clearPendingTasks"),onClick:b[1]||(b[1]=()=>{t(n).count.value>1&&t(g).execute("Comfy.ClearPendingTasks"),e.value="disabled"})},null,8,["severity","disabled","aria-label"]),[[p,{value:o.$t("sideToolbar.queueTab.clearPendingTasks"),showDelay:600},void 0,{bottom:!0}]])]),_:1})])}}}),de=x(X,[["__scopeId","data-v-1089c976"]]);export{de as default};
//# sourceMappingURL=ComfyQueueButton-DWjMQbeP.js.map
