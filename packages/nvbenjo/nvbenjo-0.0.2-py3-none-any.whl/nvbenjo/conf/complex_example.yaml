defaults:
  - default
  - _self_


nvbenjo:
  models:
    openai/whisper-small:
      type_or_path: huggingface:openai/whisper-small
      kwargs: {}
      shape: [
          {"name": "input_features", "shape": [B, 80, 3000], "min_max": [0, 1]},
          {"name": "decoder_input_ids", "shape": [B, 6], "value": 50258, "type": "long"},
          {"name": "attention_mask", "shape": [B, 6], "value": 1, "type": "long"},
        ]
      num_warmup_batches: 1
      num_batches: 10
      batch_sizes: [1, 8, 16]
      devices: ["cuda:0"]
      runtime_options:
        FP16:
          precision: FP16
          compile: false
        FP32:
          precision: FP32
          compile: false
        FP32_profiled:
          precision: FP32
          compile: false
          compile_kwargs: {dynamic: true}
          enable_profiling: true
          profiler_kwargs: {}
          profiling_prefix: "whisper_small_profile/whisper_small"
      
      custom_batchmetrics:
        # Define a custom metric that computes Real Time Factor (RTF)
        # 30s audio input -> 30 / time_total_batch_normalized
        real_time_factor: 30

    silero:
      type_or_path: ~/Downloads/silero_model_stt_v5.onnx
      shape:
        - {name: "input", shape: [B, 512], "type": "float", min_max: [0, 1]}
      num_warmup_batches: 5
      num_batches: 20
      batch_sizes: [1, 2]
      devices: ["cuda:0", "cpu"]
      runtime_options:
        default:
          intra_op_num_threads: 4
          inter_op_num_threads: 0
          graph_optimization_level: ORT_ENABLE_EXTENDED
          log_severity_level: 2
        profiled:
          intra_op_num_threads: 4
          inter_op_num_threads: 0
          graph_optimization_level: ORT_ENABLE_EXTENDED
          log_severity_level: 2
          enable_profiling: true
          profiling_prefix: "silero_profile/silero"
