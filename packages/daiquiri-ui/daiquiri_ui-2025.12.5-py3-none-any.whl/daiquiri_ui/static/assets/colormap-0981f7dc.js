import{aL as d,r as u,l as f}from"./index-4cf586ed.js";const x=d("daiquiri.components.h5web.colormap");var v=(t=>(t.Minmax="minmax",t.StdDev3="stddev3",t.None="none",t))(v||{});function g(t,a){const n=a;if(t==="minmax")return[n.min??0,n.max??1];if(t==="stddev3"){if(n.mean===null||n.std===null)return[n.min??0,n.max??1];const e=n.mean??0,i=n.std??0,r=n.min??e-i*10,o=n.max??e+i*10;return[Math.max(e-i*3,r),Math.min(e+i*3,o)]}throw new Error(`Unsupported autoscale ${t}`)}function h(t){u.useEffect(()=>{const a=t.statistics;if(a!==void 0&&t.autoscale)try{const n=g(t.autoscaleMode,a);t.setScaleDomain(n)}catch(n){const e=n instanceof Error?n.message:String(n);x(`Error while computing colormap level: ${e}`)}},[t.autoscale,t.autoscaleMode,t.setScaleDomain,t.statistics])}function S(t){const{values:a,bins:n}=t,e=n.data.map((s,c,l)=>c===0?0:.5*(s+l[c-1])).subarray(1),i=a.data,r=f.sum(i);let o=0;for(let s=0;s<e.length;s++)o+=i[s]*e[s];o/=r;let m=0;for(let s=0;s<e.length;s++)m+=i[s]*(e[s]-o)**2;return m/=r,[o,Math.sqrt(m)]}function E(t){return u.useMemo(()=>{if(!t)return;const[a,n]=S(t);return{min:t.bins.get(0),max:t.bins.get(t.bins.size-1),std:n,mean:a,minPositive:null}},[t])}export{v as A,E as a,h as u};
