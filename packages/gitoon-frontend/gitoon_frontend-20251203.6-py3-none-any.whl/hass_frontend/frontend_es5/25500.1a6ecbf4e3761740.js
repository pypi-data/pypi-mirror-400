"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["25500"],{18427:function(t,e,a){a.d(e,{g:function(){return o}});a(42762);var r=a(79468),n=a(39274);function o(t,e,a,o,i,s){var c=t.getPropertyValue(i+"-"+s).trim(),h=c.length>0?c:t.getPropertyValue(i).trim(),u=(0,r.RQ)(h);return 0===c.length&&s&&(u=(0,r.v2)((0,r.BE)(e?(0,n.T)((0,r.Nc)((0,r.xp)(u)),s):(0,n.d)((0,r.Nc)((0,r.xp)(u)),s)))),o?u+=a?"32":"7F":a&&(u+="7F"),u}},40345:function(t,e,a){a.a(t,async function(t,e){try{var r,n,o=a(72153),i=a(44734),s=a(43080),c=a(69683),h=a(6454),u=a(40445),d=a(96196),l=a(77845),p=a(34127),_=t([p]);p=(_.then?(await _)():_)[0];var f=function(t){function e(){return(0,i.A)(this,e),(0,c.A)(this,e,arguments)}return(0,h.A)(e,t),(0,s.A)(e,[{key:"render",value:function(){var t="energy-graph-chip-".concat(Date.now());return(0,d.qy)(r||(r=(0,o.A)([' <div class="chip" id="','"> <slot></slot> </div> <ha-tooltip for="','" placement="top">',"</ha-tooltip> "])),t,t,this.tooltip)}}])}(d.WF);f.styles=(0,d.AH)(n||(n=(0,o.A)([".chip{font-size:var(--ha-font-size-m);font-weight:var(--ha-font-weight-medium);padding:var(--ha-space-1) var(--ha-space-2);border-radius:var(--ha-border-radius-md);border:1px solid var(--divider-color)}"]))),(0,u.__decorate)([(0,l.MZ)({type:String})],f.prototype,"tooltip",void 0),f=(0,u.__decorate)([(0,l.EM)("hui-energy-graph-chip")],f),e()}catch(g){e(g)}})},62743:function(t,e,a){a.a(t,async function(t,r){try{a.r(e),a.d(e,{HuiEnergyWaterGraphCard:function(){return P}});var n,o,i,s,c=a(31432),h=a(61397),u=a(7739),d=a(50264),l=a(72153),p=a(44734),_=a(43080),f=a(69683),g=a(6454),y=(a(28706),a(2008),a(44114),a(72712),a(18111),a(22489),a(7588),a(18237),a(26099),a(23500),a(40445)),v=a(81859),m=a(40600),w=a(73684),k=a(96196),A=a(77845),b=a(94333),S=a(22786),x=a(18427),C=a(44439),D=(a(76776),a(38114)),E=a(23528),M=a(54706),z=a(784),T=a(97372),q=a(20058),H=a(40345),R=a(34127),F=t([C,H,R,D,q,T,E]);[C,H,R,D,q,T,E]=F.then?(await F)():F;var P=function(t){function e(){var t;(0,p.A)(this,e);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=(0,f.A)(this,e,[].concat(r)))._chartData=[],t._start=(0,v.R)(),t._end=(0,m.o)(),t.hassSubscribeRequiredHostProps=["_config"],t._formatTotal=function(e){return t.hass.localize("ui.panel.lovelace.cards.energy.energy_water_graph.total_consumed",{num:(0,q.ZV)(e,t.hass.locale),unit:t._unit})},t._createOptions=(0,S.A)(function(e,a,r,n,o,i,s){return(0,T.od)(e,a,r,n,o,i,s,t._formatTotal)}),t}return(0,g.A)(e,t),(0,_.A)(e,[{key:"hassSubscribe",value:function(){var t,e=this;return[(0,D.tb)(this.hass,{key:null===(t=this._config)||void 0===t?void 0:t.collection_key}).subscribe(function(t){return e._getStatistics(t)})]}},{key:"getCardSize",value:function(){return 3}},{key:"setConfig",value:function(t){this._config=t}},{key:"shouldUpdate",value:function(t){return(0,z.xP)(this,t)||t.size>1||!t.has("hass")}},{key:"render",value:function(){return this.hass&&this._config?(0,k.qy)(n||(n=(0,l.A)([' <ha-card> <div class="card-header"> <span>',"</span> ",' </div> <div class="content ','"> <ha-chart-base .hass="','" .data="','" .options="','" chart-type="bar"></ha-chart-base> '," </div> </ha-card> "])),this._config.title?this._config.title:k.s6,this._total?(0,k.qy)(o||(o=(0,l.A)(['<hui-energy-graph-chip .tooltip="','"> '," "," </hui-energy-graph-chip>"])),this._formatTotal(this._total),(0,q.ZV)(this._total,this.hass.locale),this._unit):k.s6,(0,b.H)({"has-header":!!this._config.title}),this.hass,this._chartData,this._createOptions(this._start,this._end,this.hass.locale,this.hass.config,this._unit,this._compareStart,this._compareEnd),this._chartData.length?"":(0,k.qy)(i||(i=(0,l.A)(['<div class="no-data"> '," </div>"])),(0,w.c)(this._start)?this.hass.localize("ui.panel.lovelace.cards.energy.no_data"):this.hass.localize("ui.panel.lovelace.cards.energy.no_data_period"))):k.s6}},{key:"_getStatistics",value:(a=(0,d.A)((0,h.A)().m(function t(e){var a,r,n,o,i,s;return(0,h.A)().w(function(t){for(;;)switch(t.n){case 0:this._start=e.start,this._end=e.end||(0,m.o)(),this._compareStart=e.startCompare,this._compareEnd=e.endCompare,a=e.prefs.energy_sources.filter(function(t){return"water"===t.type}),this._unit=e.waterUnit,r=[],n=getComputedStyle(this),e.statsCompare?r.push.apply(r,(0,u.A)(this._processDataSet(e.statsCompare,e.statsMetadata,a,n,!0))):(s=null!==(o=null===(i=a[0])||void 0===i?void 0:i.stat_energy_from)&&void 0!==o?o:"placeholder",r.push({id:"compare-"+s,type:"bar",stack:"water",data:[]})),r.push.apply(r,(0,u.A)(this._processDataSet(e.stats,e.statsMetadata,a,n))),(0,T.RR)(r),this._chartData=r,this._total=this._processTotal(e.stats,a);case 1:return t.a(2)}},t,this)})),function(t){return a.apply(this,arguments)})},{key:"_processTotal",value:function(t,e){return e.reduce(function(e,a){return e+(a.stat_energy_from in t?t[a.stat_energy_from].reduce(function(t,e){return t+(e.change||0)},0):0)},0)}},{key:"_processDataSet",value:function(t,e,a,r){var n=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=[],s=(0,T.ok)(this._start,this._compareStart);return a.forEach(function(a,h){var u=null,d=[];if(a.stat_energy_from in t){var l,p=t[a.stat_energy_from],_=(0,c.A)(p);try{for(_.s();!(l=_.n()).done;){var f=l.value;if(null!==f.change&&void 0!==f.change&&0!==f.change&&u!==f.start){var g=[f.start,f.change];o&&(g[2]=g[0],g[0]=s(new Date(f.start))),d.push(g),u=f.start}}}catch(y){_.e(y)}finally{_.f()}}i.push({type:"bar",cursor:"default",id:o?"compare-"+a.stat_energy_from:a.stat_energy_from,name:(0,E.$O)(n.hass,a.stat_energy_from,e[a.stat_energy_from]),barMaxWidth:50,itemStyle:{borderColor:(0,x.g)(r,n.hass.themes.darkMode,!1,o,"--energy-water-color",h)},color:(0,x.g)(r,n.hass.themes.darkMode,!0,o,"--energy-water-color",h),data:d,stack:o?"compare":"water"})}),i}}]);var a}((0,M.E)(k.WF));P.styles=(0,k.AH)(s||(s=(0,l.A)(["ha-card{height:100%}.card-header{display:flex;justify-content:space-between;align-items:center;padding-bottom:0}.content{padding:16px}.has-header{padding-top:0}.no-data{position:absolute;height:100%;top:0;left:0;right:0;display:flex;justify-content:center;align-items:center;padding:20%;margin-left:32px;margin-inline-start:32px;margin-inline-end:initial;box-sizing:border-box}"]))),(0,y.__decorate)([(0,A.MZ)({attribute:!1})],P.prototype,"hass",void 0),(0,y.__decorate)([(0,A.wk)()],P.prototype,"_config",void 0),(0,y.__decorate)([(0,A.wk)()],P.prototype,"_chartData",void 0),(0,y.__decorate)([(0,A.wk)()],P.prototype,"_start",void 0),(0,y.__decorate)([(0,A.wk)()],P.prototype,"_end",void 0),(0,y.__decorate)([(0,A.wk)()],P.prototype,"_compareStart",void 0),(0,y.__decorate)([(0,A.wk)()],P.prototype,"_compareEnd",void 0),(0,y.__decorate)([(0,A.wk)()],P.prototype,"_unit",void 0),(0,y.__decorate)([(0,A.wk)()],P.prototype,"_total",void 0),P=(0,y.__decorate)([(0,A.EM)("hui-energy-water-graph-card")],P),r()}catch(V){r(V)}})},43382:function(t,e,a){a.d(e,{A:function(){return n}});var r=a(51039);function n(t){return(0,r.w)(t,Date.now())}},83309:function(t,e,a){a.d(e,{r:function(){return i}});var r=a(78261),n=a(74816),o=a(35932);function i(t,e,a){var i=(0,n.x)(null==a?void 0:a.in,t,e),s=(0,r.A)(i,2),c=s[0],h=s[1];return+(0,o.o)(c)===+(0,o.o)(h)}},73684:function(t,e,a){a.d(e,{c:function(){return i}});var r=a(51039),n=a(43382),o=a(83309);function i(t,e){return(0,o.r)((0,r.w)((null==e?void 0:e.in)||t,t),(0,n.A)((null==e?void 0:e.in)||t))}}}]);
//# sourceMappingURL=25500.1a6ecbf4e3761740.js.map