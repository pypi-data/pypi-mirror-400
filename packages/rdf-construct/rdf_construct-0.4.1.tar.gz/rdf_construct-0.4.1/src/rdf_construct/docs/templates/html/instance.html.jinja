{% extends "base.html.jinja" %}

{% block title %}{{ instance_info.label or instance_info.qname }} - {{ ontology.title or "Documentation" }}{% endblock %}

{% block content %}
<article class="entity-card">
    <h1>{{ instance_info.label or instance_info.qname }} <span class="entity-type instance">Instance</span></h1>
    <p class="uri">{{ instance_info.uri }}</p>

    {% if instance_info.definition %}
    <p class="definition">{{ instance_info.definition }}</p>
    {% endif %}

    {% if instance_info.types %}
    <section class="section">
        <h3>Types</h3>
        <ul class="entity-list">
            {% for uri in instance_info.types %}
            <li>
                {% set found = namespace(value=false) %}
                {% for c in classes %}
                    {% if c.uri|string == uri|string %}
                    <a href="{{ c.qname | entity_url('class') }}">{{ c.label or c.qname }}</a>
                    {% set found.value = true %}
                    {% endif %}
                {% endfor %}
                {% if not found.value %}
                <code>{{ uri }}</code>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    </section>
    {% endif %}

    {% if instance_info.properties %}
    <section class="section">
        <h3>Properties</h3>
        <table>
            <thead>
                <tr>
                    <th>Property</th>
                    <th>Value</th>
                </tr>
            </thead>
            <tbody>
                {% for pred, values in instance_info.properties.items() %}
                {% for value in values %}
                <tr>
                    <td><code>{{ pred }}</code></td>
                    <td>
                        {% if value is string %}
                        {{ value }}
                        {% else %}
                        <code>{{ value }}</code>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
                {% endfor %}
            </tbody>
        </table>
    </section>
    {% endif %}

    {% if instance_info.annotations %}
    <section class="section">
        <h3>Annotations</h3>
        <table>
            <thead>
                <tr>
                    <th>Property</th>
                    <th>Value</th>
                </tr>
            </thead>
            <tbody>
                {% for name, values in instance_info.annotations.items() %}
                {% for value in values %}
                <tr>
                    <td><code>{{ name }}</code></td>
                    <td>{{ value }}</td>
                </tr>
                {% endfor %}
                {% endfor %}
            </tbody>
        </table>
    </section>
    {% endif %}
</article>
{% endblock %}
