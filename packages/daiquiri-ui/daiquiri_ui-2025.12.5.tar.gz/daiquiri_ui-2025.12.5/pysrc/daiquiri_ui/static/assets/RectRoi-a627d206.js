import{r as F,j as t}from"./index-4cf586ed.js";import{A as S}from"./Anchor-f3716b7b.js";import{D as E,S as L,a as w,A as D}from"./DraggableRect-8e897252.js";import{S as I}from"./ScreenScale-fdd43179.js";function M(n){const{geometry:e,lineWidth:d=2,color:h="blue",opacity:r=1,zIndex:x=1,visible:G=!0,readOnly:c=n.onGeometryChanged===void 0}=n,{y:l,x1:g,x2:m}=e,[f,u]=F.useState(!1),C=Math.abs(g-m),b=(g+m)*.5;return G?t.jsxs("group",{position:[b,l,x],children:[t.jsx(I,{scaleX:!1,children:t.jsx(E,{pos:[0,l],size:[C,L],pointer:"ns-resize",zIndex:x+w,enabled:!c,onPositionChanged:(z,v)=>{var j;(j=n.onGeometryChanged)==null||j.call(n,{y:z[1]},v)},onEnter:()=>{u(!0)},onLeave:()=>{u(!1)}})}),t.jsx("group",{children:t.jsx(I,{scaleX:!1,children:t.jsxs("mesh",{children:[t.jsx("ambientLight",{}),t.jsx("planeGeometry",{attach:"geometry",args:[C,f?D:d,1,1]}),t.jsx("meshBasicMaterial",{attach:"material",transparent:!0,color:h,opacity:r})]})})})]}):t.jsx(t.Fragment,{})}function R(n){const{geometry:e,lineWidth:d=2,color:h="blue",opacity:r=1,zIndex:x=1,visible:G=!0,readOnly:c=n.onGeometryChanged===void 0}=n,[l,g]=F.useState(!1),{x:m,y1:f,y2:u}=e,C=Math.abs(f-u),b=(f+u)*.5;return G?t.jsxs("group",{position:[m,b,x],children:[t.jsx(I,{scaleY:!1,children:t.jsx(E,{pos:[m,0],size:[L,C],pointer:"ew-resize",zIndex:x+w,enabled:!c,onPositionChanged:(z,v)=>{var j;(j=n.onGeometryChanged)==null||j.call(n,{x:z[0]},v)},onEnter:()=>{g(!0)},onLeave:()=>{g(!1)}})}),t.jsx("group",{children:t.jsx(I,{scaleY:!1,children:t.jsxs("mesh",{children:[t.jsx("ambientLight",{}),t.jsx("planeGeometry",{attach:"geometry",args:[l?D:d,C,1,1]}),t.jsx("meshBasicMaterial",{attach:"material",transparent:!0,color:h,opacity:r})]})})})]}):t.jsx(t.Fragment,{})}function Z(n){const{geometry:e,lineWidth:d=2,color:h="blue",opacity:r=1,zIndex:x=1,visible:G=!0,readOnly:c=n.onGeometryChanged===void 0}=n;if(!G)return t.jsx(t.Fragment,{});const l=e.x1<e.x2==e.y1<e.y2,g=l?"nesw-resize":"nwse-resize",m=l?"nwse-resize":"nesw-resize";function f(o,i){var s;const{x:y,y:a}=o;(s=n.onGeometryChanged)==null||s.call(n,{...e,x1:y,y1:a},i)}function u(o,i){var s;const{x:y,y:a}=o;(s=n.onGeometryChanged)==null||s.call(n,{...e,x1:y,y2:a},i)}function C(o,i){var s;const{x:y,y:a}=o;(s=n.onGeometryChanged)==null||s.call(n,{...e,x2:y,y1:a},i)}function b(o,i){var s;const{x:y,y:a}=o;(s=n.onGeometryChanged)==null||s.call(n,{...e,x2:y,y2:a},i)}function z(o,i){var a;const{x:y}=o;(a=n.onGeometryChanged)==null||a.call(n,{...e,x1:y},i)}function v(o,i){var a;const{x:y}=o;(a=n.onGeometryChanged)==null||a.call(n,{...e,x2:y},i)}function j(o,i){var a;const{y}=o;(a=n.onGeometryChanged)==null||a.call(n,{...e,y1:y},i)}function N(o,i){var a;const{y}=o;(a=n.onGeometryChanged)==null||a.call(n,{...e,y2:y},i)}function T(o,i){var A;const{x1:y,x2:a,y1:s,y2:X}=e;(A=n.onGeometryChanged)==null||A.call(n,{x1:o[0],y1:o[1],x2:o[0]+(a-y),y2:o[1]+(X-s)},i)}const W=(e.x1+e.x2)*.5,_=(e.y1+e.y2)*.5,H=Math.abs(e.x1-e.x2),O=Math.abs(e.y1-e.y2);return t.jsxs(t.Fragment,{children:[t.jsx(E,{pos:[e.x1,e.y1],displayPos:[W,_],size:[H,O],pointer:"move",zIndex:x,enabled:!c,onPositionChanged:T}),t.jsx(M,{geometry:{y:e.y1,x1:e.x1,x2:e.x2},zIndex:x,color:h,opacity:r,readOnly:c,lineWidth:d,onGeometryChanged:j}),t.jsx(M,{geometry:{y:e.y2,x1:e.x1,x2:e.x2},zIndex:x,color:h,opacity:r,readOnly:c,lineWidth:d,onGeometryChanged:N}),t.jsx(R,{geometry:{x:e.x1,y1:e.y1,y2:e.y2},zIndex:x,color:h,opacity:r,readOnly:c,lineWidth:d,onGeometryChanged:z}),t.jsx(R,{geometry:{x:e.x2,y1:e.y1,y2:e.y2},zIndex:x,color:h,opacity:r,readOnly:c,lineWidth:d,onGeometryChanged:v}),!c&&t.jsxs(t.Fragment,{children:[t.jsx(S,{geometry:{x:e.x1,y:e.y1},pointer:g,zIndex:x,color:h,opacity:r,readOnly:c,onGeometryChanged:f}),t.jsx(S,{geometry:{x:e.x1,y:e.y2},pointer:m,zIndex:x,color:h,opacity:r,readOnly:c,onGeometryChanged:u}),t.jsx(S,{geometry:{x:e.x2,y:e.y1},pointer:m,zIndex:x,color:h,opacity:r,readOnly:c,onGeometryChanged:C}),t.jsx(S,{geometry:{x:e.x2,y:e.y2},pointer:g,zIndex:x,color:h,opacity:r,readOnly:c,onGeometryChanged:b})]})]})}export{Z as R};
