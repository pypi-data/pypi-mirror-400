$(document).ready(()=>{'use strict';const t=afatSettings.permissions.addFatLink||afatSettings.permissions.manageAfat,e=[{data:'fleet_name'},{data:'fleet_type'},{data:'doctrine'},{data:'creator_name'},{data:{display:t=>_dateRender(t.fleet_time.time),sort:t=>t.fleet_time.timestamp}},{data:'fats_number'}];t&&e.push({data:'actions'});const a=[{targets:[4,5],columnControl:_removeSearchFromColumnControl()}];t&&a.splice(1,0,{target:6,createdCell:t=>{$(t).addClass('text-end')},columnControl:_removeColumnControl(),orderable:!1,width:125});const o=$('#link-list'),n=6e4;let r=Date.now()+n;const l=t=>{new DataTable(o,{...afatSettings.dataTables,data:t,columns:e,columnDefs:a,order:[[4,'desc']]})},i=()=>{const t=Date.now()-r;if(t>n){const t=window.location.pathname+window.location.search+window.location.hash;if(t.startsWith('/'))return void window.location.replace(t);console.error('Invalid redirect URL')}fetchGet({url:afatSettings.url.linkList}).then(t=>{o.DataTable().clear().rows.add(t).draw()}).catch(t=>{console.error('Error fetching updated data:',t)}),r+=n,setTimeout(i,Math.max(0,n-t))};fetchGet({url:afatSettings.url.linkList}).then(t=>{l(t),setTimeout(i,n)}).catch(t=>{console.error('Error fetching link list:',t)}),[afatSettings.modal.cancelEsiFleetModal.element,afatSettings.modal.deleteFatLinkModal.element].forEach(t=>{_manageModal($(t))})});
//# sourceMappingURL=afat-fatlist.min.js.map