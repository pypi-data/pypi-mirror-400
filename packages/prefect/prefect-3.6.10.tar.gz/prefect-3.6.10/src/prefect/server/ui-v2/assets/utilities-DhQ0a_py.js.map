{"version":3,"file":"utilities-DhQ0a_py.js","sources":["../../src/components/ui/json-view.tsx","../../src/components/events/event-resource-display/resource-types.ts","../../src/components/events/event-resource-display/resource-routes.ts","../../src/components/events/event-resource-display/event-resource-link.tsx","../../src/components/events/event-resource-display/resource-displays.tsx","../../src/components/events/event-resource-display/resolved-resource-display.tsx","../../src/components/events/event-resource-display/event-resource-display.tsx","../../src/components/events/events-timeline/utilities.ts"],"sourcesContent":["import type * as React from \"react\";\nimport { cn } from \"@/utils\";\nimport { LazyJsonInput as JsonInput } from \"./json-input-lazy\";\n\ntype JsonViewProps = Omit<\n\tReact.ComponentProps<typeof JsonInput>,\n\t\"onChange\" | \"onBlur\" | \"disabled\"\n> & {\n\tvalue?: string;\n\tclassName?: string;\n\thideLineNumbers?: boolean;\n\tcopy?: boolean;\n};\n\nexport function JsonView({\n\tvalue,\n\tclassName,\n\thideLineNumbers = true,\n\tcopy = true,\n\t...props\n}: JsonViewProps) {\n\treturn (\n\t\t<JsonInput\n\t\t\tvalue={value}\n\t\t\tdisabled={true}\n\t\t\thideLineNumbers={hideLineNumbers}\n\t\t\tcopy={copy}\n\t\t\tclassName={cn(\"bg-muted/50\", className)}\n\t\t\t{...props}\n\t\t/>\n\t);\n}\n","import type { IconId } from \"@/components/ui/icons\";\n\nexport type ResourceType =\n\t| \"flow-run\"\n\t| \"task-run\"\n\t| \"deployment\"\n\t| \"flow\"\n\t| \"work-pool\"\n\t| \"work-queue\"\n\t| \"automation\"\n\t| \"block-document\"\n\t| \"concurrency-limit\"\n\t| \"unknown\";\n\nexport const RESOURCE_ICONS: Record<ResourceType, IconId> = {\n\t\"flow-run\": \"Play\",\n\t\"task-run\": \"Cog\",\n\tdeployment: \"Rocket\",\n\tflow: \"Workflow\",\n\t\"work-pool\": \"Server\",\n\t\"work-queue\": \"ListOrdered\",\n\tautomation: \"Zap\",\n\t\"block-document\": \"Box\",\n\t\"concurrency-limit\": \"Gauge\",\n\tunknown: \"Circle\",\n};\n\nexport const RESOURCE_TYPE_LABELS: Record<ResourceType, string> = {\n\t\"flow-run\": \"Flow run\",\n\t\"task-run\": \"Task run\",\n\tflow: \"Flow\",\n\tdeployment: \"Deployment\",\n\t\"work-pool\": \"Work pool\",\n\t\"work-queue\": \"Work queue\",\n\tautomation: \"Automation\",\n\t\"block-document\": \"Block document\",\n\t\"concurrency-limit\": \"Concurrency limit\",\n\tunknown: \"Resource\",\n};\n\n/**\n * Parses a Prefect resource ID to determine its type.\n * Resource IDs follow the format: prefect.{resource-type}.{uuid}\n *\n * @param resourceId - The full resource ID string (e.g., \"prefect.flow-run.abc-123\")\n * @returns The parsed ResourceType, or \"unknown\" if the format is unrecognized\n */\nexport function parseResourceType(resourceId: string): ResourceType {\n\tif (!resourceId || typeof resourceId !== \"string\") {\n\t\treturn \"unknown\";\n\t}\n\n\tif (resourceId.startsWith(\"prefect.flow-run.\")) {\n\t\treturn \"flow-run\";\n\t}\n\tif (resourceId.startsWith(\"prefect.task-run.\")) {\n\t\treturn \"task-run\";\n\t}\n\tif (resourceId.startsWith(\"prefect.deployment.\")) {\n\t\treturn \"deployment\";\n\t}\n\tif (resourceId.startsWith(\"prefect.flow.\")) {\n\t\treturn \"flow\";\n\t}\n\tif (resourceId.startsWith(\"prefect.work-pool.\")) {\n\t\treturn \"work-pool\";\n\t}\n\tif (resourceId.startsWith(\"prefect.work-queue.\")) {\n\t\treturn \"work-queue\";\n\t}\n\tif (resourceId.startsWith(\"prefect.automation.\")) {\n\t\treturn \"automation\";\n\t}\n\tif (resourceId.startsWith(\"prefect.block-document.\")) {\n\t\treturn \"block-document\";\n\t}\n\tif (resourceId.startsWith(\"prefect.concurrency-limit.\")) {\n\t\treturn \"concurrency-limit\";\n\t}\n\n\treturn \"unknown\";\n}\n\n/**\n * Extracts the resource identifier from a Prefect resource ID.\n * Resource IDs follow the format: prefect.{resource-type}.{uuid}\n *\n * @param prefectResourceId - The full resource ID string (e.g., \"prefect.flow-run.abc-123\")\n * @returns The extracted ID portion (e.g., \"abc-123\"), or null if the format is invalid\n */\nexport function extractResourceId(prefectResourceId: string): string | null {\n\tif (!prefectResourceId || typeof prefectResourceId !== \"string\") {\n\t\treturn null;\n\t}\n\n\tconst parts = prefectResourceId.split(\".\");\n\tif (parts.length < 3) {\n\t\treturn null;\n\t}\n\n\t// Join parts after index 1 (skip \"prefect\" and resource type)\n\treturn parts.slice(2).join(\".\");\n}\n","import type { components } from \"@/api/prefect\";\nimport { extractResourceId, parseResourceType } from \"./resource-types\";\n\ntype RelatedResource = components[\"schemas\"][\"RelatedResource\"];\n\nexport type ResourceRouteConfig = {\n\tto: string;\n\tparams: Record<string, string>;\n};\n\nfunction getResourceName(resource: RelatedResource): string | null {\n\treturn (\n\t\tresource[\"prefect.resource.name\"] ||\n\t\tresource[\"prefect.name\"] ||\n\t\tresource[\"prefect-cloud.name\"] ||\n\t\tnull\n\t);\n}\n\nfunction findWorkPoolInRelated(\n\trelatedResources: RelatedResource[],\n): RelatedResource | null {\n\tfor (const resource of relatedResources) {\n\t\tconst resourceId = resource[\"prefect.resource.id\"] || \"\";\n\t\tconst resourceType = parseResourceType(resourceId);\n\t\tif (resourceType === \"work-pool\") {\n\t\t\treturn resource;\n\t\t}\n\t}\n\treturn null;\n}\n\nexport function getResourceRoute(\n\tresource: RelatedResource,\n\trelatedResources: RelatedResource[] = [],\n): ResourceRouteConfig | null {\n\tconst resourceId = resource[\"prefect.resource.id\"] || \"\";\n\tconst resourceType = parseResourceType(resourceId);\n\tconst extractedId = extractResourceId(resourceId);\n\n\tif (!extractedId) {\n\t\treturn null;\n\t}\n\n\tswitch (resourceType) {\n\t\tcase \"flow-run\":\n\t\t\treturn {\n\t\t\t\tto: \"/runs/flow-run/$id\",\n\t\t\t\tparams: { id: extractedId },\n\t\t\t};\n\t\tcase \"task-run\":\n\t\t\treturn {\n\t\t\t\tto: \"/runs/task-run/$id\",\n\t\t\t\tparams: { id: extractedId },\n\t\t\t};\n\t\tcase \"deployment\":\n\t\t\treturn {\n\t\t\t\tto: \"/deployments/deployment/$id\",\n\t\t\t\tparams: { id: extractedId },\n\t\t\t};\n\t\tcase \"flow\":\n\t\t\treturn {\n\t\t\t\tto: \"/flows/flow/$id\",\n\t\t\t\tparams: { id: extractedId },\n\t\t\t};\n\t\tcase \"work-pool\": {\n\t\t\t// Work pools use name instead of id in the route\n\t\t\tconst workPoolName = getResourceName(resource) || extractedId;\n\t\t\treturn {\n\t\t\t\tto: \"/work-pools/work-pool/$workPoolName\",\n\t\t\t\tparams: { workPoolName },\n\t\t\t};\n\t\t}\n\t\tcase \"automation\":\n\t\t\treturn {\n\t\t\t\tto: \"/automations/automation/$id\",\n\t\t\t\tparams: { id: extractedId },\n\t\t\t};\n\t\tcase \"block-document\":\n\t\t\treturn {\n\t\t\t\tto: \"/blocks/block/$id\",\n\t\t\t\tparams: { id: extractedId },\n\t\t\t};\n\t\tcase \"concurrency-limit\":\n\t\t\treturn {\n\t\t\t\tto: \"/concurrency-limits/concurrency-limit/$id\",\n\t\t\t\tparams: { id: extractedId },\n\t\t\t};\n\t\tcase \"work-queue\": {\n\t\t\t// Work queues require both work pool name and queue name\n\t\t\t// Try to find the work pool in related resources\n\t\t\tconst workQueueName = getResourceName(resource);\n\t\t\tif (!workQueueName) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst workPool = findWorkPoolInRelated(relatedResources);\n\t\t\tif (!workPool) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst workPoolId = workPool[\"prefect.resource.id\"] || \"\";\n\t\t\tconst workPoolExtractedId = extractResourceId(workPoolId);\n\t\t\tconst workPoolName = getResourceName(workPool) || workPoolExtractedId;\n\t\t\tif (!workPoolName) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tto: \"/work-pools/work-pool/$workPoolName/queue/$workQueueName\",\n\t\t\t\tparams: { workPoolName, workQueueName },\n\t\t\t};\n\t\t}\n\t\tdefault:\n\t\t\treturn null;\n\t}\n}\n","import { Link } from \"@tanstack/react-router\";\nimport type { components } from \"@/api/prefect\";\nimport { getResourceRoute } from \"./resource-routes\";\n\ntype RelatedResource = components[\"schemas\"][\"RelatedResource\"];\n\ntype EventResourceLinkProps = {\n\tresource: RelatedResource;\n\trelatedResources?: RelatedResource[];\n\tchildren: React.ReactNode;\n\tclassName?: string;\n};\n\nexport function EventResourceLink({\n\tresource,\n\trelatedResources = [],\n\tchildren,\n\tclassName,\n}: EventResourceLinkProps) {\n\tconst routeConfig = getResourceRoute(resource, relatedResources);\n\n\tif (!routeConfig) {\n\t\treturn <span className={className}>{children}</span>;\n\t}\n\n\treturn (\n\t\t<Link to={routeConfig.to} params={routeConfig.params} className={className}>\n\t\t\t{children}\n\t\t</Link>\n\t);\n}\n","import { useSuspenseQuery } from \"@tanstack/react-query\";\nimport { buildGetAutomationQuery } from \"@/api/automations\";\nimport { buildGetBlockDocumentQuery } from \"@/api/block-documents\";\nimport { buildDeploymentDetailsQuery } from \"@/api/deployments\";\nimport { buildGetFlowRunDetailsQuery } from \"@/api/flow-runs\";\nimport { buildFLowDetailsQuery } from \"@/api/flows\";\nimport { buildGetConcurrencyLimitQuery } from \"@/api/task-run-concurrency-limits\";\nimport { buildGetTaskRunDetailsQuery } from \"@/api/task-runs\";\nimport { buildGetWorkPoolQuery } from \"@/api/work-pools\";\nimport { buildGetWorkQueueQuery } from \"@/api/work-queues\";\nimport { ResourceDisplayWithIcon } from \"./event-resource-display\";\n\ntype ResourceDisplayProps = {\n\tresourceId: string;\n\tclassName?: string;\n};\n\nexport function FlowRunResourceDisplay({\n\tresourceId,\n\tclassName,\n}: ResourceDisplayProps) {\n\tconst { data: flowRun } = useSuspenseQuery(\n\t\tbuildGetFlowRunDetailsQuery(resourceId),\n\t);\n\treturn (\n\t\t<ResourceDisplayWithIcon\n\t\t\tresourceType=\"flow-run\"\n\t\t\tdisplayText={flowRun.name ?? resourceId}\n\t\t\tclassName={className}\n\t\t/>\n\t);\n}\n\nexport function TaskRunResourceDisplay({\n\tresourceId,\n\tclassName,\n}: ResourceDisplayProps) {\n\tconst { data: taskRun } = useSuspenseQuery(\n\t\tbuildGetTaskRunDetailsQuery(resourceId),\n\t);\n\treturn (\n\t\t<ResourceDisplayWithIcon\n\t\t\tresourceType=\"task-run\"\n\t\t\tdisplayText={taskRun.name ?? resourceId}\n\t\t\tclassName={className}\n\t\t/>\n\t);\n}\n\nexport function DeploymentResourceDisplay({\n\tresourceId,\n\tclassName,\n}: ResourceDisplayProps) {\n\tconst { data: deployment } = useSuspenseQuery(\n\t\tbuildDeploymentDetailsQuery(resourceId),\n\t);\n\treturn (\n\t\t<ResourceDisplayWithIcon\n\t\t\tresourceType=\"deployment\"\n\t\t\tdisplayText={deployment.name}\n\t\t\tclassName={className}\n\t\t/>\n\t);\n}\n\nexport function FlowResourceDisplay({\n\tresourceId,\n\tclassName,\n}: ResourceDisplayProps) {\n\tconst { data: flow } = useSuspenseQuery(buildFLowDetailsQuery(resourceId));\n\treturn (\n\t\t<ResourceDisplayWithIcon\n\t\t\tresourceType=\"flow\"\n\t\t\tdisplayText={flow.name}\n\t\t\tclassName={className}\n\t\t/>\n\t);\n}\n\nexport function WorkPoolResourceDisplay({\n\tresourceId,\n\tclassName,\n}: ResourceDisplayProps) {\n\tconst { data: workPool } = useSuspenseQuery(\n\t\tbuildGetWorkPoolQuery(resourceId),\n\t);\n\treturn (\n\t\t<ResourceDisplayWithIcon\n\t\t\tresourceType=\"work-pool\"\n\t\t\tdisplayText={workPool.name}\n\t\t\tclassName={className}\n\t\t/>\n\t);\n}\n\nexport function WorkQueueResourceDisplay({\n\tresourceId,\n\tclassName,\n}: ResourceDisplayProps) {\n\tconst { data: workQueue } = useSuspenseQuery(\n\t\tbuildGetWorkQueueQuery(resourceId),\n\t);\n\treturn (\n\t\t<ResourceDisplayWithIcon\n\t\t\tresourceType=\"work-queue\"\n\t\t\tdisplayText={workQueue.name}\n\t\t\tclassName={className}\n\t\t/>\n\t);\n}\n\nexport function AutomationResourceDisplay({\n\tresourceId,\n\tclassName,\n}: ResourceDisplayProps) {\n\tconst { data: automation } = useSuspenseQuery(\n\t\tbuildGetAutomationQuery(resourceId),\n\t);\n\treturn (\n\t\t<ResourceDisplayWithIcon\n\t\t\tresourceType=\"automation\"\n\t\t\tdisplayText={automation.name}\n\t\t\tclassName={className}\n\t\t/>\n\t);\n}\n\nexport function BlockDocumentResourceDisplay({\n\tresourceId,\n\tclassName,\n}: ResourceDisplayProps) {\n\tconst { data: blockDocument } = useSuspenseQuery(\n\t\tbuildGetBlockDocumentQuery(resourceId),\n\t);\n\treturn (\n\t\t<ResourceDisplayWithIcon\n\t\t\tresourceType=\"block-document\"\n\t\t\tdisplayText={blockDocument.name ?? resourceId}\n\t\t\tclassName={className}\n\t\t/>\n\t);\n}\n\nexport function ConcurrencyLimitResourceDisplay({\n\tresourceId,\n\tclassName,\n}: ResourceDisplayProps) {\n\tconst { data: concurrencyLimit } = useSuspenseQuery(\n\t\tbuildGetConcurrencyLimitQuery(resourceId),\n\t);\n\treturn (\n\t\t<ResourceDisplayWithIcon\n\t\t\tresourceType=\"concurrency-limit\"\n\t\t\tdisplayText={concurrencyLimit.tag ?? resourceId}\n\t\t\tclassName={className}\n\t\t/>\n\t);\n}\n","import {\n\tAutomationResourceDisplay,\n\tBlockDocumentResourceDisplay,\n\tConcurrencyLimitResourceDisplay,\n\tDeploymentResourceDisplay,\n\tFlowResourceDisplay,\n\tFlowRunResourceDisplay,\n\tTaskRunResourceDisplay,\n\tWorkPoolResourceDisplay,\n\tWorkQueueResourceDisplay,\n} from \"./resource-displays\";\nimport type { ResourceType } from \"./resource-types\";\n\ntype ResolvedResourceDisplayProps = {\n\tresourceType: Exclude<ResourceType, \"unknown\">;\n\tresourceId: string;\n\tclassName?: string;\n};\n\nexport function ResolvedResourceDisplay({\n\tresourceType,\n\tresourceId,\n\tclassName,\n}: ResolvedResourceDisplayProps) {\n\tswitch (resourceType) {\n\t\tcase \"flow-run\":\n\t\t\treturn (\n\t\t\t\t<FlowRunResourceDisplay resourceId={resourceId} className={className} />\n\t\t\t);\n\t\tcase \"task-run\":\n\t\t\treturn (\n\t\t\t\t<TaskRunResourceDisplay resourceId={resourceId} className={className} />\n\t\t\t);\n\t\tcase \"deployment\":\n\t\t\treturn (\n\t\t\t\t<DeploymentResourceDisplay\n\t\t\t\t\tresourceId={resourceId}\n\t\t\t\t\tclassName={className}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase \"flow\":\n\t\t\treturn (\n\t\t\t\t<FlowResourceDisplay resourceId={resourceId} className={className} />\n\t\t\t);\n\t\tcase \"work-pool\":\n\t\t\treturn (\n\t\t\t\t<WorkPoolResourceDisplay\n\t\t\t\t\tresourceId={resourceId}\n\t\t\t\t\tclassName={className}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase \"work-queue\":\n\t\t\treturn (\n\t\t\t\t<WorkQueueResourceDisplay\n\t\t\t\t\tresourceId={resourceId}\n\t\t\t\t\tclassName={className}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase \"automation\":\n\t\t\treturn (\n\t\t\t\t<AutomationResourceDisplay\n\t\t\t\t\tresourceId={resourceId}\n\t\t\t\t\tclassName={className}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase \"block-document\":\n\t\t\treturn (\n\t\t\t\t<BlockDocumentResourceDisplay\n\t\t\t\t\tresourceId={resourceId}\n\t\t\t\t\tclassName={className}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase \"concurrency-limit\":\n\t\t\treturn (\n\t\t\t\t<ConcurrencyLimitResourceDisplay\n\t\t\t\t\tresourceId={resourceId}\n\t\t\t\t\tclassName={className}\n\t\t\t\t/>\n\t\t\t);\n\t\tdefault:\n\t\t\treturn null;\n\t}\n}\n","import { Suspense } from \"react\";\nimport type { Event } from \"@/api/events\";\nimport { Icon } from \"@/components/ui/icons\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { cn } from \"@/utils\";\nimport { EventResourceLink } from \"./event-resource-link\";\nimport { ResolvedResourceDisplay } from \"./resolved-resource-display\";\nimport {\n\textractResourceId,\n\tparseResourceType,\n\tRESOURCE_ICONS,\n\tRESOURCE_TYPE_LABELS,\n\ttype ResourceType,\n} from \"./resource-types\";\n\nexport type EventResourceDisplayProps = {\n\tevent: Event;\n\tclassName?: string;\n};\n\nfunction getResourceName(resource: Record<string, string>): string | null {\n\treturn (\n\t\tresource[\"prefect.resource.name\"] ||\n\t\tresource[\"prefect.name\"] ||\n\t\tresource[\"prefect-cloud.name\"] ||\n\t\tnull\n\t);\n}\n\nfunction getResourceId(resource: Record<string, string>): string {\n\treturn resource[\"prefect.resource.id\"] || \"\";\n}\n\ntype ResourceDisplayWithIconProps = {\n\tresourceType: ResourceType;\n\tdisplayText: string;\n\tclassName?: string;\n};\n\nexport function ResourceDisplayWithIcon({\n\tresourceType,\n\tdisplayText,\n\tclassName,\n}: ResourceDisplayWithIconProps) {\n\tconst iconId = RESOURCE_ICONS[resourceType];\n\tconst typeLabel = RESOURCE_TYPE_LABELS[resourceType];\n\n\treturn (\n\t\t<div className={cn(\"flex items-center gap-2\", className)}>\n\t\t\t{typeLabel && <span>{typeLabel}</span>}\n\t\t\t<Icon id={iconId} className=\"h-4 w-4 text-muted-foreground\" />\n\t\t\t<span>{displayText}</span>\n\t\t</div>\n\t);\n}\n\nexport function ResourceDisplaySkeleton() {\n\treturn (\n\t\t<div className=\"flex items-center gap-2\">\n\t\t\t<Skeleton className=\"h-4 w-4 rounded-full\" />\n\t\t\t<Skeleton className=\"h-4 w-24\" />\n\t\t</div>\n\t);\n}\n\nexport function EventResourceDisplay({\n\tevent,\n\tclassName,\n}: EventResourceDisplayProps) {\n\tconst resourceName = getResourceName(event.resource);\n\tconst prefectResourceId = getResourceId(event.resource);\n\tconst resourceType = parseResourceType(prefectResourceId);\n\tconst extractedId = extractResourceId(prefectResourceId);\n\n\t// If we have a resource name, display it with the appropriate icon\n\tif (resourceName) {\n\t\treturn (\n\t\t\t<div className={cn(\"flex flex-col gap-0.5\", className)}>\n\t\t\t\t<span className=\"text-sm font-medium\">Resource</span>\n\t\t\t\t<Suspense fallback={<ResourceDisplaySkeleton />}>\n\t\t\t\t\t<EventResourceLink\n\t\t\t\t\t\tresource={event.resource}\n\t\t\t\t\t\trelatedResources={event.related ?? []}\n\t\t\t\t\t\tclassName=\"hover:underline\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<ResourceDisplayWithIcon\n\t\t\t\t\t\t\tresourceType={resourceType}\n\t\t\t\t\t\t\tdisplayText={resourceName}\n\t\t\t\t\t\t\tclassName=\"text-sm\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</EventResourceLink>\n\t\t\t\t</Suspense>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// If we have an extracted ID but no name, try to fetch the resource name via API\n\tif (extractedId && resourceType !== \"unknown\") {\n\t\treturn (\n\t\t\t<div className={cn(\"flex flex-col gap-0.5\", className)}>\n\t\t\t\t<span className=\"text-sm font-medium\">Resource</span>\n\t\t\t\t<Suspense fallback={<ResourceDisplaySkeleton />}>\n\t\t\t\t\t<EventResourceLink\n\t\t\t\t\t\tresource={event.resource}\n\t\t\t\t\t\trelatedResources={event.related ?? []}\n\t\t\t\t\t\tclassName=\"hover:underline\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<ResolvedResourceDisplay\n\t\t\t\t\t\t\tresourceType={resourceType}\n\t\t\t\t\t\t\tresourceId={extractedId}\n\t\t\t\t\t\t\tclassName=\"text-sm\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</EventResourceLink>\n\t\t\t\t</Suspense>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// If we have an extracted ID but unknown type, show the ID with the icon\n\tif (extractedId) {\n\t\treturn (\n\t\t\t<div className={cn(\"flex flex-col gap-0.5\", className)}>\n\t\t\t\t<span className=\"text-sm font-medium\">Resource</span>\n\t\t\t\t<Suspense fallback={<ResourceDisplaySkeleton />}>\n\t\t\t\t\t<EventResourceLink\n\t\t\t\t\t\tresource={event.resource}\n\t\t\t\t\t\trelatedResources={event.related ?? []}\n\t\t\t\t\t\tclassName=\"hover:underline\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<ResourceDisplayWithIcon\n\t\t\t\t\t\t\tresourceType={resourceType}\n\t\t\t\t\t\t\tdisplayText={extractedId}\n\t\t\t\t\t\t\tclassName=\"text-sm text-muted-foreground font-mono\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</EventResourceLink>\n\t\t\t\t</Suspense>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// Fallback: show the raw resource ID if nothing else is available\n\tif (prefectResourceId) {\n\t\treturn (\n\t\t\t<div className={cn(\"flex flex-col gap-0.5\", className)}>\n\t\t\t\t<span className=\"text-sm font-medium\">Resource</span>\n\t\t\t\t<EventResourceLink\n\t\t\t\t\tresource={event.resource}\n\t\t\t\t\trelatedResources={event.related ?? []}\n\t\t\t\t\tclassName=\"hover:underline\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t<span className=\"font-mono text-xs\">{prefectResourceId}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</EventResourceLink>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// No resource information available\n\treturn (\n\t\t<div className={cn(\"flex flex-col gap-0.5\", className)}>\n\t\t\t<span className=\"text-sm font-medium\">Resource</span>\n\t\t\t<div className=\"text-sm text-muted-foreground\">\n\t\t\t\t<span className=\"text-muted-foreground\">Unknown</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { capitalize } from \"@/utils\";\n\n/**\n * Get event prefixes for filtering.\n * For example, \"prefect.flow-run.Completed\" returns:\n * [\"prefect.*\", \"prefect.flow-run.*\", \"prefect.flow-run.Completed\"]\n */\nexport function getEventPrefixes(eventName: string): string[] {\n\tconst prefixes: string[] = [];\n\tconst parts = eventName.split(\".\");\n\n\tfor (let i = 1; i < parts.length; i++) {\n\t\tconst prefix = parts.slice(0, i).join(\".\");\n\t\tprefixes.push(`${prefix}.*`);\n\t}\n\n\treturn [...prefixes, eventName];\n}\n\n/**\n * Format event label from event name.\n * For example, \"prefect.flow-run.Completed\" becomes \"Flow Run Completed\"\n */\nexport function formatEventLabel(eventName: string): string {\n\t// Remove prefect. or prefect-cloud. prefix\n\tlet label = eventName;\n\tif (label.startsWith(\"prefect.\")) {\n\t\tlabel = label.slice(8);\n\t} else if (label.startsWith(\"prefect-cloud.\")) {\n\t\tlabel = label.slice(14);\n\t}\n\n\t// Replace dashes and dots with spaces, then capitalize each word\n\treturn label\n\t\t.split(/[._-]/)\n\t\t.map((word) => capitalize(word.toLowerCase()))\n\t\t.join(\" \");\n}\n"],"names":["JsonView","value","className","hideLineNumbers","copy","props","jsx","JsonInput","cn","RESOURCE_ICONS","RESOURCE_TYPE_LABELS","parseResourceType","resourceId","extractResourceId","prefectResourceId","parts","getResourceName","resource","findWorkPoolInRelated","relatedResources","getResourceRoute","resourceType","extractedId","workQueueName","workPool","workPoolId","workPoolExtractedId","workPoolName","EventResourceLink","children","routeConfig","Link","FlowRunResourceDisplay","flowRun","useSuspenseQuery","buildGetFlowRunDetailsQuery","ResourceDisplayWithIcon","TaskRunResourceDisplay","taskRun","buildGetTaskRunDetailsQuery","DeploymentResourceDisplay","deployment","buildDeploymentDetailsQuery","FlowResourceDisplay","flow","buildFLowDetailsQuery","WorkPoolResourceDisplay","buildGetWorkPoolQuery","WorkQueueResourceDisplay","workQueue","buildGetWorkQueueQuery","AutomationResourceDisplay","automation","buildGetAutomationQuery","BlockDocumentResourceDisplay","blockDocument","buildGetBlockDocumentQuery","ConcurrencyLimitResourceDisplay","concurrencyLimit","buildGetConcurrencyLimitQuery","ResolvedResourceDisplay","getResourceId","displayText","iconId","typeLabel","Icon","ResourceDisplaySkeleton","jsxs","Skeleton","EventResourceDisplay","event","resourceName","Suspense","getEventPrefixes","eventName","prefixes","i","prefix","formatEventLabel","label","word","capitalize"],"mappings":"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"}