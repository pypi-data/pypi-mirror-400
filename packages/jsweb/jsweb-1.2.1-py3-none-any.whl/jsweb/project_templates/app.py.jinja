from jsweb import JsWebApp
from jsweb.admin import Admin
import config

# Import blueprints and models
from views import views_bp
from auth import auth_bp
from models import User

# Create the main application instance
app = JsWebApp(config=config)

# Create an Admin instance (but don't initialize it with the app yet)
admin = Admin()

# Register models with the admin interface
admin.register(User)
# admin.register(AnotherModel) # Add more models here

# Now, initialize the admin with the app. This will register the
# blueprint with all the routes that were just created.
admin.init_app(app)

# Register the other blueprints with the app
app.register_blueprint(views_bp)
app.register_blueprint(auth_bp)

# The `jsweb run` command will automatically find and run this `app` instance.
