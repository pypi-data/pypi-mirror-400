{"version":3,"file":"ws-well-D5WiDPAO.js","sources":["../../../.svelte-kit/adapter-node/chunks/ws-well.js"],"sourcesContent":["import \"clsx\";\nimport { o as onDestroy, a4 as List_details, a5 as Wall, a6 as Text_wrap_disabled, a7 as Wash_temperature_6, a8 as Table } from \"./vendor.js\";\nimport { w as workspace } from \"./workspace.js\";\nimport \"@sveltejs/kit/internal\";\nimport \"@sveltejs/kit/internal/server\";\nfunction Ws_well($$renderer, $$props) {\n  $$renderer.component(($$renderer2) => {\n    const API_BASE = \"http://localhost:6312\";\n    let selectedProject = null;\n    let selectedWell = null;\n    let lastFetchedProjectId = null;\n    let projectCache = /* @__PURE__ */ new Map();\n    let WsWellPlot = null;\n    let plotComponentLoaded = false;\n    async function fetchProjectDetails(id) {\n      if (String(lastFetchedProjectId) === String(id) && selectedProject?.wells) {\n        return;\n      }\n      if (projectCache.has(id)) {\n        selectedProject = projectCache.get(id);\n        lastFetchedProjectId = id;\n        return;\n      }\n      try {\n        if (!selectedProject || String(selectedProject.project_id) !== String(id)) {\n          selectedProject = { project_id: id, name: selectedProject?.name };\n        }\n        const res = await fetch(`${API_BASE}/quick_pp/database/projects/${id}/wells`);\n        if (res.ok) {\n          const data = await res.json();\n          selectedProject = { ...selectedProject, ...data || {} };\n          projectCache.set(id, selectedProject);\n          lastFetchedProjectId = id;\n        }\n      } catch (err) {\n        console.warn(\"Failed to fetch project wells\", err);\n      } finally {\n      }\n    }\n    let previousProjectId = null;\n    const unsubscribe = workspace.subscribe((w) => {\n      if (w && w.project && w.project.project_id) {\n        const currentProjectId = w.project.project_id;\n        if (String(previousProjectId) !== String(currentProjectId)) {\n          selectedProject = { ...w.project };\n          fetchProjectDetails(currentProjectId);\n          previousProjectId = currentProjectId;\n        }\n      } else {\n        selectedProject = null;\n        previousProjectId = null;\n      }\n      if (w?.selectedWell && !plotComponentLoaded) {\n        import(\"./WsWellPlot.js\").then((module) => {\n          WsWellPlot = module.default;\n          plotComponentLoaded = true;\n        });\n      }\n      selectedWell = w?.selectedWell ?? null;\n    });\n    onDestroy(() => unsubscribe());\n    $$renderer2.push(`<div class=\"project-workspace p-4\">`);\n    if (selectedProject) {\n      $$renderer2.push(\"<!--[-->\");\n      $$renderer2.push(`<div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\"><div class=\"col-span-1\"><div class=\"bg-panel rounded p-4\">`);\n      if (selectedWell) {\n        $$renderer2.push(\"<!--[-->\");\n        $$renderer2.push(`<div class=\"mt-4\"><div class=\"font-semibold\">Well Workspace</div> <nav class=\"mt-2 flex flex-col gap-2\"><button class=\"w-full text-left flex items-center gap-3 p-2 rounded hover:bg-muted/50 transition\" aria-label=\"Overview\"><span class=\"!size-5 text-muted-foreground\">`);\n        List_details($$renderer2, {});\n        $$renderer2.push(`<!----></span> <span>Data Overview</span></button> <button class=\"w-full text-left flex items-center gap-3 p-2 rounded hover:bg-muted/50 transition\" aria-label=\"Lithology and porosity\"><span class=\"!size-5 text-muted-foreground\">`);\n        Wall($$renderer2, {});\n        $$renderer2.push(`<!----></span> <span>Lithology &amp; Porosity</span></button> <button class=\"w-full text-left flex items-center gap-3 p-2 rounded hover:bg-muted/50 transition\" aria-label=\"Permeability\"><span class=\"!size-5 text-muted-foreground\">`);\n        Text_wrap_disabled($$renderer2, {});\n        $$renderer2.push(`<!----></span> <span>Permeability</span></button> <button class=\"w-full text-left flex items-center gap-3 p-2 rounded hover:bg-muted/50 transition\" aria-label=\"Saturation\"><span class=\"!size-5 text-muted-foreground\">`);\n        Wash_temperature_6($$renderer2, {});\n        $$renderer2.push(`<!----></span> <span>Saturation</span></button> <button class=\"w-full text-left flex items-center gap-3 p-2 rounded hover:bg-muted/50 transition\" aria-label=\"Reservoir summary\"><span class=\"!size-5 text-muted-foreground\">`);\n        Table($$renderer2, {});\n        $$renderer2.push(`<!----></span> <span>Reservoir Summary</span></button></nav></div>`);\n      } else {\n        $$renderer2.push(\"<!--[!-->\");\n      }\n      $$renderer2.push(`<!--]--></div></div> <div class=\"col-span-2\"><div class=\"bg-panel rounded p-4 min-h-[300px]\">`);\n      if (selectedWell) {\n        $$renderer2.push(\"<!--[-->\");\n        $$renderer2.push(`<div class=\"mt-3\">`);\n        if (plotComponentLoaded && WsWellPlot) {\n          $$renderer2.push(\"<!--[-->\");\n          $$renderer2.push(`<!---->`);\n          WsWellPlot?.($$renderer2, {\n            projectId: selectedProject.project_id,\n            wellName: selectedWell.name\n          });\n          $$renderer2.push(`<!---->`);\n        } else {\n          $$renderer2.push(\"<!--[!-->\");\n          $$renderer2.push(`<div class=\"text-center py-8\"><div class=\"text-sm text-muted-foreground\">Loading plot...</div></div>`);\n        }\n        $$renderer2.push(`<!--]--></div>`);\n      } else {\n        $$renderer2.push(\"<!--[!-->\");\n        $$renderer2.push(`<div class=\"text-center py-12\"><div class=\"font-semibold\">No well selected</div> <div class=\"text-sm text-muted-foreground mt-2\">Select a well on the left to view its logs and analysis.</div> <div class=\"mt-4\"><button class=\"btn btn-primary\">Open Projects</button></div></div>`);\n      }\n      $$renderer2.push(`<!--]--></div></div></div>`);\n    } else {\n      $$renderer2.push(\"<!--[!-->\");\n      $$renderer2.push(`<div class=\"bg-panel rounded p-6 text-center\"><div class=\"font-semibold\">No project selected</div> <div class=\"text-sm text-muted-foreground mt-2\">Select a project in the Projects workspace to begin well analysis.</div> <div class=\"mt-4\"><button class=\"btn btn-primary\">Open Projects</button></div></div>`);\n    }\n    $$renderer2.push(`<!--]--></div>`);\n  });\n}\nexport {\n  Ws_well as W\n};\n"],"names":[],"mappings":"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"}