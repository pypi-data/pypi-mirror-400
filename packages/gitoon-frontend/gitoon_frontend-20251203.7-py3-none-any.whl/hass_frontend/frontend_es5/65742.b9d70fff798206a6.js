"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["65742"],{16349:function(t,e,a){a.a(t,async function(t,n){try{a.r(e);var o,i,r=a(61397),s=a(50264),c=a(72153),d=a(44734),l=a(43080),h=a(69683),u=a(6454),p=a(25460),f=(a(16280),a(28706),a(23792),a(26099),a(47764),a(62953),a(3296),a(27208),a(48408),a(14603),a(47566),a(98721),a(40445)),_=a(96196),w=a(77845),b=a(80880),g=a(89300),v=(a(55148),a(92025)),y=a(33668),m=a(81619),k=t([g]);g=(k.then?(await k)():k)[0];var A=function(t){function e(){var t;(0,d.A)(this,e);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(t=(0,h.A)(this,e,[].concat(n)))._attached=!1,t._waiting=!1,t}return(0,u.A)(e,t),(0,l.A)(e,[{key:"connectedCallback",value:function(){(0,p.A)(e,"connectedCallback",this,3)([]),this._attached=!0}},{key:"disconnectedCallback",value:function(){(0,p.A)(e,"disconnectedCallback",this,3)([]),this._attached=!1}},{key:"render",value:function(){return this._attached&&this.stateObj?(0,_.qy)(o||(o=(0,c.A)([' <ha-camera-stream .hass="','" .stateObj="','" allow-exoplayer controls></ha-camera-stream> <div class="actions"> <ha-progress-button @click="','" .progress="','" .disabled="','" appearance="filled"> '," </ha-progress-button> </div> "])),this.hass,this.stateObj,this._downloadSnapshot,this._waiting,this.stateObj.state===v.Hh,this.hass.localize("ui.dialogs.more_info_control.camera.download_snapshot")):_.s6}},{key:"_downloadSnapshot",value:(a=(0,s.A)((0,r.A)().m(function t(e){var a,n,o,i,s,c,d,l;return(0,r.A)().w(function(t){for(;;)switch(t.p=t.n){case 0:return a=e.currentTarget,this._waiting=!0,t.p=1,t.n=2,this.hass.callApiRaw("GET","camera_proxy/".concat(this.stateObj.entity_id));case 2:if(n=t.v){t.n=3;break}throw new Error("No response from API");case 3:return o=n.headers.get("content-type"),i="image/png"===o?"png":"jpg",s=(new Date).toLocaleString(),c="snapshot_".concat((0,b.Y)(this.stateObj.entity_id),"_").concat(s,".").concat(i),t.n=4,n.blob();case 4:d=t.v,l=window.URL.createObjectURL(d),(0,y.R)(l,c),t.n=6;break;case 5:return t.p=5,t.v,this._waiting=!1,a.actionError(),(0,m.P)(this,{message:this.hass.localize("ui.dialogs.more_info_control.camera.failed_to_download")}),t.a(2);case 6:this._waiting=!1,a.actionSuccess();case 7:return t.a(2)}},t,this,[[1,5]])})),function(t){return a.apply(this,arguments)})}]);var a}(_.WF);A.styles=(0,_.AH)(i||(i=(0,c.A)([":host{display:block}.actions{width:100%;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-end;box-sizing:border-box;padding:16px;z-index:1;gap:var(--ha-space-2)}"]))),(0,f.__decorate)([(0,w.MZ)({attribute:!1})],A.prototype,"hass",void 0),(0,f.__decorate)([(0,w.MZ)({attribute:!1})],A.prototype,"stateObj",void 0),(0,f.__decorate)([(0,w.wk)()],A.prototype,"_attached",void 0),(0,f.__decorate)([(0,w.wk)()],A.prototype,"_waiting",void 0),customElements.define("more-info-camera",A),n()}catch(x){n(x)}})},33668:function(t,e,a){a.d(e,{h:function(){return i},R:function(){return o}});var n=a(37177),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=document.createElement("a");a.target="_blank",a.href=t,a.download=e,a.style.display="none",document.body.appendChild(a),a.dispatchEvent(new MouseEvent("click")),document.body.removeChild(a)},i=function(t){var e;return!function(t){return!!t.auth.external&&n.n}(t)||!(null===(e=t.auth.external)||void 0===e||!e.config.downloadFileSupported)}},37177:function(t,e,a){a.d(e,{n:function(){return n}});a(27495),a(90906);var n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}]);
//# sourceMappingURL=65742.b9d70fff798206a6.js.map