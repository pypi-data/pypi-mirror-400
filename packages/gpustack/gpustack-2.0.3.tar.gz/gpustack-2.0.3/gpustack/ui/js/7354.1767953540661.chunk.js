"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7354],{28565:function(e,n,t){var r=t(48305),a=t.n(r),i=t(53231),o=t(35421);n.Z=function(){var e=(0,i.useIntl)(),n=o.ZP.useMessage(),t=a()(n,2),r=t[0];t[1];return{getRuleMessage:function(n,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=r?e.formatMessage({id:t}):t,i=Array.isArray(n)?n:[n];return i.includes("select")&&i.includes("input")?e.formatMessage({id:"common.form.rule.selectInput"},{name:a}):i.includes("input")?e.formatMessage({id:"common.form.rule.input"},{name:a}):e.formatMessage({id:"common.form.rule.select"},{name:a})},showSuccess:function(n){r.success(n||e.formatMessage({id:"common.message.success"}))}}}},47703:function(e,n,t){var r,a=t(53649),i=t.n(a),o=t(92829),s=t(61326),l=(t(75271),t(67585)),u=t(52676),c=(0,l.ZP)(s.Z)(r||(r=i()(["\n  .ant-collapse-header {\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px !important;\n    padding-inline: 5px !important;\n    padding-block: 8px !important;\n    border-radius: var(--border-radius-base) !important;\n    font-size: 14px !important;\n    font-weight: 600 !important;\n\n    &:hover {\n      background-color: var(--ant-color-fill-tertiary) !important;\n    }\n  }\n\n  .ant-collapse-content-box {\n    padding-inline: 0 !important;\n    padding-block: 0 !important;\n  }\n  .ant-collapse-header-text {\n    display: flex;\n    align-items: center;\n    height: 24px;\n  }\n"])));n.Z=function(e){var n=e.items,t=e.activeKey,r=e.accordion,a=e.onChange;return(0,u.jsx)(c,{expandIconPosition:"start",bordered:!1,ghost:!0,accordion:r,activeKey:t,onChange:a,destroyOnHidden:!1,expandIcon:function(e){var n=e.isActive;return(0,u.jsx)(o.Z,{type:"icon-down",rotate:n?0:-90,style:{fontSize:"14px"}})},items:n})}},36768:function(e,n,t){t.d(n,{Z:function(){return P}});var r=t(53649),a=t.n(r),i=t(92900),o=t(87263),s=t(78634),l=t(53231),u=t(25466),c=t(35421),d=t(44868),m=t(79635),p=t(77789),f=t(75271),v=t(67585),g=t(78714),h=t(79312),b=t(15145),x=t(52676);s._m.config({monaco:p});var y,_,j,k="inmemory://model/config.yaml",w=(0,f.forwardRef)((function(e,n){var t=e.value,r=e.height,a=void 0===r?380:r,i=e.theme,o=void 0===i?"vs-dark":i,l=e.header,u=e.variant,c=void 0===u?"borderless":u,d=e.schema,m=e.placeholder,p=(0,f.useRef)(null),v=(0,f.useRef)(null),y=(0,f.useRef)(null),_=function(){p.current&&setTimeout((function(){var e,n;null===(e=p.current)||void 0===e||null===(n=e.getAction)||void 0===n||null===(n=n.call(e,"editor.action.formatDocument"))||void 0===n||n.run().then((function(){}))}),100)};return(0,f.useImperativeHandle)(n,(function(){return{format:function(){_()},getValue:function(){var e,n;return null===(e=p.current)||void 0===e||null===(n=e.getValue)||void 0===n?void 0:n.call(e)},setValue:function(e){var n,t;null===(n=p.current)||void 0===n||null===(t=n.setValue)||void 0===t||t.call(n,e)},dispose:function(){var e,n,t,r;null===(e=p.current)||void 0===e||null===(n=e.dispose)||void 0===n||n.call(e),null===(t=y.current)||void 0===t||null===(r=t.dispose)||void 0===r||r.call(t)},validate:function(){return t=null===(e=p.current)||void 0===e||null===(e=e.getModel())||void 0===e?void 0:e.uri,null===(n=v.current)||void 0===n?void 0:n.editor.getModelMarkers({resource:t});var e,n,t},editor:p.current}})),(0,f.useEffect)((function(){_()}),[t]),(0,x.jsx)(g.Z,{header:l,variant:c,children:(0,x.jsx)(s.ZP,{path:k,defaultPath:k,height:a,theme:o,className:"monaco-editor",defaultLanguage:"yaml",language:"yaml",value:t,options:{minimap:{enabled:!1},quickSuggestions:!0,suggestOnTriggerCharacters:!0,fontSize:14,scrollbar:{verticalScrollbarSize:6,horizontalScrollbarSize:6},placeholder:m},loading:(0,x.jsx)(h.Z,{style:{fontSize:24}}),beforeMount:function(e){var n=e.Uri.parse(k);(0,b.Q)(e,{hover:!1,schemas:[{uri:"http://example.com/schema-name.json",fileMatch:[n.toString()],schema:d}]})},onMount:function(e,n){p.current=e,v.current=n}})})})),Z=w,I=u.Z.Text;s._m.config({monaco:p});var M=v.ZP.div(y||(y=a()(["\n  min-height: ",";\n  position: relative;\n  border: 1px solid var(--ant-color-border);\n  border-radius: var(--ant-border-radius);\n  .monaco-editor .scroll-decoration {\n    box-shadow: none;\n  }\n"])),(function(e){var n=e.$minHeight;return"number"==typeof n?"".concat(n,"px"):n})),C=(0,v.ZP)(I)(_||(_=a()(["\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  padding: 4px 6px;\n  background-color: var(--ant-color-bg-elevated);\n  border-radius: 0 0 var(--ant-border-radius) var(--ant-border-radius);\n"]))),F=v.ZP.div(j||(j=a()(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 40px;\n  padding-inline: 10px;\n  font-size: 14px;\n  border-bottom: 1px solid var(--ant-color-border);\n  background-color: var(--ant-color-fill-tertiary);\n"]))),P=(0,f.forwardRef)((function(e,n){var t=e.value,r=e.height,a=void 0===r?380:r,s=e.variant,u=void 0===s?"borderless":s,p=e.schema,v=e.placeholder,g=e.validateMessage,h=e.title,b=e.onUpload,y=(0,l.useIntl)(),_=(0,i.Z)().userSettings,j=(0,f.useRef)(null),k=function(e){"application/x-yaml"===e.type||"text/yaml"===e.type||e.name.endsWith(".yaml")||e.name.endsWith(".yml")||c.ZP.error("You can only upload YAML file!");var n=new FileReader;return n.onload=function(e){var n,t,r,a,i=null===(n=e.target)||void 0===n?void 0:n.result;"string"==typeof i?(null==b||b(i),t=i,null===(r=j.current)||void 0===r||null===(a=r.setValue)||void 0===a||a.call(r,t)):c.ZP.error("Failed to read file content!")},n.readAsText(e),!1};return(0,f.useImperativeHandle)(n,(function(){return{format:function(){var e;null===(e=j.current)||void 0===e||e.format()},getValue:function(){var e,n;return null===(e=j.current)||void 0===e||null===(n=e.getValue)||void 0===n?void 0:n.call(e)},setValue:function(e){var n,t;null===(n=j.current)||void 0===n||null===(t=n.setValue)||void 0===t||t.call(n,e)},dispose:function(){var e,n;null===(e=j.current)||void 0===e||null===(n=e.dispose)||void 0===n||n.call(e)},validate:function(){var e;return null===(e=j.current)||void 0===e?void 0:e.validate()},editor:j.current}})),(0,f.useEffect)((function(){var e;null===(e=j.current)||void 0===e||e.format()}),[t]),(0,x.jsxs)(M,{$minHeight:a,children:[(0,x.jsx)(Z,{ref:j,header:(0,x.jsxs)(F,{children:[(0,x.jsx)("span",{className:"title",children:h||"YAML"}),(0,x.jsx)(d.Z,{name:"file",multiple:!1,beforeUpload:k,showUploadList:!1,accept:".yaml,.yml,text/yaml,application/x-yaml",children:(0,x.jsx)(m.ZP,{icon:(0,x.jsx)(o.Z,{}),type:"text",size:"small",children:y.formatMessage({id:"common.button.import"})})})]}),variant:u,height:a,theme:null!=_&&_.isDarkTheme?"vs-dark":"vs-light",value:t,placeholder:v,schema:p}),g&&(0,x.jsx)(C,{type:"danger",children:g})]})}))},20179:function(e,n,t){t.d(n,{RI:function(){return x},Ij:function(){return M},WJ:function(){return b},$x:function(){return I},h1:function(){return j},gP:function(){return Z},Ec:function(){return C},G7:function(){return w},CR:function(){return y},eN:function(){return _},ET:function(){return F}});var r=t(31759),a=t.n(r),i=t(82092),o=t.n(i),s=t(10885),l=t.p+"static/sglang.b6bdf611.png",u=t.p+"static/vllm.33a8b885.png",c=t.p+"static/voxbox.e5139272.png",d=t(10939),m=t(40562),p=t(76634),f=t(80487),v=t(32699),g=new f.ZP.Type("!seal",{kind:"sequence",construct:function(e){return e.map((function(e){return"seal".concat(e)}))}}),h=f.ZP.DEFAULT_SCHEMA.extend([g]),b=o()(o()(o()(o()({},m.sk.SGLang,l),m.sk.vllm,u),m.sk.ascendMindie,s),m.sk.voxBox,c),x=[{label:"common.button.edit",value:"edit",key:"edit",locale:!0,icon:d.Z.EditOutlined},{label:"backend.export.yaml",value:"yaml",key:"export",locale:!0,icon:d.Z.Yaml},{label:"common.button.delete",value:"delete",key:"delete",icon:d.Z.DeleteOutlined,locale:!0,danger:!0}],y=function(e){try{return e&&Object.keys(e).length?f.ZP.dump(JSON.parse(JSON.stringify(e))):""}catch(e){return""}},_=function(e){try{var n=(0,v.trim)(e),t=f.ZP.load(n,{schema:h});if("object"!==a()(t)||null===t)return{};var r=JSON.stringify(t);return JSON.parse(r)}catch(e){return{}}},j=["red","orange","gold","lime","volcano","green","magenta","cyan","purple","blue","geekblue"],k={cann:"orange",cuda:"green",rocm:"volcano",dtk:"magenta",musa:"cyan",corex:"purple",maca:"geekblue",neuware:"gold"},w=function(e){return e&&k[e]||"default"},Z=["âˆ‘","âˆ","âˆ«","âˆ‚","âˆž","Ï€","Î¸","âˆ†","âˆ‡","â‰¤","â‰¥"],I=["description","health_check_path","default_run_command","version_configs","default_backend_param"],M=["description","version_configs","default_backend_param"],C=[{label:"CUDA",value:p.Pb.NVIDIA,tips:p.Ho[p.Pb.NVIDIA],locale:!1},{label:"ROCm",value:p.Pb.AMD,tips:p.Ho[p.Pb.AMD],locale:!1},{label:"CANN",value:p.Pb.ASCEND,tips:p.Ho[p.Pb.ASCEND],tipLocale:!0},{label:"DTK",value:p.Pb.HYGON,tips:p.Ho[p.Pb.HYGON],tipLocale:!0},{label:"MACA",value:p.Pb.METAX,tips:p.Ho[p.Pb.METAX],tipLocale:!0},{label:"CoreX",value:p.Pb.ILUVATAR,tips:p.Ho[p.Pb.ILUVATAR],tipLocale:!0},{label:"MUSA",value:p.Pb.MOORE_THREADS,tips:p.Ho[p.Pb.MOORE_THREADS],tipLocale:!0},{label:"Neuware",value:p.Pb.CAMBRICON,tips:p.Ho[p.Pb.CAMBRICON],tipLocale:!0},{label:"CPU",value:"cpu"}],F="# ----------------------------------------\n# custom backend configuration template\n# ----------------------------------------\n# backend_name: \n#   - required\n#   - must be endwith '-custom'\n# version_configs:\n#   - image_name: required\n#   - run_command: optional\n#   - entrypoint: optional\n#   - custom_framework:\n#       - optional\n#       - choose from: ".concat(Object.values(p.Pb).join(", "),', CPU\n\nbackend_name: vllm-custom\ndescription: this is my custom vllm backend\ndefault_version: v0.11.0\nhealth_check_path: /v1/models\ndefault_backend_param:\n  - --host\ndefault_run_command: vllm serve {{model_path}} --port {{port}} --host {{worker_ip}} --served-model-name {{model_name}}\nversion_configs:\n  v0.11.0:\n    image_name: lm/vllm:latest\n    run_command: vllm serve {{model_path}} --port {{port}} --host {{worker_ip}} --served-model-name {{model_name}}\n    entrypoint: "/bin/sh -c"\n    custom_framework: cuda\n  v0.10.0:\n    image_name: lm/vllm:test\n    entrypoint: \n    run_command:\n    custom_framework:\n  ')},31246:function(e,n,t){t.d(n,{Z:function(){return H}});var r,a=t(26068),i=t.n(a),o=t(90228),s=t.n(o),l=t(87999),u=t.n(l),c=t(48305),d=t.n(c),m=t(51143),p=t(1452),f=t(91315),v=t(47703),g=t(20179),h=t(53231),b=t(26965),x=t(75271),y=t(73940),_=t(92829),j=t(36768),k=t(79635),w=JSON.parse('{"type":"object","properties":{"worker_config":{"type":"object","additionalProperties":false,"properties":{"debug":{"type":"boolean","description":"Enable debug mode"},"cache_dir":{"type":"string","description":"Cache directory path"},"log_dir":{"type":"string","description":"Log directory path"},"bin_dir":{"type":"string","description":"Binary directory path"},"system_default_container_registry":{"type":"string","description":"Default container registry"},"image_name_override":{"type":"string","description":"Override image name"},"image_repo":{"type":"string","description":"Container image repository"},"gateway_mode":{"type":"string","description":"Gateway mode","enum":["worker","gateway","disabled","auto"]},"gateway_kubeconfig":{"type":"string","description":"Path to kubeconfig used by gateway"},"gateway_concurrency":{"type":"integer","minimum":0,"description":"Gateway concurrency limit"},"service_discovery_name":{"type":"string","description":"Service discovery name"},"namespace":{"type":"string","description":"Kubernetes namespace"},"huggingface_token":{"type":"string","description":"Hugging Face access token"},"disable_worker_metrics":{"type":"boolean","description":"Disable worker metrics collection"},"worker_port":{"type":"integer","minimum":1,"maximum":65535,"description":"Worker service port"},"worker_metrics_port":{"type":"integer","minimum":1,"maximum":65535,"description":"Worker metrics port"},"service_port_range":{"type":"string","pattern":"^\\\\d+-\\\\d+$","description":"Service port range, e.g. 30000-31000"},"ray_port_range":{"type":"string","pattern":"^\\\\d+-\\\\d+$","description":"Ray port range, e.g. 20000-20100"},"resources":{"type":"object","description":"Additional resource definitions","additionalProperties":{}},"pipx_path":{"type":"string","description":"pipx installation path"},"tools_download_base_url":{"type":"string","description":"Base URL for downloading tools"},"enable_hf_transfer":{"type":"boolean","description":"Enable Hugging Face transfer acceleration"},"enable_hf_xet":{"type":"boolean","description":"Enable Hugging Face Xet support"},"proxy_mode":{"type":"string","enum":["worker","system","disabled"],"description":"Proxy mode"}}}}}'),Z='# This is a template for worker_config.\n\n# debug: false\n\n# ========= directories ===========\n\n# cache_dir: "/var/lib/gpustack/cache"\n# log_dir: "/var/lib/gpustack/log"\n# bin_dir: "/var/lib/gpustack/bin"\n\n# ========= container & image ===========\n\n# system_default_container_registry: "docker.io"\n# image_name_override: "gpustack/gpustack:main"\n# image_repo: "gpustack/gpustack"\n\n# ========= gateway ===========\n\n# gateway_mode: "auto"\n# gateway_concurrency: 16\n# gateway_kubeconfig: "/var/lib/gpustack/higress/kubeconfig"\n\n# ========= service & networking ===========\n\n# service_discovery_name: "worker"\n# namespace: "gpustack-system"\n# worker_port: 10150\n# worker_metrics_port: 10150\n# service_port_range: "40000-40063"\n# ray_port_range: "41000-41999"\n\n# ========= resources ===========\n\n# resources:\n\n# ========= huggingface ===========\n\n# huggingface_token: \n# enable_hf_transfer: false\n# enable_hf_xet: false\n\n# ========= metrics ===========\n\n# disable_worker_metrics: false\n\n# ========= tools & runtime ===========\n\n# pipx_path: "/usr/local/bin/pipx"\n# tools_download_base_url: \n\n# ========= proxy ===========\n\n# proxy_mode: worker\n',I=t(52676),M=(0,x.forwardRef)((function(e,n){e.action;var t=e.provider,r=b.Z.useForm(),a=(d()(r,1)[0],(0,h.useIntl)()),i=x.useRef(null),o=x.useState(Z),s=d()(o,2),l=s[0],u=s[1];return(0,x.useImperativeHandle)(n,(function(){return{getYamlValue:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.getValue()},setYamlValue:function(e){var n;null===(n=i.current)||void 0===n||n.setValue(e||Z)}}})),(0,I.jsxs)(I.Fragment,{children:[t!==y.dC.DigitalOcean&&(0,I.jsx)(b.Z.Item,{name:"server_url",rules:[{required:!1,message:""}],children:(0,I.jsx)(m.Z.Input,{description:a.formatMessage({id:"clusters.form.serverUrl.tips"}),label:a.formatMessage({id:"clusters.create.serverUrl"}),required:!1,trim:!0})}),(0,I.jsx)(b.Z.Item,{hidden:!0,name:"worker_config",rules:[{required:!1,message:""}],children:(0,I.jsx)(m.Z.TextArea,{required:!1,trim:!1})}),(0,I.jsx)(j.Z,{ref:i,title:(0,I.jsxs)("span",{className:"flex-center",children:[(0,I.jsx)("span",{children:"".concat(a.formatMessage({id:"clusters.create.workerConfig"})," YAML")}),(0,I.jsxs)(k.ZP,{size:"small",type:"link",target:"_blank",href:"https://docs.gpustack.ai/latest/cli-reference/start/#config-file",children:[a.formatMessage({id:"playground.audio.enablemic.doc"})," ",(0,I.jsx)(_.Z,{type:"icon-external-link",className:"font-size-14"})]})]}),value:l,height:300,onUpload:function(e){u(e)},schema:w}),(0,I.jsx)("div",{className:"scroller-to-holder",style:{height:1}})]})})),C=t(53649),F=t.n(C),P=t(32914),S=t(18385),V=t(28565),A=t(26447),R=t(32699),N=t.n(R),T=t(67585),E=t(66263),L=t(92086),O=T.ZP.div(r||(r=F()(["\n  display: flex;\n  align-items: center;\n  .label {\n    font-weight: 500;\n  }\n  .dot {\n    width: 4px;\n    height: 4px;\n    border-radius: 50%;\n    background: var(--ant-color-text);\n    margin: 0 8px;\n  }\n  .datacenter,\n  .value {\n    color: var(--ant-color-text-secondary);\n  }\n  .icon {\n    margin-right: 8px;\n  }\n"]))),q=function(){var e=(0,A.KO)(P.Vd),n=d()(e,2)[1],t=(0,h.useIntl)();return(0,I.jsx)(h.Link,{to:"/cluster-management/credentials",onClick:function(){n(!0)},children:t.formatMessage({id:"clusters.button.addCredential"})})},z=function(e){var n=e.value,t=e.data;return(0,I.jsxs)(O,{className:"flex-center",children:[(0,I.jsx)("span",{className:"icon",children:t.icon}),(0,I.jsx)("span",{className:"label",children:t.label})," ",(0,I.jsx)("span",{className:"dot"}),(0,I.jsx)("span",{className:"datacenter",children:t.datacenter})," ",(0,I.jsx)("span",{className:"dot"})," ",(0,I.jsx)("span",{className:"value",children:N().toUpper(n)})]})},D=function(e){var n=e.credentialList,t=e.action,r=e.credentialID,a=(0,h.useIntl)(),i=(0,E.u)().systemConfig,o=b.Z.useFormInstance(),l=(0,L.K)(),c=l.getRegions,d=l.getOSImages,p=l.updateOSImages,v=l.updateInstanceTypes,g=l.getInstanceTypes,y=l.setLoading,_=l.loading,j=l.regions,k=(0,V.Z)().getRuleMessage,w=function(){var e=u()(s()().mark((function e(n){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,Promise.all([d(n),g(n)]);case 3:return e.next=5,c(n);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,x.useEffect)((function(){r&&t!==f.Kd.CREATE&&c(r)}),[r]),(0,x.useEffect)((function(){o.setFieldValue("server_url",(null==i?void 0:i.server_external_url)||"")}),[i]);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(b.Z.Item,{name:"credential_id",rules:[{required:!0,message:k("input","clusters.credential.title")}],children:(0,I.jsx)(S.Z,{notFoundContent:(0,I.jsx)(q,{}),disabled:t===f.Kd.EDIT,label:a.formatMessage({id:"clusters.credential.title"}),required:!0,options:n,onChange:w})}),(0,I.jsx)(b.Z.Item,{name:"region",rules:[{required:!0,message:k("input","clusters.workerpool.region")}],children:(0,I.jsx)(S.Z,{showSearch:!0,disabled:t===f.Kd.EDIT,label:a.formatMessage({id:"clusters.workerpool.region"}),required:!0,options:j,loading:_,filterOption:function(e,n){return n.label.toLowerCase().includes(e.toLowerCase())||n.datacenter.toLowerCase().includes(e.toLowerCase())||n.value.toLowerCase().includes(e.toLowerCase())},labelRender:function(e){var n=j.find((function(n){return n.value===e.value}));return n?(0,I.jsxs)(O,{className:"flex-center",children:[(0,I.jsx)("span",{className:"icon",children:null==n?void 0:n.icon}),(0,I.jsx)("span",{className:"label",children:null==n?void 0:n.label})," ",(0,I.jsx)("span",{className:"dot"}),(0,I.jsx)("span",{className:"datacenter",children:null==n?void 0:n.datacenter})," ",(0,I.jsx)("span",{className:"dot"}),(0,I.jsx)("span",{className:"value",children:N().toUpper(null==n?void 0:n.value)})]}):e.label},optionRender:z,onChange:function(e){v(e),p(e)},notFoundContent:a.formatMessage({id:"clusters.create.noRegions"})})}),(0,I.jsx)(b.Z.Item,{name:"server_url",rules:[{required:!0,message:k("input","clusters.create.serverUrl")}],children:(0,I.jsx)(m.Z.Input,{description:a.formatMessage({id:"clusters.form.serverUrl.tips"}),label:a.formatMessage({id:"clusters.create.serverUrl"}),required:!0,trim:!0})})]})},U=(0,x.forwardRef)((function(e,n){var t=e.action,r=e.provider,a=e.currentData,o=e.credentialList,l=e.onFinish,c=b.Z.useForm(),_=d()(c,1)[0],j=(0,h.useIntl)(),k=x.useState([]),w=d()(k,2),Z=w[0],C=w[1],F=x.useRef(null),P=function(){var e=u()(s()().mark((function e(n){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(Array.isArray(n)?n:[n]);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,x.useEffect)((function(){var e;if(null!=Z&&null!==(e=Z.includes)&&void 0!==e&&e.call(Z,"advanceConfig")&&t===f.Kd.EDIT){var n=document.querySelector(".scroller-to-holder");if(!n)return;setTimeout((function(){n.scrollIntoView({behavior:"smooth"})}),300)}}),[Z,t]);return(0,x.useEffect)((function(){a&&_.setFieldsValue(a)}),[a]),(0,x.useEffect)((function(){if(a&&F.current){var e,n=(0,g.CR)(a.worker_config||{});null===(e=F.current)||void 0===e||e.setYamlValue(n)}}),[a,F.current]),(0,x.useImperativeHandle)(n,(function(){return{resetFields:function(){_.resetFields()},submit:function(){_.submit()},setFieldsValue:function(e){var n;_.setFieldsValue(i()(i()({},e),{},{worker_config:void 0}));var t=(0,g.CR)(e.worker_config||{});null===(n=F.current)||void 0===n||n.setYamlValue(t)},getFieldsValue:function(){var e,n=(0,g.eN)(null===(e=F.current)||void 0===e?void 0:e.getYamlValue());return i()(i()({},_.getFieldsValue()),{},{worker_config:i()({},n)})},validateFields:(e=u()(s()().mark((function e(){var n,t,r;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.validateFields();case 2:return t=e.sent,r=(0,g.eN)(null===(n=F.current)||void 0===n?void 0:n.getYamlValue()),e.abrupt("return",i()(i()({},t),{},{worker_config:i()({},r)}));case 5:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})};var e})),(0,I.jsxs)(b.Z,{name:"clusterForm",form:_,onFinish:function(e){var n,t=(0,g.eN)(null===(n=F.current)||void 0===n?void 0:n.getYamlValue());l(i()(i()({},e),{},{worker_config:i()({},t)}))},preserve:!1,scrollToFirstError:!0,initialValues:a,children:[(0,I.jsx)(b.Z.Item,{name:"name",rules:[{required:!0,message:j.formatMessage({id:"common.form.rule.input"},{name:j.formatMessage({id:"common.table.name"})})}],children:(0,I.jsx)(m.Z.Input,{label:j.formatMessage({id:"common.table.name"}),required:!0,trim:!1})}),r===y.dC.DigitalOcean&&(0,I.jsx)(D,{provider:r,action:t,credentialID:null==a?void 0:a.credential_id,credentialList:o}),(0,I.jsx)(b.Z.Item,{name:"description",rules:[{required:!1}],style:{marginBottom:8},children:(0,I.jsx)(p.Z,{autoSize:{minRows:2,maxRows:4},label:j.formatMessage({id:"common.table.description"})})}),(0,I.jsx)(v.Z,{accordion:!1,activeKey:Z,onChange:P,items:[{key:"advanceConfig",label:j.formatMessage({id:"resources.form.advanced"}),forceRender:!0,children:(0,I.jsx)(M,{action:t,provider:r,ref:F})}]})]})})),H=U},29032:function(e,n,t){t.d(n,{F:function(){return me},Z:function(){return ve}});var r,a,i=t(90228),o=t.n(i),s=t(87999),l=t.n(s),u=t(67825),c=t.n(u),d=t(48305),m=t.n(d),p=t(26068),f=t.n(p),v=t(53649),g=t.n(v),h=t(32914),b=t(8961),x=t(92829),y=t(81305),_=t(53722),j=t(68048),k=t(51143),w=t(18385),Z=t(91315),I=t(28565),M=t(66275),C=t(38913),F=t(53231),P=t(25383),S=t(26965),V=t(79635),A=t(26447),R=t(32699),N=t.n(R),T=t(75271),E=t(67585),L=t(73940),O=t(15558),q=t.n(O),z=t(82092),D=t.n(z),U=t(63551),H=t(55446),K=t(69002),B=t(52676),Y=function(e){var n=e.widget,t=e.title,r=e.required,a=e.placeholder,i=e.options,o=e.description,s=e.enum,l=e.style,u=e.value,c=e.min,d=e.max,m=e.status,p=e.checked,v=e.isInFormItems,g=e.disabled,h=e.onChange,b=K.Z[n],x=null==s?void 0:s.map((function(e){return{label:e,value:e}}));return b?(0,B.jsx)(b,{label:t,required:r,placeholder:a,description:o,min:c,max:d,status:m,isInFormItems:v,disabled:g,options:i||x,value:u,checked:p,style:f()({width:"100%"},l),onChange:h}):null},G=E.ZP.div(r||(r=g()(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 8px;\n"]))),W=E.ZP.div(a||(a=g()(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  width: 100%;\n"]))),J=function(e){var n=e.schemaList,t=e.data,r=e.onChange,a=e.validateStatus,i=e.disabled,o=function(e,n){var t;if("checkbox"===(null==n||null===(t=n.target)||void 0===t?void 0:t.type)){var a,i=null===(a=n.target)||void 0===a?void 0:a.checked;null==r||r(D()({},e,i))}else{var o=null!=n&&n.target?n.target.value:n;null==r||r(D()({},e,o))}};return(0,B.jsx)(B.Fragment,{children:n.map((function(e){return(0,T.createElement)(Y,f()(f()({status:null==a?void 0:a[e.name],widget:e.type},e),{},{disabled:i||e.readOnly,key:e.name,value:null==t?void 0:t[e.name],checked:null==t?void 0:t[e.name],isInFormItems:!1,onChange:function(n){return o(e.name,n)}}))}))})},X=function(e){var n=e.dataList,t=void 0===n?[]:n,r=e.label,a=e.btnText,i=e.properties,o=void 0===i?{}:i,s=e.requiredFields,l=void 0===s?[]:s,u=e.minItems,c=void 0===u?0:u,d=e.validateStatusList,p=void 0===d?[]:d,v=e.disabled,g=e.onAdd,h=e.onDelete,b=e.onChange,x=T.useState(t||[]),y=m()(x,2),_=y[0],j=y[1],k=(0,T.useMemo)((function(){return Object.entries(o).map((function(e){var n=m()(e,2),t=n[0],r=n[1];return f()(f()({},r),{},{required:l.includes(t),name:t})}))}),[o,l]),w=function(){var e=Object.keys(o),n=[].concat(q()(_),[f()({},e.reduce((function(e,n){return f()(f()({},e),{},D()({},n,""))}),{}))]);j(n),null==g||g(n)},Z=function(e,n){var t=q()(_);t[e]=f()(f()({},t[e]),n),j(t),null==b||b(t)};return(0,T.useEffect)((function(){!t.length&&c>0&&w()}),[]),(0,T.useEffect)((function(){j(t)}),[t]),(0,B.jsx)(U.Z,{label:r,btnText:a,onAdd:w,disabled:v,children:_.map((function(e,n){return(0,B.jsxs)(G,{children:[(0,B.jsx)(W,{children:(0,B.jsx)(J,{schemaList:k,data:e,validateStatus:null==p?void 0:p[n],disabled:v,onChange:function(e){return Z(n,e)}})}),!v&&(0,B.jsx)(V.ZP,{size:"small",type:"default",shape:"circle",style:{width:24,marginLeft:10,flex:"none"},icon:(0,B.jsx)(H.Z,{}),onClick:function(){return function(e){var n=_[e],t=_.filter((function(n,t){return t!==e}));j(t),null==h||h(n,t)}(n)}})]},n)}))})};var $,Q,ee,ne,te={type:"array",title:"Volumes",name:"volumes",required:["name","size_gb","format"],properties:{name:{name:"name",type:"string",title:"Name",widget:"Input"},size_gb:{name:"size_gb",type:"number",title:"Size (GB)",widget:"InputNumber",min:0,style:{width:120}},format:{name:"format",type:"string",title:"Format",widget:"Select",enum:["ext4","xfs"],style:{width:150}}}},re=(0,T.forwardRef)((function(e,n){var t=e.disabled,r=(0,F.useIntl)(),a=S.Z.useFormInstance(),i=S.Z.useWatch(["cloud_options",te.name],a),s=(0,T.useState)([]),u=m()(s,2),c=u[0],d=u[1],p=function(e){var n=e.requiredFields,t=e.setValidateStatusList,r=(0,T.useRef)(!1),a=function(e,n){return!e},i=function(){var e=l()(o()().mark((function e(i,s){var l,u;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.current){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:if(l=new Set,u=[],(s||[]).forEach((function(e,t){var r={};Object.entries(e||{}).forEach((function(e){var t=m()(e,2),i=t[0],o=t[1];a(o)?(l.add(i),null!=n&&n.includes(i)?r[i]="error":r[i]=""):r[i]=""})),u.push(r)})),t(u),!(l.size>0)){e.next=8;break}return e.abrupt("return",Promise.reject("".concat(Array.from(l).join(", ")," is required")));case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return{listMapValidator:i,toggleValidation:function(e){r.current=e}}}({requiredFields:te.required,setValidateStatusList:function(e){d(e)}}),f=p.listMapValidator,v=p.toggleValidation;return(0,B.jsx)(S.Z.Item,{name:["cloud_options",te.name],rules:[{validator:f}],children:(0,B.jsx)(X,{validateStatusList:c,btnText:r.formatMessage({id:"clusters.workerpool.volumes.add"}),label:r.formatMessage({id:"clusters.workerpool.volumes"}),dataList:i||[],properties:te.properties||{},requiredFields:te.required||[],disabled:t,onAdd:function(e){v(!1),a.setFieldValue(["cloud_options",te.name],e),v(!0)},onDelete:function(e,n){v(!1),a.setFieldValue(["cloud_options",te.name],n),v(!0)},onChange:function(e){v(!0),a.setFieldValue(["cloud_options",te.name],e)}})})})),ae=re,ie=["collapsible","onToggle"],oe=E.ZP.div($||($=g()(["\n  pointer-events: auto;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 0 16px;\n  .ant-form-item:nth-child(1) {\n    grid-column: 1 / 3;\n  }\n  .ant-form-item:nth-child(2) {\n    grid-column: 1 / 3;\n  }\n  .ant-form-item:nth-child(5) {\n    grid-column: 1 / 3;\n  }\n\n  .ant-form-item:nth-child(6) {\n    grid-column: 1 / 3;\n  }\n  .ant-form-item:nth-child(7) {\n    grid-column: 1 / 3;\n  }\n"]))),se=E.ZP.div(Q||(Q=g()(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding-block: 12px;\n"]))),le=E.ZP.div.attrs({className:"option-item"})(ee||(ee=g()(["\n  display: flex;\n  gap: 8px;\n  align-items: center;\n"]))),ue=E.ZP.div(ne||(ne=g()(["\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  gap: 4px 8px;\n  font-weight: 400;\n"]))),ce=function(){var e=(0,F.useIntl)();return(0,B.jsx)(se,{children:e.formatMessage({id:"clusters.create.noInstanceTypes"})})},de=function(e){var n=e.label,t=e.vendor,r=e.style;return(0,B.jsxs)("div",{style:r,className:"flex-center gap-8",children:[(0,B.jsx)(x.Z,{type:N().get(L._T,t,"icon-gpu1")}),n]})},me=function(e){var n=e.data,t=void 0===n?{}:n,r=e.styles,a=Object.entries((null==t?void 0:t.specInfo)||{});return(0,B.jsx)(M._,{header:(0,B.jsx)(de,{label:t.description||t.label,vendor:t.vendor,style:null==r?void 0:r.header}),description:a.length>0&&(0,B.jsx)(ue,{style:f()({},null==r?void 0:r.description),children:Object.entries(null==t?void 0:t.specInfo).filter((function(e){var n=m()(e,2);n[0];return n[1]})).map((function(e){var n=m()(e,2),t=n[0],r=n[1];return(0,B.jsxs)(le,{children:[(0,B.jsxs)("span",{className:"label",children:[N().get(L.TE,t,t),":"]}),(0,B.jsx)("span",{className:"value",children:r})]},t)}))})},t.value)},pe=function(e){var n=e.instanceSpec;return(0,B.jsx)(B.Fragment,{children:Object.entries(n).filter((function(e){var n=m()(e,2);n[0];return n[1]})).map((function(e){var n=m()(e,2),t=n[0];n[1];return(0,B.jsx)(S.Z.Item,{name:["instance_spec",t],hidden:!0,children:(0,B.jsx)(k.Z.Input,{})},t)}))})},fe=(0,T.forwardRef)((function(e,n){var t=e.action,r=e.name,a=void 0===r?"workerPoolForm":r,i=e.onFinish,s=e.onDelete,u=e.showDelete,d=e.currentData,p=e.collapseProps,v=(0,A.KO)(h.FB),g=m()(v,1)[0],x=(0,A.KO)(h.hQ),M=m()(x,1)[0],R=p||{},E=R.collapsible,L=R.onToggle,O=c()(R,ie),q=S.Z.useForm(),z=m()(q,1)[0],D=(0,F.useIntl)(),U=(0,I.Z)().getRuleMessage,H=S.Z.useWatch("labels",z),K=S.Z.useWatch("name",z),Y=(0,T.useState)({}),G=m()(Y,2),W=G[0],J=G[1];(0,T.useEffect)((function(){if(d)if(t===Z.Kd.CREATE){var e=M.find((function(e){return e.os_image===d.os_image})),n=g.find((function(e){return e.value===d.instance_type}));z.setFieldsValue(f()(f()({},d),{},{instance_type:(null==n?void 0:n.value)||"",os_image:(null==e?void 0:e.os_image)||"",image_name:(null==e?void 0:e.value)||""})),J((function(){return n?d.instance_spec:{}}))}else t===Z.Kd.EDIT&&(z.setFieldsValue(f()({},d)),J((function(){return d.instance_spec||{}})))}),[d,g,M,t]);var X=(0,P.Z)((function(e){return 8===e.count?M.filter((function(e){return"gpu-h100x8-base"===e.os_image})):1===e.count&&"amd"===e.vendor?M.filter((function(e){return"gpu-amd-base"===e.os_image})):1===e.count&&"nvidia"===e.vendor?M.filter((function(e){return"gpu-h100x1-base"===e.os_image})):M})),$=(0,T.useMemo)((function(){return X(W)}),[M,W,X]);return(0,T.useImperativeHandle)(n,(function(){return{resetFields:function(){z.resetFields()},submit:function(){z.submit()},setFieldsValue:function(e){z.setFieldsValue(e)},getFieldsValue:function(){return z.getFieldsValue()},validateFields:(e=l()(o()().mark((function e(){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.validateFields();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})};var e})),(0,B.jsx)(b.Z,f()(f()({},O),{},{title:K,collapsible:E,onToggle:L,deleteBtn:u&&(0,B.jsx)(V.ZP,{onClick:s,icon:(0,B.jsx)(C.Z,{}),danger:!0,type:"text",variant:"filled",color:"danger",size:"small"}),children:(0,B.jsx)(S.Z,{name:a,form:z,onFinish:i,preserve:!1,scrollToFirstError:!0,initialValues:{replicas:1,batch_size:1},children:(0,B.jsxs)(oe,{children:[(0,B.jsx)(S.Z.Item,{name:"name",rules:[{required:!0,message:U("input","common.table.name")}],children:(0,B.jsx)(k.Z.Input,{label:D.formatMessage({id:"common.table.name"}),required:!0})}),(0,B.jsx)(S.Z.Item,{name:"instance_type",rules:[{required:!0,message:U("input","clusters.workerpool.instanceType")}],children:(0,B.jsx)(w.Z,{showSearch:!0,filterOption:function(e,n){return n.label.toLowerCase().includes(e.toLowerCase())||n.description.toLowerCase().includes(e.toLowerCase())},labelRender:function(e){var n=g.find((function(n){return n.value===e.value}))||W;return!n||N().isEmpty(n)?null:(0,B.jsx)(de,{label:e.label||(null==n?void 0:n.label)||e.value,vendor:(null==n?void 0:n.vendor)||""})},notFoundContent:(0,B.jsx)(ce,{}),label:D.formatMessage({id:"clusters.workerpool.instanceType"}),required:!0,options:g,disabled:t===Z.Kd.EDIT,optionRender:me,onChange:function(e,n){var t,r,a=f()(f()({},n.specInfo),{},{label:n.label,vendor:n.vendor,description:n.description,count:n.count});J(f()({},a));var i=X(f()({},a));z.setFieldsValue({os_image:null===(t=i[0])||void 0===t?void 0:t.os_image,image_name:null===(r=i[0])||void 0===r?void 0:r.value,instance_spec:f()({},a)})}})}),(0,B.jsx)(S.Z.Item,{name:"replicas",rules:[{required:!0,message:U("input","clusters.workerpool.replicas")}],children:(0,B.jsx)(j.Z,{label:D.formatMessage({id:"clusters.workerpool.replicas"}),required:!0})}),(0,B.jsx)(S.Z.Item,{name:"batch_size",rules:[{required:!0,message:U("input","clusters.workerpool.batchSize")}],children:(0,B.jsx)(j.Z,{description:D.formatMessage({id:"clusters.workerpool.batchSize.desc"}),label:D.formatMessage({id:"clusters.workerpool.batchSize"}),required:!0})}),(0,B.jsx)(S.Z.Item,{name:"image_name",rules:[{required:!0,message:U("input","clusters.workerpool.osImage")}],children:(0,B.jsx)(_.Z,{showSearch:!0,allowClear:!0,onChange:function(e,n){z.setFieldsValue({os_image:(null==n?void 0:n.os_image)||e})},optionRender:function(e){return me(f()(f()({},e),{},{styles:{header:{marginBlock:5}}}))},options:$,disabled:t===Z.Kd.EDIT,label:D.formatMessage({id:"clusters.workerpool.osImage"}),required:!0})}),(0,B.jsx)(S.Z.Item,{name:"labels",rules:[function(e){e.getFieldValue;return{validator:function(e,n){return N().keys(n).length>0&&N().some(N().keys(n),(function(e){return!n[e]}))?Promise.reject(D.formatMessage({id:"common.validate.value"},{name:D.formatMessage({id:"resources.table.labels"})})):Promise.resolve()}}}],children:(0,B.jsx)(y.Z,{label:D.formatMessage({id:"resources.table.labels"}),labels:H||{},btnText:D.formatMessage({id:"common.button.addLabel"})})}),(0,B.jsx)(ae,{disabled:t===Z.Kd.EDIT}),(0,B.jsx)(S.Z.Item,{name:"os_image",hidden:!0,children:(0,B.jsx)(k.Z.Input,{})}),(0,B.jsx)(pe,{instanceSpec:W})]})})}))})),ve=fe},66263:function(e,n,t){t.d(n,{l:function(){return a},u:function(){return i}});var r=t(75271),a=(0,r.createContext)({formValues:{},systemConfig:{}}),i=function(){return(0,r.useContext)(a)}},92086:function(e,n,t){t.d(n,{K:function(){return x}});var r=t(90228),a=t.n(r),i=t(26068),o=t.n(i),s=t(87999),l=t.n(s),u=t(48305),c=t.n(u),d=t(32914),m=t(48075),p=t(26447),f=t(32699),v=t.n(f),g=t(75271),h=t(92047),b={nyc1:"ðŸ‡ºðŸ‡¸",nyc2:"ðŸ‡ºðŸ‡¸",nyc3:"ðŸ‡ºðŸ‡¸",tor1:"ðŸ‡¨ðŸ‡¦",sfo1:"ðŸ‡ºðŸ‡¸",sfo2:"ðŸ‡ºðŸ‡¸",sfo3:"ðŸ‡ºðŸ‡¸",atl1:"ðŸ‡ºðŸ‡¸",sgp1:"ðŸ‡¸ðŸ‡¬",blr1:"ðŸ‡®ðŸ‡³",lon1:"ðŸ‡¬ðŸ‡§",ams2:"ðŸ‡³ðŸ‡±",ams3:"ðŸ‡³ðŸ‡±",fra1:"ðŸ‡©ðŸ‡ª",syd1:"ðŸ‡¦ðŸ‡º"},x=function(){var e=(0,p.KO)(d.pp),n=c()(e,2),t=n[0],r=n[1],i=(0,p.KO)(d.FB),s=c()(i,2)[1],u=(0,p.KO)(d.hQ),f=c()(u,2)[1],x=(0,p.KO)(d.uu),y=c()(x,2),_=y[0],j=y[1],k=(0,p.KO)(d.hG),w=c()(k,2),Z=w[0],I=w[1],M=(0,g.useState)(!1),C=c()(M,2),F=C[0],P=C[1],S=function(){var e=l()(a()().mark((function e(n){var t,i,s,l;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(!0),e.next=4,(0,h.c9)({id:n});case 4:s=e.sent,l=null==s||null===(t=s.regions)||void 0===t||null===(i=t.filter)||void 0===i?void 0:i.call(t,(function(e){return e.sizes.some((function(e){return e.includes("gpu")}))&&e.available})).map((function(e){return o()(o()({},(n=e.name,t=n.trim().split(" "),r=t.pop(),{label:t.join(" "),datacenter:"Datacenter ".concat(r)})),{},{value:e.slug,icon:b[e.slug],sizes:e.sizes||[]});var n,t,r})),r(l),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),r([]);case 12:return e.prev=12,P(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(n){return e.apply(this,arguments)}}(),V=function(){var e=l()(a()().mark((function e(n){var t,r,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,h.BT)({id:n});case 3:return r=e.sent,i=null==r||null===(t=r.sizes)||void 0===t?void 0:t.filter((function(e){return e.gpu_info&&e.available})).map((function(e){var n,t,r,a,i,o,s,l,u,c,d,p,f,g=(l=(a=e).gpu_info,u=a.disk_info,{vram:(0,m.AU)({sizeInBytes:(null==l||null===(i=l.vram)||void 0===i?void 0:i.amount)||0,defaultUnit:"GiB"}),vcpus:a.vcpus||0,ram:(0,m.AU)({sizeInBytes:a.memory||0,defaultUnit:"MiB"}),bootDisk:(0,m.AU)({sizeInBytes:(null==u||null===(o=u.find((function(e){return"local"===e.type})))||void 0===o?void 0:o.size.amount)||0,defaultUnit:"GiB"}),scratchDisk:(0,m.AU)({sizeInBytes:(null==u||null===(s=u.find((function(e){return"scratch"===e.type})))||void 0===s?void 0:s.size.amount)||0,defaultUnit:"GiB"})}),h=(c=e,"".concat(v().toUpper(null===(d=c.gpu_info)||void 0===d?void 0:d.model.replace(/_/g," ")))),b="".concat(h," ").concat(null===(n=e.gpu_info)||void 0===n?void 0:n.count,"X");return{count:null===(t=e.gpu_info)||void 0===t?void 0:t.count,label:"".concat(b," - ").concat((p=g,f=[],p.vram&&f.push("".concat(p.vram," VRAM")),p.vcpus&&f.push("".concat(p.vcpus," vCPUs")),p.ram&&f.push("".concat(p.ram," RAM")),f.join(" / "))),value:e.slug,description:b,specInfo:g,vendor:v().get(v().split(null===(r=e.gpu_info)||void 0===r?void 0:r.model,"_"),0),available:e.available,regions:e.regions||[]}})),I(i),e.abrupt("return",i);case 9:e.prev=9,e.t0=e.catch(0),I([]);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),A=function(){var e=l()(a()().mark((function e(n){var t,r,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,h.iL)({id:n});case 3:return r=e.sent,i=null===(t=r.images)||void 0===t?void 0:t.filter((function(e){return"available"===e.status})).map((function(e){return{label:e.description,value:e.description,os_image:e.slug,name:e.name,description:e.description,vendor:v().camelCase(e.distribution),specInfo:{},regions:e.regions||[]}})),j(i),e.abrupt("return",i);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}();return{regions:t,loading:F,setLoading:P,getRegions:S,getInstanceTypes:V,getOSImages:A,updateOSImages:function(e,n){var t=(n||_).filter((function(n){return n.regions.includes(e)&&["debian","ubuntu"].includes(n.vendor)}));f(t)},updateInstanceTypes:function(e,n){var t=(n||Z).filter((function(n){return n.regions.includes(e)}));s(t)}}}},66275:function(e,n,t){t.d(n,{_:function(){return y},Z:function(){return _}});var r,a,i,o,s=t(53649),l=t.n(s),u=t(85882),c=t(48075),d=t(53231),m=t(32699),p=t.n(m),f=(t(75271),t(67585)),v=t(52676),g=f.ZP.div(r||(r=l()(["\n  display: flex;\n  gap: 8px;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: center;\n  width: 100%;\n  border-bottom: 1px solid var(--ant-color-split);\n  padding-bottom: 5px;\n"]))),h=f.ZP.div(a||(a=l()(["\n  width: 100%;\n"]))),b=f.ZP.div(i||(i=l()(["\n  display: flex;\n  flex-wrap: wrap;\n  white-space: break-spaces;\n"]))),x=f.ZP.div(o||(o=l()(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  gap: 8px;\n  color: var(--ant-color-text-tertiary);\n"]))),y=function(e){var n=e.header,t=e.description;return(0,v.jsxs)(g,{children:[(0,v.jsx)(h,{children:n}),t&&(0,v.jsx)(x,{children:t})]})},_=function(e){var n,t,r,a,i,o,s,l=e.data,m=e.header,f=e.info,g=(0,d.useIntl)();return(0,v.jsx)(y,{header:m||(0,v.jsxs)(u.Z,{ghost:!0,children:[(0,v.jsxs)("span",{className:"font-700",children:["[",l.index,"] "]}),l.label]}),description:f||(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(b,{children:[g.formatMessage({id:"resources.table.vram"}),"(",g.formatMessage({id:"resources.table.used"}),"/",g.formatMessage({id:"resources.table.total"}),"):"," ",(0,v.jsxs)("span",{children:[(0,c.hy)((null==l||null===(n=l.memory)||void 0===n?void 0:n.used)||(null==l||null===(t=l.memory)||void 0===t?void 0:t.allocated)||0)," ","/ ",(0,c.hy)((null==l||null===(r=l.memory)||void 0===r?void 0:r.total)||0)]})]}),(0,v.jsxs)(b,{children:[(0,v.jsxs)("span",{children:[g.formatMessage({id:"resources.table.gpuutilization"}),":"," "]}),null!=l&&null!==(a=l.memory)&&void 0!==a&&a.used?p().round((null==l||null===(i=l.memory)||void 0===i?void 0:i.utilization_rate)||0,2):100*p().round((null===(o=l.memory)||void 0===o?void 0:o.allocated)/(null===(s=l.memory)||void 0===s?void 0:s.total),2),"%"]})]})})}}}]);