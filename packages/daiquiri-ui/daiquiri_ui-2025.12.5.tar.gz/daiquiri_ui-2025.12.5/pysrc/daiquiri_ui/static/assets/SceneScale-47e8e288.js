import{r as g,b8 as S,j as t,aP as v}from"./index-4cf586ed.js";import{b as j,Q as F,O as w}from"./index-19c84627.js";import{S as k}from"./ScreenScale-fdd43179.js";import{t as B}from"./QtyHelper-8429914f.js";const G=g.forwardRef(({children:n,percentLocation:r},s)=>{const i=g.useRef(null);g.useImperativeHandle(s,()=>i.current,[]);const c=j();return S(({camera:l})=>{const e=i.current;if(!e)return;const a=c.getVisibleDomains(l),o=a.xVisibleDomain[0]+(a.xVisibleDomain[1]-a.xVisibleDomain[0])*(r[0]/100),m=a.yVisibleDomain[0]+(a.yVisibleDomain[1]-a.yVisibleDomain[0])*(1-r[1]/100);e.position.x=o,e.position.y=m}),t.jsx("group",{ref:i,children:t.jsx("group",{children:n})})});function C(n){const s=10**Math.ceil(Math.log10(n)),i=n/s;return i>=1?Number(s):i>=.5?.5*s:i>=.25?.25*s:i>=.1?.1*s:n}function q(n){const{unit:r,percentWidth:s=30,percentLocation:i=75}=n,c=j(),{width:l}=c.canvasSize,e=F(m=>{const b=c.getVisibleDomains(m),{xVisibleDomain:x,yVisibleDomain:y}=b,h=x[1]-x[0],f=l/Math.abs(h),p=C(Math.abs(h)*s/100),R=p*f,D=x[0]+h*i/100,M=y[1];function V(d,u){return u==="px"?`${d} ${u}`:`${B(new v(d,"mm")).toPrec(.1)}`}const L=V(p,r);return{pixelRange:R,dataRange:p,dataX:D,dataY:M,text:L}},[r,l,s,i]),a=2,o=10;return t.jsxs(t.Fragment,{children:[t.jsx(w,{x:e.dataX,y:e.dataY,style:{color:"black"},children:t.jsx("div",{style:{top:"50%",left:"50%",position:"relative",transform:"translate(-100%, 0%)",borderRadius:5,paddingLeft:5,paddingRight:5,backgroundColor:"#FFFFFF80",fontWeight:"bold",fontSize:"100%",zIndex:100},children:e.text})}),t.jsx(G,{percentLocation:[i,0],children:t.jsx(k,{children:t.jsxs("group",{"position-y":26,children:[t.jsxs("mesh",{position:[0,0,0],children:[t.jsx("ambientLight",{}),t.jsx("planeGeometry",{attach:"geometry",args:[e.pixelRange,a+2,1,1]}),t.jsx("meshBasicMaterial",{attach:"material",transparent:!0,color:"white",opacity:1})]}),t.jsxs("mesh",{position:[e.pixelRange*.5,0,0],children:[t.jsx("ambientLight",{}),t.jsx("planeGeometry",{attach:"geometry",args:[a+2,o+2,1,1]}),t.jsx("meshBasicMaterial",{attach:"material",transparent:!0,color:"white",opacity:1})]}),t.jsxs("mesh",{position:[-e.pixelRange*.5,0,0],children:[t.jsx("ambientLight",{}),t.jsx("planeGeometry",{attach:"geometry",args:[a+2,o+2,1,1]}),t.jsx("meshBasicMaterial",{attach:"material",transparent:!0,color:"white",opacity:1})]}),t.jsxs("mesh",{position:[0,0,0],children:[t.jsx("ambientLight",{}),t.jsx("planeGeometry",{attach:"geometry",args:[e.pixelRange,a,1,1]}),t.jsx("meshBasicMaterial",{attach:"material",transparent:!0,color:"black",opacity:1})]}),t.jsxs("mesh",{position:[e.pixelRange*.5,0,0],children:[t.jsx("ambientLight",{}),t.jsx("planeGeometry",{attach:"geometry",args:[a,o,1,1]}),t.jsx("meshBasicMaterial",{attach:"material",transparent:!0,color:"black",opacity:1})]}),t.jsxs("mesh",{position:[-e.pixelRange*.5,0,0],children:[t.jsx("ambientLight",{}),t.jsx("planeGeometry",{attach:"geometry",args:[a,o,1,1]}),t.jsx("meshBasicMaterial",{attach:"material",transparent:!0,color:"black",opacity:1})]})]})})})]})}export{q as S};
