(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6938],{62960:function(e,t,s){Promise.resolve().then(s.bind(s,26099))},26099:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return em}});var a,r,n=s(57437),i=s(917),o=s.n(i);s(97510);var l=s(2265),c=s(77992),d=s(56937),h=s(7436),m=s(62869),x=s(95186),u=s(66070),p=s(50721),f=s(94508);let j=l.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(p.fC,{className:(0,f.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-gray-300 dark:data-[state=unchecked]:bg-gray-600",s),...a,ref:t,children:(0,n.jsx)(p.bU,{className:(0,f.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});j.displayName=p.fC.displayName;var g=s(84190),b=s(37099),y=s(26110);let w=l.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:t,className:(0,f.cn)("w-full caption-bottom text-sm",s),...a})})});w.displayName="Table",l.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("thead",{ref:t,className:(0,f.cn)("[&_tr]:border-b",s),...a})}).displayName="TableHeader";let v=l.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("tbody",{ref:t,className:(0,f.cn)("[&_tr:last-child]:border-0",s),...a})});v.displayName="TableBody",l.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("tfoot",{ref:t,className:(0,f.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...a})}).displayName="TableFooter";let N=l.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("tr",{ref:t,className:(0,f.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...a})});N.displayName="TableRow",l.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("th",{ref:t,className:(0,f.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...a})}).displayName="TableHead";let _=l.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("td",{ref:t,className:(0,f.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...a})});_.displayName="TableCell",l.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("caption",{ref:t,className:(0,f.cn)("mt-4 text-sm text-muted-foreground",s),...a})}).displayName="TableCaption";var k=s(72102),S=s(24633),E=s(2335),C=s(7861),T=s(75921),F=s(39957),D=s(96620),A=s(6009),P=s(65241),O=s(36921),z=s(37052),I=s(53880),Y=s(49807),K=s(68772),M=s(80382),R=s(57248),B=s(73278),Z=s(66932),U=s(71946),W=s(3467),V=s(54928),H=s(29822),G=s(58905),L=s(82033),J=s(25778),$=s(47673),q=s(14308),X=s(60729),Q=s(34124),ee=s(50513),et=s(68589);function es(e){let{memory:t,onDelete:s,onUpdate:a}=e,[r,i]=(0,l.useState)(!1),[o,d]=(0,l.useState)(t.raw),{toast:h}=(0,c.pm)();return(0,n.jsx)("div",{className:"flex items-center gap-2 w-full",children:r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.I,{value:o,onChange:e=>d(e.target.value),className:"flex-1"}),(0,n.jsx)(m.z,{variant:"ghost",size:"icon",onClick:()=>{a(t.id,o),i(!1),h({title:"Memory Updated",description:"Your memory has been successfully updated."})},title:"Save",children:(0,n.jsx)(P.B,{className:"h-4 w-4"})}),(0,n.jsx)(m.z,{variant:"ghost",size:"icon",onClick:()=>i(!1),title:"Cancel",children:(0,n.jsx)(ee.X,{className:"h-4 w-4"})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.I,{value:t.raw,readOnly:!0,className:"flex-1"}),(0,n.jsx)(m.z,{variant:"ghost",size:"icon",onClick:()=>i(!0),title:"Edit",children:(0,n.jsx)(et.z,{className:"h-4 w-4"})}),(0,n.jsx)(m.z,{variant:"ghost",size:"icon",onClick:()=>{s(t.id),h({title:"Memory Deleted",description:"Your memory has been successfully deleted."})},title:"Delete",children:(0,n.jsx)($.S,{className:"h-4 w-4"})})]})})}var ea=s(6512),er=s(37104),en=s(32759),ei=s(57635),eo=s.n(ei),el=s(12);let ec=e=>{var t,s;let{items:a,selected:r,isActive:i,callbackFunc:o}=e,[c,d]=(0,l.useState)(null!==(s=null==r?void 0:r.toString())&&void 0!==s?s:"0");return!!r&&(0,n.jsx)("div",{className:"overflow-hidden shadow-md rounded-lg",children:(0,n.jsxs)(g.h_,{children:[(0,n.jsx)(g.$F,{asChild:!0,className:"w-full rounded-lg",children:(0,n.jsxs)(m.z,{variant:"outline",className:"justify-start py-6 rounded-lg",children:[null===(t=a.find(e=>e.id.toString()===c))||void 0===t?void 0:t.name," ",(0,n.jsx)(k.p,{className:"h-4 w-4 ml-auto text-muted-foreground"})]})}),(0,n.jsx)(g.AW,{style:{maxHeight:"200px",overflowY:"auto",minWidth:"var(--radix-dropdown-menu-trigger-width)"},children:(0,n.jsx)(g._x,{value:c,onValueChange:async e=>{d(e),await o(e)},children:a.map(e=>(0,n.jsxs)(g.qB,{value:e.id.toString(),disabled:!i&&"free"!==e.tier,children:[e.name," ","standard"===e.tier&&(0,n.jsx)("span",{className:"text-green-500 ml-2",children:"(Futurist)"})]},e.id.toString()))})})]})})},ed=()=>{let[e,t]=(0,l.useState)([]),{toast:s}=(0,c.pm)(),a=async()=>{try{let e=await fetch("/auth/token",{method:"POST",headers:{"Content-Type":"application/json"}}),s=await e.json();t(e=>[...e,s])}catch(e){console.error("Error generating API key:",e)}},r=async e=>{try{await navigator.clipboard.writeText(e),s({title:"\uD83D\uDD11 API Key",description:"Copied to clipboard"})}catch(e){console.error("Error copying API key:",e)}},n=async e=>{try{(await fetch("/auth/token?token=".concat(e),{method:"DELETE"})).ok&&t(t=>t.filter(t=>t.token!==e))}catch(e){console.error("Error deleting API key:",e)}},i=async()=>{try{let e=await fetch("/auth/token"),s=await e.json();(null==s?void 0:s.length)>0&&t(s)}catch(e){console.error("Error listing API keys:",e)}};return(0,l.useEffect)(()=>{i()},[]),{apiKeys:e,generateAPIKey:a,copyAPIKey:r,deleteAPIKey:n}};function eh(){let{apiKeys:e,generateAPIKey:t,copyAPIKey:s,deleteAPIKey:a}=ed(),[r,i]=(0,l.useState)(new Set),{toast:o}=(0,c.pm)();return(0,n.jsxs)(u.Zb,{className:"grid grid-flow-column border border-gray-300 shadow-md rounded-lg dark:bg-muted dark:border-none border-opacity-50 lg:w-2/3",children:[(0,n.jsxs)(u.Ol,{className:"text-xl grid grid-flow-col grid-cols-[1fr_auto] pb-0",children:[(0,n.jsxs)("span",{className:"flex flex-wrap",children:[(0,n.jsx)(S.s,{className:"h-7 w-7 mr-2"}),"API Keys"]}),(0,n.jsxs)(m.z,{variant:"secondary",className:"!mt-0",onClick:t,children:[(0,n.jsx)(E.v,{weight:"bold",className:"h-5 w-5 mr-2"}),"Generate Key"]})]}),(0,n.jsxs)(u.aY,{className:"overflow-hidden grid gap-6",children:[(0,n.jsxs)("p",{className:"text-md text-gray-400",children:["Access Khoj from the"," ",(0,n.jsx)("a",{href:"https://docs.khoj.dev/clients/desktop",target:"_blank",children:"Desktop"}),", ",(0,n.jsx)("a",{href:"https://docs.khoj.dev/clients/obsidian",children:"Obsidian"}),","," ",(0,n.jsx)("a",{href:"https://docs.khoj.dev/clients/emacs",children:"Emacs"})," apps and more."]}),(0,n.jsx)(w,{children:(0,n.jsx)(v,{children:e.map(e=>(0,n.jsxs)(N,{children:[(0,n.jsx)(_,{className:"pl-0 py-3",children:e.name}),(0,n.jsxs)(_,{className:"grid grid-flow-col grid-cols-[1fr_auto] bg-secondary dark:bg-background rounded-xl p-3 m-1",children:[(0,n.jsx)("span",{className:"font-mono text-left w-[50px] md:w-[400px]",children:r.has(e.token)?e.token:"".concat(e.token.slice(0,6),"...").concat(e.token.slice(-4))}),(0,n.jsxs)("div",{className:"grid grid-flow-col",children:[r.has(e.token)?(0,n.jsx)(C.N,{weight:"bold",className:"h-4 w-4 mr-2 hover:bg-primary/40",onClick:()=>i(t=>{let s=new Set(t);return s.delete(e.token),s})}):(0,n.jsx)(T.b,{weight:"bold",className:"h-4 w-4 mr-2 hover:bg-primary/40",onClick:()=>i(new Set([...r,e.token]))}),(0,n.jsx)(F.C,{weight:"bold",className:"h-4 w-4 mr-2 hover:bg-primary/40",onClick:()=>{o({title:"\uD83D\uDD11 Copied API Key: ".concat(e.name),description:"Set this API key in the Khoj apps you want to connect to this Khoj account"}),s(e.token)}}),(0,n.jsx)(D.r,{weight:"bold",className:"h-4 w-4 mr-2 md:ml-4 text-red-400 hover:bg-primary/40",onClick:()=>{o({title:"\uD83D\uDD11 Deleted API Key: ".concat(e.name),description:"Apps using this API key will no longer connect to this Khoj account"}),a(e.token)}})]})]})]},e.token))})})]}),(0,n.jsx)(u.eW,{className:"flex flex-wrap gap-4"})]})}function em(){let{data:e}=(0,d.h2)(!0),[t,s]=(0,l.useState)(null),[a,r]=(0,l.useState)(void 0),[i,p]=(0,l.useState)(null),[f,g]=(0,l.useState)(void 0),[w,v]=(0,l.useState)(""),[N,_]=(0,l.useState)("verified"),[k,S]=(0,l.useState)([]),[E,C]=(0,l.useState)(!0),[T,F]=(0,l.useState)("enabled_default_on"),[D,ee]=(0,l.useState)(!1),[et,ei]=(0,l.useState)(0),[ed,em]=(0,l.useState)(0),[ex,eu]=(0,l.useState)(0),{toast:ep}=(0,c.pm)(),ef=(0,h.IC)(),ej="w-full lg:w-5/12 grid grid-flow-column border border-gray-300 shadow-md rounded-lg border dark:border-none border-opacity-50 dark:bg-muted";(0,l.useEffect)(()=>{var t,a,n;s(e),g(null==e?void 0:e.phone_number),_((null==e?void 0:e.is_phone_number_verified)?"verified":(null==e?void 0:e.phone_number)?"otp":"setup"),r(null==e?void 0:e.given_name),p(null!==(t=null==e?void 0:e.notion_token)&&void 0!==t?t:null),C(null===(a=null==e?void 0:e.enable_memory)||void 0===a||a),F(null!==(n=null==e?void 0:e.server_memory_mode)&&void 0!==n?n:"enabled_default_on")},[e]);let eg=async e=>{try{if(!(await fetch("/api/subscription?operation=".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to change subscription");t&&(t.subscription_state="cancel"===e?d.o9.UNSUBSCRIBED:d.o9.SUBSCRIBED,s(t)),ep({title:"\uD83D\uDCB3 Subscription",description:(null==t?void 0:t.subscription_state)==="unsubscribed"?"Your subscription was cancelled":"Your Futurist subscription has been renewed"})}catch(t){console.error("Error changing subscription:",t),ep({title:"\uD83D\uDCB3 Subscription",description:"cancel"===e?"Failed to cancel subscription. Try again or contact us at team@khoj.dev":"Failed to renew subscription. Try again or contact us at team@khoj.dev"})}},eb=async()=>{if(a)try{if(!(await fetch("/api/user/name?name=".concat(a),{method:"PATCH",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to update name");t&&(t.given_name=a,s(t)),ep({title:"✅ Updated Profile",description:"You name has been updated to ".concat(a)})}catch(e){console.error("Error updating name:",e),ep({title:"⚠️ Failed to Update Profile",description:"Failed to update name. Try again or contact team@khoj.dev"})}},ey=e=>async s=>{let a="chat"===e?null==t?void 0:t.chat_model_options:"paint"===e?null==t?void 0:t.paint_model_options:null==t?void 0:t.voice_model_options,r=null==a?void 0:a.find(e=>e.id.toString()===s),n=null==r?void 0:r.name;if(!(null==t?void 0:t.is_active)&&(null==r?void 0:r.tier)!=="free"){ep({title:"Model Update",description:"Subscribe to switch ".concat(e," model to ").concat(n,"."),variant:"destructive"});return}try{if(!(await fetch("/api/model/".concat(e,"?id=")+s,{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to switch ".concat(e," model to ").concat(n));ep({title:"✅ Switched ".concat(e," model to ").concat(n)})}catch(t){console.error("Failed to update ".concat(e," model to ").concat(n,":"),t),ep({description:"❌ Failed to switch ".concat(e," model to ").concat(n,". Try again."),variant:"destructive"})}},ew=async()=>{try{ee(!0);let e=await fetch("/api/chat/stats"),t=(await e.json()).num_conversations;eu(t);let s=new(eo()),a=[];for(let e=0;10*e<t;e++){let s=await fetch("/api/chat/export?page=".concat(e)),r=await s.json();a.push(...r),em((e+1)*10),ei((e+1)*10/t*100)}s.file("conversations.json",JSON.stringify(a,null,2));let r=await s.generateAsync({type:"blob"});(0,el.saveAs)(r,"khoj-conversations.zip"),ep({title:"Export Complete",description:"Successfully exported ".concat(a.length," conversations")})}catch(e){console.error("Error exporting chats:",e),ep({title:"Export Failed",description:"Failed to export chats. Please try again.",variant:"destructive"})}finally{ee(!1),ei(0),em(0),eu(0)}},ev=async()=>{if(i)try{if(!(await fetch("/api/content/notion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:i})})).ok)throw Error("Failed to save Notion API key");t&&(t.notion_token=i,s(t)),ep({title:"✅ Saved Notion Settings",description:"You Notion API key has been saved."})}catch(e){console.error("Error updating name:",e),ep({title:"⚠️ Failed to Save Notion Settings",description:"Failed to save Notion API key. Try again or contact team@khoj.dev"})}},eN=async()=>{try{console.log("Fetching memories...");let e=await fetch("/api/memories/");if(!e.ok)throw Error("Failed to fetch memories");let t=await e.json();S(t)}catch(e){console.error("Error fetching memories:",e),ep({title:"Error",description:"Failed to fetch memories. Please try again.",variant:"destructive"})}},e_=async e=>{try{if(!(await fetch("/api/memories/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete memory");S(k.filter(t=>t.id!==e))}catch(e){console.error("Error deleting memory:",e),ep({title:"Error",description:"Failed to delete memory. Please try again.",variant:"destructive"})}},ek=async(e,t)=>{try{let s=await fetch("/api/memories/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({raw:t,memory_id:e})});if(!s.ok)throw Error("Failed to update memory");let a=await s.json();S(k.map(t=>t.id===e?a:t))}catch(e){console.error("Error updating memory:",e),ep({title:"Error",description:"Failed to update memory. Please try again.",variant:"destructive"})}},eS=async e=>{try{if(!(await fetch("/api/user/memory?enable_memory=".concat(e),{method:"PATCH"})).ok)throw Error("Failed to update memory setting");C(e),ep({title:e?"Memory enabled":"Memory disabled",description:e?"Khoj will learn and remember from your conversations.":"Khoj will no longer learn or remember from your conversations."})}catch(e){console.error("Error toggling memory:",e),ep({title:"Error",description:"Failed to update memory setting. Please try again.",variant:"destructive"})}},eE=async e=>{try{if(!(await fetch("/api/content?t=".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to sync content from ".concat(e));ep({title:"\uD83D\uDD04 Syncing ".concat(e),description:"Your ".concat(e," content is being synced.")})}catch(t){console.error("Error syncing content:",t),ep({title:"⚠️ Failed to Sync ".concat(e),description:"Failed to sync ".concat(e," content. Try again or contact team@khoj.dev")})}},eC=async e=>{try{if(!(await fetch("/api/content/source/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to disconnect ".concat(e));t&&("computer"===e?t.enabled_content_source.computer=!1:"notion"===e?(t.enabled_content_source.notion=!1,t.notion_token=null,p(t.notion_token)):"github"===e&&(t.enabled_content_source.github=!1),s(t)),"computer"===e?ep({title:"✅ Deleted Synced Files",description:"Your synced documents have been deleted."}):ep({title:"✅ Disconnected ".concat(e),description:"Your ".concat(e," integration to Khoj has been disconnected.")})}catch(t){console.error("Error disconnecting ".concat(e,":"),t),ep({title:"⚠️ Failed to Disconnect ".concat(e),description:"Failed to disconnect from ".concat(e,". Try again or contact team@khoj.dev")})}};return t?(0,n.jsxs)(X.Hn,{children:[(0,n.jsx)(Q.S,{conversationId:""}),(0,n.jsxs)(X.kV,{children:[(0,n.jsxs)("header",{className:"flex h-16 shrink-0 items-center gap-2 border-b px-4",children:[(0,n.jsx)(X.vP,{className:"-ml-1"}),(0,n.jsx)(ea.Z,{orientation:"vertical",className:"mr-2 h-4"}),ef?(0,n.jsx)("a",{className:"p-0 no-underline",href:"/",children:(0,n.jsx)(er.VO,{className:"h-auto w-16"})}):(0,n.jsx)("h2",{className:"text-lg",children:"Settings"})]}),(0,n.jsxs)("div",{className:o().page,children:[(0,n.jsx)("title",{children:"Settings"}),(0,n.jsx)("div",{className:o().content,children:(0,n.jsx)("div",{className:"".concat(o().contentBody," mx-10 my-2"),children:(0,n.jsx)(l.Suspense,{fallback:(0,n.jsx)(q.Z,{}),children:(0,n.jsxs)("div",{id:"content",className:"grid grid-flow-column sm:grid-flow-row gap-16 m-8",children:[(0,n.jsxs)("div",{className:"section grid gap-8",children:[(0,n.jsx)("div",{className:"text-2xl",children:"Profile"}),(0,n.jsxs)("div",{className:"cards flex flex-wrap gap-16",children:[(0,n.jsxs)(u.Zb,{className:ej,children:[(0,n.jsxs)(u.Ol,{className:"text-xl flex flex-row",children:[(0,n.jsx)(A.Y,{className:"h-7 w-7 mr-2"}),"Name"]}),(0,n.jsxs)(u.aY,{className:"overflow-hidden",children:[(0,n.jsx)("p",{className:"pb-4 text-gray-400",children:"What should Khoj refer to you as?"}),(0,n.jsx)(x.I,{type:"text",onChange:e=>r(e.target.value),value:a||"",className:"w-full border border-gray-300 rounded-lg p-4 py-6"})]}),(0,n.jsx)(u.eW,{className:"flex flex-wrap gap-4",children:(0,n.jsxs)(m.z,{variant:"outline",size:"sm",onClick:eb,disabled:a===t.given_name,children:[(0,n.jsx)(P.B,{className:"h-5 w-5 inline mr-2"}),"Save"]})})]}),(0,n.jsxs)(u.Zb,{id:"subscription",className:ej,children:[(0,n.jsxs)(u.Ol,{className:"text-xl flex flex-row",children:[(0,n.jsx)(O.a,{className:"h-7 w-7 mr-2"}),"Subscription"]}),(0,n.jsxs)(u.aY,{className:"grid gap-2 overflow-hidden",children:[(0,n.jsx)("p",{className:"text-gray-400",children:"Current Plan"}),"trial"===t.subscription_state&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-xl text-primary/80",children:"Futurist (Trial)"}),(0,n.jsxs)("p",{className:"text-gray-400",children:["You are on a"," ",t.length_of_free_trial," ","day trial of the Khoj Futurist plan. Your trial ends on"," ",t.subscription_renewal_date,". Check"," ",(0,n.jsx)("a",{href:"https://khoj.dev/#pricing",target:"_blank",children:"pricing page"})," ","to compare plans."]})]})||"subscribed"===t.subscription_state&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-xl text-primary/80",children:"Futurist"}),(0,n.jsxs)("p",{className:"text-gray-400",children:["Subscription ",(0,n.jsx)("b",{children:"renews"})," on"," ",(0,n.jsx)("b",{children:t.subscription_renewal_date})]})]})||"unsubscribed"===t.subscription_state&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-xl",children:"Futurist"}),(0,n.jsxs)("p",{className:"text-gray-400",children:["Subscription ",(0,n.jsx)("b",{children:"ends"})," on"," ",(0,n.jsx)("b",{children:t.subscription_renewal_date})]})]})||"expired"===t.subscription_state&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-xl",children:"Humanist"}),t.subscription_renewal_date&&(0,n.jsxs)("p",{className:"text-gray-400",children:["Subscription ",(0,n.jsx)("b",{children:"expired"})," ","on"," ",(0,n.jsx)("b",{children:t.subscription_renewal_date})]})||(0,n.jsxs)("p",{className:"text-gray-400",children:["Check"," ",(0,n.jsx)("a",{href:"https://khoj.dev/#pricing",target:"_blank",children:"pricing page"})," ","to compare plans."]})]})]}),(0,n.jsx)(u.eW,{className:"flex flex-wrap gap-4",children:"subscribed"==t.subscription_state&&(0,n.jsxs)(m.z,{variant:"outline",className:"hover:text-red-400",onClick:()=>eg("cancel"),children:[(0,n.jsx)(z.b,{className:"h-5 w-5 mr-2"}),"Unsubscribe"]})||"unsubscribed"==t.subscription_state&&(0,n.jsxs)(m.z,{variant:"outline",className:"text-primary/80 hover:text-primary",onClick:()=>eg("resubscribe"),children:[(0,n.jsx)(I.e,{weight:"bold",className:"h-5 w-5 mr-2"}),"Resubscribe"]})||(0,n.jsxs)(m.z,{variant:"outline",className:"text-primary/80 hover:text-primary",onClick:()=>window.open("".concat(t.khoj_cloud_subscription_url,"?prefilled_email=").concat(t.username),"_blank","noopener,noreferrer"),children:[(0,n.jsx)(I.e,{weight:"bold",className:"h-5 w-5 mr-2"}),"Subscribe"]})})]})]})]}),(0,n.jsxs)("div",{className:"section grid gap-8",children:[(0,n.jsx)("div",{className:"text-2xl",children:"Content"}),(0,n.jsxs)("div",{className:"cards flex flex-wrap gap-16",children:[(0,n.jsxs)(u.Zb,{id:"computer",className:ej,children:[(0,n.jsxs)(u.Ol,{className:"flex flex-row text-xl",children:[(0,n.jsx)(Y.a,{className:"h-8 w-8 mr-2"}),"Knowledge Base",t.enabled_content_source.computer&&(0,n.jsx)(K.f,{className:"h-6 w-6 ml-auto text-green-500",weight:"fill"})]}),(0,n.jsx)(u.aY,{className:"overflow-hidden pb-12 text-gray-400",children:"Manage and search through your digital brain."}),(0,n.jsxs)(u.eW,{className:"flex flex-wrap gap-4",children:[(0,n.jsxs)(m.z,{variant:"outline",size:"sm",title:"Search thorugh files",onClick:()=>window.location.href="/search",children:[(0,n.jsx)(M.Y,{className:"h-5 w-5 inline mr-1"}),"Search"]}),(0,n.jsxs)(m.z,{variant:"outline",size:"sm",className:"".concat(t.enabled_content_source.computer||"hidden"),onClick:()=>eC("computer"),children:[(0,n.jsx)(R.u,{className:"h-5 w-5 inline mr-1"}),"Clear All"]})]})]}),(0,n.jsxs)(u.Zb,{id:"github",className:"".concat(ej," hidden"),children:[(0,n.jsxs)(u.Ol,{className:"flex flex-row text-2xl",children:[(0,n.jsx)(B.b,{className:"h-8 w-8 mr-2"}),"Github"]}),(0,n.jsx)(u.aY,{className:"overflow-hidden pb-12 text-gray-400",children:"Set Github repositories to index"}),(0,n.jsxs)(u.eW,{className:"flex flex-wrap gap-4",children:[(0,n.jsx)(m.z,{variant:"outline",size:"sm",children:t.enabled_content_source.github&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Z.h,{className:"h-5 w-5 inline mr-1"}),"Manage"]})||(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U.F,{className:"h-5 w-5 inline mr-1"}),"Connect"]})}),(0,n.jsxs)(m.z,{variant:"outline",size:"sm",className:"".concat(t.enabled_content_source.github||"hidden"),children:[(0,n.jsx)(R.u,{className:"h-5 w-5 inline mr-1"}),"Disable"]})]})]}),(0,n.jsxs)(u.Zb,{id:"notion",className:ej,children:[(0,n.jsxs)(u.Ol,{className:"text-xl flex flex-row",children:[(0,n.jsx)(W.F,{className:"h-7 w-7 mr-2"}),"Notion",t.enabled_content_source.notion&&(0,n.jsx)(K.f,{className:"h-6 w-6 ml-auto text-green-500",weight:"fill"})]}),(0,n.jsxs)(u.aY,{className:"grid gap-4",children:[(0,n.jsx)("p",{className:"text-gray-400",children:"Sync your Notion workspace."}),!t.notion_oauth_url&&(0,n.jsx)(x.I,{onChange:e=>p(e.target.value),value:i||"",placeholder:"Enter API Key of your Khoj integration on Notion",className:"w-full border border-gray-300 rounded-lg px-4 py-6"})]}),(0,n.jsxs)(u.eW,{className:"flex flex-wrap gap-4",children:[t.notion_oauth_url&&!t.enabled_content_source.notion?(0,n.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>{window.open(t.notion_oauth_url)},children:[(0,n.jsx)(U.F,{className:"h-5 w-5 inline mr-1"}),"Connect"]}):t.enabled_content_source.notion&&i===t.notion_token?(0,n.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>eE("notion"),children:[(0,n.jsx)(V.t,{className:"h-5 w-5 inline mr-1"}),"Sync"]}):t.notion_oauth_url?(0,n.jsx)(n.Fragment,{}):(0,n.jsxs)(m.z,{variant:"outline",size:"sm",onClick:ev,disabled:i===t.notion_token,children:[(0,n.jsx)(P.B,{className:"h-5 w-5 inline mr-1"}),t.enabled_content_source.notion&&"Update API Key"||"Set API Key"]}),(0,n.jsxs)(m.z,{variant:"outline",size:"sm",className:"".concat(t.notion_token||"hidden"),onClick:()=>eC("notion"),children:[(0,n.jsx)(R.u,{className:"h-5 w-5 inline mr-1"}),"Disconnect"]})]})]})]})]}),(0,n.jsxs)("div",{className:"section grid gap-8",children:[(0,n.jsx)("div",{className:"text-2xl",children:"Models"}),(0,n.jsxs)("div",{className:"cards flex flex-wrap gap-16",children:[t.chat_model_options.length>0&&(0,n.jsxs)(u.Zb,{className:ej,children:[(0,n.jsxs)(u.Ol,{className:"text-xl flex flex-row",children:[(0,n.jsx)(H.G,{className:"h-7 w-7 mr-2"}),"Chat"]}),(0,n.jsxs)(u.aY,{className:"overflow-hidden pb-12 grid gap-8 h-fit",children:[(0,n.jsx)("p",{className:"text-gray-400",children:"Pick the chat model to generate text responses"}),(0,n.jsx)(ec,{items:t.chat_model_options,selected:t.selected_chat_model_config,isActive:t.is_active,callbackFunc:ey("chat")})]}),(0,n.jsx)(u.eW,{className:"flex flex-wrap gap-4",children:!t.is_active&&(0,n.jsx)("p",{className:"text-gray-400",children:t.chat_model_options.some(e=>"free"===e.tier)?"Free models available":"Subscribe to switch model"})})]}),t.paint_model_options.length>0&&(0,n.jsxs)(u.Zb,{className:ej,children:[(0,n.jsxs)(u.Ol,{className:"text-xl flex flex-row",children:[(0,n.jsx)(G.Y,{className:"h-7 w-7 mr-2"}),"Paint"]}),(0,n.jsxs)(u.aY,{className:"overflow-hidden pb-12 grid gap-8 h-fit",children:[(0,n.jsx)("p",{className:"text-gray-400",children:"Pick the paint model to generate image responses"}),(0,n.jsx)(ec,{items:t.paint_model_options,selected:t.selected_paint_model_config,isActive:t.is_active,callbackFunc:ey("paint")})]}),(0,n.jsx)(u.eW,{className:"flex flex-wrap gap-4",children:!t.is_active&&(0,n.jsx)("p",{className:"text-gray-400",children:t.paint_model_options.some(e=>"free"===e.tier)?"Free models available":"Subscribe to switch model"})})]}),t.voice_model_options.length>0&&(0,n.jsxs)(u.Zb,{className:ej,children:[(0,n.jsxs)(u.Ol,{className:"text-xl flex flex-row",children:[(0,n.jsx)(L.u,{className:"h-7 w-7 mr-2"}),"Voice"]}),(0,n.jsxs)(u.aY,{className:"overflow-hidden pb-12 grid gap-8 h-fit",children:[(0,n.jsx)("p",{className:"text-gray-400",children:"Pick the voice model to generate speech responses"}),(0,n.jsx)(ec,{items:t.voice_model_options,selected:t.selected_voice_model_config,isActive:t.is_active,callbackFunc:ey("voice")})]}),(0,n.jsx)(u.eW,{className:"flex flex-wrap gap-4",children:!t.is_active&&(0,n.jsx)("p",{className:"text-gray-400",children:t.voice_model_options.some(e=>"free"===e.tier)?"Free models available":"Subscribe to switch model"})})]})]})]}),(0,n.jsxs)("div",{className:"section grid gap-8",children:[(0,n.jsx)("div",{id:"clients",className:"text-2xl",children:"Clients"}),(0,n.jsx)("div",{className:"cards flex flex-col flex-wrap gap-8",children:!t.anonymous_mode&&(0,n.jsx)(eh,{})})]}),(0,n.jsxs)("div",{className:"section grid gap-8",children:[(0,n.jsx)("div",{id:"clients",className:"text-2xl",children:"Account"}),(0,n.jsxs)("div",{className:"cards flex flex-wrap gap-16",children:[(0,n.jsxs)(u.Zb,{className:ej,children:[(0,n.jsxs)(u.Ol,{className:"text-xl flex flex-row",children:[(0,n.jsx)(J.U,{className:"h-7 w-7 mr-2"}),"Export Data"]}),(0,n.jsxs)(u.aY,{className:"overflow-hidden",children:[(0,n.jsx)("p",{className:"pb-4 text-gray-400",children:"Download all your chat conversations"}),et>0&&(0,n.jsxs)("div",{className:"w-full mt-4",children:[(0,n.jsx)(en.E,{value:et,className:"w-full"}),(0,n.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Exported ",ed," of"," ",ex," conversations"]})]})]}),(0,n.jsx)(u.eW,{className:"flex flex-wrap gap-4",children:(0,n.jsxs)(m.z,{variant:"outline",onClick:ew,disabled:D,children:[(0,n.jsx)(J.U,{className:"h-5 w-5 mr-2"}),D?"Exporting...":"Export Chats"]})})]}),(0,n.jsxs)(u.Zb,{className:ej,children:[(0,n.jsxs)(u.Ol,{className:"text-xl flex flex-row",children:[(0,n.jsx)(Y.a,{className:"h-7 w-7 mr-2"}),"Memories"]}),(0,n.jsxs)(u.aY,{className:"overflow-hidden",children:[(0,n.jsx)("p",{className:"pb-4 text-gray-400",children:"View and manage your long-term memories"}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("label",{htmlFor:"enable-memory",className:"text-sm font-medium leading-none ".concat("disabled"===T?"text-gray-400":""),children:"Enable Memory"}),(0,n.jsx)(j,{id:"enable-memory",checked:E,onCheckedChange:e=>eS(e),disabled:"disabled"===T})]}),"disabled"===T&&(0,n.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Memory has been disabled by the server administrator."})]}),(0,n.jsx)(u.eW,{className:"flex flex-wrap gap-4",children:(0,n.jsxs)(y.Vq,{onOpenChange:e=>e&&eN(),children:[(0,n.jsx)(y.hg,{asChild:!0,children:(0,n.jsxs)(m.z,{variant:"outline",children:[(0,n.jsx)(Y.a,{className:"h-5 w-5 mr-2"}),"Browse Memories"]})}),(0,n.jsxs)(y.cZ,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,n.jsx)(y.fK,{children:(0,n.jsx)(y.$N,{children:"Your Memories"})}),(0,n.jsxs)("div",{className:"grid gap-4 py-4",children:[k.map(e=>(0,n.jsx)(es,{memory:e,onDelete:e_,onUpdate:ek},e.id)),0===k.length&&(0,n.jsx)("p",{className:"text-center text-gray-500",children:"No memories found"})]})]})]})})]}),(0,n.jsxs)(u.Zb,{className:ej,children:[(0,n.jsxs)(u.Ol,{className:"text-xl flex flex-row",children:[(0,n.jsx)($.S,{className:"h-7 w-7 mr-2 text-red-500"}),"Delete Account"]}),(0,n.jsx)(u.aY,{className:"overflow-hidden",children:(0,n.jsxs)("p",{className:"pb-4 text-gray-400",children:["This will delete all your account data, including conversations, agents, and any assets you","'","ve generated. Be sure to export before you do this if you want to keep your information."]})}),(0,n.jsx)(u.eW,{className:"flex flex-wrap gap-4",children:(0,n.jsxs)(b.aR,{children:[(0,n.jsx)(b.vW,{asChild:!0,children:(0,n.jsxs)(m.z,{variant:"outline",className:"text-red-500 hover:text-red-600 hover:bg-red-50",children:[(0,n.jsx)($.S,{className:"h-5 w-5 mr-2"}),"Delete Account"]})}),(0,n.jsxs)(b._T,{children:[(0,n.jsxs)(b.fY,{children:[(0,n.jsx)(b.f$,{children:"Are you absolutely sure?"}),(0,n.jsx)(b.yT,{children:"This action is irreversible. This will permanently delete your account and remove all your data from our servers."})]}),(0,n.jsxs)(b.xo,{children:[(0,n.jsx)(b.le,{children:"Cancel"}),(0,n.jsxs)(b.OL,{className:"bg-red-500 hover:bg-red-600",onClick:async()=>{try{if(!(await fetch("/api/self",{method:"DELETE"})).ok)throw Error("Failed to delete account");ep({title:"Account Deleted",description:"Your account has been successfully deleted."}),window.location.href="/"}catch(e){console.error("Error deleting account:",e),ep({title:"Error",description:"Failed to delete account. Please try again or contact support.",variant:"destructive"})}},children:[(0,n.jsx)($.S,{className:"h-5 w-5 mr-2"}),"Delete Account"]})]})]})]})})]})]})]})]})})})})]})]})]}):(0,n.jsx)(q.Z,{})}(a=r||(r={})).Setup="setup",a.SendOTP="otp",a.VerifyOTP="verify",a.Verified="verified"},32759:function(e,t,s){"use strict";s.d(t,{E:function(){return o}});var a=s(57437),r=s(2265),n=s(60610),i=s(94508);let o=r.forwardRef((e,t)=>{let{className:s,value:r,indicatorColor:o,...l}=e;return(0,a.jsx)(n.fC,{ref:t,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...l,children:(0,a.jsx)(n.z$,{className:"h-full w-full flex-1 bg-primary transition-all ".concat(o),style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});o.displayName=n.fC.displayName},77992:function(e,t,s){"use strict";s.d(t,{pm:function(){return m}});var a=s(2265);let r=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=o(c,e),l.forEach(e=>{e(c)})}function h(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(c);return a.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:h,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},917:function(e){e.exports={page:"settings_page__mP7qk",contentBody:"settings_contentBody__uZjue",phoneInput:"settings_phoneInput__j6xJN"}}},function(e){e.O(0,[6008,5638,7079,7200,8667,2684,4609,945,567,2327,2971,2117,1744],function(){return e(e.s=62960)}),_N_E=e.O()}]);