# æ’ä»¶ç³»ç»Ÿç¤ºä¾‹

æœ¬ç›®å½•åŒ…å« sageTSDB æ’ä»¶ç³»ç»Ÿçš„ä½¿ç”¨ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•æ‰©å±•ç³»ç»ŸåŠŸèƒ½ã€‚

## ğŸ“š ç¤ºä¾‹åˆ—è¡¨

### 1. plugin_usage_example.cpp
**åŠŸèƒ½**: æ’ä»¶ç³»ç»Ÿå®Œæ•´ä½¿ç”¨æ¼”ç¤º

**æ¼”ç¤ºå†…å®¹**:
- æ’ä»¶æ³¨å†Œå’ŒåŠ è½½
- èµ„æºç®¡ç†å’Œé…ç½®
- æ’ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†
- æ’ä»¶é—´é€šä¿¡
- é”™è¯¯å¤„ç†å’Œæ—¥å¿—

**è¿è¡Œæ—¶é—´**: ~2 åˆ†é’Ÿ

**è¿è¡Œæ–¹å¼**:
```bash
cd build/examples
./plugin_usage_example
```

---

## ğŸ”Œ æ’ä»¶ç±»å‹è¯´æ˜

sageTSDB æ”¯æŒä»¥ä¸‹ç±»å‹çš„æ’ä»¶ï¼š

### 1. è®¡ç®—å¼•æ“æ’ä»¶
- **åŠŸèƒ½**: æ‰©å±•æ•°æ®å¤„ç†èƒ½åŠ›
- **ç¤ºä¾‹**: PECJ Join å¼•æ“
- **æ¥å£**: `ComputeEnginePlugin`

### 2. å­˜å‚¨æ’ä»¶
- **åŠŸèƒ½**: è‡ªå®šä¹‰å­˜å‚¨åç«¯
- **ç¤ºä¾‹**: LSM-Treeã€æ—¶åºæ•°æ®åº“
- **æ¥å£**: `StoragePlugin`

### 3. åˆ†ææ’ä»¶
- **åŠŸèƒ½**: æ•°æ®åˆ†æå’Œå¼‚å¸¸æ£€æµ‹
- **ç¤ºä¾‹**: æ•…éšœæ£€æµ‹ã€é¢„æµ‹åˆ†æ
- **æ¥å£**: `AnalysisPlugin`

---

## ğŸ› ï¸ å¼€å‘è‡ªå®šä¹‰æ’ä»¶

### åŸºæœ¬æ­¥éª¤

1. **ç»§æ‰¿æ’ä»¶åŸºç±»**
```cpp
class MyPlugin : public sage::tsdb::ComputeEnginePlugin {
public:
    std::string getName() const override;
    void initialize(const PluginConfig& config) override;
    void execute() override;
    void shutdown() override;
};
```

2. **å®ç°å¿…è¦æ¥å£**
- `getName()`: è¿”å›æ’ä»¶åç§°
- `initialize()`: åˆå§‹åŒ–æ’ä»¶
- `execute()`: æ‰§è¡Œæ’ä»¶é€»è¾‘
- `shutdown()`: æ¸…ç†èµ„æº

3. **æ³¨å†Œæ’ä»¶**
```cpp
auto& manager = PluginManager::getInstance();
manager.registerPlugin(std::make_unique<MyPlugin>());
```

4. **é…ç½®æ’ä»¶**
```cpp
PluginConfig config;
config.set("param1", "value1");
manager.configurePlugin("MyPlugin", config);
```

---

## ğŸ“– æ’ä»¶å¼€å‘æŒ‡å—

### æœ€ä½³å®è·µ

1. **èµ„æºç®¡ç†**: åœ¨ `initialize()` ä¸­åˆ†é…ï¼Œåœ¨ `shutdown()` ä¸­é‡Šæ”¾
2. **é”™è¯¯å¤„ç†**: ä½¿ç”¨å¼‚å¸¸æˆ–è¿”å›é”™è¯¯ç ï¼Œç¡®ä¿ä¸å½±å“ä¸»ç³»ç»Ÿ
3. **çº¿ç¨‹å®‰å…¨**: å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä½¿ç”¨é”ä¿æŠ¤å…±äº«èµ„æº
4. **æ—¥å¿—è®°å½•**: ä½¿ç”¨ç»Ÿä¸€çš„æ—¥å¿—æ¥å£ï¼Œä¾¿äºè°ƒè¯•
5. **é…ç½®éªŒè¯**: åœ¨ `initialize()` ä¸­éªŒè¯é…ç½®å‚æ•°

### æ€§èƒ½ä¼˜åŒ–

1. **é¿å…é˜»å¡**: é•¿æ—¶é—´æ“ä½œåº”è¯¥å¼‚æ­¥æ‰§è¡Œ
2. **å†…å­˜æ•ˆç‡**: ä½¿ç”¨å†…å­˜æ± ï¼Œå‡å°‘åŠ¨æ€åˆ†é…
3. **ç¼“å­˜å‹å¥½**: æ³¨æ„æ•°æ®å±€éƒ¨æ€§
4. **æ‰¹å¤„ç†**: æ‰¹é‡å¤„ç†æ•°æ®ä»¥æé«˜æ•ˆç‡

---

## ğŸ” æµ‹è¯•æ’ä»¶

```bash
# ç¼–è¯‘æ’ä»¶
cd build
cmake .. -DSAGE_TSDB_BUILD_PLUGINS=ON
make

# è¿è¡Œæµ‹è¯•
cd tests
./test_pecj_plugin
./test_fault_detection_plugin
```

---

## ğŸ“š ç›¸å…³ç¤ºä¾‹

- [PECJ è®¡ç®—å¼•æ“æ’ä»¶](../../src/plugins/pecj_plugin.cpp)
- [æ•…éšœæ£€æµ‹åˆ†ææ’ä»¶](../../src/plugins/fault_detection_plugin.cpp)
- [æ’ä»¶å•å…ƒæµ‹è¯•](../../tests/test_pecj_plugin.cpp)

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [æ’ä»¶ç³»ç»Ÿæ¶æ„](../../docs/)
- [API å‚è€ƒ](../../docs/)
- [PECJ é›†æˆç¤ºä¾‹](../integration/)
