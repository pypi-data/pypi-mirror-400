import"./DsnmJJEf.js";import{d as vt,o as it,b as ke,s as Le,c as bt}from"./CXB-c7mV.js";import{L as wt,au as yt,V as _t,K as St,bi as xt,C as nt,p as Ve,f as Q,a1 as Ge,bh as Ot,a as He,e as de,h as w,i as se,s as ie,d as I,r as F,t as fe,l as Te,b as U,c as ze,a2 as ft,n as De,aJ as at,u as xe,j as Ae,D as kt,g as Be,k as ht,o as Ze}from"./DqiEsuqZ.js";import{i as be}from"./Bn_fozzu.js";import{p as J}from"./Cx4ZVFGf.js";import{s as Lt,d as Re,g as dt,u as Et}from"./P-s3qVBC.js";import{s as Ct,a as Ee,c as Ce}from"./p0JS8kMN.js";import{s as tt,c as Tt,o as At,f as Dt,a as Pt,b as Nt}from"./D_B_bJuj.js";import{b as Qe}from"./KivD7ms6.js";import"./CpqPsp4e.js";function Mt(d,e){var t=void 0,s;wt(()=>{t!==(t=e())&&(s&&(yt(s),s=null),t&&(s=_t(()=>{St(()=>t(d))})))})}function Rt(d){return Array.from(new Set(d))}function Ws(d){return d.map(e=>({value:e,label:e}))}function Ks(d,e,t){return Object.entries(d).filter(([,s])=>{const i=s.split(",");return t&&!e.includes(i[0])&&e.includes(i[1])||!t&&e.includes(i[0])&&!e.includes(i[1])}).map(([s])=>s)}class It{#e;#t;constructor(e,t){this.#e=e,this.#t=vt(t)}get current(){return this.#t(),this.#e()}}const Ft=new It(()=>window.innerWidth,d=>xt(window,"resize",d));var Bt=(d,e,t)=>{se(e,!0),t()},jt=(d,e)=>{se(e,!1)},Ut=ft('<polygon points="0,0 20,0 10,10" class="fill-gray-200 dark:fill-gray-800"></polygon><path d="M0,0 L10,10 L20,0" class="fill-none stroke-black dark:stroke-white"></path>',1),Ht=ft('<polygon points="0,10 20,10 10,0" class="fill-gray-200 dark:fill-gray-800"></polygon><path d="M0,10 L10,0 L20,10" class="fill-none stroke-black dark:stroke-white"></path>',1),Vt=Q('<button aria-label="Help tooltip"><i class="bi bi-question-circle-fill text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"></i></button> <div class="absolute w-[max-content] font-normal z-3 border bg-gray-200 dark:bg-gray-800 border-black dark:border-white rounded-lg p-2 text-base"><!> <svg class="absolute z-3" width="20" height="10"><!></svg></div>',1);function zt(d,e){Ve(e,!0);const t=8;let s=J(e,"maxWidth",3,500),i=de(void 0),n=de(void 0),l=de(void 0),o=de(!1),h=de(!1),c=de(null),p=de(null),g=Te(()=>Math.min((Ft.current||s())-2*t,s())),f=de(null),_=de("top");async function P(){if(!w(i)||!w(n)||!w(l))return;const{x:a,y:u,placement:v,middlewareData:m}=await Tt(w(i),w(n),{placement:"top",middleware:[At(8),Dt(),Pt({padding:t}),Nt({element:w(l)})]});se(c,a,!0),se(p,u,!0),se(_,{top:"bottom",bottom:"top"}[v.split("-")[0]]??"top",!0),se(f,m.arrow?.x??null,!0)}it(()=>{P()});var Z=Vt();Ge("resize",Ot,P);var M=He(Z);M.__click=P,M.__mouseover=[Bt,o,P],M.__focusout=[jt,h],Qe(M,a=>se(i,a),()=>w(i));var q=ie(M,2);let H;var he=I(q);ke(he,()=>e.children);var Y=ie(he,2);let $;var ae=I(Y);{var N=a=>{var u=Ut();De(),U(a,u)},r=a=>{var u=Ht();De(),U(a,u)};be(ae,a=>{w(_)==="bottom"?a(N):a(r,!1)})}F(Y),Qe(Y,a=>se(l,a),()=>w(l)),F(q),Qe(q,a=>se(n,a),()=>w(n)),fe((a,u)=>{H=tt(q,"",H,a),$=tt(Y,`${w(_)}: -10px`,$,u)},[()=>({display:w(o)||w(h)?"block":"none",top:w(p)!==null?`${w(p)}px`:0,left:w(c)!==null?`${w(c)}px`:0,"max-width":`${w(g)}px`}),()=>({left:w(f)!==null?`${w(f)}px`:void 0})]),Ge("focus",M,()=>{se(h,!0),P()}),Ge("mouseleave",M,()=>{se(o,!1)}),U(d,Z),ze()}nt(["click","mouseover","focusout"]);var qt=Q('<label class="fw-medium fs-4"> </label>'),Wt=Q('<div class="fw-medium fs-4"> </div>'),Kt=Q('<div class="flex justify-between items-center mb-1"><div class="flex items-center gap-2"><div class="uppercase text-gray-600 dark:text-gray-400 tracking-wide text-sm"><!></div> <!></div> <!></div>');function Jt(d,e){var t=Kt(),s=I(t),i=I(s),n=I(i);{var l=g=>{var f=qt(),_=I(f,!0);F(f),fe(()=>{Ct(f,"for",e.formId),Le(_,e.label)}),U(g,f)},o=g=>{var f=Wt(),_=I(f,!0);F(f),fe(()=>Le(_,e.label)),U(g,f)};be(n,g=>{e.formId?g(l):g(o,!1)})}F(i);var h=ie(i,2);{var c=g=>{zt(g,{get children(){return e.helpText}})};be(h,g=>{e.helpText&&g(c)})}F(s);var p=ie(s,2);ke(p,()=>e.rightSide??at),F(t),U(d,t)}class Gt{main;placeholder;values;single;max;value;valueText;valueDelete;valueOut;deselect;deselectPath;arrow;arrowClose;arrowOpen;content;contentOpen;dirAbove;dirBelow;search;searchHighlighter;searching;addable;addablePath;list;optgroup;optgroupLabel;optgroupLabelText;optgroupActions;optgroupSelectAll;optgroupSelectAllBox;optgroupSelectAllCheck;optgroupClosable;option;optionDelete;highlighted;mainOpen;close;selected;error;disabled;hide;constructor(e){e||(e={}),this.main=e.main||"ss-main",this.placeholder=e.placeholder||"ss-placeholder",this.values=e.values||"ss-values",this.single=e.single||"ss-single",this.max=e.max||"ss-max",this.value=e.value||"ss-value",this.valueText=e.valueText||"ss-value-text",this.valueDelete=e.valueDelete||"ss-value-delete",this.valueOut=e.valueOut||"ss-value-out",this.deselect=e.deselect||"ss-deselect",this.deselectPath=e.deselectPath||"M10,10 L90,90 M10,90 L90,10",this.arrow=e.arrow||"ss-arrow",this.arrowClose=e.arrowClose||"M10,30 L50,70 L90,30",this.arrowOpen=e.arrowOpen||"M10,70 L50,30 L90,70",this.content=e.content||"ss-content",this.contentOpen=e.contentOpen||"ss-open",this.dirAbove=e.dirAbove||"ss-dir-above",this.dirBelow=e.dirBelow||"ss-dir-below",this.search=e.search||"ss-search",this.searchHighlighter=e.searchHighlighter||"ss-search-highlight",this.searching=e.searching||"ss-searching",this.addable=e.addable||"ss-addable",this.addablePath=e.addablePath||"M50,10 L50,90 M10,50 L90,50",this.list=e.list||"ss-list",this.optgroup=e.optgroup||"ss-optgroup",this.optgroupLabel=e.optgroupLabel||"ss-optgroup-label",this.optgroupLabelText=e.optgroupLabelText||"ss-optgroup-label-text",this.optgroupActions=e.optgroupActions||"ss-optgroup-actions",this.optgroupSelectAll=e.optgroupSelectAll||"ss-selectall",this.optgroupSelectAllBox=e.optgroupSelectAllBox||"M60,10 L10,10 L10,90 L90,90 L90,50",this.optgroupSelectAllCheck=e.optgroupSelectAllCheck||"M30,45 L50,70 L90,10",this.optgroupClosable=e.optgroupClosable||"ss-closable",this.option=e.option||"ss-option",this.optionDelete=e.optionDelete||"M10,10 L90,90 M10,90 L90,10",this.highlighted=e.highlighted||"ss-highlighted",this.mainOpen=e.mainOpen||"ss-open",this.close=e.close||"ss-close",this.selected=e.selected||"ss-selected",this.error=e.error||"ss-error",this.disabled=e.disabled||"ss-disabled",this.hide=e.hide||"ss-hide"}}function rt(){return Math.random().toString(36).substring(2,10)}function Zt(d,e){function t(i,n){return n&&i&&i.classList&&i.classList.contains(n)||n&&i&&i.dataset&&i.dataset.id&&i.dataset.id===e?i:null}function s(i,n){return!i||i===document?null:t(i,n)?i:s(i.parentNode,n)}return t(d,e)||s(d,e)}function qe(d,e=50,t=!1){let s;return function(...i){const n=self,l=()=>{s=null,t||d.apply(n,i)},o=t&&!s;clearTimeout(s),s=setTimeout(l,e),o&&d.apply(n,i)}}function Ye(d,e){return JSON.stringify(d)===JSON.stringify(e)}function Qt(d){const e=d.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,t=>"-"+t.toLowerCase());return d[0]===d[0].toUpperCase()?e.substring(1):e}class G{id;value;text;html;defaultSelected;selected;display;disabled;placeholder;class;style;data;mandatory;constructor(e){this.id=!e.id||e.id===""?rt():e.id,this.value=e.value===void 0?e.text||"":e.value||"",this.text=e.text||"",this.html=e.html||"",this.defaultSelected=e.defaultSelected!==void 0?e.defaultSelected:!1,this.selected=e.selected!==void 0?e.selected:!1,this.display=e.display!==void 0?e.display:!0,this.disabled=e.disabled!==void 0?e.disabled:!1,this.mandatory=e.mandatory!==void 0?e.mandatory:!1,this.placeholder=e.placeholder!==void 0?e.placeholder:!1,this.class=e.class||"",this.style=e.style||"",this.data=e.data||{}}}class me{id;label;selectAll;selectAllText;closable;options;constructor(e){if(this.id=!e.id||e.id===""?rt():e.id,this.label=e.label||"",this.selectAll=e.selectAll===void 0?!1:e.selectAll,this.selectAllText=e.selectAllText||"Select All",this.closable=e.closable||"off",this.options=[],e.options)for(const t of e.options)this.options.push(new G(t))}}class Yt{selectType="single";data=[];selectedOrder=[];constructor(e,t){this.selectType=e,this.setData(t)}validateDataArray(e){if(!Array.isArray(e))return new Error("Data must be an array");for(let t of e)if(t)if(t instanceof me||"label"in t){if(!("label"in t))return new Error("Optgroup must have a label");if("options"in t&&t.options)for(let s of t.options){const i=this.validateOption(s);if(i)return i}}else if(t instanceof G||"text"in t){const s=this.validateOption(t);if(s)return s}else return new Error("Data object must be a valid optgroup or option");return null}validateOption(e){return"text"in e?null:new Error("Option must have a text")}partialToFullData(e){let t=[];return e.forEach(s=>{if(s){if(s instanceof me||"label"in s){let i=[];"options"in s&&s.options&&s.options.forEach(n=>{i.push(new G(n))}),i.length>0&&t.push(new me(s))}(s instanceof G||"text"in s)&&t.push(new G(s))}}),t}setData(e,t=!1){const s=this.partialToFullData(e);if(t){const i=this.getSelectedOptions(),n=[];i.forEach(l=>{let o=!1;for(const h of s){if(h instanceof G&&h.id===l.id){o=!0;break}if(h instanceof me){for(const c of h.options)if(c.id===l.id){o=!0;break}}}o||n.push(l)}),this.data=[...n,...s]}else this.data=s;this.selectType==="single"&&this.setSelectedBy("id",this.getSelected())}getData(){return this.filter(null,!0)}getDataOptions(){return this.filter(null,!1)}addOption(e,t=!1){if(t){let s=[new G(e)];this.setData(s.concat(this.getData()))}else this.setData(this.getData().concat(new G(e)))}setSelectedBy(e,t){let s=null,i=!1;const n=[];for(let o of this.data){if(o instanceof me)for(let h of o.options){s||(s=h);let c=h[e]||"";h.selected=i?!1:t.includes(c),h.selected&&(n.push(h),this.selectType==="single"&&(i=!0))}o instanceof G&&(s||(s=o),o.selected=i?!1:t.includes(o[e]),o.selected&&(n.push(o),this.selectType==="single"&&(i=!0)))}this.selectType==="single"&&s&&!i&&(s.selected=!0,n.push(s));const l=t.map(o=>n.find(h=>h[e]===o)?.id||"");this.selectedOrder=l}getSelected(){return this.getSelectedOptions().map(e=>e.id)}getSelectedValues(){return this.getSelectedOptions().map(e=>e.value)}getSelectedOptions(){return this.filter(e=>e.selected,!1)}getOptgroupByID(e){for(let t of this.data)if(t instanceof me&&t.id===e)return t;return null}getOptionByID(e){let t=this.filter(s=>s.id===e,!1);return t.length?t[0]:null}getSelectType(){return this.selectType}getFirstOption(){let e=null;for(let t of this.data)if(t instanceof me?e=t.options[0]:t instanceof G&&(e=t),e)break;return e}search(e,t){return e=e.trim(),e===""?this.getData():this.filter(s=>t(s,e),!0)}filter(e,t){const s=[];return this.data.forEach(i=>{if(i instanceof me){let n=[];if(i.options.forEach(l=>{(!e||e(l))&&(t?n.push(new G(l)):s.push(new G(l)))}),n.length>0){let l=new me(i);l.options=n,s.push(l)}}i instanceof G&&(!e||e(i))&&s.push(new G(i))}),s}selectedOrderOptions(e){const t=[];return this.selectedOrder.forEach(s=>{const i=e.find(n=>n.id===s);i&&t.push(i)}),e.forEach(s=>{let i=!1;t.forEach(n=>{if(s.id===n.id){i=!0;return}}),i||t.push(s)}),t}}class Xt{settings;store;callbacks;lastSelectedOption;main;content;classes;constructor(e,t,s,i){this.store=s,this.settings=e,this.classes=t,this.callbacks=i,this.lastSelectedOption=null,this.main=this.mainDiv(),this.content=this.contentDiv(),this.updateClassStyles(),this.updateAriaAttributes(),this.settings.contentPosition!=="relative"&&(this.content.main.style.top="-9999px",this.content.main.style.left="-9999px",this.content.main.style.margin="0",this.content.main.style.width="auto"),this.settings.contentLocation&&this.settings.contentLocation.appendChild(this.content.main)}enable(){this.main.main.classList.remove(this.classes.disabled),this.main.main.setAttribute("aria-disabled","false"),this.content.search.input.disabled=!1}disable(){this.main.main.classList.add(this.classes.disabled),this.main.main.setAttribute("aria-disabled","true"),this.content.search.input.disabled=!0}open(){this.main.arrow.path.setAttribute("d",this.classes.arrowOpen),this.main.main.setAttribute("aria-expanded","true");const e=this.settings.openPosition==="up"?this.classes.dirAbove:this.classes.dirBelow;this.main.main.classList.add(e),this.content.main.classList.add(e),this.content.main.classList.add(this.classes.contentOpen),this.content.search.input.removeAttribute("aria-hidden"),this.moveContent();const t=this.store.getSelectedOptions();if(t.length){const s=t[t.length-1].id,i=this.content.list.querySelector('[data-id="'+s+'"]');i&&this.ensureElementInView(this.content.list,i)}}close(){this.main.main.setAttribute("aria-expanded","false"),this.main.arrow.path.setAttribute("d",this.classes.arrowClose),this.content.main.classList.remove(this.classes.contentOpen),this.content.search.input.setAttribute("aria-hidden","true"),this.main.main.removeAttribute("aria-activedescendant");const e=this.getAnimationTiming();setTimeout(()=>{this.main.main.classList.remove(this.classes.dirAbove,this.classes.dirBelow),this.content.main.classList.remove(this.classes.dirAbove,this.classes.dirBelow)},e)}getAnimationTiming(){const e=getComputedStyle(this.content.main).getPropertyValue("--ss-animation-timing").trim();if(e){if(e.endsWith("ms"))return parseFloat(e);if(e.endsWith("s"))return parseFloat(e)*1e3}return 200}updateClassStyles(){if(this.main.main.className="",this.main.main.removeAttribute("style"),this.content.main.className="",this.content.main.removeAttribute("style"),this.main.main.classList.add(this.classes.main),this.content.main.classList.add(this.classes.content),this.settings.style!==""&&(this.main.main.style.cssText=this.settings.style,this.content.main.style.cssText=this.settings.style),this.settings.class.length)for(const e of this.settings.class)e.trim()!==""&&(this.main.main.classList.add(e.trim()),this.content.main.classList.add(e.trim()));(this.settings.contentPosition==="relative"||this.settings.contentPosition==="fixed")&&this.content.main.classList.add("ss-"+this.settings.contentPosition)}updateAriaAttributes(){const e=this.content.list.id;this.main.main.role="combobox",this.main.main.setAttribute("aria-haspopup","listbox"),this.main.main.setAttribute("aria-controls",e),this.main.main.setAttribute("aria-expanded","false"),this.content.list.setAttribute("role","listbox"),this.content.list.setAttribute("aria-label",this.settings.ariaLabel+" listbox"),this.settings.isMultiple&&this.content.list.setAttribute("aria-multiselectable","true"),this.content.search.input.setAttribute("aria-controls",e)}mainDiv(){const e=document.createElement("div");e.dataset.id=this.settings.id,e.setAttribute("aria-label",this.settings.ariaLabel),e.tabIndex=0,e.onkeydown=c=>{switch(c.key){case"ArrowUp":case"ArrowDown":return this.callbacks.open(),c.key==="ArrowDown"?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Enter":case" ":this.callbacks.open();const p=this.content.list.querySelector("."+this.classes.highlighted);return p&&p.click(),!1;case"Escape":return this.callbacks.close(),!1}return c.key.length===1&&this.callbacks.open(),!0},e.onclick=c=>{this.settings.disabled||(this.settings.isOpen?this.callbacks.close():this.callbacks.open())};const t=document.createElement("div");t.classList.add(this.classes.values),e.appendChild(t);const s=document.createElement("div");s.classList.add(this.classes.deselect);const i=this.store?.getSelectedOptions();!this.settings.allowDeselect||this.settings.isMultiple&&i&&i.length<=0?s.classList.add(this.classes.hide):s.classList.remove(this.classes.hide),s.onclick=c=>{if(c.stopPropagation(),this.settings.disabled)return;let p=!0;const g=this.store.getSelectedOptions(),f=[];if(this.callbacks.beforeChange&&(p=this.callbacks.beforeChange(f,g)===!0),p){if(this.settings.isMultiple)this.callbacks.setSelected([],!1),this.updateDeselectAll();else{const _=this.store.getFirstOption(),P=_?_.id:"";this.callbacks.setSelected(P,!1)}this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(this.store.getSelectedOptions())}};const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox","0 0 100 100");const l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("d",this.classes.deselectPath),n.appendChild(l),s.appendChild(n),e.appendChild(s);const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.classList.add(this.classes.arrow),o.setAttribute("viewBox","0 0 100 100");const h=document.createElementNS("http://www.w3.org/2000/svg","path");return h.setAttribute("d",this.classes.arrowClose),this.settings.alwaysOpen&&o.classList.add(this.classes.hide),o.appendChild(h),e.appendChild(o),{main:e,values:t,deselect:{main:s,svg:n,path:l},arrow:{main:o,path:h}}}mainFocus(e){e!=="click"&&this.main.main.focus({preventScroll:!0})}placeholder(){const e=this.store.filter(i=>i.placeholder,!1);let t=this.settings.placeholderText;e.length&&(e[0].html!==""?t=e[0].html:e[0].text!==""&&(t=e[0].text));const s=document.createElement("div");return s.classList.add(this.classes.placeholder),s.innerHTML=t,s}renderValues(){if(!this.settings.isMultiple){this.renderSingleValue();return}this.renderMultipleValues(),this.updateDeselectAll()}renderSingleValue(){const e=this.store.filter(s=>s.selected&&!s.placeholder,!1),t=e.length>0?e[0]:null;if(!t)this.main.values.innerHTML=this.placeholder().outerHTML;else{const s=document.createElement("div");s.classList.add(this.classes.single),t.html?s.innerHTML=t.html:s.innerText=t.text,this.main.values.innerHTML=s.outerHTML}!this.settings.allowDeselect||!e.length?this.main.deselect.main.classList.add(this.classes.hide):this.main.deselect.main.classList.remove(this.classes.hide)}renderMultipleValues(){let e=this.main.values.childNodes,t=this.store.filter(i=>i.selected&&i.display,!1);if(t.length===0){this.main.values.innerHTML=this.placeholder().outerHTML;return}else{const i=this.main.values.querySelector("."+this.classes.placeholder);i&&i.remove()}if(t.length>this.settings.maxValuesShown){const i=document.createElement("div");i.classList.add(this.classes.max),i.textContent=this.settings.maxValuesMessage.replace("{number}",t.length.toString()),this.main.values.innerHTML=i.outerHTML;return}else{const i=this.main.values.querySelector("."+this.classes.max);i&&i.remove()}this.settings.keepOrder&&(t=this.store.selectedOrderOptions(t));let s=[];for(let i=0;i<e.length;i++){const n=e[i],l=n.getAttribute("data-id");l&&(t.filter(o=>o.id===l,!1).length||s.push(n))}for(const i of s)i.classList.add(this.classes.valueOut),setTimeout(()=>{this.main.values.hasChildNodes()&&this.main.values.contains(i)&&this.main.values.removeChild(i)},100);e=this.main.values.childNodes;for(let i=0;i<t.length;i++){let n=!0;for(let l=0;l<e.length;l++)t[i].id===String(e[l].dataset.id)&&(n=!1);n&&(this.settings.keepOrder?this.main.values.appendChild(this.multipleValue(t[i])):e.length===0?this.main.values.appendChild(this.multipleValue(t[i])):i===0?this.main.values.insertBefore(this.multipleValue(t[i]),e[i]):e[i-1].insertAdjacentElement("afterend",this.multipleValue(t[i])))}}multipleValue(e){const t=document.createElement("div");t.classList.add(this.classes.value),t.dataset.id=e.id;const s=document.createElement("div");if(s.classList.add(this.classes.valueText),s.textContent=e.text,t.appendChild(s),!e.mandatory){const i=document.createElement("div");i.classList.add(this.classes.valueDelete),i.setAttribute("tabindex","0"),i.onclick=o=>{if(o.preventDefault(),o.stopPropagation(),this.settings.disabled)return;let h=!0;const c=this.store.getSelectedOptions(),p=c.filter(g=>g.selected&&g.id!==e.id,!0);if(!(this.settings.minSelected&&p.length<this.settings.minSelected)&&(this.callbacks.beforeChange&&(h=this.callbacks.beforeChange(p,c)===!0),h)){let g=[];for(const f of p){if(f instanceof me)for(const _ of f.options)_.id&&g.push(_.id);f instanceof G&&g.push(f.id)}this.callbacks.setSelected(g,!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(p),this.updateDeselectAll()}};const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox","0 0 100 100");const l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("d",this.classes.optionDelete),n.appendChild(l),i.appendChild(n),t.appendChild(i),i.onkeydown=o=>{o.key==="Enter"&&i.click()}}return t}contentDiv(){const e=document.createElement("div");e.dataset.id=this.settings.id;const t=this.searchDiv();e.appendChild(t.main);const s=this.listDiv();return e.appendChild(s),{main:e,search:t,list:s}}moveContent(){if(this.settings.contentPosition==="relative"){this.moveContentBelow();return}if(this.settings.openPosition==="down"){this.moveContentBelow();return}else if(this.settings.openPosition==="up"){this.moveContentAbove();return}this.putContent()==="up"?this.moveContentAbove():this.moveContentBelow()}searchDiv(){const e=document.createElement("div"),t=document.createElement("input"),s=document.createElement("div");e.classList.add(this.classes.search);const i={main:e,input:t};if(this.settings.showSearch||(e.classList.add(this.classes.hide),t.readOnly=!0),t.type="search",t.placeholder=this.settings.searchPlaceholder,t.tabIndex=-1,t.setAttribute("aria-label",this.settings.searchPlaceholder),t.setAttribute("aria-autocomplete","list"),t.setAttribute("autocapitalize","off"),t.setAttribute("autocomplete","off"),t.setAttribute("autocorrect","off"),t.setAttribute("aria-hidden","true"),t.oninput=qe(n=>{this.callbacks.search(n.target.value)},100),t.onkeydown=n=>{switch(n.key){case"ArrowUp":case"ArrowDown":return n.key==="ArrowDown"?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Escape":return this.callbacks.close(),!1;case" ":const l=this.content.list.querySelector("."+this.classes.highlighted);return l?(l.click(),!1):!0;case"Enter":const o=this.content.list.querySelector("."+this.classes.highlighted);return o?(o.click(),!1):this.callbacks.addable?(s.click(),!1):!0}return!0},e.appendChild(t),this.callbacks.addable){s.classList.add(this.classes.addable);const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox","0 0 100 100");const l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("d",this.classes.addablePath),n.appendChild(l),s.appendChild(n),s.onclick=o=>{if(o.preventDefault(),o.stopPropagation(),!this.callbacks.addable)return;const h=this.content.search.input.value.trim();if(h===""){this.content.search.input.focus();return}const c=g=>{let f=new G(g);if(this.callbacks.addOption(f),this.settings.isMultiple){let _=this.store.getSelected();_.push(f.id),this.callbacks.setSelected(_,!0)}else this.callbacks.setSelected([f.id],!0);this.callbacks.search(""),this.settings.closeOnSelect&&setTimeout(()=>{this.callbacks.close()},100)},p=this.callbacks.addable(h);p===!1||p===void 0||p===null||(p instanceof Promise?p.then(g=>{typeof g=="string"?c({text:g,value:g}):p instanceof Error?this.renderError(p.message):c(g)}):typeof p=="string"?c({text:p,value:p}):p instanceof Error?this.renderError(p.message):c(p))},e.appendChild(s),i.addable={main:s,svg:n,path:l}}return i}searchFocus(){this.content.search.input.focus({preventScroll:!0})}getOptions(e=!1,t=!1,s=!1){let i="."+this.classes.option;return e&&(i+=":not(."+this.classes.placeholder+")"),t&&(i+=":not(."+this.classes.disabled+")"),s&&(i+=":not(."+this.classes.hide+")"),Array.from(this.content.list.querySelectorAll(i))}highlight(e){const t=this.getOptions(!0,!0,!0);if(t.length===0)return;if(t.length===1&&!t[0].classList.contains(this.classes.highlighted)){t[0].classList.add(this.classes.highlighted);return}let s=!1;for(const n of t)n.classList.contains(this.classes.highlighted)&&(s=!0);if(!s){for(const n of t)if(n.classList.contains(this.classes.selected)){n.classList.add(this.classes.highlighted);break}}for(let n=0;n<t.length;n++)if(t[n].classList.contains(this.classes.highlighted)){const l=t[n];l.classList.remove(this.classes.highlighted);const o=l.parentElement;if(o&&o.classList.contains(this.classes.mainOpen)){const p=o.querySelector("."+this.classes.optgroupLabel);p&&p.click()}let h=t[e==="down"?n+1<t.length?n+1:0:n-1>=0?n-1:t.length-1];h.classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,h),h.id&&this.main.main.setAttribute("aria-activedescendant",h.id);const c=h.parentElement;if(c&&c.classList.contains(this.classes.close)){const p=c.querySelector("."+this.classes.optgroupLabel);p&&p.click()}return}const i=t[e==="down"?0:t.length-1];i.classList.add(this.classes.highlighted),i.id&&this.main.main.setAttribute("aria-activedescendant",i.id),this.ensureElementInView(this.content.list,i)}listDiv(){const e=document.createElement("div");e.classList.add(this.classes.list);const t=this.settings.id+"-list";return e.id=t,e.dataset.id=t,e}renderError(e){this.content.list.innerHTML="";const t=document.createElement("div");t.classList.add(this.classes.error),t.textContent=e,this.content.list.appendChild(t)}renderSearching(){this.content.list.innerHTML="";const e=document.createElement("div");e.classList.add(this.classes.searching),e.textContent=this.settings.searchingText,this.content.list.appendChild(e)}renderOptions(e){if(this.content.list.innerHTML="",e.length===0){const s=document.createElement("div");s.classList.add(this.classes.search),this.callbacks.addable?s.innerHTML=this.settings.addableText.replace("{value}",this.content.search.input.value):s.innerHTML=this.settings.searchText,this.content.list.appendChild(s);return}this.settings.allowDeselect&&!this.settings.isMultiple&&(this.store.filter(s=>s.placeholder,!1).length||this.store.addOption(new G({text:"",value:"",selected:!1,placeholder:!0}),!0));const t=document.createDocumentFragment();for(const s of e){if(s instanceof me){const i=document.createElement("div");i.classList.add(this.classes.optgroup);const n=document.createElement("div");n.classList.add(this.classes.optgroupLabel),i.appendChild(n);const l=document.createElement("div");l.classList.add(this.classes.optgroupLabelText),l.textContent=s.label,n.appendChild(l);const o=document.createElement("div");if(o.classList.add(this.classes.optgroupActions),n.appendChild(o),this.settings.isMultiple&&s.selectAll){const h=document.createElement("div");h.classList.add(this.classes.optgroupSelectAll);let c=!0;for(const P of s.options)if(!P.selected){c=!1;break}c&&h.classList.add(this.classes.selected);const p=document.createElement("span");p.textContent=s.selectAllText,h.appendChild(p);const g=document.createElementNS("http://www.w3.org/2000/svg","svg");g.setAttribute("viewBox","0 0 100 100"),h.appendChild(g);const f=document.createElementNS("http://www.w3.org/2000/svg","path");f.setAttribute("d",this.classes.optgroupSelectAllBox),g.appendChild(f);const _=document.createElementNS("http://www.w3.org/2000/svg","path");_.setAttribute("d",this.classes.optgroupSelectAllCheck),g.appendChild(_),h.addEventListener("click",P=>{P.preventDefault(),P.stopPropagation();const Z=this.store.getSelected();if(c){const M=Z.filter(q=>{for(const H of s.options)if(q===H.id)return!1;return!0});this.callbacks.setSelected(M,!0);return}else{let M=s.options.map(H=>H.id).filter(H=>H!==void 0);const q=Z.concat(M);for(const H of s.options)H.id&&!this.store.getOptionByID(H.id)&&this.callbacks.addOption(new G(H));this.callbacks.setSelected(q,!0);return}}),o.appendChild(h)}if(s.closable!=="off"){const h=document.createElement("div");h.classList.add(this.classes.optgroupClosable);const c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("viewBox","0 0 100 100"),c.classList.add(this.classes.arrow),h.appendChild(c);const p=document.createElementNS("http://www.w3.org/2000/svg","path");c.appendChild(p),s.options.some(g=>g.selected)||this.content.search.input.value.trim()!==""?(h.classList.add(this.classes.mainOpen),p.setAttribute("d",this.classes.arrowOpen)):s.closable==="open"?(i.classList.add(this.classes.mainOpen),p.setAttribute("d",this.classes.arrowOpen)):s.closable==="close"&&(i.classList.add(this.classes.close),p.setAttribute("d",this.classes.arrowClose)),n.addEventListener("click",g=>{g.preventDefault(),g.stopPropagation(),i.classList.contains(this.classes.close)?(i.classList.remove(this.classes.close),i.classList.add(this.classes.mainOpen),p.setAttribute("d",this.classes.arrowOpen)):(i.classList.remove(this.classes.mainOpen),i.classList.add(this.classes.close),p.setAttribute("d",this.classes.arrowClose))}),o.appendChild(h)}i.appendChild(n);for(const h of s.options)i.appendChild(this.option(new G(h))),t.appendChild(i)}s instanceof G&&t.appendChild(this.option(s))}this.content.list.appendChild(t)}option(e){if(e.placeholder){const s=document.createElement("div");return s.classList.add(this.classes.option),s.classList.add(this.classes.hide),s}const t=document.createElement("div");return t.dataset.id=e.id,t.id=this.settings.id+"-"+e.id,t.classList.add(this.classes.option),t.setAttribute("role","option"),e.class&&e.class.split(" ").forEach(s=>{t.classList.add(s)}),e.style&&(t.style.cssText=e.style),this.settings.searchHighlight&&this.content.search.input.value.trim()!==""?t.innerHTML=this.highlightText(e.html!==""?e.html:e.text,this.content.search.input.value,this.classes.searchHighlighter):e.html!==""?t.innerHTML=e.html:t.textContent=e.text,this.settings.showOptionTooltips&&t.textContent&&t.setAttribute("title",t.textContent),e.display||t.classList.add(this.classes.hide),e.disabled&&t.classList.add(this.classes.disabled),e.selected&&this.settings.hideSelected&&t.classList.add(this.classes.hide),e.selected?(t.classList.add(this.classes.selected),t.setAttribute("aria-selected","true"),this.main.main.setAttribute("aria-activedescendant",t.id)):(t.classList.remove(this.classes.selected),t.setAttribute("aria-selected","false")),t.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation();const i=this.store.getSelected(),n=s.currentTarget,l=String(n.dataset.id),o=s.ctrlKey||s.metaKey;if(e.disabled||!this.settings.isMultiple&&e.selected&&!this.settings.allowDeselect||e.selected&&e.mandatory||this.settings.isMultiple&&this.settings.maxSelected<=i.length&&!e.selected||this.settings.isMultiple&&this.settings.minSelected>=i.length&&e.selected&&!o)return;let h=!1;const c=this.store.getSelectedOptions();let p=[];if(this.settings.isMultiple){const g=c.some(f=>f.id===l);if(s.shiftKey&&this.lastSelectedOption){const f=this.store.getDataOptions(),_=f.findIndex(Z=>Z.id===this.lastSelectedOption.id),P=f.findIndex(Z=>Z.id===e.id);if(_>=0&&P>=0){const Z=Math.min(_,P),M=Math.max(_,P),q=f.slice(Z,M+1).filter(H=>!c.find(he=>he.id===H.id));c.length+q.length<=this.settings.maxSelected?p=c.concat(q):p=c}else p=c}else o?(g?p=c.filter(f=>f.id!==l):p=c.concat(e),this.lastSelectedOption=e):(g?p=c.filter(f=>f.id!==l):p=c.concat(e),this.lastSelectedOption=e)}if(this.settings.isMultiple||(e.selected?p=[]:p=[e]),this.callbacks.beforeChange||(h=!0),this.callbacks.beforeChange&&(this.callbacks.beforeChange(p,c)===!1?h=!1:h=!0),h){this.store.getOptionByID(l)||this.callbacks.addOption(e),this.callbacks.setSelected(p.map(f=>f.id),!1);const g=s.ctrlKey||s.metaKey||s.shiftKey;this.settings.closeOnSelect&&!(this.settings.isMultiple&&g)&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(p)}}),t}destroy(){this.main.main.remove(),this.content.main.remove()}highlightText(e,t,s){const i=t.trim();if(i==="")return e;const n=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),l=document.createElement("div");l.innerHTML=e;const o=h=>{if(h.nodeType===Node.TEXT_NODE){const c=h.textContent||"",p=new RegExp("("+n+")","i");if(p.test(c)){const g=document.createElement("span");c.split(p).forEach((f,_)=>{if(f&&p.test(f)){const P=document.createElement("mark");P.className=s,P.textContent=f,g.appendChild(P)}else f&&g.appendChild(document.createTextNode(f))}),h.parentNode?.replaceChild(g,h)}}else h.nodeType===Node.ELEMENT_NODE&&Array.from(h.childNodes).forEach(c=>o(c))};return Array.from(l.childNodes).forEach(h=>o(h)),l.innerHTML}moveContentAbove(){const e=this.main.main.offsetHeight,t=this.content.main.offsetHeight;this.main.main.classList.remove(this.classes.dirBelow),this.main.main.classList.add(this.classes.dirAbove),this.content.main.classList.remove(this.classes.dirBelow),this.content.main.classList.add(this.classes.dirAbove);const s=this.main.main.getBoundingClientRect();this.content.main.style.margin="-"+(e+t-1)+"px 0px 0px 0px",this.content.main.style.top=s.top+s.height+(this.settings.contentPosition==="fixed"?0:window.scrollY)+"px",this.content.main.style.left=s.left+(this.settings.contentPosition==="fixed"?0:window.scrollX)+"px",this.content.main.style.width=s.width+"px"}moveContentBelow(){this.main.main.classList.remove(this.classes.dirAbove),this.main.main.classList.add(this.classes.dirBelow),this.content.main.classList.remove(this.classes.dirAbove),this.content.main.classList.add(this.classes.dirBelow);const e=this.main.main.getBoundingClientRect();this.content.main.style.margin="-1px 0px 0px 0px",this.settings.contentPosition!=="relative"&&(this.content.main.style.top=e.top+e.height+(this.settings.contentPosition==="fixed"?0:window.scrollY)+"px",this.content.main.style.left=e.left+(this.settings.contentPosition==="fixed"?0:window.scrollX)+"px",this.content.main.style.width=e.width+"px")}ensureElementInView(e,t){const s=e.scrollTop+e.offsetTop,i=s+e.clientHeight,n=t.offsetTop,l=n+t.clientHeight;n<s?e.scrollTop-=s-n:l>i&&(e.scrollTop+=l-i)}putContent(){const e=this.main.main.offsetHeight,t=this.main.main.getBoundingClientRect(),s=this.content.main.offsetHeight;return window.innerHeight-(t.top+e)<=s&&t.top>s?"up":"down"}updateDeselectAll(){if(!this.store||!this.settings)return;const e=this.store.getSelectedOptions(),t=e&&e.length>0,s=this.settings.isMultiple,i=this.settings.allowDeselect,n=this.main.deselect.main,l=this.classes.hide;i&&!(s&&!t)?n.classList.remove(l):n.classList.add(l)}}class $t{select;onValueChange;onClassChange;onDisabledChange;onOptionsChange;onLabelClick;listen=!1;observer=null;isUpdating=!1;pendingOptionsChange=null;preventNativeSelect=null;preventNativeSelectMousedown=null;preventNativeSelectFocus=null;constructor(e){this.select=e,this.valueChange=this.valueChange.bind(this),this.select.addEventListener("change",this.valueChange,{passive:!0}),this.observer=new MutationObserver(this.observeCall.bind(this)),this.changeListen(!0)}enable(){this.select.disabled=!1}disable(){this.select.disabled=!0}hideUI(){this.select.tabIndex=-1,this.select.style.position="absolute",this.select.style.width="1px",this.select.style.height="1px",this.select.style.opacity="0",this.select.style.overflow="hidden",this.select.style.pointerEvents="none",this.select.style.margin="0",this.select.style.padding="0",this.select.style.borderWidth="0",this.select.style.clip="rect(0 0 0 0)",this.select.setAttribute("aria-hidden","true"),this.preventNativeSelect||(this.preventNativeSelect=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},this.preventNativeSelectMousedown=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},this.preventNativeSelectFocus=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},this.select.addEventListener("click",this.preventNativeSelect,{capture:!0,passive:!1}),this.select.addEventListener("mousedown",this.preventNativeSelectMousedown,{capture:!0,passive:!1}),this.select.addEventListener("focus",this.preventNativeSelectFocus,{capture:!0,passive:!1}))}showUI(){this.select.removeAttribute("tabindex"),this.select.style.position="",this.select.style.width="",this.select.style.height="",this.select.style.opacity="",this.select.style.overflow="",this.select.style.pointerEvents="",this.select.style.margin="",this.select.style.padding="",this.select.style.borderWidth="",this.select.style.clip="",this.select.removeAttribute("aria-hidden"),this.preventNativeSelect&&(this.select.removeEventListener("click",this.preventNativeSelect,{capture:!0}),this.preventNativeSelect=null),this.preventNativeSelectMousedown&&(this.select.removeEventListener("mousedown",this.preventNativeSelectMousedown,{capture:!0}),this.preventNativeSelectMousedown=null),this.preventNativeSelectFocus&&(this.select.removeEventListener("focus",this.preventNativeSelectFocus,{capture:!0}),this.preventNativeSelectFocus=null)}changeListen(e){this.listen=e,e&&this.observer&&this.observer.observe(this.select,{subtree:!0,childList:!0,attributes:!0}),e||this.observer&&this.observer.disconnect()}valueChange(e){return this.listen&&this.onValueChange&&this.onValueChange(this.getSelectedOptions()),!0}observeCall(e){if(!this.listen)return;let t=!1,s=!1,i=!1,n=!1;for(const l of e){if(l.target===this.select&&(l.attributeName==="disabled"&&(s=!0),l.attributeName==="class"&&(t=!0),l.type==="childList")){for(const o of Array.from(l.addedNodes))if(o.nodeName==="OPTION"&&o.value===this.select.value){n=!0;break}i=!0}(l.target.nodeName==="OPTGROUP"||l.target.nodeName==="OPTION")&&(i=!0)}if(t&&this.onClassChange&&this.onClassChange(this.select.className.split(" ")),s&&this.onDisabledChange&&(this.changeListen(!1),this.onDisabledChange(this.select.disabled),this.changeListen(!0)),i&&this.onOptionsChange){if(this.isUpdating){if(this.select.options.length>0){const l=this.getData();l.length>0&&(this.pendingOptionsChange=l)}n&&this.select.dispatchEvent(new Event("change"));return}this.changeListen(!1),this.onOptionsChange(this.getData()),this.changeListen(!0)}n&&this.select.dispatchEvent(new Event("change"))}getData(){let e=[];const t=this.select.childNodes;for(const s of t)s.nodeName==="OPTGROUP"&&e.push(this.getDataFromOptgroup(s)),s.nodeName==="OPTION"&&e.push(this.getDataFromOption(s));return e}getDataFromOptgroup(e){let t={id:e.id,label:e.label,selectAll:e.dataset?e.dataset.selectall==="true":!1,selectAllText:e.dataset?e.dataset.selectalltext:"Select all",closable:e.dataset?e.dataset.closable:"off",options:[]};const s=e.childNodes;for(const i of s)i.nodeName==="OPTION"&&t.options.push(this.getDataFromOption(i));return t}getDataFromOption(e){return{id:e.id,value:e.value,text:e.text,html:e.dataset&&e.dataset.html?e.dataset.html:"",defaultSelected:e.defaultSelected,selected:e.selected,display:e.style.display!=="none",disabled:e.disabled,mandatory:e.dataset?e.dataset.mandatory==="true":!1,placeholder:e.dataset.placeholder==="true",class:e.className,style:e.style.cssText,data:e.dataset}}getSelectedOptions(){let e=[];const t=this.select.childNodes;for(const s of t){if(s.nodeName==="OPTGROUP"){const i=s.childNodes;for(const n of i)if(n.nodeName==="OPTION"){const l=n;l.selected&&e.push(this.getDataFromOption(l))}}if(s.nodeName==="OPTION"){const i=s;i.selected&&e.push(this.getDataFromOption(i))}}return e}getSelectedValues(){return this.getSelectedOptions().map(e=>e.value)}setSelected(e){this.changeListen(!1);const t=this.select.childNodes;for(const s of t){if(s.nodeName==="OPTGROUP"){const i=s.childNodes;for(const n of i)if(n.nodeName==="OPTION"){const l=n;l.selected=e.includes(l.id)}}if(s.nodeName==="OPTION"){const i=s;i.selected=e.includes(i.id)}}this.changeListen(!0)}setSelectedByValue(e){this.changeListen(!1);const t=this.select.childNodes;for(const s of t){if(s.nodeName==="OPTGROUP"){const i=s.childNodes;for(const n of i)if(n.nodeName==="OPTION"){const l=n;l.selected=e.includes(l.value)}}if(s.nodeName==="OPTION"){const i=s;i.selected=e.includes(i.value)}}this.changeListen(!0)}updateSelect(e,t,s){this.changeListen(!1),e&&(this.select.dataset.id=e),t&&(this.select.style.cssText=t),s&&(this.select.className="",s.forEach(i=>{i.trim()!==""&&this.select.classList.add(i.trim())})),this.changeListen(!0)}updateOptions(e){if(!(!e||e.length===0)){this.isUpdating=!0,this.pendingOptionsChange=null,this.changeListen(!1),this.select.innerHTML="";for(const t of e)t instanceof me&&this.select.appendChild(this.createOptgroup(t)),t instanceof G&&this.select.appendChild(this.createOption(t));if(this.select.dispatchEvent(new Event("change",{bubbles:!0})),this.changeListen(!0),this.isUpdating=!1,this.pendingOptionsChange!==null){const t=this.pendingOptionsChange;t.length>0&&this.onOptionsChange?(this.pendingOptionsChange=null,this.changeListen(!1),this.onOptionsChange(t),this.changeListen(!0)):this.pendingOptionsChange=null}}}createOptgroup(e){const t=document.createElement("optgroup");if(t.id=e.id,t.label=e.label,e.selectAll&&(t.dataset.selectAll="true"),e.closable!=="off"&&(t.dataset.closable=e.closable),e.options)for(const s of e.options)t.appendChild(this.createOption(s));return t}createOption(e){const t=document.createElement("option");return t.id=e.id,t.value=e.value,t.textContent=e.text,e.html!==""&&t.setAttribute("data-html",e.html),t.defaultSelected=e.defaultSelected,t.selected=e.selected,e.disabled&&(t.disabled=!0),e.display||(t.style.display="none"),e.placeholder&&t.setAttribute("data-placeholder","true"),e.mandatory&&t.setAttribute("data-mandatory","true"),e.class&&e.class.split(" ").forEach(s=>{t.classList.add(s)}),e.data&&typeof e.data=="object"&&Object.keys(e.data).forEach(s=>{t.setAttribute("data-"+Qt(s),e.data[s])}),t}setupLabelHandlers(){const e=[],t=this.select.id;t&&document.querySelectorAll(`label[for="${t}"]`).forEach(i=>e.push(i));let s=this.select.parentElement;for(;s&&s!==document.body;){if(s.tagName==="LABEL"){e.push(s);break}s=s.parentElement}Array.from(new Set(e)).forEach(i=>{if(i.__slimSelectLabelHandler)return;const n=l=>{const o=l.target;l.preventDefault(),o===i&&this.onLabelClick&&this.onLabelClick()};i.__slimSelectLabelHandler=n,i.addEventListener("click",n,{capture:!0,passive:!1})})}removeLabelHandlers(){const e=[],t=this.select.id;t&&document.querySelectorAll(`label[for="${t}"]`).forEach(i=>e.push(i));let s=this.select.parentElement;for(;s&&s!==document.body;){if(s.tagName==="LABEL"){e.push(s);break}s=s.parentElement}Array.from(new Set(e)).forEach(i=>{const n=i.__slimSelectLabelHandler;n&&(i.removeEventListener("click",n,{capture:!0}),delete i.__slimSelectLabelHandler)})}destroy(){this.changeListen(!1),this.select.removeEventListener("change",this.valueChange),this.preventNativeSelect&&(this.select.removeEventListener("click",this.preventNativeSelect,{capture:!0}),this.preventNativeSelect=null),this.preventNativeSelectMousedown&&(this.select.removeEventListener("mousedown",this.preventNativeSelectMousedown,{capture:!0}),this.preventNativeSelectMousedown=null),this.preventNativeSelectFocus&&(this.select.removeEventListener("focus",this.preventNativeSelectFocus,{capture:!0}),this.preventNativeSelectFocus=null),this.observer&&(this.observer.disconnect(),this.observer=null),this.removeLabelHandlers(),delete this.select.dataset.id,this.showUI()}}class es{id="";style="";class=[];isMultiple=!1;isOpen=!1;isFullOpen=!1;intervalMove=null;disabled;alwaysOpen;showSearch;focusSearch;keepSearch;ariaLabel;searchPlaceholder;searchText;searchingText;searchHighlight;closeOnSelect;contentLocation;contentPosition;openPosition;placeholderText;allowDeselect;hideSelected;keepOrder;showOptionTooltips;minSelected;maxSelected;timeoutDelay;maxValuesShown;maxValuesMessage;addableText;constructor(e){e||(e={}),this.id="ss-"+rt(),this.style=e.style||"",this.class=e.class||[],this.disabled=e.disabled!==void 0?e.disabled:!1,this.alwaysOpen=e.alwaysOpen!==void 0?e.alwaysOpen:!1,this.showSearch=e.showSearch!==void 0?e.showSearch:!0,this.focusSearch=e.focusSearch!==void 0?e.focusSearch:!0,this.keepSearch=e.keepSearch!==void 0?e.keepSearch:!1,this.ariaLabel=e.ariaLabel||"Combobox",this.searchPlaceholder=e.searchPlaceholder||"Search...",this.searchText=e.searchText||"No Results",this.searchingText=e.searchingText||"Searching...",this.searchHighlight=e.searchHighlight!==void 0?e.searchHighlight:!1,this.closeOnSelect=e.closeOnSelect!==void 0?e.closeOnSelect:!0,this.contentLocation=e.contentLocation||document.body,this.contentPosition=e.contentPosition||"absolute",this.openPosition=e.openPosition||"auto",this.placeholderText=e.placeholderText!==void 0?e.placeholderText:"Select Value",this.allowDeselect=e.allowDeselect!==void 0?e.allowDeselect:!1,this.hideSelected=e.hideSelected!==void 0?e.hideSelected:!1,this.keepOrder=e.keepOrder!==void 0?e.keepOrder:!1,this.showOptionTooltips=e.showOptionTooltips!==void 0?e.showOptionTooltips:!1,this.minSelected=e.minSelected||0,this.maxSelected=e.maxSelected||1e3,this.timeoutDelay=e.timeoutDelay||200,this.maxValuesShown=e.maxValuesShown||20,this.maxValuesMessage=e.maxValuesMessage||"{number} selected",this.addableText=e.addableText||'Press "Enter" to add {value}'}}class ts{selectEl;settings;cssClasses;select;store;render;openTimeout=null;closeTimeout=null;events={search:void 0,searchFilter:(e,t)=>e.text.toLowerCase().indexOf(t.toLowerCase())!==-1,addable:void 0,beforeChange:void 0,afterChange:void 0,beforeOpen:void 0,afterOpen:void 0,beforeClose:void 0,afterClose:void 0};constructor(e){if(this.selectEl=typeof e.select=="string"?document.querySelector(e.select):e.select,!this.selectEl){e.events&&e.events.error&&e.events.error(new Error("Could not find select element"));return}if(this.selectEl.tagName!=="SELECT"){e.events&&e.events.error&&e.events.error(new Error("Element isnt of type select"));return}this.selectEl.dataset.ssid&&this.destroy(),this.settings=new es(e.settings),this.cssClasses=new Gt(e.cssClasses);const t=["beforeOpen","afterOpen","beforeClose","afterClose"];for(const o in e.events)e.events.hasOwnProperty(o)&&(t.indexOf(o)!==-1?this.events[o]=qe(e.events[o],100):this.events[o]=e.events[o]);this.settings.disabled=e.settings?.disabled?e.settings.disabled:this.selectEl.disabled,this.settings.isMultiple=this.selectEl.multiple,this.settings.style=this.selectEl.style.cssText,this.settings.class=this.selectEl.className.split(" "),this.select=new $t(this.selectEl),this.selectEl.id||(this.selectEl.id=this.settings.id),this.select.updateSelect(this.settings.id,this.settings.style,this.settings.class),this.select.hideUI(),this.select.onValueChange=o=>{this.setSelected(o.map(h=>h.id))},this.select.onClassChange=o=>{this.settings.class=o,this.render.updateClassStyles()},this.select.onDisabledChange=o=>{o?this.disable():this.enable()},this.select.onOptionsChange=o=>{this.setData(o||[])},this.select.onLabelClick=()=>{this.settings.disabled||(this.settings.isOpen?this.close():this.open())};const s=e.data?e.data:this.select.getData();this.store=new Yt(this.settings.isMultiple?"multiple":"single",s),e.data&&this.select.updateOptions(this.store.getData());const i={open:this.open.bind(this),close:this.close.bind(this),addable:this.events.addable?this.events.addable:void 0,setSelected:this.setSelected.bind(this),addOption:this.addOption.bind(this),search:this.search.bind(this),beforeChange:this.events.beforeChange,afterChange:this.events.afterChange};this.render=new Xt(this.settings,this.cssClasses,this.store,i),this.render.renderValues(),this.render.renderOptions(this.store.getData());const n=this.selectEl.getAttribute("aria-label"),l=this.selectEl.getAttribute("aria-labelledby");n?this.render.main.main.setAttribute("aria-label",n):l&&this.render.main.main.setAttribute("aria-labelledby",l),this.selectEl.parentNode&&this.selectEl.parentNode.insertBefore(this.render.main.main,this.selectEl.nextSibling),window.addEventListener("resize",this.windowResize,!1),this.settings.openPosition==="auto"&&window.addEventListener("scroll",this.windowScroll,!1),document.addEventListener("visibilitychange",this.windowVisibilityChange),this.settings.disabled&&this.disable(),this.settings.alwaysOpen&&this.open(),this.select.setupLabelHandlers(),this.selectEl.slim=this}enable(){this.settings.disabled=!1,this.select.enable(),this.render.enable()}disable(){this.settings.disabled=!0,this.select.disable(),this.render.disable()}getData(){return this.store.getData()}setData(e){const t=this.store.getSelected(),s=this.store.validateDataArray(e);if(s){this.events.error&&this.events.error(s);return}this.store.setData(e);const i=this.store.getData();this.select.updateOptions(i),this.render.renderValues(),this.render.renderOptions(i),this.events.afterChange&&!Ye(t,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}getSelected(){let e=this.store.getSelectedOptions();return this.settings.keepOrder&&(e=this.store.selectedOrderOptions(e)),e.map(t=>t.value)}setSelected(e,t=!0){const s=this.store.getSelected(),i=this.store.getDataOptions();e=Array.isArray(e)?e:[e];const n=[];for(const o of e){if(i.find(h=>h.id==o)){n.push(o);continue}for(const h of i.filter(c=>c.value==o))n.push(h.id)}this.store.setSelectedBy("id",n);const l=this.store.getData();this.select.updateOptions(l),this.render.renderValues(),this.render.content.search.input.value!==""?this.search(this.render.content.search.input.value):this.render.renderOptions(l),t&&this.events.afterChange&&!Ye(s,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}addOption(e){const t=this.store.getSelected();this.store.getDataOptions().some(i=>i.value===(e.value??e.text))||this.store.addOption(e);const s=this.store.getData();this.select.updateOptions(s),this.render.renderValues(),this.render.renderOptions(s),this.events.afterChange&&!Ye(t,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}open(){this.settings.disabled||this.settings.isOpen||(this.events.beforeOpen&&this.events.beforeOpen(),this.render.open(),this.settings.showSearch&&this.settings.focusSearch&&this.render.searchFocus(),this.settings.isOpen=!0,this.openTimeout=setTimeout(()=>{this.events.afterOpen&&this.events.afterOpen(),this.settings.isOpen&&(this.settings.isFullOpen=!0),document.addEventListener("click",this.documentClick)},this.settings.timeoutDelay),this.settings.contentPosition==="absolute"&&(this.settings.intervalMove&&clearInterval(this.settings.intervalMove),this.settings.intervalMove=setInterval(this.render.moveContent.bind(this.render),500)))}close(e=null){!this.settings.isOpen||this.settings.alwaysOpen||(this.events.beforeClose&&this.events.beforeClose(),this.render.close(),!this.settings.keepSearch&&this.render.content.search.input.value!==""&&this.search(""),this.render.mainFocus(e),this.settings.isOpen=!1,this.settings.isFullOpen=!1,this.closeTimeout=setTimeout(()=>{this.events.afterClose&&this.events.afterClose(),document.removeEventListener("click",this.documentClick)},this.settings.timeoutDelay),this.settings.intervalMove&&clearInterval(this.settings.intervalMove))}search(e){if(this.render.content.search.input.value!==e&&(this.render.content.search.input.value=e),e===""){this.render.renderOptions(this.store.getData());return}if(!this.events.search){const s=e===""?this.store.getData():this.store.search(e,this.events.searchFilter);this.render.renderOptions(s);return}this.render.renderSearching();const t=this.events.search(e,this.store.getSelectedOptions());if(t instanceof Promise){t.then(s=>{this.store.setData(s,!0),this.select.updateOptions(this.store.getData()),this.render.renderOptions(this.store.getData())}).catch(s=>{this.render.renderError(typeof s=="string"?s:s.message)});return}else Array.isArray(t)?(this.store.setData(t,!0),this.select.updateOptions(this.store.getData()),this.render.renderOptions(this.store.getData())):this.render.renderError("Search event must return a promise or an array of data")}destroy(){this.openTimeout&&(clearTimeout(this.openTimeout),this.openTimeout=null),this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null),this.settings.intervalMove&&(clearInterval(this.settings.intervalMove),this.settings.intervalMove=null),document.removeEventListener("click",this.documentClick),window.removeEventListener("resize",this.windowResize,!1),this.settings.openPosition==="auto"&&window.removeEventListener("scroll",this.windowScroll,!1),document.removeEventListener("visibilitychange",this.windowVisibilityChange),this.store.setData([]),this.render.destroy(),this.select.destroy()}windowResize=qe(()=>{!this.settings.isOpen&&!this.settings.isFullOpen||this.render.moveContent()});windowScroll=qe(()=>{!this.settings.isOpen&&!this.settings.isFullOpen||this.render.moveContent()});documentClick=e=>{this.settings.isOpen&&e.target&&!Zt(e.target,this.settings.id)&&this.close(e.type)};windowVisibilityChange=()=>{document.hidden&&this.close()}}var ss=Q('<select class="slim mb-2"></select>');function is(d,e){Ve(e,!0);let t=J(e,"value",15),s=J(e,"multiple",3,!1),i,n=de(!1),l="";function o(g){Ae(()=>{i=new ts({select:g,data:c(),settings:{id:e.id,ariaLabel:e.label,isMultiple:s()||!1,showSearch:!1,maxValuesShown:100,allowDeselect:!0,closeOnSelect:!s()},cssClasses:{deselect:"hidden"},events:{afterChange:f=>{s()?h(f.map(_=>_.value)):h(f[0]?.value)},beforeChange(f){return s()||f.length>0?!0:(i?.close(),!1)}}}),l=JSON.stringify(e.options),Array.isArray(t())?i.setSelected(t().map(f=>f.toString()),!1):i.setSelected(t()||"",!1)})}bt(()=>{i&&(i.destroy(),i=void 0)}),xe(()=>{t(),Ae(async()=>{if(w(n)){se(n,!1);return}i&&i.setSelected(t()||[],!1)})}),xe(()=>{e.options,Ae(async()=>{if(JSON.stringify(e.options)===l||(l=JSON.stringify(e.options),!i))return;const g=i.getSelected();i.setData(c());let f;s()?f=g.filter(_=>e.options.find(P=>P.value===_)):f=e.options.some(_=>_.value===g[0])?g[0]:"",i.setSelected(f,!1)})}),xe(()=>{e.disabled,Ae(()=>{i&&(e.disabled?i.disable():i.enable())})});function h(g){t(g),se(n,!0),e.onUpdate(g)}function c(){return Lt(e.options.map(g=>new G({...g})))}var p=ss();Mt(p,()=>o),fe(()=>p.multiple=s()),U(d,p),ze()}var ns=Q('<div class="text-gray-500 dark:text-gray-400 italic">No options available</div>'),as=Q("<!> <!>",1);function Xe(d,e){const t=kt();Ve(e,!0);let s=J(e,"value",15),i=J(e,"disabled",3,!1),n=J(e,"onUpdate",3,()=>{}),l=Te(()=>e.options.map(f=>typeof f=="string"?{text:f,value:f}:{text:f.label,value:f.value}));var o=as(),h=He(o);Jt(h,{get label(){return e.label},get formId(){return t},get helpText(){return e.helpText}});var c=ie(h,2);{var p=f=>{var _=ns();U(f,_)},g=f=>{is(f,{get id(){return t},get label(){return e.label},get options(){return w(l)},get disabled(){return i()},get onUpdate(){return n()},get value(){return s()},set value(_){s(_)}})};be(c,f=>{w(l).length==0?f(p):f(g,!1)})}U(d,o),ze()}function rs(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var We={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var ls=We.exports,ut;function os(){return ut||(ut=1,(function(d,e){((t,s)=>{d.exports=s()})(ls,function t(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},i,n=!s.document&&!!s.postMessage,l=s.IS_PAPA_WORKER||!1,o={},h=0,c={};function p(r){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(a){var u=$(a);u.chunkSize=parseInt(u.chunkSize),a.step||a.chunk||(u.chunkSize=null),this._handle=new Z(u),(this._handle.streamer=this)._config=u}).call(this,r),this.parseChunk=function(a,u){var v=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<v){let k=this._config.newline;k||(m=this._config.quoteChar||'"',k=this._handle.guessLineEndings(a,m)),a=[...a.split(k).slice(v)].join(k)}this.isFirstChunk&&N(this._config.beforeFirstChunk)&&(m=this._config.beforeFirstChunk(a))!==void 0&&(a=m),this.isFirstChunk=!1,this._halted=!1;var v=this._partialLine+a,m=(this._partialLine="",this._handle.parse(v,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(a=m.meta.cursor,v=(this._finished||(this._partialLine=v.substring(a-this._baseIndex),this._baseIndex=a),m&&m.data&&(this._rowCount+=m.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),l)s.postMessage({results:m,workerId:c.WORKER_ID,finished:v});else if(N(this._config.chunk)&&!u){if(this._config.chunk(m,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=m=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(m.data),this._completeResults.errors=this._completeResults.errors.concat(m.errors),this._completeResults.meta=m.meta),this._completed||!v||!N(this._config.complete)||m&&m.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),v||m&&m.meta.paused||this._nextChunk(),m}this._halted=!0},this._sendError=function(a){N(this._config.error)?this._config.error(a):l&&this._config.error&&s.postMessage({workerId:c.WORKER_ID,error:a,finished:!1})}}function g(r){var a;(r=r||{}).chunkSize||(r.chunkSize=c.RemoteChunkSize),p.call(this,r),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(u){this._input=u,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(a=new XMLHttpRequest,this._config.withCredentials&&(a.withCredentials=this._config.withCredentials),n||(a.onload=ae(this._chunkLoaded,this),a.onerror=ae(this._chunkError,this)),a.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var u,v=this._config.downloadRequestHeaders;for(u in v)a.setRequestHeader(u,v[u])}var m;this._config.chunkSize&&(m=this._start+this._config.chunkSize-1,a.setRequestHeader("Range","bytes="+this._start+"-"+m));try{a.send(this._config.downloadRequestBody)}catch(k){this._chunkError(k.message)}n&&a.status===0&&this._chunkError()}},this._chunkLoaded=function(){a.readyState===4&&(a.status<200||400<=a.status?this._chunkError():(this._start+=this._config.chunkSize||a.responseText.length,this._finished=!this._config.chunkSize||this._start>=(u=>(u=u.getResponseHeader("Content-Range"))!==null?parseInt(u.substring(u.lastIndexOf("/")+1)):-1)(a),this.parseChunk(a.responseText)))},this._chunkError=function(u){u=a.statusText||u,this._sendError(new Error(u))}}function f(r){(r=r||{}).chunkSize||(r.chunkSize=c.LocalChunkSize),p.call(this,r);var a,u,v=typeof FileReader<"u";this.stream=function(m){this._input=m,u=m.slice||m.webkitSlice||m.mozSlice,v?((a=new FileReader).onload=ae(this._chunkLoaded,this),a.onerror=ae(this._chunkError,this)):a=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var m=this._input,k=(this._config.chunkSize&&(k=Math.min(this._start+this._config.chunkSize,this._input.size),m=u.call(m,this._start,k)),a.readAsText(m,this._config.encoding));v||this._chunkLoaded({target:{result:k}})},this._chunkLoaded=function(m){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(m.target.result)},this._chunkError=function(){this._sendError(a.error)}}function _(r){var a;p.call(this,r=r||{}),this.stream=function(u){return a=u,this._nextChunk()},this._nextChunk=function(){var u,v;if(!this._finished)return u=this._config.chunkSize,a=u?(v=a.substring(0,u),a.substring(u)):(v=a,""),this._finished=!a,this.parseChunk(v)}}function P(r){p.call(this,r=r||{});var a=[],u=!0,v=!1;this.pause=function(){p.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){p.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(m){this._input=m,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){v&&a.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),a.length?this.parseChunk(a.shift()):u=!0},this._streamData=ae(function(m){try{a.push(typeof m=="string"?m:m.toString(this._config.encoding)),u&&(u=!1,this._checkIsFinished(),this.parseChunk(a.shift()))}catch(k){this._streamError(k)}},this),this._streamError=ae(function(m){this._streamCleanUp(),this._sendError(m)},this),this._streamEnd=ae(function(){this._streamCleanUp(),v=!0,this._streamData("")},this),this._streamCleanUp=ae(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Z(r){var a,u,v,m,k=Math.pow(2,53),V=-k,le=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,L=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,x=this,S=0,b=0,oe=!1,E=!1,T=[],y={data:[],errors:[],meta:{}};function ee(A){return r.skipEmptyLines==="greedy"?A.join("").trim()==="":A.length===1&&A[0].length===0}function X(){if(y&&v&&(ge("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),v=!1),r.skipEmptyLines&&(y.data=y.data.filter(function(O){return!ee(O)})),re()){let O=function(K,te){N(r.transformHeader)&&(K=r.transformHeader(K,te)),T.push(K)};if(y)if(Array.isArray(y.data[0])){for(var A=0;re()&&A<y.data.length;A++)y.data[A].forEach(O);y.data.splice(0,1)}else y.data.forEach(O)}function R(O,K){for(var te=r.header?{}:[],B=0;B<O.length;B++){var j=B,D=O[B],D=((ve,C)=>(z=>(r.dynamicTypingFunction&&r.dynamicTyping[z]===void 0&&(r.dynamicTyping[z]=r.dynamicTypingFunction(z)),(r.dynamicTyping[z]||r.dynamicTyping)===!0))(ve)?C==="true"||C==="TRUE"||C!=="false"&&C!=="FALSE"&&((z=>{if(le.test(z)&&(z=parseFloat(z),V<z&&z<k))return 1})(C)?parseFloat(C):L.test(C)?new Date(C):C===""?null:C):C)(j=r.header?B>=T.length?"__parsed_extra":T[B]:j,D=r.transform?r.transform(D,j):D);j==="__parsed_extra"?(te[j]=te[j]||[],te[j].push(D)):te[j]=D}return r.header&&(B>T.length?ge("FieldMismatch","TooManyFields","Too many fields: expected "+T.length+" fields but parsed "+B,b+K):B<T.length&&ge("FieldMismatch","TooFewFields","Too few fields: expected "+T.length+" fields but parsed "+B,b+K)),te}var W;y&&(r.header||r.dynamicTyping||r.transform)&&(W=1,!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map(R),W=y.data.length):y.data=R(y.data,0),r.header&&y.meta&&(y.meta.fields=T),b+=W)}function re(){return r.header&&T.length===0}function ge(A,R,W,O){A={type:A,code:R,message:W},O!==void 0&&(A.row=O),y.errors.push(A)}N(r.step)&&(m=r.step,r.step=function(A){y=A,re()?X():(X(),y.data.length!==0&&(S+=A.data.length,r.preview&&S>r.preview?u.abort():(y.data=y.data[0],m(y,x))))}),this.parse=function(A,R,W){var O=r.quoteChar||'"',O=(r.newline||(r.newline=this.guessLineEndings(A,O)),v=!1,r.delimiter?N(r.delimiter)&&(r.delimiter=r.delimiter(A),y.meta.delimiter=r.delimiter):((O=((K,te,B,j,D)=>{var ve,C,z,Oe;D=D||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var Pe=0;Pe<D.length;Pe++){for(var we,Ie=D[Pe],ce=0,ye=0,ne=0,ue=(z=void 0,new q({comments:j,delimiter:Ie,newline:te,preview:10}).parse(K)),Se=0;Se<ue.data.length;Se++)B&&ee(ue.data[Se])?ne++:(we=ue.data[Se].length,ye+=we,z===void 0?z=we:0<we&&(ce+=Math.abs(we-z),z=we));0<ue.data.length&&(ye/=ue.data.length-ne),(C===void 0||ce<=C)&&(Oe===void 0||Oe<ye)&&1.99<ye&&(C=ce,ve=Ie,Oe=ye)}return{successful:!!(r.delimiter=ve),bestDelimiter:ve}})(A,r.newline,r.skipEmptyLines,r.comments,r.delimitersToGuess)).successful?r.delimiter=O.bestDelimiter:(v=!0,r.delimiter=c.DefaultDelimiter),y.meta.delimiter=r.delimiter),$(r));return r.preview&&r.header&&O.preview++,a=A,u=new q(O),y=u.parse(a,R,W),X(),oe?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return oe},this.pause=function(){oe=!0,u.abort(),a=N(r.chunk)?"":a.substring(u.getCharIndex())},this.resume=function(){x.streamer._halted?(oe=!1,x.streamer.parseChunk(a,!0)):setTimeout(x.resume,3)},this.aborted=function(){return E},this.abort=function(){E=!0,u.abort(),y.meta.aborted=!0,N(r.complete)&&r.complete(y),a=""},this.guessLineEndings=function(K,O){K=K.substring(0,1048576);var O=new RegExp(M(O)+"([^]*?)"+M(O),"gm"),W=(K=K.replace(O,"")).split("\r"),O=K.split(`
`),K=1<O.length&&O[0].length<W[0].length;if(W.length===1||K)return`
`;for(var te=0,B=0;B<W.length;B++)W[B][0]===`
`&&te++;return te>=W.length/2?`\r
`:"\r"}}function M(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function q(r){var a=(r=r||{}).delimiter,u=r.newline,v=r.comments,m=r.step,k=r.preview,V=r.fastMode,le=null,L=!1,x=r.quoteChar==null?'"':r.quoteChar,S=x;if(r.escapeChar!==void 0&&(S=r.escapeChar),(typeof a!="string"||-1<c.BAD_DELIMITERS.indexOf(a))&&(a=","),v===a)throw new Error("Comment character same as delimiter");v===!0?v="#":(typeof v!="string"||-1<c.BAD_DELIMITERS.indexOf(v))&&(v=!1),u!==`
`&&u!=="\r"&&u!==`\r
`&&(u=`
`);var b=0,oe=!1;this.parse=function(E,T,y){if(typeof E!="string")throw new Error("Input must be a string");var ee=E.length,X=a.length,re=u.length,ge=v.length,A=N(m),R=[],W=[],O=[],K=b=0;if(!E)return ce();if(V||V!==!1&&E.indexOf(x)===-1){for(var te=E.split(u),B=0;B<te.length;B++){if(O=te[B],b+=O.length,B!==te.length-1)b+=u.length;else if(y)return ce();if(!v||O.substring(0,ge)!==v){if(A){if(R=[],Oe(O.split(a)),ye(),oe)return ce()}else Oe(O.split(a));if(k&&k<=B)return R=R.slice(0,k),ce(!0)}}return ce()}for(var j=E.indexOf(a,b),D=E.indexOf(u,b),ve=new RegExp(M(S)+M(x),"g"),C=E.indexOf(x,b);;)if(E[b]===x)for(C=b,b++;;){if((C=E.indexOf(x,C+1))===-1)return y||W.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:R.length,index:b}),we();if(C===ee-1)return we(E.substring(b,C).replace(ve,x));if(x===S&&E[C+1]===S)C++;else if(x===S||C===0||E[C-1]!==S){j!==-1&&j<C+1&&(j=E.indexOf(a,C+1));var z=Pe((D=D!==-1&&D<C+1?E.indexOf(u,C+1):D)===-1?j:Math.min(j,D));if(E.substr(C+1+z,X)===a){O.push(E.substring(b,C).replace(ve,x)),E[b=C+1+z+X]!==x&&(C=E.indexOf(x,b)),j=E.indexOf(a,b),D=E.indexOf(u,b);break}if(z=Pe(D),E.substring(C+1+z,C+1+z+re)===u){if(O.push(E.substring(b,C).replace(ve,x)),Ie(C+1+z+re),j=E.indexOf(a,b),C=E.indexOf(x,b),A&&(ye(),oe))return ce();if(k&&R.length>=k)return ce(!0);break}W.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:R.length,index:b}),C++}}else if(v&&O.length===0&&E.substring(b,b+ge)===v){if(D===-1)return ce();b=D+re,D=E.indexOf(u,b),j=E.indexOf(a,b)}else if(j!==-1&&(j<D||D===-1))O.push(E.substring(b,j)),b=j+X,j=E.indexOf(a,b);else{if(D===-1)break;if(O.push(E.substring(b,D)),Ie(D+re),A&&(ye(),oe))return ce();if(k&&R.length>=k)return ce(!0)}return we();function Oe(ne){R.push(ne),K=b}function Pe(ne){var ue=0;return ue=ne!==-1&&(ne=E.substring(C+1,ne))&&ne.trim()===""?ne.length:ue}function we(ne){return y||(ne===void 0&&(ne=E.substring(b)),O.push(ne),b=ee,Oe(O),A&&ye()),ce()}function Ie(ne){b=ne,Oe(O),O=[],D=E.indexOf(u,b)}function ce(ne){if(r.header&&!T&&R.length&&!L){var ue=R[0],Se=Object.create(null),Je=new Set(ue);let ot=!1;for(let Ne=0;Ne<ue.length;Ne++){let _e=ue[Ne];if(Se[_e=N(r.transformHeader)?r.transformHeader(_e,Ne):_e]){let Fe,ct=Se[_e];for(;Fe=_e+"_"+ct,ct++,Je.has(Fe););Je.add(Fe),ue[Ne]=Fe,Se[_e]++,ot=!0,(le=le===null?{}:le)[Fe]=_e}else Se[_e]=1,ue[Ne]=_e;Je.add(_e)}ot&&console.warn("Duplicate headers found and renamed."),L=!0}return{data:R,errors:W,meta:{delimiter:a,linebreak:u,aborted:oe,truncated:!!ne,cursor:K+(T||0),renamedHeaders:le}}}function ye(){m(ce()),R=[],W=[]}},this.abort=function(){oe=!0},this.getCharIndex=function(){return b}}function H(r){var a=r.data,u=o[a.workerId],v=!1;if(a.error)u.userError(a.error,a.file);else if(a.results&&a.results.data){var m={abort:function(){v=!0,he(a.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Y,resume:Y};if(N(u.userStep)){for(var k=0;k<a.results.data.length&&(u.userStep({data:a.results.data[k],errors:a.results.errors,meta:a.results.meta},m),!v);k++);delete a.results}else N(u.userChunk)&&(u.userChunk(a.results,m,a.file),delete a.results)}a.finished&&!v&&he(a.workerId,a.results)}function he(r,a){var u=o[r];N(u.userComplete)&&u.userComplete(a),u.terminate(),delete o[r]}function Y(){throw new Error("Not implemented.")}function $(r){if(typeof r!="object"||r===null)return r;var a,u=Array.isArray(r)?[]:{};for(a in r)u[a]=$(r[a]);return u}function ae(r,a){return function(){r.apply(a,arguments)}}function N(r){return typeof r=="function"}return c.parse=function(r,a){var u=(a=a||{}).dynamicTyping||!1;if(N(u)&&(a.dynamicTypingFunction=u,u={}),a.dynamicTyping=u,a.transform=!!N(a.transform)&&a.transform,!a.worker||!c.WORKERS_SUPPORTED)return u=null,c.NODE_STREAM_INPUT,typeof r=="string"?(r=(v=>v.charCodeAt(0)!==65279?v:v.slice(1))(r),u=new(a.download?g:_)(a)):r.readable===!0&&N(r.read)&&N(r.on)?u=new P(a):(s.File&&r instanceof File||r instanceof Object)&&(u=new f(a)),u.stream(r);(u=(()=>{var v;return!!c.WORKERS_SUPPORTED&&(v=(()=>{var m=s.URL||s.webkitURL||null,k=t.toString();return c.BLOB_URL||(c.BLOB_URL=m.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",k,")();"],{type:"text/javascript"})))})(),(v=new s.Worker(v)).onmessage=H,v.id=h++,o[v.id]=v)})()).userStep=a.step,u.userChunk=a.chunk,u.userComplete=a.complete,u.userError=a.error,a.step=N(a.step),a.chunk=N(a.chunk),a.complete=N(a.complete),a.error=N(a.error),delete a.worker,u.postMessage({input:r,config:a,workerId:u.id})},c.unparse=function(r,a){var u=!1,v=!0,m=",",k=`\r
`,V='"',le=V+V,L=!1,x=null,S=!1,b=((()=>{if(typeof a=="object"){if(typeof a.delimiter!="string"||c.BAD_DELIMITERS.filter(function(T){return a.delimiter.indexOf(T)!==-1}).length||(m=a.delimiter),typeof a.quotes!="boolean"&&typeof a.quotes!="function"&&!Array.isArray(a.quotes)||(u=a.quotes),typeof a.skipEmptyLines!="boolean"&&typeof a.skipEmptyLines!="string"||(L=a.skipEmptyLines),typeof a.newline=="string"&&(k=a.newline),typeof a.quoteChar=="string"&&(V=a.quoteChar),typeof a.header=="boolean"&&(v=a.header),Array.isArray(a.columns)){if(a.columns.length===0)throw new Error("Option columns is empty");x=a.columns}a.escapeChar!==void 0&&(le=a.escapeChar+V),a.escapeFormulae instanceof RegExp?S=a.escapeFormulae:typeof a.escapeFormulae=="boolean"&&a.escapeFormulae&&(S=/^[=+\-@\t\r].*$/)}})(),new RegExp(M(V),"g"));if(typeof r=="string"&&(r=JSON.parse(r)),Array.isArray(r)){if(!r.length||Array.isArray(r[0]))return oe(null,r,L);if(typeof r[0]=="object")return oe(x||Object.keys(r[0]),r,L)}else if(typeof r=="object")return typeof r.data=="string"&&(r.data=JSON.parse(r.data)),Array.isArray(r.data)&&(r.fields||(r.fields=r.meta&&r.meta.fields||x),r.fields||(r.fields=Array.isArray(r.data[0])?r.fields:typeof r.data[0]=="object"?Object.keys(r.data[0]):[]),Array.isArray(r.data[0])||typeof r.data[0]=="object"||(r.data=[r.data])),oe(r.fields||[],r.data||[],L);throw new Error("Unable to serialize unrecognized input");function oe(T,y,ee){var X="",re=(typeof T=="string"&&(T=JSON.parse(T)),typeof y=="string"&&(y=JSON.parse(y)),Array.isArray(T)&&0<T.length),ge=!Array.isArray(y[0]);if(re&&v){for(var A=0;A<T.length;A++)0<A&&(X+=m),X+=E(T[A],A);0<y.length&&(X+=k)}for(var R=0;R<y.length;R++){var W=(re?T:y[R]).length,O=!1,K=re?Object.keys(y[R]).length===0:y[R].length===0;if(ee&&!re&&(O=ee==="greedy"?y[R].join("").trim()==="":y[R].length===1&&y[R][0].length===0),ee==="greedy"&&re){for(var te=[],B=0;B<W;B++){var j=ge?T[B]:B;te.push(y[R][j])}O=te.join("").trim()===""}if(!O){for(var D=0;D<W;D++){0<D&&!K&&(X+=m);var ve=re&&ge?T[D]:D;X+=E(y[R][ve],D)}R<y.length-1&&(!ee||0<W&&!K)&&(X+=k)}}return X}function E(T,y){var ee,X;return T==null?"":T.constructor===Date?JSON.stringify(T).slice(1,25):(X=!1,S&&typeof T=="string"&&S.test(T)&&(T="'"+T,X=!0),ee=T.toString().replace(b,le),(X=X||u===!0||typeof u=="function"&&u(T,y)||Array.isArray(u)&&u[y]||((re,ge)=>{for(var A=0;A<ge.length;A++)if(-1<re.indexOf(ge[A]))return!0;return!1})(ee,c.BAD_DELIMITERS)||-1<ee.indexOf(m)||ee.charAt(0)===" "||ee.charAt(ee.length-1)===" ")?V+ee+V:ee)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!n&&!!s.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=q,c.ParserHandle=Z,c.NetworkStreamer=g,c.FileStreamer=f,c.StringStreamer=_,c.ReadableStreamStreamer=P,s.jQuery&&((i=s.jQuery).fn.parse=function(r){var a=r.config||{},u=[];return this.each(function(k){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var V=0;V<this.files.length;V++)u.push({file:this.files[V],inputElem:this,instanceConfig:i.extend({},a)})}),v(),this;function v(){if(u.length===0)N(r.complete)&&r.complete();else{var k,V,le,L,x=u[0];if(N(r.before)){var S=r.before(x.file,x.inputElem);if(typeof S=="object"){if(S.action==="abort")return k="AbortError",V=x.file,le=x.inputElem,L=S.reason,void(N(r.error)&&r.error({name:k},V,le,L));if(S.action==="skip")return void m();typeof S.config=="object"&&(x.instanceConfig=i.extend(x.instanceConfig,S.config))}else if(S==="skip")return void m()}var b=x.instanceConfig.complete;x.instanceConfig.complete=function(oe){N(b)&&b(oe,x.file,x.inputElem),m()},c.parse(x.file,x.instanceConfig)}}function m(){u.splice(0,1),v()}}),l&&(s.onmessage=function(r){r=r.data,c.WORKER_ID===void 0&&r&&(c.WORKER_ID=r.workerId),typeof r.input=="string"?s.postMessage({workerId:c.WORKER_ID,results:c.parse(r.input,r.config),finished:!0}):(s.File&&r.input instanceof File||r.input instanceof Object)&&(r=c.parse(r.input,r.config))&&s.postMessage({workerId:c.WORKER_ID,results:r,finished:!0})}),(g.prototype=Object.create(p.prototype)).constructor=g,(f.prototype=Object.create(p.prototype)).constructor=f,(_.prototype=Object.create(_.prototype)).constructor=_,(P.prototype=Object.create(p.prototype)).constructor=P,c})})(We)),We.exports}var cs=os();const gt=rs(cs);class pe{entries;constructor(e){this.entries=e}static fromRows(e){return new pe(e.map(t=>{const s={},i=[];return Object.entries(t).forEach(([n,l])=>{if(l==="inf")i.push(1/0);else if(isNaN(l)){s[n]=l;return}else i.push(Number(l))}),{index:s,data:i}}))}static empty(){return new pe([])}static concatenate(e){return new pe(e.flatMap(t=>t?.toArray()||[]))}filterByCriteria(e){const t=this.entries.filter(s=>Object.entries(e).every(([i,n])=>Object.keys(s.index).includes(i)?n.includes(s.index[i]):!0));return new pe(t)}filterDataByIndex(e){const t=this.entries.map(s=>({index:s.index,data:e.map(i=>s.data[i])}));return new pe(t)}groupBy(e){const t={},s={};return this.entries.forEach(i=>{const n=Object.fromEntries(e.map(o=>[o,i.index[o]])),l=Object.values(n).join("_");s[l]||(s[l]=n),t[l]?i.data.forEach((o,h)=>{t[l][h]+=Number(o)}):t[l]=i.data.slice()}),new pe(Object.entries(t).map(([i,n])=>({index:s[i],data:n})))}normalize(){const e=n=>{const l=[];return this.entries.forEach(o=>{o.data.forEach((h,c)=>{const p=n(h);p<=0||(l[c]=(l[c]??0)+p)})}),l},t=e(n=>n),s=e(n=>-n),i=this.entries.map(n=>({index:n.index,data:n.data.reduce((l,o,h)=>(t[h]>0?l[h]=o/t[h]:s[h]>0?l[h]=o/s[h]:l[h]=0,l),[])}));return new pe(i)}dump(){return this.entries.length===0?console.log("No entries to display."):this.entries[0].data.length+Object.keys(this.entries[0].index).length>20?(console.warn("Data too wide to display all columns, showing sums instead."),console.table(this.entries.map(e=>({...e.index,sum:e.data.reduce((t,s)=>t+s,0)})))):console.table(this.entries.map(e=>({...e.index,...Object.fromEntries(e.data.map((t,s)=>[s.toString(),t]))}))),this}mapData(e){const t=this.entries.map(s=>({index:s.index,data:s.data.map(e)}));return new pe(t)}mapIndex(e){const t=this.entries.map((s,i,n)=>({index:e(s.index,i,n),data:s.data}));return new pe(t)}mapEntries(e){const t=this.entries.map(s=>e(s.index,s.data));return new pe(t)}*[Symbol.iterator](){yield*this.entries[Symbol.iterator]()}forEach(e){return this.entries.forEach(e),this}reduce(e,t){return this.entries.reduce(e,t)}find(e){return this.entries.find(e)}filter(e){return new pe(this.entries.filter(e))}get length(){return this.entries.length}get(e){return this.entries[e]}toArray(){return this.entries}}async function hs(){const d=Re.PUBLIC_TEMPLE_URL+"solutions/list",e=await fetch(d,{cache:"no-store"});if(!e.ok)return alert("could not fetch "+d),[];const t=await e.json();return t.sort((s,i)=>s.name.localeCompare(i.name)),t}async function ds(d){const e=new URL(Re.PUBLIC_TEMPLE_URL+"solutions/detail");e.searchParams.set("solution_name",d);const t=e.toString(),s=await fetch(t,{cache:"no-store"});if(!s.ok)throw alert("Could not fetch "+t),new Error("Could not fetch "+t);return await s.json()}async function Js(d,e){const t=new URL(Re.PUBLIC_TEMPLE_URL+"solutions/unit");t.searchParams.set("solution_name",d),t.searchParams.set("component",e);const s=t.toString(),i=await(await fetch(s,{cache:"no-store"})).json();return lt(i)}async function Gs(d,e,t,s="",i=""){const n=new URL(Re.PUBLIC_TEMPLE_URL+"solutions/total");n.searchParams.set("solution_name",d),n.searchParams.set("components",e.join(",")),n.searchParams.set("scenario",t),s!==""&&n.searchParams.set("carrier",s),n.searchParams.set("unit_component",i);const l=n.toString(),o=await fetch(l,{cache:"no-store"});if(!o.ok)throw alert("Error when fetching "+l),new Error("Error when fetching "+l);const h=await o.json();for(const c in h)c=="unit"||h[c]===void 0||(h[c]=ps(us(h[c])));return h.unit=lt(h.unit||""),h}async function Zs(d,e,t,s="",i=0,n=1,l=""){const o=new URL(Re.PUBLIC_TEMPLE_URL+"solutions/full_ts");o.searchParams.set("solution_name",d),o.searchParams.set("components",e.join(",")),o.searchParams.set("unit_component",s),o.searchParams.set("scenario_name",t),o.searchParams.set("year",i.toString()),o.searchParams.set("rolling_average_window_size",n.toString()),l!==""&&o.searchParams.set("carrier",l);const h=o.toString(),c=await fetch(h,{cache:"no-store"});if(!c.ok)throw alert("Error when fetching "+h),new Error("Error when fetching "+h);const p=await c.json(),g=Object.fromEntries(Object.entries(p).map(([f,_])=>f=="unit"||_===void 0?null:[f,mt(_)]).filter(f=>f!==null));return{unit:lt(p.unit||""),components:g}}async function Qs(d,e,t,s,i,n){const l=new URL(Re.PUBLIC_TEMPLE_URL+"solutions/energy_balance");l.searchParams.set("solution_name",d),l.searchParams.set("node",e),l.searchParams.set("carrier",t),l.searchParams.set("scenario_name",s),l.searchParams.set("year",i.toString()),l.searchParams.set("rolling_average_window_size",n.toString());const o=l.toString(),h=await fetch(o,{cache:"no-store"});if(!h.ok)throw alert("Could not fetch "+o),new Error("Could not fetch "+o);const c=await h.json(),p=["shed_demand","demand","flow_conversion_input","flow_export","flow_import","flow_storage_charge","flow_storage_discharge","flow_transport_in","flow_transport_out","cost_shed_demand","flow_conversion_output","constraint_nodal_energy_balance"],g={};for(const f of p)c[f]!==void 0&&(g[f]=mt(c[f]));return g}function us(d){if(d.slice(0,d.indexOf(`
`)).split(",").length==2){const i=d.split(`
`);let n="",l="";for(const o of i.slice(1,i.length)){if(o=="")continue;const h=o.split(",");n+=h[0]+",",l+=h[1]+","}d=n.substring(0,n.length-1)+`
`+l.substring(0,l.length-1)}return d.slice(-1)==`
`&&(d=d.slice(0,-1)),gt.parse(d,{delimiter:",",header:!0,newline:`
`})}function mt(d){return new pe(d.map(e=>{let{d:t,t:s,...i}=e;const[n,l]=s;let o=0;return t=t.map(h=>o+=h),t=t.map(h=>h*l+n),{index:i,data:t}}))}function lt(d){return d.slice(-1)==`
`&&(d=d.slice(0,d.length-1)),gt.parse(d,{delimiter:",",header:!0,newline:`
`})}function ps(d){return d.data=d.data.filter(e=>Object.keys(e).some(t=>!Number.isNaN(Number(t))&&!Number.isNaN(e[t])&&Math.abs(e[t])>0)),d}let st=de(Be([]));const $e={};let et=!1;function fs(){it(async()=>{w(st).length>0||et||(et=!0,se(st,await hs(),!0),et=!1)})}function pt(){return w(st)}async function gs(d){if($e[d])return $e[d];const e=await ds(d);return e&&($e[d]=e),e}function ms(d,e,t){return{solution_name:d,scenario_name:e,detail:t.scenarios[e],version:t.version,objective:t.objective}}function vs(d){return[...Array(d.system.optimized_years).keys()].map(e=>e*d.system.interval_between_years+d.system.reference_year)}var bs=Q("<!> <!> <!>",1);function Ys(d,e){Ve(e,!0),fs();let t=J(e,"carriers",31,()=>Be([])),s=J(e,"nodes",31,()=>Be([])),i=J(e,"years",31,()=>Be([])),n=J(e,"selected_solution",15),l=J(e,"activeFirstLevel",15,""),o=J(e,"activeSecondLevel",15,""),h=J(e,"activeScenario",15,""),c=J(e,"excludeSolutions",19,()=>[]),p=J(e,"loading",15,!1),g=J(e,"disabled",3,!0),f=J(e,"withoutSolution",3,!1),_=J(e,"urlParamSolution",3,"solution"),P=J(e,"urlParamScenario",3,"scenario"),Z=Te(()=>Rt(pt().map(L=>L.name.split(".")[0]))),M=Te(()=>{if(l()=="")return[];const L=new Set(c().map(S=>S[0])),x=[];return pt().forEach(S=>{const b=S.name.split(".");S.name.startsWith(l())&&b.length>1&&(S.scenarios.length>0||!L.has(b[1]))&&x.push(b[1])}),x}),q=de(Be([])),H=Te(()=>{const L=new Set(c().filter(x=>x[0]==o()).map(x=>x[1]));return w(q).filter(x=>!L.has(x))}),he=Te(()=>w(Z).length>0&&w(M).length==0?l()||null:l()&&o()?`${l()}.${o()}`:null),Y=de(!0),$=de(!0);it(async()=>{if(_()==null||P()==null)return;const L=dt(_())?.split(".")||["",""];l(L[0]),o(L[1]),h(dt(P())||"")}),xe(()=>{w(he),h(),Ae(ae)}),xe(()=>{n(),ht().then(()=>{_()==null||P()==null||n()==null||Et({[_()]:n().solution_name,[P()]:w(H).length>1?n().scenario_name:null})})}),xe(()=>{if(!n()){t([]),s([]),i([]);return}t(n().detail.system.set_carriers.slice().sort()),s(n().detail.system.set_nodes.slice().sort()),i(vs(n().detail))}),xe(()=>{l(),Ae(()=>{if(w(Y)){se(Y,!1);return}o(w(M).length===1?w(M)[0]:""),h("")})}),xe(()=>{o(),Ae(()=>{if(w($)){se($,!1);return}h("")})}),xe(()=>{w(M).length===1&&o(w(M)[0])});async function ae(){if(await ht(),w(he)===null){n(null),se(q,[],!0);return}if(n()!==null&&n().solution_name===w(he)&&n().scenario_name===h())return;p(!0);const L=await gs(w(he));if(se(q,Object.keys(L.scenarios),!0),w(H).length==1&&h(w(H)[0]),h()==""||!(h()in L.scenarios)){h(""),n(null),p(!1);return}n(ms(w(he),h(),L)),e.solutionSelected?.(n()),p(!1)}function N(){return l()==""?!1:w(M).length>1||w(H).length>1}var r={moreSolutionsExist:N},a=bs(),u=He(a);{var v=L=>{Xe(L,{label:"Solution",get disabled(){return g()},get options(){return w(Z)},get value(){return l()},set value(S){l(S)},helpText:S=>{De();var b=Ze("Select the name of the solution for which to visualize results.");U(S,b)},$$slots:{helpText:!0}})};be(u,L=>{f()||L(v)})}var m=ie(u,2);{var k=L=>{Xe(L,{label:"Subsolution",get disabled(){return g()},get options(){return w(M)},get value(){return o()},set value(S){o(S)},helpText:S=>{De();var b=Ze("Select the subsolution for which to visualize results.");U(S,b)},$$slots:{helpText:!0}})};be(m,L=>{w(M).length>0&&L(k)})}var V=ie(m,2);{var le=L=>{Xe(L,{label:"Scenario",get disabled(){return g()},get options(){return w(H)},get value(){return h()},set value(S){h(S)},helpText:S=>{De();var b=Ze("Select the scenario for which to visualize results.");U(S,b)},$$slots:{helpText:!0}})};be(V,L=>{w(q).length>1&&L(le)})}return U(d,a),ze(r)}var ws=Q("<div><!></div>");function ys(d,e){let t=J(e,"class",3,""),s=J(e,"noPadding",3,!1);var i=ws(),n=I(i);ke(n,()=>e.children),F(i),fe(()=>Ee(i,1,Ce(["bg-white dark:bg-gray-800","shadow-lg shadow-black/10 dark:shadow-white/5","rounded-lg","mb-4",!s()&&"p-4",t()]))),U(d,i)}var _s=Q('<div class="[&amp;:not(:last-child)]:border-b border-gray-300 dark:border-gray-600 p-4 [&amp;:first-child]:pt-0"><h3 class="sr-only"> </h3> <!></div>');function Xs(d,e){var t=_s(),s=I(t),i=I(s,!0);F(s);var n=ie(s,2);ke(n,()=>e.children??at),F(t),fe(()=>Le(i,e.title)),U(d,t)}const Me=[["rgb(122, 157, 207)","rgb(8, 64, 126)","rgb(166, 190, 223)","rgb(33, 92, 175)","rgb(211, 222, 239)","rgb(77, 125, 191)"],["rgb(212, 134, 129)","rgb(150, 39, 45)","rgb(226, 174, 171)","rgb(183, 53, 45)","rgb(241, 215, 213)","rgb(197, 93, 87)"],["rgb(102, 175, 192)","rgb(0, 89, 109)","rgb(153, 202, 213)","rgb(0, 120, 148)","rgb(204, 228, 234)","rgb(51, 149, 171)"],["rgb(202, 108, 174)","rgb(140, 10, 89)","rgb(220, 158, 201)","rgb(167, 17, 122)","rgb(239, 208, 227)","rgb(183, 59, 146)"],["rgb(161, 171, 113)","rgb(54, 82, 19)","rgb(192, 199, 161)","rgb(98, 115, 19)","rgb(224, 227, 208)","rgb(129, 143, 66)"],["rgb(187, 164, 113)","rgb(112, 79, 18)","rgb(210, 194, 161)","rgb(142, 103, 19)","rgb(232, 225, 208)","rgb(165, 133, 66)"]];let je=0,Ue=0,Ke={};function $s(){je=0,Ue=0,Ke={}}function ei(d){if(d!==void 0&&Ke[d]!==void 0)return Ke[d];je>=Me.length&&(je=0,Ue++,Ue>=Me[0].length&&(Ue=0));const e=Me[je][Ue];return je++,d!==void 0&&(Ke[d]=e),e}function ti(d,e=.8){return d.replace("rgb","rgba").replace(")",`, ${e})`)}function si(){const d=[];for(let e=0;e<Me.length;e++)for(let t=0;t<Me[0].length;t++)d.push(Me[t][e]);return d}function Ss(d,e){se(e,!w(e))}var xs=Q('<div class="text-sm text-gray-600 dark:text-gray-400 uppercase tracking-wide mb-1"> </div>'),Os=Q('<div class="text-gray-600 dark:text-gray-400 mt-1"> </div>'),ks=Q('<i class="bi bi-chevron-right"></i>'),Ls=Q('<i class="bi bi-chevron-left"></i>'),Es=Q('<div class="text-md font-bold text-gray-600 dark:text-gray-400 [writing-mode:sideways-lr] mt-2">Selection</div>'),Cs=Q('<div class="flex justify-between w-full"><h2>Selection</h2> <button><!> <span class="sr-only">Toggle selection sidebar</span></button></div> <!> <div><!></div>',1),Ts=Q('<div><div class="flex items-end justify-between"><div><!> <h1 class="text-3xl font-bold"> </h1> <!></div></div> <div><!></div></div> <div><div class="col-span-1 order-2 lg:order-3 pb-4"><!></div> <main class="order-4 col-span-1"><!></main></div>',1);function ii(d,e){let t=de(!1);var s=Ts(),i=He(s);Ee(i,1,Ce(["grid grid-cols-1","lg:flex lg:justify-between","gap-x-4 p-4 pb-0"]));var n=I(i),l=I(n),o=I(l);{var h=Y=>{var $=xs(),ae=I($,!0);F($),fe(()=>Le(ae,e.parentTitle)),U(Y,$)};be(o,Y=>{e.parentTitle&&Y(h)})}var c=ie(o,2),p=I(c,!0);F(c);var g=ie(c,2);{var f=Y=>{var $=Os(),ae=I($,!0);F($),fe(()=>Le(ae,e.subtitle)),U(Y,$)};be(g,Y=>{e.subtitle&&Y(f)})}F(l),F(n);var _=ie(n,2),P=I(_);ke(P,()=>e.buttons??at),F(_),F(i);var Z=ie(i,2),M=I(Z),q=I(M);{let Y=Te(()=>"flex flex-col items-center"+(w(t)?" h-full":""));ys(q,{noPadding:!0,get class(){return w(Y)},children:($,ae)=>{var N=Cs(),r=He(N),a=I(r),u=ie(a,2);Ee(u,1,Ce(["hidden lg:block","rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200","p-2 mt-2 mx-2"])),u.__click=[Ss,t];var v=I(u);{var m=S=>{var b=ks();U(S,b)},k=S=>{var b=Ls();U(S,b)};be(v,S=>{w(t)?S(m):S(k,!1)})}De(2),F(u),F(r);var V=ie(r,2);{var le=S=>{var b=Es();U(S,b)};be(V,S=>{w(t)&&S(le)})}var L=ie(V,2),x=I(L);ke(x,()=>e.filters),F(L),fe(()=>{Ee(a,1,Ce(["font-bold text-lg px-4 pt-4 pb-2 text-ellipsis",w(t)&&"sr-only"])),Ee(L,1,Ce(["w-full",w(t)&&"sr-only"]))}),U($,N)},$$slots:{default:!0}})}F(M);var H=ie(M,2),he=I(H);ke(he,()=>e.mainContent),F(H),F(Z),fe(()=>{Le(p,e.pageTitle),Ee(Z,1,Ce(["grid grid-cols-1","grow gap-x-4 p-4",w(t)?"lg:grid-cols-[min-content_1fr]":"lg:grid-cols-[calc(25%-0.5rem)_calc(75%-0.5rem)]"]))}),U(d,s)}nt(["click"]);var As=(d,e)=>e.onclick?.(),Ds=Q("<button><!></button>");function ni(d,e){Ve(e,!0);let t=J(e,"class",3,"");var s=Ds();s.__click=[As,e];var i=I(s);ke(i,()=>e.children),F(s),fe(()=>Ee(s,1,Ce(["flex","text-blue-800 dark:text-blue-400","border-2 border-blue-800 dark:border-blue-400 rounded-lg","hover:bg-gray-300 dark:hover:bg-gray-800","px-4 py-2",t()]))),U(d,s),ze()}nt(["click"]);var Ps=Q('<div class="flex flex-col items-center mt-8 md:mt-30" role="status"><svg class="h-40 w-40" version="1.1" viewBox="-1.5 -0.8 12.0 10.6"><path d="M3.28 10.671 3.79941,4.975 4.318,10.671 Z" class="fill-gray-500 dark:fill-gray-400"></path><circle cx="3.78" cy="4.215" r=".42995" class="fill-gray-500 dark:fill-gray-400"></circle><g class="animate-[spin_2s_linear_infinite] fill-none stroke-gray-500 dark:stroke-gray-400" stroke-width=".5"><path d="m3.11 4.7-2.9772 1.7189"></path><path d="m4.52 4.718 2.9772 1.7189"></path><path d="m3.78 3.438v-3.4378"></path></g></svg> <span class="text-gray-500 dark:text-gray-400 text-3xl mt-8">Loading ...</span></div>');function ai(d){var e=Ps(),t=I(e),s=ie(I(t),2);tt(s,"",{},{"transform-origin":"3.78px 4.215px;"}),F(t),De(2),F(e),U(d,e)}var Ns=Q('<div class="flex flex-col items-center mt-8 md:mt-30" role="status"><svg class="h-40 w-40" viewBox="-1.5 -0.8 12.0 10.6"><path d="M3.28,10.671 3.79941,4.975 4.318,10.671 Z" class="fill-gray-500 dark:fill-gray-400"></path><circle cx="3.78" cy="4.215" r="0.42995" class="fill-gray-500 dark:fill-gray-400"></circle><g class="fill-none stroke-gray-500 dark:stroke-gray-400" stroke-width="0.5"><path d="M3.11 4.7 0.5 6.9"></path><path d="M3.826875,3.438 4.446875,2"></path><path d="M5.0 10.2 6.5 10.2"></path><path d="M4.52 4.718 6.3 5.7"></path><path d="m6.3703124,5.7984375 v 1.4"></path></g></svg> <div class="text-gray-500 dark:text-gray-400 text-3xl mt-8"> </div></div>');function ri(d,e){var t=Ns(),s=ie(I(t),2),i=I(s,!0);F(s),F(t),fe(()=>Le(i,e.message)),U(d,t)}var Ms=Q('<div class="flex flex-col items-center mt-8 md:mt-30" role="status"><svg class="h-40 w-40" viewBox="-1.5 -0.8 12.0 10.6"><path d="M3.28,10.671 3.79941,4.975 4.318,10.671 Z" class="fill-gray-500 dark:fill-gray-400"></path><circle cx="3.78" cy="4.215" r="0.42995" class="fill-gray-500 dark:fill-gray-400"></circle><g class="fill-none stroke-gray-500 dark:stroke-gray-400" stroke-width="0.5"><path d="m3.11 4.7-2.9772 1.7189"></path><path d="m4.52 6.918 2.9772 1.7189"></path><path d="m3.78 3.438v-3.4378"></path></g><path class="fill-gray-500 dark:fill-gray-400" d="M 5.4003906,1.8867187 4.44,2.8124997 9.7128906,2.812 V 1.887 c -1.437499,-6.692e-4 -2.8750003,-2.813e-4 -4.3125,-2.813e-4 z m 0.046875,0.2265626 H 9.4863281 V 2.5859375 H 4.9726562 Z"></path><g class="fill-none stroke-gray-500 dark:stroke-gray-400" stroke-width="0.2"><path d="M8,9.9 V 2.7"></path><path d="M8.7,9.9 V 2.7"></path><path d="m8.0 9.8 0.7 0"></path><path d="m8.0 9.8 0.7 -0.7"></path><path d="m8.7 9.1 -0.7 -0.7"></path><path d="m8.0 8.4 0.7 -0.7"></path><path d="m8.7 7.7 -0.7 -0.7"></path><path d="m8.0 7.0 0.7 -0.7"></path><path d="m8.7 6.3 -0.7 -0.7"></path><path d="m8.0 5.6 0.7 -0.7"></path><path d="m8.7 4.9 -0.7 -0.7"></path><path d="m8.0 4.2 0.7 -0.7"></path><path d="m8.7 3.5 -0.7 -0.7"></path><path d="m5.4 2.0 0.7 0.7"></path><path d="m6.1 2.7 0.7 -0.7"></path><path d="m6.8 2.0 0.7 0.7"></path><path d="m7.5 2.7 0.7 -0.7"></path><path d="m8.2 2.0 0.7 0.7"></path><path d="m8.9 2.7 0.7 -0.7"></path><path d="M 6.3535526,5.7714951 4.7001773,6.789784 M 6.3286408,5.7355339 7.5259047,8.4620005 M 6.31,2.7136504 6.3210485,5.7702329"></path></g></svg> <div class="text-gray-500 dark:text-gray-400 text-3xl mt-8"> </div></div>');function li(d,e){var t=Ms(),s=ie(I(t),2),i=I(s,!0);F(s),F(t),fe(()=>Le(i,e.message)),U(d,t)}export{ni as B,ys as C,ii as D,ri as E,Xs as F,zt as H,Ys as S,li as W,Js as a,Xe as b,ai as c,Zs as d,Rt as e,Qs as f,Gs as g,pe as h,ti as i,Jt as j,is as k,Ks as l,vs as m,ei as n,rs as o,Mt as p,si as q,$s as r,Ws as t};
