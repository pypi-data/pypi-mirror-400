"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["67700"],{34296:function(e,t,a){var i,n,r,o,s=a(72153),c=a(44734),l=a(43080),u=a(69683),d=a(6454),h=a(25460),p=(a(28706),a(69085),a(40445)),v=a(96229),f=a(26069),y=a(91735),g=a(42034),_=a(96196),b=a(77845),m=function(e){function t(){var e;(0,c.A)(this,t);for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(e=(0,u.A)(this,t,[].concat(i))).filled=!1,e.active=!1,e}return(0,d.A)(t,e),(0,l.A)(t,[{key:"renderOutline",value:function(){return this.filled?(0,_.qy)(i||(i=(0,s.A)(['<span class="filled"></span>']))):(0,h.A)(t,"renderOutline",this,3)([])}},{key:"getContainerClasses",value:function(){return Object.assign(Object.assign({},(0,h.A)(t,"getContainerClasses",this,3)([])),{},{active:this.active})}},{key:"renderPrimaryContent",value:function(){return(0,_.qy)(n||(n=(0,s.A)([' <span class="leading icon" aria-hidden="true"> ',' </span> <span class="label">','</span> <span class="touch"></span> <span class="trailing leading icon" aria-hidden="true"> '," </span> "])),this.renderLeadingIcon(),this.label,this.renderTrailingIcon())}},{key:"renderTrailingIcon",value:function(){return(0,_.qy)(r||(r=(0,s.A)(['<slot name="trailing-icon"></slot>'])))}}])}(v.k);m.styles=[y.R,g.R,f.R,(0,_.AH)(o||(o=(0,s.A)([":host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-assist-chip-container-shape:var(\n          --ha-assist-chip-container-shape,\n          16px\n        );--md-assist-chip-outline-color:var(--outline-color);--md-assist-chip-label-text-weight:400}.filled{display:flex;pointer-events:none;border-radius:inherit;inset:0;position:absolute;background-color:var(--ha-assist-chip-filled-container-color)}::slotted([slot=icon]),::slotted([slot=trailing-icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px);font-size:var(--_label-text-size)!important}.trailing.icon ::slotted(*),.trailing.icon svg{margin-inline-end:unset;margin-inline-start:var(--_icon-label-space)}::before{background:var(--ha-assist-chip-container-color,transparent);opacity:var(--ha-assist-chip-container-opacity, 1)}:where(.active)::before{background:var(--ha-assist-chip-active-container-color);opacity:var(--ha-assist-chip-active-container-opacity)}.label{font-family:var(--ha-font-family-body)}"])))],(0,p.__decorate)([(0,b.MZ)({type:Boolean,reflect:!0})],m.prototype,"filled",void 0),(0,p.__decorate)([(0,b.MZ)({type:Boolean})],m.prototype,"active",void 0),m=(0,p.__decorate)([(0,b.EM)("ha-assist-chip")],m)},31580:function(e,t,a){a.d(t,{J8:function(){return n},Rr:function(){return o},b9:function(){return i},iV:function(){return r}});a(28706),a(94490),a(34782),a(26099),a(58940),a(38781),a(68156);var i=function(e){var t=e;return"string"==typeof e&&(t=parseInt(e,16)),"0x"+t.toString(16).padStart(4,"0")},n=function(e,t){var a=e.user_given_name?e.user_given_name:e.name,i=t.user_given_name?t.user_given_name:t.name;return a.localeCompare(i)},r=function(e,t){var a=e.name,i=t.name;return a.localeCompare(i)},o=function(e){return"".concat(e.name," (Endpoint id: ").concat(e.endpoint_id,", Id: ").concat(i(e.id),", Type: ").concat(e.type,")")}},94728:function(e,t,a){a.a(e,async function(e,i){try{a.r(t),a.d(t,{ZHANetworkVisualizationPage:function(){return A}});var n,r,o=a(61397),s=a(50264),c=a(72153),l=a(44734),u=a(43080),d=a(69683),h=a(6454),p=a(25460),v=(a(28706),a(2008),a(50113),a(74423),a(44114),a(26910),a(18111),a(20116),a(7588),a(69085),a(26099),a(58940),a(27495),a(25440),a(23500),a(40445)),f=a(96196),y=a(77845),g=a(91926),_=a(7358),b=a(84621),m=(a(31168),a(31580)),k=a(63670),w=a(76774),z=e([_,k]);[_,k]=z.then?(await z)():z;var A=function(e){function t(){var e;(0,l.A)(this,t);for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(e=(0,d.A)(this,t,[].concat(i))).narrow=!1,e.isWide=!1,e._networkData={nodes:[],links:[],categories:[]},e._devices=[],e._tooltipFormatter=function(t){var a=t.dataType,i=t.data,n=t.name;if("edge"===a){var r,o=i.source,s=i.target,c=i.value,l=e._networkData.nodes.find(function(e){return e.id===s}).name,u=e._networkData.nodes.find(function(e){return e.id===o}).name,d="".concat(u," → ").concat(l).concat(c?" <b>LQI:</b> ".concat(c):""),h=null===(r=e._networkData.links.find(function(e){return e.source===o&&e.target===s}))||void 0===r?void 0:r.reverseValue;return h?"".concat(d,"<br>").concat(l," → ").concat(u," <b>LQI:</b> ").concat(h):d}var p=e._devices.find(function(e){return e.ieee===i.id});if(!p)return n;var v="<b>IEEE: </b>".concat(p.ieee);v+="<br><b>".concat(e.hass.localize("ui.panel.config.zha.visualization.device_type"),": </b>").concat(p.device_type.replace("_"," ")),null!=p.nwk&&(v+="<br><b>NWK: </b>".concat((0,m.b9)(p.nwk))),null!=p.manufacturer&&null!=p.model?v+="<br><b>".concat(e.hass.localize("ui.panel.config.zha.visualization.device"),": </b>").concat(p.manufacturer," ").concat(p.model):v+="<br><b>".concat(e.hass.localize("ui.panel.config.zha.visualization.device_not_in_db"),"</b>");var f=e.hass.devices[p.device_reg_id];if(f){var y=(0,w.w)(f,e.hass).area;y&&(v+="<br><b>".concat(e.hass.localize("ui.panel.config.zha.visualization.area"),": </b>").concat(y.name))}return v},e}return(0,h.A)(t,e),(0,u.A)(t,[{key:"firstUpdated",value:function(e){(0,p.A)(t,"firstUpdated",this,3)([e]),this.hass&&this._fetchData()}},{key:"render",value:function(){return(0,f.qy)(n||(n=(0,c.A)([' <hass-tabs-subpage .tabs="','" .hass="','" .narrow="','" .isWide="','" .route="','" header="','"> <ha-network-graph .hass="','" .data="','" .tooltipFormatter="','" @chart-click="','"> <ha-icon-button slot="button" class="refresh-button" .path="','" @click="','" label="','"></ha-icon-button> </ha-network-graph> </hass-tabs-subpage> '])),k.zhaTabs,this.hass,this.narrow,this.isWide,this.route,this.hass.localize("ui.panel.config.zha.visualization.header"),this.hass,this._networkData,this._tooltipFormatter,this._handleChartClick,"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",this._refreshTopology,this.hass.localize("ui.panel.config.zha.visualization.refresh_topology"))}},{key:"_fetchData",value:(i=(0,s.A)((0,o.A)().m(function e(){return(0,o.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,b.Uc)(this.hass);case 1:this._devices=e.v,this._networkData=this._createChartData(this._devices);case 2:return e.a(2)}},e,this)})),function(){return i.apply(this,arguments)})},{key:"_refreshTopology",value:(a=(0,s.A)((0,o.A)().m(function e(){return(0,o.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,b.xU)(this.hass);case 1:return e.n=2,this._fetchData();case 2:return e.a(2)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"_handleChartClick",value:function(e){if("node"===e.detail.dataType&&"pointer"===e.detail.event.target.cursor){var t=e.detail.data.id,a=this._devices.find(function(e){return e.ieee===t});a&&(0,g.o)("/config/devices/device/".concat(a.device_reg_id))}}},{key:"_createChartData",value:function(e){var t=this,a=getComputedStyle(this),i=a.getPropertyValue("--primary-color"),n=a.getPropertyValue("--cyan-color"),r=a.getPropertyValue("--teal-color"),o=a.getPropertyValue("--error-color"),s=[],c=[],l=[{name:this.hass.localize("ui.panel.config.zha.visualization.coordinator"),symbol:"roundRect",itemStyle:{color:i}},{name:this.hass.localize("ui.panel.config.zha.visualization.router"),symbol:"circle",itemStyle:{color:n}},{name:this.hass.localize("ui.panel.config.zha.visualization.end_device"),symbol:"circle",itemStyle:{color:r}},{name:this.hass.localize("ui.panel.config.zha.visualization.offline"),symbol:"circle",itemStyle:{color:o}}];return e.forEach(function(l){var u,d="Coordinator"===l.device_type;u=l.available?d?0:"Router"===l.device_type?1:2:3;var h=t.hass.devices[l.device_reg_id],p=h?(0,w.w)(h,t.hass).area:void 0;s.push({id:l.ieee,name:l.user_given_name||l.name||l.ieee,context:null==p?void 0:p.name,category:u,value:d?3:"Router"===l.device_type?2:1,symbolSize:d?40:"Router"===l.device_type?30:20,symbol:d?"roundRect":"circle",itemStyle:{color:l.available?d?i:"Router"===l.device_type?n:r:o},polarDistance:0===u?0:1===u?.5:.9,fixed:d});var v=c.filter(function(e){return e.source===l.ieee||e.target===l.ieee});if(l.routes&&l.routes.length>0)l.routes.forEach(function(e){var n=l.neighbors.find(function(t){return t.nwk===e.next_hop});if(n){var r=v.find(function(e){return e.source===n.ieee||e.target===n.ieee});if(r){var o;if(r.source===l.ieee)r.value=Math.max(r.value,parseInt(n.lqi));else r.reverseValue=Math.max(null!==(o=r.reverseValue)&&void 0!==o?o:0,parseInt(n.lqi));var s=t._getLQIWidth(parseInt(n.lqi));r.symbolSize=s/4*6+3,r.lineStyle=Object.assign(Object.assign({},r.lineStyle),{},{width:s,color:"Active"===e.route_status?i:r.lineStyle.color,type:["Child","Parent"].includes(n.relationship)?"solid":r.lineStyle.type})}else{var u=t._getLQIWidth(parseInt(n.lqi)),d={source:l.ieee,target:n.ieee,value:parseInt(n.lqi),lineStyle:{width:u,color:"Active"===e.route_status?i:a.getPropertyValue("--dark-primary-color"),type:["Child","Parent"].includes(n.relationship)?"solid":"dotted"},symbolSize:u/4*6+3,ignoreForceLayout:"0x0000"!==e.dest_nwk};c.push(d),v.push(d)}}});else if(0===v.length){var f,y=null!==(f=l.neighbors)&&void 0!==f?f:[];0===y.length&&e.forEach(function(e){if(e.neighbors&&e.neighbors.length>0){var t=e.neighbors.find(function(e){return e.ieee===l.ieee});t&&y.push({ieee:e.ieee,lqi:t.lqi})}});var g=y.sort(function(e,t){return parseInt(t.lqi)-parseInt(e.lqi)})[0];g&&c.push({source:l.ieee,target:g.ieee,value:parseInt(g.lqi),symbolSize:5,lineStyle:{width:1,color:a.getPropertyValue("--dark-primary-color"),type:"dotted"},ignoreForceLayout:!0})}}),e.forEach(function(e){var t;"Coordinator"===e.device_type?c.forEach(function(t){t.source!==e.ieee&&t.target!==e.ieee||(t.ignoreForceLayout=!1)}):!c.some(function(a){if(a.source===e.ieee||a.target===e.ieee){var i,n;if(!a.ignoreForceLayout)return!0;a.value>(null!==(i=null===(n=t)||void 0===n?void 0:n.value)&&void 0!==i?i:-1)&&(t=a)}return!1})&&t&&(t.ignoreForceLayout=!1)}),{nodes:s,links:c,categories:l}}},{key:"_getLQIWidth",value:function(e){return e>200?3:e>100?2:1}}],[{key:"styles",get:function(){return[(0,f.AH)(r||(r=(0,c.A)(["ha-network-graph{height:100%}"])))]}}]);var a,i}(f.WF);(0,v.__decorate)([(0,y.MZ)({attribute:!1})],A.prototype,"hass",void 0),(0,v.__decorate)([(0,y.MZ)({attribute:!1})],A.prototype,"route",void 0),(0,v.__decorate)([(0,y.MZ)({type:Boolean,reflect:!0})],A.prototype,"narrow",void 0),(0,v.__decorate)([(0,y.MZ)({attribute:"is-wide",type:Boolean})],A.prototype,"isWide",void 0),(0,v.__decorate)([(0,y.wk)()],A.prototype,"_networkData",void 0),(0,v.__decorate)([(0,y.wk)()],A.prototype,"_devices",void 0),A=(0,v.__decorate)([(0,y.EM)("zha-network-visualization-page")],A),i()}catch(C){i(C)}})},69235:function(e,t,a){a.a(e,async function(e,t){try{a(23792),a(26099),a(3362),a(47764),a(62953);"function"!=typeof window.ResizeObserver&&(window.ResizeObserver=(await a.e("71055").then(a.bind(a,52370))).default),t()}catch(i){t(i)}},1)}}]);
//# sourceMappingURL=67700.7144675d68500db5.js.map