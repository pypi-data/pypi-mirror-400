{
    "require_platform": [
        "Darwin",
        "Linux"
    ],
    "args": [
        "/home/someone/something"
    ],
    "kwargs": {
        "content": "should be this",
        "line": "before this",
        "before": true,
        "backup": true
    },
    "facts": {
        "files.Block": {
            "begin=None, end=None, marker=None, path=/home/someone/something": [
                "previously was something else"
            ]
        }
    },
    "commands": [
        "cp /home/someone/something /home/someone/something.a-timestamp && OUT=\"$(TMPDIR=_tempdir_ mktemp -t pyinfra.XXXXXX)\" &&  MODE=\"$(stat -c %a /home/someone/something 2>/dev/null || stat -f %Lp /home/someone/something 2>/dev/null)\" && OWNER=\"$(stat -c \"%u:%g\" /home/someone/something 2>/dev/null || stat -f \"%u:%g\" /home/someone/something 2>/dev/null || echo $(id -un):$(id -gn))\" && awk 'BEGIN {{f=1; x=ARGV[2]; ARGV[2]=\"\"}}/# BEGIN PYINFRA BLOCK/ {print; print x; f=0} /# END PYINFRA BLOCK/ {print; f=1; next} f' /home/someone/something \"should be this\" > \"$OUT\"  && mv \"$OUT\" /home/someone/something  && chown \"$OWNER\" /home/someone/something  && chmod \"$MODE\" /home/someone/something"
    ]
}