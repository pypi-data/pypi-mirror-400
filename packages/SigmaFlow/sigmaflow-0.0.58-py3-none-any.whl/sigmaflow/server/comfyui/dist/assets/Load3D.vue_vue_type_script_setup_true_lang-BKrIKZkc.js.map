{"version":3,"file":"Load3D.vue_vue_type_script_setup_true_lang-BKrIKZkc.js","sources":["../../../../../../ComfyUI_frontend/src/components/load3d/controls/PopupSlider.vue","../../../../../../ComfyUI_frontend/src/components/load3d/controls/CameraControls.vue","../../../../../../ComfyUI_frontend/src/components/load3d/controls/ExportControls.vue","../../../../../../ComfyUI_frontend/src/components/load3d/controls/LightControls.vue","../../../../../../ComfyUI_frontend/src/components/load3d/controls/ModelControls.vue","../../../../../../ComfyUI_frontend/src/components/load3d/controls/SceneControls.vue","../../../../../../ComfyUI_frontend/src/components/load3d/Load3DControls.vue","../../../../../../ComfyUI_frontend/src/components/load3d/Load3DScene.vue","../../../../../../ComfyUI_frontend/src/components/load3d/controls/AnimationControls.vue","../../../../../../ComfyUI_frontend/src/components/load3d/controls/RecordingControls.vue","../../../../../../ComfyUI_frontend/src/components/load3d/controls/ViewerControls.vue","../../../../../../ComfyUI_frontend/src/components/load3d/Load3D.vue"],"sourcesContent":["<template>\n  <div class=\"relative show-slider\">\n    <Button class=\"p-button-rounded p-button-text\" @click=\"toggleSlider\">\n      <i\n        v-tooltip.right=\"{ value: tooltipText, showDelay: 300 }\"\n        :class=\"['pi', icon, 'text-lg text-white']\"\n      />\n    </Button>\n    <div\n      v-show=\"showSlider\"\n      class=\"absolute top-0 left-12 rounded-lg bg-black/50 p-4 shadow-lg w-[150px]\"\n    >\n      <Slider\n        v-model=\"value\"\n        class=\"w-full\"\n        :min=\"min\"\n        :max=\"max\"\n        :step=\"step\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport Slider from 'primevue/slider'\nimport { onMounted, onUnmounted, ref } from 'vue'\n\nconst {\n  icon = 'pi-expand',\n  min = 10,\n  max = 150,\n  step = 1\n} = defineProps<{\n  icon?: string\n  tooltipText: string\n  min?: number\n  max?: number\n  step?: number\n}>()\n\nconst value = defineModel<number>()\nconst showSlider = ref(false)\n\nconst toggleSlider = () => {\n  showSlider.value = !showSlider.value\n}\n\nconst closeSlider = (e: MouseEvent) => {\n  const target = e.target as HTMLElement\n\n  if (!target.closest('.show-slider')) {\n    showSlider.value = false\n  }\n}\n\nonMounted(() => {\n  document.addEventListener('click', closeSlider)\n})\n\nonUnmounted(() => {\n  document.removeEventListener('click', closeSlider)\n})\n</script>\n","<template>\n  <div class=\"flex flex-col\">\n    <Button class=\"p-button-rounded p-button-text\" @click=\"switchCamera\">\n      <i\n        v-tooltip.right=\"{\n          value: $t('load3d.switchCamera'),\n          showDelay: 300\n        }\"\n        :class=\"['pi', 'pi-camera', 'text-lg text-white']\"\n      />\n    </Button>\n    <PopupSlider\n      v-if=\"showFOVButton\"\n      v-model=\"fov\"\n      :tooltip-text=\"$t('load3d.fov')\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport { computed } from 'vue'\n\nimport PopupSlider from '@/components/load3d/controls/PopupSlider.vue'\nimport type { CameraType } from '@/extensions/core/load3d/interfaces'\n\nconst cameraType = defineModel<CameraType>('cameraType')\nconst fov = defineModel<number>('fov')\nconst showFOVButton = computed(() => cameraType.value === 'perspective')\n\nconst switchCamera = () => {\n  cameraType.value =\n    cameraType.value === 'perspective' ? 'orthographic' : 'perspective'\n}\n</script>\n","<template>\n  <div class=\"flex flex-col\">\n    <div class=\"show-export-formats relative\">\n      <Button\n        class=\"p-button-rounded p-button-text\"\n        @click=\"toggleExportFormats\"\n      >\n        <i\n          v-tooltip.right=\"{\n            value: $t('load3d.exportModel'),\n            showDelay: 300\n          }\"\n          class=\"pi pi-download text-lg text-white\"\n        />\n      </Button>\n      <div\n        v-show=\"showExportFormats\"\n        class=\"absolute top-0 left-12 rounded-lg bg-black/50 shadow-lg\"\n      >\n        <div class=\"flex flex-col\">\n          <Button\n            v-for=\"format in exportFormats\"\n            :key=\"format.value\"\n            class=\"p-button-text text-white\"\n            @click=\"exportModel(format.value)\"\n          >\n            {{ format.label }}\n          </Button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport { onMounted, onUnmounted, ref } from 'vue'\n\nconst emit = defineEmits<{\n  (e: 'exportModel', format: string): void\n}>()\n\nconst showExportFormats = ref(false)\n\nconst exportFormats = [\n  { label: 'GLB', value: 'glb' },\n  { label: 'OBJ', value: 'obj' },\n  { label: 'STL', value: 'stl' }\n]\n\nconst toggleExportFormats = () => {\n  showExportFormats.value = !showExportFormats.value\n}\n\nconst exportModel = (format: string) => {\n  emit('exportModel', format)\n\n  showExportFormats.value = false\n}\n\nconst closeExportFormatsList = (e: MouseEvent) => {\n  const target = e.target as HTMLElement\n\n  if (!target.closest('.show-export-formats')) {\n    showExportFormats.value = false\n  }\n}\n\nonMounted(() => {\n  document.addEventListener('click', closeExportFormatsList)\n})\n\nonUnmounted(() => {\n  document.removeEventListener('click', closeExportFormatsList)\n})\n</script>\n","<template>\n  <div class=\"flex flex-col\">\n    <div v-if=\"showLightIntensityButton\" class=\"show-light-intensity relative\">\n      <Button\n        class=\"p-button-rounded p-button-text\"\n        @click=\"toggleLightIntensity\"\n      >\n        <i\n          v-tooltip.right=\"{\n            value: $t('load3d.lightIntensity'),\n            showDelay: 300\n          }\"\n          class=\"pi pi-sun text-lg text-white\"\n        />\n      </Button>\n      <div\n        v-show=\"showLightIntensity\"\n        class=\"absolute top-0 left-12 rounded-lg bg-black/50 p-4 shadow-lg\"\n        style=\"width: 150px\"\n      >\n        <Slider\n          v-model=\"lightIntensity\"\n          class=\"w-full\"\n          :min=\"lightIntensityMinimum\"\n          :max=\"lightIntensityMaximum\"\n          :step=\"lightAdjustmentIncrement\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport Slider from 'primevue/slider'\nimport { computed, onMounted, onUnmounted, ref } from 'vue'\n\nimport type { MaterialMode } from '@/extensions/core/load3d/interfaces'\nimport { useSettingStore } from '@/platform/settings/settingStore'\n\nconst lightIntensity = defineModel<number>('lightIntensity')\nconst materialMode = defineModel<MaterialMode>('materialMode')\n\nconst showLightIntensityButton = computed(\n  () => materialMode.value === 'original'\n)\nconst showLightIntensity = ref(false)\n\nconst lightIntensityMaximum = useSettingStore().get(\n  'Comfy.Load3D.LightIntensityMaximum'\n)\nconst lightIntensityMinimum = useSettingStore().get(\n  'Comfy.Load3D.LightIntensityMinimum'\n)\nconst lightAdjustmentIncrement = useSettingStore().get(\n  'Comfy.Load3D.LightAdjustmentIncrement'\n)\n\nconst toggleLightIntensity = () => {\n  showLightIntensity.value = !showLightIntensity.value\n}\n\nconst closeLightSlider = (e: MouseEvent) => {\n  const target = e.target as HTMLElement\n\n  if (!target.closest('.show-light-intensity')) {\n    showLightIntensity.value = false\n  }\n}\n\nonMounted(() => {\n  document.addEventListener('click', closeLightSlider)\n})\n\nonUnmounted(() => {\n  document.removeEventListener('click', closeLightSlider)\n})\n</script>\n","<template>\n  <div class=\"flex flex-col\">\n    <div class=\"show-up-direction relative\">\n      <Button class=\"p-button-rounded p-button-text\" @click=\"toggleUpDirection\">\n        <i\n          v-tooltip.right=\"{\n            value: t('load3d.upDirection'),\n            showDelay: 300\n          }\"\n          class=\"pi pi-arrow-up text-lg text-white\"\n        />\n      </Button>\n      <div\n        v-show=\"showUpDirection\"\n        class=\"absolute top-0 left-12 rounded-lg bg-black/50 shadow-lg\"\n      >\n        <div class=\"flex flex-col\">\n          <Button\n            v-for=\"direction in upDirections\"\n            :key=\"direction\"\n            class=\"p-button-text text-white\"\n            :class=\"{ 'bg-blue-500': upDirection === direction }\"\n            @click=\"selectUpDirection(direction)\"\n          >\n            {{ direction.toUpperCase() }}\n          </Button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"show-material-mode relative\">\n      <Button\n        class=\"p-button-rounded p-button-text\"\n        @click=\"toggleMaterialMode\"\n      >\n        <i\n          v-tooltip.right=\"{\n            value: t('load3d.materialMode'),\n            showDelay: 300\n          }\"\n          class=\"pi pi-box text-lg text-white\"\n        />\n      </Button>\n      <div\n        v-show=\"showMaterialMode\"\n        class=\"absolute top-0 left-12 rounded-lg bg-black/50 shadow-lg\"\n      >\n        <div class=\"flex flex-col\">\n          <Button\n            v-for=\"mode in materialModes\"\n            :key=\"mode\"\n            class=\"p-button-text whitespace-nowrap text-white\"\n            :class=\"{ 'bg-blue-500': materialMode === mode }\"\n            @click=\"selectMaterialMode(mode)\"\n          >\n            {{ formatMaterialMode(mode) }}\n          </Button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport { computed, onMounted, onUnmounted, ref } from 'vue'\n\nimport type {\n  MaterialMode,\n  UpDirection\n} from '@/extensions/core/load3d/interfaces'\nimport { t } from '@/i18n'\n\nconst materialMode = defineModel<MaterialMode>('materialMode')\nconst upDirection = defineModel<UpDirection>('upDirection')\n\nconst showUpDirection = ref(false)\nconst showMaterialMode = ref(false)\n\nconst upDirections: UpDirection[] = [\n  'original',\n  '-x',\n  '+x',\n  '-y',\n  '+y',\n  '-z',\n  '+z'\n]\n\nconst materialModes = computed(() => {\n  const modes: MaterialMode[] = [\n    'original',\n    'normal',\n    'wireframe'\n    //'depth' disable for now\n  ]\n\n  return modes\n})\n\nconst toggleUpDirection = () => {\n  showUpDirection.value = !showUpDirection.value\n  showMaterialMode.value = false\n}\n\nconst selectUpDirection = (direction: UpDirection) => {\n  upDirection.value = direction\n  showUpDirection.value = false\n}\n\nconst toggleMaterialMode = () => {\n  showMaterialMode.value = !showMaterialMode.value\n  showUpDirection.value = false\n}\n\nconst selectMaterialMode = (mode: MaterialMode) => {\n  materialMode.value = mode\n  showMaterialMode.value = false\n}\n\nconst formatMaterialMode = (mode: MaterialMode) => {\n  return t(`load3d.materialModes.${mode}`)\n}\n\nconst closeSceneSlider = (e: MouseEvent) => {\n  const target = e.target as HTMLElement\n\n  if (!target.closest('.show-up-direction')) {\n    showUpDirection.value = false\n  }\n\n  if (!target.closest('.show-material-mode')) {\n    showMaterialMode.value = false\n  }\n}\n\nonMounted(() => {\n  document.addEventListener('click', closeSceneSlider)\n})\n\nonUnmounted(() => {\n  document.removeEventListener('click', closeSceneSlider)\n})\n</script>\n","<template>\n  <div class=\"flex flex-col\">\n    <Button\n      class=\"p-button-rounded p-button-text\"\n      :class=\"{ 'p-button-outlined': showGrid }\"\n      @click=\"toggleGrid\"\n    >\n      <i\n        v-tooltip.right=\"{ value: $t('load3d.showGrid'), showDelay: 300 }\"\n        class=\"pi pi-table text-lg text-white\"\n      />\n    </Button>\n\n    <div v-if=\"!hasBackgroundImage\">\n      <Button class=\"p-button-rounded p-button-text\" @click=\"openColorPicker\">\n        <i\n          v-tooltip.right=\"{\n            value: $t('load3d.backgroundColor'),\n            showDelay: 300\n          }\"\n          class=\"pi pi-palette text-lg text-white\"\n        />\n        <input\n          ref=\"colorPickerRef\"\n          type=\"color\"\n          :value=\"backgroundColor\"\n          class=\"pointer-events-none absolute m-0 h-0 w-0 p-0 opacity-0\"\n          @input=\"\n            updateBackgroundColor(($event.target as HTMLInputElement).value)\n          \"\n        />\n      </Button>\n    </div>\n\n    <div v-if=\"!hasBackgroundImage\">\n      <Button class=\"p-button-rounded p-button-text\" @click=\"openImagePicker\">\n        <i\n          v-tooltip.right=\"{\n            value: $t('load3d.uploadBackgroundImage'),\n            showDelay: 300\n          }\"\n          class=\"pi pi-image text-lg text-white\"\n        />\n        <input\n          ref=\"imagePickerRef\"\n          type=\"file\"\n          accept=\"image/*\"\n          class=\"pointer-events-none absolute m-0 h-0 w-0 p-0 opacity-0\"\n          @change=\"uploadBackgroundImage\"\n        />\n      </Button>\n    </div>\n\n    <div v-if=\"hasBackgroundImage\">\n      <Button\n        class=\"p-button-rounded p-button-text\"\n        :class=\"{ 'p-button-outlined': backgroundRenderMode === 'panorama' }\"\n        @click=\"toggleBackgroundRenderMode\"\n      >\n        <i\n          v-tooltip.right=\"{\n            value: $t('load3d.panoramaMode'),\n            showDelay: 300\n          }\"\n          class=\"pi pi-globe text-lg text-white\"\n        />\n      </Button>\n    </div>\n\n    <PopupSlider\n      v-if=\"hasBackgroundImage && backgroundRenderMode === 'panorama'\"\n      v-model=\"fov\"\n      :tooltip-text=\"$t('load3d.fov')\"\n    />\n\n    <div v-if=\"hasBackgroundImage\">\n      <Button\n        class=\"p-button-rounded p-button-text\"\n        @click=\"removeBackgroundImage\"\n      >\n        <i\n          v-tooltip.right=\"{\n            value: $t('load3d.removeBackgroundImage'),\n            showDelay: 300\n          }\"\n          class=\"pi pi-times text-lg text-white\"\n        />\n      </Button>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport { computed, ref } from 'vue'\n\nimport PopupSlider from '@/components/load3d/controls/PopupSlider.vue'\nimport type { BackgroundRenderModeType } from '@/extensions/core/load3d/interfaces'\n\nconst emit = defineEmits<{\n  (e: 'updateBackgroundImage', file: File | null): void\n}>()\n\nconst showGrid = defineModel<boolean>('showGrid')\nconst backgroundColor = defineModel<string>('backgroundColor')\nconst backgroundImage = defineModel<string>('backgroundImage')\nconst backgroundRenderMode = defineModel<BackgroundRenderModeType>(\n  'backgroundRenderMode',\n  { default: 'tiled' }\n)\nconst fov = defineModel<number>('fov')\nconst hasBackgroundImage = computed(\n  () => backgroundImage.value && backgroundImage.value !== ''\n)\n\nconst colorPickerRef = ref<HTMLInputElement | null>(null)\nconst imagePickerRef = ref<HTMLInputElement | null>(null)\n\nconst toggleGrid = () => {\n  showGrid.value = !showGrid.value\n}\n\nconst updateBackgroundColor = (color: string) => {\n  backgroundColor.value = color\n}\n\nconst openColorPicker = () => {\n  colorPickerRef.value?.click()\n}\n\nconst openImagePicker = () => {\n  imagePickerRef.value?.click()\n}\n\nconst uploadBackgroundImage = (event: Event) => {\n  const input = event.target as HTMLInputElement\n\n  if (input.files && input.files[0]) {\n    emit('updateBackgroundImage', input.files[0])\n  }\n}\n\nconst removeBackgroundImage = () => {\n  emit('updateBackgroundImage', null)\n}\n\nconst toggleBackgroundRenderMode = () => {\n  backgroundRenderMode.value =\n    backgroundRenderMode.value === 'panorama' ? 'tiled' : 'panorama'\n}\n</script>\n","<template>\n  <div\n    class=\"pointer-events-auto absolute top-12 left-2 z-20 flex flex-col rounded-lg bg-smoke-700/30\"\n    @pointerdown.stop\n    @pointermove.stop\n    @pointerup.stop\n    @wheel.stop\n  >\n    <div class=\"show-menu relative\">\n      <Button class=\"p-button-rounded p-button-text\" @click=\"toggleMenu\">\n        <i class=\"pi pi-bars text-lg text-white\" />\n      </Button>\n\n      <div\n        v-show=\"isMenuOpen\"\n        class=\"absolute top-0 left-12 rounded-lg bg-black/50 shadow-lg\"\n      >\n        <div class=\"flex flex-col\">\n          <Button\n            v-for=\"category in availableCategories\"\n            :key=\"category\"\n            class=\"p-button-text flex w-full items-center justify-start\"\n            :class=\"{ 'bg-smoke-600': activeCategory === category }\"\n            @click=\"selectCategory(category)\"\n          >\n            <i :class=\"getCategoryIcon(category)\" />\n            <span class=\"whitespace-nowrap text-white\">{{\n              $t(categoryLabels[category])\n            }}</span>\n          </Button>\n        </div>\n      </div>\n    </div>\n\n    <div v-show=\"activeCategory\" class=\"rounded-lg bg-smoke-700/30\">\n      <SceneControls\n        v-if=\"showSceneControls\"\n        ref=\"sceneControlsRef\"\n        v-model:show-grid=\"sceneConfig!.showGrid\"\n        v-model:background-color=\"sceneConfig!.backgroundColor\"\n        v-model:background-image=\"sceneConfig!.backgroundImage\"\n        v-model:background-render-mode=\"sceneConfig!.backgroundRenderMode\"\n        v-model:fov=\"cameraConfig!.fov\"\n        @update-background-image=\"handleBackgroundImageUpdate\"\n      />\n\n      <ModelControls\n        v-if=\"showModelControls\"\n        ref=\"modelControlsRef\"\n        v-model:material-mode=\"modelConfig!.materialMode\"\n        v-model:up-direction=\"modelConfig!.upDirection\"\n      />\n\n      <CameraControls\n        v-if=\"showCameraControls\"\n        ref=\"cameraControlsRef\"\n        v-model:camera-type=\"cameraConfig!.cameraType\"\n        v-model:fov=\"cameraConfig!.fov\"\n      />\n\n      <LightControls\n        v-if=\"showLightControls\"\n        ref=\"lightControlsRef\"\n        v-model:light-intensity=\"lightConfig!.intensity\"\n        v-model:material-mode=\"modelConfig!.materialMode\"\n      />\n\n      <ExportControls\n        v-if=\"showExportControls\"\n        ref=\"exportControlsRef\"\n        @export-model=\"handleExportModel\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport { computed, onMounted, onUnmounted, ref } from 'vue'\n\nimport CameraControls from '@/components/load3d/controls/CameraControls.vue'\nimport ExportControls from '@/components/load3d/controls/ExportControls.vue'\nimport LightControls from '@/components/load3d/controls/LightControls.vue'\nimport ModelControls from '@/components/load3d/controls/ModelControls.vue'\nimport SceneControls from '@/components/load3d/controls/SceneControls.vue'\nimport type {\n  CameraConfig,\n  LightConfig,\n  ModelConfig,\n  SceneConfig\n} from '@/extensions/core/load3d/interfaces'\n\nconst sceneConfig = defineModel<SceneConfig>('sceneConfig')\nconst modelConfig = defineModel<ModelConfig>('modelConfig')\nconst cameraConfig = defineModel<CameraConfig>('cameraConfig')\nconst lightConfig = defineModel<LightConfig>('lightConfig')\n\nconst isMenuOpen = ref(false)\nconst activeCategory = ref<string>('scene')\nconst categoryLabels: Record<string, string> = {\n  scene: 'load3d.scene',\n  model: 'load3d.model',\n  camera: 'load3d.camera',\n  light: 'load3d.light',\n  export: 'load3d.export'\n}\n\nconst availableCategories = computed(() => {\n  return ['scene', 'model', 'camera', 'light', 'export']\n})\n\nconst showSceneControls = computed(\n  () => activeCategory.value === 'scene' && !!sceneConfig.value\n)\nconst showModelControls = computed(\n  () => activeCategory.value === 'model' && !!modelConfig.value\n)\nconst showCameraControls = computed(\n  () => activeCategory.value === 'camera' && !!cameraConfig.value\n)\nconst showLightControls = computed(\n  () =>\n    activeCategory.value === 'light' &&\n    !!lightConfig.value &&\n    !!modelConfig.value\n)\nconst showExportControls = computed(() => activeCategory.value === 'export')\n\nconst toggleMenu = () => {\n  isMenuOpen.value = !isMenuOpen.value\n}\n\nconst selectCategory = (category: string) => {\n  activeCategory.value = category\n  isMenuOpen.value = false\n}\n\nconst getCategoryIcon = (category: string) => {\n  const icons = {\n    scene: 'pi pi-image',\n    model: 'pi pi-box',\n    camera: 'pi pi-camera',\n    light: 'pi pi-sun',\n    export: 'pi pi-download'\n  }\n  // @ts-expect-error fixme ts strict error\n  return `${icons[category]} text-white text-lg`\n}\n\nconst emit = defineEmits<{\n  (e: 'updateBackgroundImage', file: File | null): void\n  (e: 'exportModel', format: string): void\n}>()\n\nconst handleBackgroundImageUpdate = (file: File | null) => {\n  emit('updateBackgroundImage', file)\n}\n\nconst handleExportModel = (format: string) => {\n  emit('exportModel', format)\n}\n\nconst closeSlider = (e: MouseEvent) => {\n  const target = e.target as HTMLElement\n\n  if (!target.closest('.show-menu')) {\n    isMenuOpen.value = false\n  }\n}\n\nonMounted(() => {\n  document.addEventListener('click', closeSlider)\n})\n\nonUnmounted(() => {\n  document.removeEventListener('click', closeSlider)\n})\n</script>\n","<template>\n  <div\n    ref=\"container\"\n    class=\"relative h-full w-full\"\n    data-capture-wheel=\"true\"\n    @pointerdown.stop\n    @pointermove.stop\n    @pointerup.stop\n    @mousedown.stop\n    @mousemove.stop\n    @mouseup.stop\n    @contextmenu.stop.prevent\n    @dragover.prevent.stop=\"handleDragOver\"\n    @dragleave.stop=\"handleDragLeave\"\n    @drop.prevent.stop=\"handleDrop\"\n  >\n    <LoadingOverlay\n      ref=\"loadingOverlayRef\"\n      :loading=\"loading\"\n      :loading-message=\"loadingMessage\"\n    />\n    <div\n      v-if=\"!isPreview && isDragging\"\n      class=\"pointer-events-none absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm\"\n    >\n      <div\n        class=\"rounded-lg border-2 border-dashed border-blue-400 bg-blue-500/20 px-6 py-4 text-lg font-medium text-blue-100\"\n      >\n        {{ dragMessage }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onMounted, onUnmounted, ref } from 'vue'\n\nimport LoadingOverlay from '@/components/load3d/LoadingOverlay.vue'\nimport { useLoad3dDrag } from '@/composables/useLoad3dDrag'\n\nconst props = defineProps<{\n  initializeLoad3d: (containerRef: HTMLElement) => Promise<void>\n  cleanup: () => void\n  loading: boolean\n  loadingMessage: string\n  onModelDrop?: (file: File) => void | Promise<void>\n  isPreview: boolean\n}>()\n\nconst container = ref<HTMLElement | null>(null)\nconst loadingOverlayRef = ref<InstanceType<typeof LoadingOverlay> | null>(null)\n\nconst { isDragging, dragMessage, handleDragOver, handleDragLeave, handleDrop } =\n  useLoad3dDrag({\n    onModelDrop: async (file) => {\n      if (props.onModelDrop) {\n        await props.onModelDrop(file)\n      }\n    },\n    disabled: computed(() => props.isPreview)\n  })\n\nonMounted(() => {\n  if (container.value) {\n    void props.initializeLoad3d(container.value)\n  }\n})\n\nonUnmounted(() => {\n  props.cleanup()\n})\n</script>\n","<template>\n  <div\n    v-if=\"animations && animations.length > 0\"\n    class=\"pointer-events-auto absolute top-0 left-0 z-10 flex w-full items-center justify-center gap-2 pt-2\"\n  >\n    <Button class=\"p-button-rounded p-button-text\" @click=\"togglePlay\">\n      <i\n        :class=\"['pi', playing ? 'pi-pause' : 'pi-play', 'text-lg text-white']\"\n      />\n    </Button>\n\n    <Select\n      v-model=\"selectedSpeed\"\n      :options=\"speedOptions\"\n      option-label=\"name\"\n      option-value=\"value\"\n      class=\"w-24\"\n    />\n\n    <Select\n      v-model=\"selectedAnimation\"\n      :options=\"animations\"\n      option-label=\"name\"\n      option-value=\"index\"\n      class=\"w-32\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport Select from 'primevue/select'\n\ntype Animation = { name: string; index: number }\n\nconst animations = defineModel<Animation[]>('animations')\nconst playing = defineModel<boolean>('playing')\nconst selectedSpeed = defineModel<number>('selectedSpeed')\nconst selectedAnimation = defineModel<number>('selectedAnimation')\n\nconst speedOptions = [\n  { name: '0.1x', value: 0.1 },\n  { name: '0.5x', value: 0.5 },\n  { name: '1x', value: 1 },\n  { name: '1.5x', value: 1.5 },\n  { name: '2x', value: 2 }\n]\n\nconst togglePlay = () => {\n  playing.value = !playing.value\n}\n</script>\n","<template>\n  <div class=\"relative rounded-lg bg-smoke-700/30\">\n    <div class=\"flex flex-col gap-2\">\n      <Button\n        class=\"p-button-rounded p-button-text\"\n        :class=\"{\n          'p-button-danger': isRecording,\n          'recording-button-blink': isRecording\n        }\"\n        @click=\"toggleRecording\"\n      >\n        <i\n          v-tooltip.right=\"{\n            value: isRecording\n              ? $t('load3d.stopRecording')\n              : $t('load3d.startRecording'),\n            showDelay: 300\n          }\"\n          :class=\"[\n            'pi',\n            isRecording ? 'pi-circle-fill' : 'pi-video',\n            'text-lg text-white'\n          ]\"\n        />\n      </Button>\n\n      <Button\n        v-if=\"hasRecording && !isRecording\"\n        class=\"p-button-rounded p-button-text\"\n        @click=\"handleExportRecording\"\n      >\n        <i\n          v-tooltip.right=\"{\n            value: $t('load3d.exportRecording'),\n            showDelay: 300\n          }\"\n          class=\"pi pi-download text-lg text-white\"\n        />\n      </Button>\n\n      <Button\n        v-if=\"hasRecording && !isRecording\"\n        class=\"p-button-rounded p-button-text\"\n        @click=\"handleClearRecording\"\n      >\n        <i\n          v-tooltip.right=\"{\n            value: $t('load3d.clearRecording'),\n            showDelay: 300\n          }\"\n          class=\"pi pi-trash text-lg text-white\"\n        />\n      </Button>\n\n      <div\n        v-if=\"recordingDuration && recordingDuration > 0 && !isRecording\"\n        class=\"mt-1 text-center text-xs text-white\"\n      >\n        {{ formatDuration(recordingDuration) }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\n\nconst hasRecording = defineModel<boolean>('hasRecording')\nconst isRecording = defineModel<boolean>('isRecording')\nconst recordingDuration = defineModel<number>('recordingDuration')\n\nconst emit = defineEmits<{\n  (e: 'startRecording'): void\n  (e: 'stopRecording'): void\n  (e: 'exportRecording'): void\n  (e: 'clearRecording'): void\n}>()\n\nconst toggleRecording = () => {\n  if (isRecording.value) {\n    emit('stopRecording')\n  } else {\n    emit('startRecording')\n  }\n}\n\nconst handleExportRecording = () => {\n  emit('exportRecording')\n}\n\nconst handleClearRecording = () => {\n  emit('clearRecording')\n}\n\nconst formatDuration = (seconds: number): string => {\n  const minutes = Math.floor(seconds / 60)\n  const remainingSeconds = Math.floor(seconds % 60)\n  return `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`\n}\n</script>\n\n<style scoped>\n.recording-button-blink {\n  animation: blink 1s infinite;\n}\n\n@keyframes blink {\n  0%,\n  100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n</style>\n","<template>\n  <div class=\"relative rounded-lg bg-smoke-700/30\">\n    <div class=\"flex flex-col gap-2\">\n      <Button class=\"p-button-rounded p-button-text\" @click=\"openIn3DViewer\">\n        <i\n          v-tooltip.right=\"{\n            value: t('load3d.openIn3DViewer'),\n            showDelay: 300\n          }\"\n          class=\"pi pi-expand text-lg text-white\"\n        />\n      </Button>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\n\nimport Load3DViewerContent from '@/components/load3d/Load3dViewerContent.vue'\nimport { t } from '@/i18n'\nimport type { LGraphNode } from '@/lib/litegraph/src/LGraphNode'\nimport { useLoad3dService } from '@/services/load3dService'\nimport { useDialogStore } from '@/stores/dialogStore'\n\nconst { node } = defineProps<{\n  node: LGraphNode\n}>()\n\nconst openIn3DViewer = () => {\n  const props = { node: node }\n\n  useDialogStore().showDialog({\n    key: 'global-load3d-viewer',\n    title: t('load3d.viewer.title'),\n    component: Load3DViewerContent,\n    props: props,\n    dialogComponentProps: {\n      style: 'width: 80vw; height: 80vh;',\n      maximizable: true,\n      onClose: async () => {\n        await useLoad3dService().handleViewerClose(props.node)\n      }\n    }\n  })\n}\n</script>\n\n<style scoped></style>\n","<template>\n  <div\n    class=\"widget-expands relative h-full w-full\"\n    @mouseenter=\"handleMouseEnter\"\n    @mouseleave=\"handleMouseLeave\"\n    @pointerdown.stop\n    @pointermove.stop\n    @pointerup.stop\n  >\n    <Load3DScene\n      v-if=\"node\"\n      ref=\"load3DSceneRef\"\n      :initialize-load3d=\"initializeLoad3d\"\n      :cleanup=\"cleanup\"\n      :loading=\"loading\"\n      :loading-message=\"loadingMessage\"\n      :on-model-drop=\"isPreview ? undefined : handleModelDrop\"\n      :is-preview=\"isPreview\"\n    />\n    <div class=\"pointer-events-none absolute top-0 left-0 h-full w-full\">\n      <Load3DControls\n        v-model:scene-config=\"sceneConfig\"\n        v-model:model-config=\"modelConfig\"\n        v-model:camera-config=\"cameraConfig\"\n        v-model:light-config=\"lightConfig\"\n        @update-background-image=\"handleBackgroundImageUpdate\"\n        @export-model=\"handleExportModel\"\n      />\n      <AnimationControls\n        v-if=\"animations && animations.length > 0\"\n        v-model:animations=\"animations\"\n        v-model:playing=\"playing\"\n        v-model:selected-speed=\"selectedSpeed\"\n        v-model:selected-animation=\"selectedAnimation\"\n      />\n    </div>\n    <div\n      v-if=\"enable3DViewer && node\"\n      class=\"pointer-events-auto absolute top-12 right-2 z-20\"\n    >\n      <ViewerControls :node=\"node as LGraphNode\" />\n    </div>\n\n    <div\n      v-if=\"!isPreview\"\n      class=\"pointer-events-auto absolute right-2 z-20\"\n      :class=\"{\n        'top-12': !enable3DViewer,\n        'top-24': enable3DViewer\n      }\"\n    >\n      <RecordingControls\n        v-model:is-recording=\"isRecording\"\n        v-model:has-recording=\"hasRecording\"\n        v-model:recording-duration=\"recordingDuration\"\n        @start-recording=\"handleStartRecording\"\n        @stop-recording=\"handleStopRecording\"\n        @export-recording=\"handleExportRecording\"\n        @clear-recording=\"handleClearRecording\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onMounted, ref } from 'vue'\nimport type { Ref } from 'vue'\n\nimport Load3DControls from '@/components/load3d/Load3DControls.vue'\nimport Load3DScene from '@/components/load3d/Load3DScene.vue'\nimport AnimationControls from '@/components/load3d/controls/AnimationControls.vue'\nimport RecordingControls from '@/components/load3d/controls/RecordingControls.vue'\nimport ViewerControls from '@/components/load3d/controls/ViewerControls.vue'\nimport { useLoad3d } from '@/composables/useLoad3d'\nimport type { LGraphNode } from '@/lib/litegraph/src/LGraphNode'\nimport { useSettingStore } from '@/platform/settings/settingStore'\nimport type { NodeId } from '@/platform/workflow/validation/schemas/workflowSchema'\nimport { app } from '@/scripts/app'\nimport type { ComponentWidget } from '@/scripts/domWidget'\nimport type { SimplifiedWidget } from '@/types/simplifiedWidget'\n\nconst props = defineProps<{\n  widget: ComponentWidget<string[]> | SimplifiedWidget\n  nodeId?: NodeId\n}>()\n\nfunction isComponentWidget(\n  widget: ComponentWidget<string[]> | SimplifiedWidget\n): widget is ComponentWidget<string[]> {\n  return 'node' in widget && widget.node !== undefined\n}\n\nconst node = ref<LGraphNode | null>(null)\n\nif (isComponentWidget(props.widget)) {\n  node.value = props.widget.node\n} else if (props.nodeId) {\n  onMounted(() => {\n    node.value = app.rootGraph?.getNodeById(props.nodeId!) || null\n  })\n}\n\nconst load3DSceneRef = ref<InstanceType<typeof Load3DScene> | null>(null)\n\nconst {\n  // configs\n  sceneConfig,\n  modelConfig,\n  cameraConfig,\n  lightConfig,\n\n  // other state\n  isRecording,\n  isPreview,\n  hasRecording,\n  recordingDuration,\n  animations,\n  playing,\n  selectedSpeed,\n  selectedAnimation,\n  loading,\n  loadingMessage,\n\n  // Methods\n  initializeLoad3d,\n  handleMouseEnter,\n  handleMouseLeave,\n  handleStartRecording,\n  handleStopRecording,\n  handleExportRecording,\n  handleClearRecording,\n  handleBackgroundImageUpdate,\n  handleExportModel,\n  handleModelDrop,\n  cleanup\n} = useLoad3d(node as Ref<LGraphNode | null>)\n\nconst enable3DViewer = computed(() =>\n  useSettingStore().get('Comfy.Load3D.3DViewerEnable')\n)\n</script>\n"],"names":["value","_useModel","__props","showSlider","ref","toggleSlider","__name","closeSlider","e","onMounted","onUnmounted","cameraType","fov","showFOVButton","computed","switchCamera","emit","__emit","showExportFormats","exportFormats","toggleExportFormats","exportModel","format","closeExportFormatsList","lightIntensity","materialMode","showLightIntensityButton","showLightIntensity","lightIntensityMaximum","useSettingStore","lightIntensityMinimum","lightAdjustmentIncrement","toggleLightIntensity","closeLightSlider","upDirection","showUpDirection","showMaterialMode","upDirections","materialModes","toggleUpDirection","selectUpDirection","direction","toggleMaterialMode","selectMaterialMode","mode","formatMaterialMode","t","closeSceneSlider","target","showGrid","backgroundColor","backgroundImage","backgroundRenderMode","hasBackgroundImage","colorPickerRef","imagePickerRef","toggleGrid","updateBackgroundColor","color","openColorPicker","openImagePicker","uploadBackgroundImage","event","input","removeBackgroundImage","toggleBackgroundRenderMode","sceneConfig","modelConfig","cameraConfig","lightConfig","isMenuOpen","activeCategory","categoryLabels","availableCategories","showSceneControls","showModelControls","showCameraControls","showLightControls","showExportControls","toggleMenu","selectCategory","category","getCategoryIcon","handleBackgroundImageUpdate","file","handleExportModel","props","container","loadingOverlayRef","isDragging","dragMessage","handleDragOver","handleDragLeave","handleDrop","useLoad3dDrag","animations","playing","selectedSpeed","selectedAnimation","speedOptions","togglePlay","hasRecording","isRecording","recordingDuration","toggleRecording","handleExportRecording","handleClearRecording","formatDuration","seconds","minutes","remainingSeconds","openIn3DViewer","useDialogStore","Load3DViewerContent","useLoad3dService","isComponentWidget","widget","node","app","load3DSceneRef","isPreview","loading","loadingMessage","initializeLoad3d","handleMouseEnter","handleMouseLeave","handleStartRecording","handleStopRecording","handleModelDrop","cleanup","useLoad3d","enable3DViewer"],"mappings":"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"}