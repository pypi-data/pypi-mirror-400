# IngressRouteTCP manifests for system services with TCP ports
# This file is generated from templates/traefik-tcp-routes.yaml.j2
# Generated by generate_configs.py
{% for service in system_services if service.enabled %}
{% for port in service.ports %}
---
apiVersion: traefik.io/v1alpha1
kind: IngressRouteTCP
metadata:
  name: {{ service.name }}-{{ port }}
  namespace: {{ service.namespace | default(service.name) }}
  labels:
    app: {{ service.name }}
    port: "{{ port }}"
    managed-by: local-env
spec:
  entryPoints:
    - tcp{{ port }}
  routes:
    - match: HostSNI(`*`)
      services:
        - name: {{ service.name }}
          port: {{ service.default_port | default(port) }}
{% endfor %}
{% endfor %}
