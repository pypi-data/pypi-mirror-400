import{r as m,j as r,bX as ie,bY as Ae,ac as R,bZ as K,b_ as Ln,b$ as rt,c0 as de,c1 as yt,c2 as Vt,aM as Tn,c3 as ge,c4 as Le,c5 as Yt,c6 as En,c7 as Nn,c8 as zn,c9 as pe,ca as Wt,cb as An,cc as Rn,cd as Bn,ce as Fn,cf as On,cg as Dn,ch as Re,ax as N,ci as Zt,cj as $n,bq as Be,ck as In,b8 as st,cl as Gn,cm as wt,cn as Xt,aC as qt,co as Vn,aI as Qe,a_ as Yn,cp as Wn,cq as lt,cr as Ht,cs as Zn,ct as Xn,cu as qn,cv as Hn,cw as Kn,cx as Un,cy as Qn,cz as Jn,cA as ea,a7 as Q,cB as ta,cC as na,cD as aa,cE as oa,bW as ia,cF as ra,cG as sa,cH as la,cI as ca,cJ as St,cK as da,a6 as Ct,aA as Kt,aB as ua,cL as ha,bU as ma,cM as pa,cN as fa,cO as xa,cP as ga,cQ as ba,cR as va,cS as ya,cT as wa,cU as Sa,cV as Ca,cW as ja,cX as Ma,cY as _a,cZ as ka,c_ as Pa,c$ as La,d0 as Ta,d1 as Ea,d2 as Na,d3 as za,d4 as Aa,d5 as Ra,d6 as Ba,d7 as Fa,d8 as Oa,d9 as Da,da as $a,db as Ia,dc as Ga,dd as Va,de as Ya,df as Wa,aD as Za,aE as Xa,aF as jt,dg as qa,dh as Ha,di as Ka,dj as Ua,dk as Qa,dl as Mt,dm as Ja,dn as eo,dp as to,dq as no,dr as ao,ds as oo,dt as io,du as ro,aG as so,aH as lo,dv as co,dw as uo,dx as ho,dy as mo,dz as po}from"./index-4cf586ed.js";var fo=Object.defineProperty,xo=(t,e,n)=>e in t?fo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ae=(t,e,n)=>xo(t,typeof e!="symbol"?e+"":e,n);const ct=m.createContext({}),go=m.createContext(void 0),bo="_wrapper_9665499",vo="_grid_5146261",yo="_innerContainer_27a3adb",wo="_colHeaders_a985f35",So="_rowHeaders_63b4056",Co="_indexCell_080a16e",jo="_stickyGrid_33fa7fa",Mo="_cell_2658e21",_o="_topLeftCell_e826718 _indexCell_080a16e",ne={wrapper:bo,grid:vo,innerContainer:yo,colHeaders:wo,rowHeaders:So,indexCell:Co,stickyGrid:jo,cell:Mo,topLeftCell:_o};function ko(t){const{rowIndex:e,columnIndex:n,style:a}=t,{rowHeaderCellsWidth:o,cellSize:i,cellFormatter:s}=m.useContext(ct);return r.jsx("div",{className:ne.cell,style:{...a,left:a.left+o,top:a.top+i.height},role:"cell","aria-rowindex":e,"aria-colindex":n,"data-bg":(e+n)%2===1||void 0,children:s(e,n)})}m.memo(ko);function _t(t){const{indexMin:e,indexMax:n,width:a,transform:o,headers:i}=t,{cellSize:s}=m.useContext(ct);return ge(e,n+1).map(l=>r.jsx("div",{className:ne.indexCell,style:{width:a||s.width,height:s.height,transform:o},"data-bg":l%2===1?"":void 0,children:l>=0&&i?i[l]:l},l.toString()))}const Po=m.forwardRef((t,e)=>{const{children:n,style:a}=t,{rowCount:o,columnCount:i,cellSize:s,sticky:l,rowHeaderCellsWidth:c,columnHeaders:d}=m.useContext(ct),u=m.useContext(go),{overscanColumnStartIndex:h=0,overscanColumnStopIndex:f=0,overscanRowStartIndex:p=0,overscanRowStopIndex:x=0}=u||{};return r.jsxs("div",{ref:e,className:ne.stickyGrid,style:{...a,width:a.width+c,height:a.height+s.height},role:"table","aria-rowcount":o,"aria-colcount":i,"data-sticky":l||void 0,children:[r.jsxs("div",{className:ne.colHeaders,children:[r.jsx("div",{className:ne.topLeftCell,style:{width:c,height:s.height},"data-bg":!0,"aria-hidden":"true"}),r.jsx(_t,{indexMin:h,indexMax:f,transform:`translateX(${s.width*h}px)`,headers:d})]}),r.jsxs("div",{className:ne.innerContainer,children:[r.jsx("div",{className:ne.rowHeaders,"aria-hidden":"true",children:r.jsx(_t,{indexMin:p,indexMax:x,transform:`translateY(${s.height*p}px)`,width:c})}),n]})]})});Po.displayName="StickyGrid";var H=(t=>(t.Bool="Boolean",t.Integer="Integer",t.Unsigned="Integer (unsigned)",t.Float="Float",t.Complex="Complex",t.String="String",t.Compound="Compound",t.Array="Array",t.VLen="Array (variable length)",t.Enum="Enumeration",t.Time="Time",t.Bitfield="Bitfield",t.Opaque="Opaque",t.Reference="Reference",t.Unknown="Unknown",t))(H||{}),_=(t=>(t.Linear="linear",t.Log="log",t.SymLog="symlog",t.Sqrt="sqrt",t.Gamma="gamma",t))(_||{}),ke=(t=>(t.Phase="phase",t.Amplitude="amplitude",t.PhaseAmplitude="phase-amplitude",t))(ke||{});_.Linear,_.Log,_.SymLog;_.Linear,_.Log,_.SymLog,_.Sqrt;const Te=ie(".3~e"),$e=ie(".5~e"),Ie=ie(".5~g");ie(".3~g");No(".12~g");const dt=3,Lo=/0\.([0-9]+)$/u,To=ie(`.${dt}~g`),Eo=ie(`.${dt}~e`);function fe(t){const e=To(t),n=Lo.exec(e);return n&&n[1].length>dt?Eo(t):e}function No(t,e=!1){const n=ie(t);return a=>{const[o,i]=a;if(i===0&&!e)return`${n(o)}`;if(o===0&&!e)return`${n(i)} i`;const s=Math.sign(i)>=0?" + ":" − ";return`${n(o)}${s}${n(Math.abs(i))} i`}}function Je(t){return Ro(t)?t.data:t}function Ge(t,e){const{min:n,max:a,positiveMin:o,strictPositiveMin:i}=t;return{min:Math.min(e,n),max:Math.max(e,a),positiveMin:e>=0?Math.min(e,o):o,strictPositiveMin:e>0?Math.min(e,i):i}}function ut(t,e,n){const a=Je(t),o=e&&Je(e);tt(e,a.length,"error");const i=a.reduce((s,l,c)=>{if(!Number.isFinite(l)||n!=null&&n(l))return s;const d=Ge(s,l),u=o==null?void 0:o[c];return u?Ge(Ge(d,l-u),l+u):d},{min:1/0,max:-1/0,positiveMin:1/0,strictPositiveMin:1/0});return Number.isFinite(i.min)?i:void 0}function ht(t,e){if(t===void 0)return;const{min:n,max:a,positiveMin:o,strictPositiveMin:i}=t;return e===_.Log&&n*a<=0?Number.isFinite(i)?[i,a]:void 0:e===_.Sqrt&&n*a<0?[o,a]:[n,a]}function zo(t){const[e,n]=t.shape;return{rows:e,cols:n}}function et(t){return Array.isArray(t)?t:[t]}H.Unsigned,H.Integer,H.Float,H.String,H.Bool,H.Enum,H.Complex;function Ut(t){return t!==void 0}function Ao(t){return t!==null}function ue(t,e="Expected some value"){if(!Ut(t))throw new TypeError(e)}function Ve(t,e="Expected value to not be null"){if(!Ao(t))throw new TypeError(e)}function tt(t,e,n){if(!t)return;const{length:a}=Je(t);if(a!==e)throw new Error(`Expected ${n} array to have length ${e} instead of ${a}`)}function Ro(t){return"data"in t}const Bo=new N(0,0,0);class ce extends Re{get size(){const{x:e,y:n}=this.getSize(new N);return{width:e,height:n}}get center(){return this.getCenter(new N)}static empty(e=Bo){return new ce(e.clone(),e.clone())}static fromPoints(...e){return new ce().setFromPoints(e)}static fromSize({width:e,height:n}){return ce.empty().expandBySize(e,n)}clampPoint(e){return super.clampPoint(e,new N)}expandBySize(e,n){const{size:a}=this,o=e<0?Math.max(e,-a.width):e,i=n<0?Math.max(n,-a.height):n;return this.expandByVector(new N(o,i).divideScalar(2))}expandToRatio(e){if(e===void 0||e<=0)return this;const{width:n,height:a}=this.size,o=n/a;return e>o?this.expandBySize(a*e-n,0):this.expandBySize(0,n/e-a)}hasMinSize(e,n=e){const{width:a,height:o}=this.size;return a>=e&&o>=n}keepWithin(e){const{center:n,size:a}=this,{width:o,height:i}=e.size,s=ce.empty(e.center).expandBySize(Math.max(o-a.width,0),Math.max(i-a.height,0)).clampPoint(n).sub(n).setZ(0);return this.translate(s)}toRect(){return[this.min,this.max]}}const J=ce;function kt(t,e){const n=e-t;return a=>n!==0?(a-t)/n:.5}function Qt(t){let e=(t==null?void 0:t.domain)||[0,1],n=(t==null?void 0:t.range)||[0,1],a=(t==null?void 0:t.exponent)??1,o=(t==null?void 0:t.clamp)||!1,i=Mt,s;const l=function(y){const P=typeof y=="number"?y:y.valueOf();return Number.isNaN(P)?s:i(...n)(kt(...e)(c(P))**a)};function c(y){if(!o)return y;const[P,M]=e;return Math.max(P,Math.min(M,y))}function d(y){return y?(e=y,w):[...e]}function u(y){return y?(n=y,w):[...n]}function h(y){return y?(n=y,i=Qa,w):[...n]}function f(y){return y?(o=y,w):o}function p(){return s}function x(y){return y?(i=y,w):i}function b(y){return y?(a=y,w):a}function v(y){return c(Mt(...e)(kt(...n)(y)**(1/a)))}function g(){return co({domain:e,range:n,exponent:a,clamp:o})}function S(y){return e=g().nice(y).domain(),w}function k(y){return g().ticks(y)}function C(y,P){return g().tickFormat(y,P)}function j(){return Qt().domain(e).range(n).exponent(a).clamp(o).interpolate(i)}const w=Object.assign(l,{domain:d,range:u,rangeRound:h,clamp:f,interpolate:x,invert:v,unknown:p,exponent:b,nice:S,ticks:k,tickFormat:C,copy:j});return w}const Fo=0,mt=1e3,Jt=mt,Oo=Jt-mt,F=Oo-1,nt=[.1,1],Do={left:80,right:24,top:16,bottom:34},$o=28,Pt=24,en={[_.Linear]:-1/0,[_.Log]:Number.MIN_VALUE,[_.SymLog]:-1/0,[_.Sqrt]:0,[_.Gamma]:-1/0},oe=Ae({domain:[300,900],range:[3,10],clamp:!0,round:!0}),Io=Ae({domain:[300,500],range:[.8,1.4]});function q(t,e){if(Array.isArray(t)){const[,n]=t;return Qt({...e,exponent:n})}switch(t){case _.Linear:return Ae(e);case _.Log:return oa(e);case _.SymLog:return aa(e);case _.Sqrt:return na(e)}throw new Error("Unknown scale type")}function Go(t,e){const{width:n,height:a}=t;return e?n/a>e?{width:a*e,height:a}:{width:n,height:n/e}:{width:n,height:a}}function Vo(t,e=_.Linear,n,a){const o=ut(t,n,a);return ht(o,e)}function Yo(t,e,n){if(n===_.Log)return[t*10**-e,t*10**e];if(t===0)return[-1,1];const a=Math.abs(t)*e;return[t-a,t+a]}function tn(t,e=[-Number.MAX_VALUE/2,Number.MAX_VALUE/2]){const[n,a]=e;return Zt.clamp(t,n,a)}function pt(t,e,n=_.Linear){if(e<=0)return t;const a=en[n],[o]=t;if(o<a)throw new Error(`Expected domain compatible with ${n} scale`);const i=Wo(t,e,n);return[Math.max(a,i[0]),i[1]]}function Wo(t,e,n){const[a,o]=t;if(a===o)return Yo(a,e,n);const i=q(n,{domain:t,range:[0,1]});return[i.invert(-e),i.invert(1+e)]}function Zo(t,e){const n=e?t.map((i,s)=>t[s-1]+(t[s]-t[s-1])/2):t,a=Jo(n.slice(1)),o=ge(t.length);return an(a)&&(a.reverse(),o.reverse()),ha({domain:a,range:o})}function Lt(t,e){const{scaleType:n,visDomain:a,flip:o,nice:i=!1}=t;return q(n??_.Linear,{domain:a,range:[-e/2,e/2],reverse:o,nice:i})}function Xo(t,e){const n=Math.min(...t),a=Math.max(...t),o=Math.ceil(n),i=Math.floor(a),s=i-o+1,l=Math.min(s,e);if(l===0)return[];const c=Math.max(Ja(o,i,l),1),d=Math.ceil(n/c),u=Math.floor(a/c)-d+1;return Array.from({length:u},(h,f)=>(d+f)*c)}function qo(t,e,n){if(n!==_.Log)return fe;const[a,o]=t[0]>0?t:[-t[1],-[t[0]]],i=Io(e);return o/a<10**i?fe:s=>{const l=Math.log10(Math.abs(s.valueOf()));return l===Math.floor(l)?fe(s):""}}function Ho(t){const e=t.filter(Ut);if(e.length!==0)return e.reduce((n,a)=>[Math.min(n[0],a[0]),Math.max(n[1],a[1])])}function nn(t,e,n){if(t==="auto")return;if(t==="equal")return nn(1,e,n);const[a,o]=e,[i,s]=n;return Math.abs(o-a)/Math.abs(s-i)/t}function Ko(t={}){const{left:e,right:n,top:a,bottom:o}=Do;return{left:e+(t.left?Pt:0),right:n,top:a+(t.top?$o:0),bottom:o+(t.bottom?Pt:0)}}function an(t){return t[t.length-1]-t[0]<0}function Uo(t,e=_.Linear,n=0){const a=Vo(t,e);if(!a)return;const o=pt(a,n,e);return an(t)?[o[1],o[0]]:o}const Qo=`
  varying vec2 coords;

  void main() {
    coords = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`;function on(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,{value:n}]))}function Jo(t){return Array.isArray(t)?t:[...t]}function he(t,e=3,n=Float32Array){return new uo(new n(t*e),e)}function rn(t){return Object.keys(t).some(e=>/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/u.test(e))}const sn=m.createContext({});function T(){return m.useContext(sn)}function ei(t){const{visRatio:e,abscissaConfig:n,ordinateConfig:a,svgOverlay:o,floatingToolbar:i,children:s}=t,{width:l,height:c}=R(L=>L.size),d={width:l,height:c},u=l/c,h=Go(d,e),f=m.useMemo(()=>J.empty().expandByPoint(new N(l,c)),[l,c]),p=Lt(n,h.width),x=Lt(a,h.height),b=m.useCallback(L=>new N(p(L.x),x(L.y)),[p,x]),v=m.useCallback(L=>new N(p.invert(L.x),x.invert(L.y)),[p,x]),g=m.useMemo(()=>new ia().makeScale(l/2,-c/2,1).setPosition(l/2,c/2,0),[l,c]),S=m.useMemo(()=>g.clone().invert(),[g]),k=m.useCallback((L,z)=>z.clone().project(L).applyMatrix4(g),[g]),C=m.useCallback((L,z)=>z.clone().applyMatrix4(S).unproject(L),[S]),j=m.useCallback((L,z)=>k(L,b(z)),[b,k]),w=m.useCallback((L,z)=>v(C(L,z)),[C,v]),y=m.useCallback((L,z=L.position)=>{const{scale:I}=L;return J.empty(z).expandBySize(l*I.x,c*I.y)},[l,c]),P=m.useCallback(L=>{const[z,I]=y(L).toRect().map(v);return{xVisibleDomain:[z.x,I.x],yVisibleDomain:[z.y,I.y]}},[y,v]),M=R(L=>{var z;return(z=L.gl.domElement.parentElement)==null?void 0:z.parentElement});ue(M),Ve(M);const E=M.parentElement;Ve(E);const B=E.parentElement;return Ve(B),r.jsx(sn.Provider,{value:{canvasSize:d,canvasRatio:u,canvasBox:f,visRatio:e,visSize:h,abscissaConfig:n,ordinateConfig:a,abscissaScale:p,ordinateScale:x,dataToWorld:b,dataToHtml:j,worldToHtml:k,worldToData:v,htmlToWorld:C,htmlToData:w,getFovBox:y,getVisibleDomains:P,visCanvas:B,canvasArea:E,r3fRoot:M,svgOverlay:o,floatingToolbar:i},children:s})}var Fe=(t=>(t[t.Left=0]="Left",t[t.Middle=1]="Middle",t))(Fe||{});class ti{constructor(e,n){ae(this,"buttons"),ae(this,"modifierKeys"),ae(this,"isWheel"),ae(this,"isEnabled"),this.id=e;const{button:a=Fe.Left,modifierKey:o=[],disabled:i=!1}=n;a==="Wheel"?(this.buttons=[],this.isWheel=!0):(this.buttons=et(a),this.isWheel=!1),this.modifierKeys=et(o),this.isEnabled=!i}matches(e){return this.isEnabled&&(e instanceof WheelEvent?this.isWheel:this.buttons.includes(e.button))&&this.modifierKeys.every(n=>e.getModifierState(n))}}const ln=m.createContext({});function ni(){return m.useContext(ln)}function ai(t){const{children:e}=t,[n]=m.useState(new Map),a=m.useCallback((s,l)=>{n.has(s)?console.warn(`An interaction with ID "${s}" is already registered.`):n.set(s,new ti(s,l))},[n]),o=m.useCallback(s=>{n.delete(s)},[n]),i=m.useCallback((s,l)=>{const c=[...n.values()];if(!n.has(s))throw new Error(`Interaction ${s} is not registered`);const d=c.filter(u=>u.matches(l));return d.length===0?!1:d.length===1?d[0].id===s:d.reduce((u,h)=>h.modifierKeys.length>u.modifierKeys.length?h:u).id===s},[n]);return r.jsx(ln.Provider,{value:{registerInteraction:a,unregisterInteraction:o,shouldInteract:i},children:e})}const Tt=.95,Et=new N(1,1,1),oi=["Alt","Control","Shift"];function be(){const{visSize:t,getFovBox:e}=T(),n=R(o=>o.camera),a=R(o=>o.invalidate);return m.useCallback(o=>{const{position:i}=n,s=J.fromSize(t),l=e(n,o).keepWithin(s);i.copy(l.center.setZ(i.z)),n.updateMatrixWorld(),a()},[n,t,e,a])}function cn(){const{canvasSize:t}=T(),e=R(a=>a.camera),n=be();return m.useCallback(({world:a})=>{const{width:o,height:i}=t,s=J.fromPoints(...a),{width:l,height:c}=s.size;e.scale.set(Math.max(l,1)/o,Math.max(c,1)/i,1),n(s.center)},[e,t,n])}function ft(){const{canvasArea:t}=T();de(t,"wheel",e=>e.preventDefault(),{passive:!1})}function xt(t){const e=R(a=>a.camera),n=be();return function(a){const{sourceEvent:o,worldPt:i}=a,{x:s,y:l}=t(o);if(!s&&!l)return;const c=new N(s?Tt:1,l?Tt:1,1);o.deltaY<0?e.scale.multiply(c).min(Et):e.scale.divide(c).min(Et);const d=e.position.clone().sub(i);o.deltaY<0?d.multiply(c):d.divide(c),n(i.clone().add(d))}}function X(t,e,n={}){const a=K(e),o=R(d=>d.camera),{htmlToWorld:i,worldToData:s,canvasArea:l}=T();function c(d){const{offsetX:u,offsetY:h}=d,f=new N(u,h),p=i(o,f),x=s(p);a.current({htmlPt:f,worldPt:p,dataPt:x,sourceEvent:d})}de(l,t,c,n)}function ve(t,e){const{shouldInteract:n,registerInteraction:a,unregisterInteraction:o}=ni();return m.useEffect(()=>(a(t,e),()=>o(t)),[t,a,o,e]),m.useCallback(i=>n(t,i),[t,n])}function dn(t=[]){const{canvasArea:e}=T(),n=et(t),[a]=m.useState(new Map),[o,i]=pe(!1);function s(){const l=n.every(c=>a.get(c));o!==l&&i(l)}return de(window,"keyup",l=>{const{key:c}=l;a.set(c,!1),s()}),de(window,"keydown",l=>{const{key:c}=l;a.set(c,!0),s()}),de(e,"pointerdown",l=>{oi.forEach(c=>{a.set(c,l.getModifierState(c))}),s()}),o}function ii(t){const{id:e="Pan",button:n=Fe.Left,modifierKey:a,disabled:o}=t,i=ve(e,{button:n,modifierKey:a,disabled:o}),s=R(p=>p.camera),l=be(),c=m.useRef(),d=dn(a);function u(p){const{worldPt:x,sourceEvent:b}=p,{target:v,pointerId:g}=b;i(b)&&(v.setPointerCapture(g),c.current=x.clone())}function h(p){if(!c.current||!d)return;const{worldPt:x}=p,b=c.current.clone().sub(x);l(s.position.clone().add(b))}function f(p){const{sourceEvent:x}=p,{target:b,pointerId:v}=x;b.releasePointerCapture(v),c.current=void 0}return X("pointerdown",u),X("pointermove",h),X("pointerup",f),null}function un(t){const{id:e="Selection",modifierKey:n,disabled:a,transform:o=A=>A,validate:i=()=>!0,onSelectionStart:s,onSelectionChange:l,onSelectionEnd:c,onValidSelection:d,children:u}=t,h=K(o),f=K(i),p=K(s),x=K(l),b=K(c),v=K(d),g=R(A=>A.camera),S=T(),{canvasBox:k,htmlToWorld:C,worldToData:j}=S,[w,y]=Ln(),P=m.useRef(),M=m.useRef(!1),E=dn(n),B=ve(e,{button:Fe.Left,modifierKey:n,disabled:a});function L(A,O=A){const V=[A,k.clampPoint(O)],Y=V.map(Pn=>C(g,Pn)),kn=Y.map(j);return{html:V,world:Y,data:kn}}function z(A){const{sourceEvent:O}=A;if(!B(O))return;const{target:V,pointerId:Y}=O;V.setPointerCapture(Y),P.current=A,y(L(A.htmlPt))}function I(A){const{current:O}=P;O&&y(L(O.htmlPt,A.htmlPt))}function Se(A){if(!P.current)return;const{sourceEvent:O}=A,{target:V,pointerId:Y}=O;V.releasePointerCapture(Y),P.current=void 0,M.current=B(O),y(void 0)}X("pointerdown",z),X("pointermove",I),X("pointerup",Se);function vt(){P.current=void 0,y(void 0)}rt("Escape",vt,[],{event:"keydown"}),de(window,"contextmenu",A=>{P.current&&(A.preventDefault(),vt())});const G=m.useMemo(()=>w&&h.current(w,g,S),[w,h,g,S]),Ce=m.useMemo(()=>!!G&&f.current(G),[G,f]),me=yt(G),je=yt(Ce);return m.useEffect(()=>{var A,O,V,Y;if(G){ue(w),me||(A=p.current)==null||A.call(p),(O=x.current)==null||O.call(x,E?G:void 0,w,Ce);return}me&&(ue(je),(V=b.current)==null||V.call(b,M.current?me:void 0,je),je&&M.current&&((Y=v.current)==null||Y.call(v,me)),M.current=!1)},[G,me,w,Ce,je,E,p,x,b,v]),!G||!E?null:(ue(w),u(G,w,Ce))}const ri="_selection_0f4643e",at={selection:ri};function ye(t){const{overflowCanvas:e=!1,children:n}=t,{r3fRoot:a,canvasArea:o}=T(),i=e?o:a,[s]=m.useState(()=>{const c=document.createElement("div");return c.setAttribute("hidden",""),c}),[l]=m.useState(()=>$n(s));return m.useLayoutEffect(()=>{l.render(Be.createPortal(n,i))},[n,i,l]),m.useLayoutEffect(()=>(a.append(s),()=>{l.unmount(),s.remove()}),[a,l,s]),null}function hn(t){const{children:e}=t,{svgOverlay:n}=T();return n?r.jsx(ye,{children:Be.createPortal(e,n)}):null}function ot(t){const{coords:e,strokePosition:n,...a}=t,{stroke:o,strokeWidth:i=1}=a,s=o&&n?i*(n==="outside"?1:-1):0,{min:l,max:c}=J.fromPoints(...e).expandBySize(s,s);return r.jsx("path",{d:`M ${l.x},${l.y} H ${c.x} V ${c.y} H ${l.x} z`,...a})}const si=20;function li(t){const{minZoom:e=si,...n}=t,{canvasSize:a,canvasRatio:o,canvasBox:i,visRatio:s,visSize:l,htmlToWorld:c,worldToData:d}=T(),u=cn(),h=R(x=>x.camera),f=s!==void 0;function p(x){if(!f)return x;const{scale:b}=h,v=J.empty(new N(a.width/2,a.height/2)).expandBySize(l.width/b.x,l.height/b.y),g=J.fromPoints(...x.html).expandToRatio(o).keepWithin(i).keepWithin(v).toRect(),S=g.map(C=>c(h,C)),k=S.map(d);return{html:g,world:S,data:k}}return r.jsx(un,{id:"SelectToZoom",transform:p,validate:({html:x})=>x[0].manhattanDistanceTo(x[1])>=e,onValidSelection:u,...n,children:({html:x},{html:b},v)=>r.jsxs(hn,{children:[r.jsx(ot,{className:at.selection,coords:b,fill:"white",fillOpacity:!f&&v?.25:0,stroke:"black",strokePosition:"inside",strokeDasharray:f||!v?4:void 0}),f&&r.jsx(ot,{className:at.selection,coords:x,fill:"white",fillOpacity:v?.25:0,stroke:"black",strokePosition:"inside"})]})})}function ci(t){const{modifierKey:e,disabled:n}=t,{visRatio:a}=T(),o=ve("XAxisZoom",{button:"Wheel",modifierKey:e,disabled:a!==void 0||n}),i=s=>({x:o(s),y:!1});return ft(),X("wheel",xt(i)),null}function di(t){const{modifierKey:e,disabled:n}=t,{visRatio:a}=T(),o=ve("YAxisZoom",{button:"Wheel",modifierKey:e,disabled:a!==void 0||n}),i=s=>({x:!1,y:o(s)});return ft(),X("wheel",xt(i)),null}function ui(t){const{modifierKey:e,disabled:n}=t,a=ve("Zoom",{button:"Wheel",modifierKey:e,disabled:n}),o=i=>{const s=a(i);return{x:s,y:s}};return ft(),X("wheel",xt(o)),null}function hi(t){const{axis:e,onSelectionStart:n,onSelectionChange:a,onSelectionEnd:o,children:i,...s}=t;function l(c,d,u){const{canvasSize:h,htmlToWorld:f,worldToData:p}=u,{width:x,height:b}=h,[v,g]=c.html,S=e==="x"?[new N(v.x,0),new N(g.x,b)]:[new N(0,v.y),new N(x,g.y)],k=S.map(j=>f(d,j)),C=k.map(p);return{html:S,world:k,data:C}}return r.jsx(un,{transform:l,onSelectionStart:n,onSelectionChange:a,onSelectionEnd:o,...s,children:i})}const mi=20;function Nt(t){const{axis:e,modifierKey:n,disabled:a,minZoom:o=mi}=t,{visRatio:i}=T(),s=cn();return r.jsx(hi,{axis:e,id:`${e.toUpperCase()}SelectToZoom`,modifierKey:n,disabled:i!==void 0||a,validate:({html:l})=>J.fromPoints(...l).hasMinSize(o),onValidSelection:s,children:({html:l},c,d)=>r.jsx(hn,{children:r.jsx(ot,{className:at.selection,coords:l,fill:"white",fillOpacity:d?.25:0,stroke:"black",strokePosition:"inside",strokeDasharray:d?void 0:4})})})}function pi(t){const{...e}=t;return r.jsxs(r.Fragment,{children:[e.pan!==!1&&r.jsx(ii,{...e.pan}),e.zoom!==!1&&r.jsx(ui,{...e.zoom}),e.xAxisZoom!==!1&&r.jsx(ci,{modifierKey:"Alt",...e.xAxisZoom}),e.yAxisZoom!==!1&&r.jsx(di,{modifierKey:"Shift",...e.yAxisZoom}),e.selectToZoom!==!1&&r.jsx(li,{modifierKey:"Control",...e.selectToZoom}),e.xSelectToZoom!==!1&&r.jsx(Nt,{axis:"x",modifierKey:["Control","Alt"],...e.xSelectToZoom}),e.ySelectToZoom!==!1&&r.jsx(Nt,{axis:"y",modifierKey:["Control","Shift"],...e.ySelectToZoom})]})}function $(t){return(...e)=>m.useMemo(()=>t(...e),e)}const fi=$(ut),xi=$(ht),mn=$(Ho),xl=$(Zo),zt=$(Uo);function At(t,e=_.Linear,n,a){const o=fi(t,n,a);return xi(o,e)}function gl(t,e=_.Linear,n){const a=m.useMemo(()=>t.map((o,i)=>ut(o,n==null?void 0:n[i])),[t,n]);return m.useMemo(()=>a.map(o=>ht(o,e)),[a,e])}function Oe(t,e,n=(a,o)=>Object.is(a,o)){const a=R(l=>l.camera),o=In(),i=m.useRef(),s=K(t);return m.useMemo(()=>{i.current=s.current(a)},e),st(()=>{const l=s.current(a);n(i.current,l)||(i.current=l,o())}),i.current}function xe(t,e,n,a={}){const{skipUpdates:o=!1,isInteractive:i=!1}=a,s=m.useMemo(()=>new t(e),[t,e]),l=R(c=>c.invalidate);return m.useLayoutEffect(()=>{if(!o){s.prepare(n);for(let c=0;c<e;c+=1)s.update(c);i&&s.computeBoundingSphere(),Object.values(s.attributes).forEach(c=>{c.needsUpdate=!0}),s.index&&(s.index.needsUpdate=!0),l()}},[s,e,...Object.values(n),o,i,l]),s}function gi(t){const{children:e}=t,{floatingToolbar:n}=T();return n?r.jsx(ye,{children:Be.createPortal(e,n)}):null}const bi="_btnLike_0154b53",vi="_icon_bcb8f77",yi="_label_5a75092",wi="_popup_954b735",Si="_btn_f1cebe5 btnClean",gt={btnLike:bi,icon:vi,label:yi,popup:wi,btn:Si},{btn:Ci,btnLike:ji}=gt,Mi=`_btn_579cee1 ${Ci}`,_i=`_btnLike_5797793 ${ji}`,Rt={btn:Mi,btnLike:_i};function ki(){const t=R(o=>o.camera),e=R(o=>o.invalidate),n=Oe(({scale:o})=>o.x<1||o.y<1,[]);function a(){t.scale.x=1,t.scale.y=1,t.position.x=0,t.position.y=0,t.updateMatrixWorld(),e()}return r.jsx(gi,{children:r.jsx("button",{className:Rt.btn,type:"button",hidden:!n,onClick:()=>a(),children:r.jsx("span",{className:Rt.btnLike,children:"Reset zoom"})})})}function Pi(t){const{children:e,style:n,className:a}=t,{canvasSize:o}=T();return r.jsx(ye,{overflowCanvas:!0,children:r.jsx("div",{className:a,style:{position:"absolute",top:0,left:0,...o,...n},children:e})})}const Li="_overlay_df4a4fe",Ti="_tooltip_c303daa",Ei="_guides_073d0c4",Ye={overlay:Li,tooltip:Ti,guides:Ei};function pn(t){const{tooltipOpen:e,tooltipLeft:n,tooltipTop:a,guides:o,children:i}=t,{canvasSize:s}=T(),{width:l,height:c}=s;return r.jsx(Pi,{className:Ye.overlay,children:e&&i&&r.jsxs(r.Fragment,{children:[r.jsx(Gn,{className:Ye.tooltip,top:a,left:n,unstyled:!0,applyPositionStyle:!0,children:i},Math.random()),o&&r.jsxs("svg",{className:Ye.guides,children:[o!=="horizontal"&&r.jsx(wt,{from:{x:n,y:0},to:{x:n,y:c}}),o!=="vertical"&&r.jsx(wt,{from:{x:0,y:a},to:{x:l,y:a}})]})]})})}function fn(t){const{children:e,size:n,...a}=t,{visSize:o}=T(),{width:i,height:s}=n??o;return r.jsxs("mesh",{...a,children:[r.jsx("planeGeometry",{args:[i,s]}),e]})}function Ni(t){const{guides:e,renderTooltip:n,size:a}=t,{canvasSize:o,worldToData:i}=T(),{width:s,height:l}=o,{tooltipOpen:c,tooltipTop:d,tooltipLeft:u,tooltipData:h,showTooltip:f,hideTooltip:p}=Vt(),x=m.useCallback(k=>{const{unprojectedPoint:C,nativeEvent:j}=k;if(j.buttons!==0)return;const w=i(C);f({tooltipLeft:j.offsetX,tooltipTop:j.offsetY,tooltipData:[w.x,w.y]})},[i,f]),b=m.useCallback(()=>{c&&p()},[p,c]),v=m.useCallback(()=>p(),[p]),g=m.useCallback(k=>{const{nativeEvent:C}=k,{offsetX:j,offsetY:w}=C;j>=0&&j<=s&&w>=0&&w<=l&&x(k)},[l,x,s]),S=h&&n(...h);return r.jsxs(r.Fragment,{children:[r.jsx(fn,{onPointerMove:x,onPointerOut:b,onPointerDown:v,onPointerUp:g,size:a,children:r.jsx("meshBasicMaterial",{opacity:0,transparent:!0})}),r.jsx(pn,{tooltipOpen:c,tooltipLeft:u,tooltipTop:d,guides:e,children:S})]})}const zi="_axis_1002b06",Ai="_grid_a397f58",Ri="_tick_44c4d9c",Bi="_label_4a1d111",Ee={axis:zi,grid:Ai,tick:Ri,label:Bi};function Ne(t){const{formattedValue:e,...n}=t;return r.jsx("text",{...n,dy:"0.3125em",children:e})}const Fi={labelClassName:Ee.label,labelProps:{fontSize:"inherit"},tickClassName:Ee.tick,tickComponent:Ne},Oi={abscissa:[lt,ho],ordinate:[Ht,mo]};function Bt(t){const{type:e,config:n,domain:a,canvasSize:o,offset:i,flipAxis:s,showAxis:l}=t,{width:c,height:d}=o,u=e==="abscissa",h=u?c:d,{scaleType:f=_.Linear,isIndexAxis:p,showGrid:x,label:b,nice:v=!1}=n,g=q(f,{domain:a,range:s?[h,0]:[0,h],nice:v}),[S,k]=Oi[e],C=oe(h),j=p?{tickValues:Xo(a,C)}:{numTicks:C};return r.jsxs(r.Fragment,{children:[l&&r.jsx("svg",{className:Ee.axis,"data-type":e,style:u?{width:c,height:i}:{width:i,height:d},children:r.jsx(S,{scale:g,tickFormat:qo(a,h,f),label:b,labelOffset:i-(u?32:36),hideAxisLine:x,...j,...Fi})}),x&&r.jsx("svg",{className:Ee.grid,...o,children:r.jsx(k,{scale:g,...o,...j})})]})}function Di(t){const{axisOffsets:e,showAxes:n}=t,{canvasSize:a,visCanvas:o,abscissaConfig:i,ordinateConfig:s,getVisibleDomains:l}=T(),c=Oe(l,[l]);return r.jsx(ye,{children:Be.createPortal(r.jsxs(r.Fragment,{children:[r.jsx(Bt,{type:"abscissa",config:i,domain:c.xVisibleDomain,canvasSize:a,offset:e.bottom,showAxis:n}),r.jsx(Bt,{type:"ordinate",config:s,domain:c.yVisibleDomain,canvasSize:a,offset:e.left,showAxis:n,flipAxis:!0})]}),o)})}function $i(t){const{className:e,orthographic:n,children:a}=t;return r.jsxs(ra,{className:e,orthographic:n,flat:!0,frameloop:"demand",dpr:[1,3],resize:{debounce:{scroll:20,resize:200},scroll:!1},gl:{preserveDrawingBuffer:!0},camera:n?{near:Fo,far:mt,position:[0,0,Jt]}:void 0,children:[r.jsx("ambientLight",{}),a]})}function Ii(){const{visRatio:t}=T(),e=R(a=>a.camera),n=be();return m.useEffect(()=>{if(!t||e.scale.x===e.scale.y)return;const a=Math.max(e.scale.x,e.scale.y);e.scale.x=a,e.scale.y=a,n(e.position)},[e,n,t]),null}function Gi(t){const{value:e}=t,n=R(o=>o.raycaster),a=R(o=>o.camera);return m.useEffect(()=>{const o=n.params.Points,i=o?o.threshold:1;return o&&(o.threshold=e),()=>{o&&(o.threshold=i)}},[n,e]),st(()=>{const o=(a.scale.x+a.scale.y)/2;n.params.Points&&(n.params.Points.threshold=e*o/2)}),null}function Vi(){const{dataToWorld:t,worldToData:e}=T(),n=m.useRef(),a=R(i=>i.camera),o=be();return st(()=>{n.current=e(a.position)}),m.useEffect(()=>{n.current&&o(t(n.current))},[n,o,t,a]),null}const Yi="_visCanvas_2387375",Wi="_title_313417a",Zi="_canvasArea_6300bb7",Xi="_r3fRoot_f557f0c",qi="_svgOverlay_3f84e2f",Hi="_floatingToolbar_de4854e",re={visCanvas:Yi,title:Wi,canvasArea:Zi,r3fRoot:Xi,svgOverlay:qi,floatingToolbar:Hi},Ki={left:0,right:0,top:0,bottom:0};function Ui(t){const{title:e,aspect:n="auto",abscissaConfig:a,ordinateConfig:o,raycasterThreshold:i,showAxes:s=!0,children:l}=t,c=nn(n,a.visDomain,o.visDomain),d=s?Ko({left:!!o.label,bottom:!!a.label,top:!!e}):Ki,[u,h]=m.useState(null),[f,p]=m.useState(null);return r.jsxs("div",{className:re.visCanvas,style:{gridTemplateColumns:`${d.left}px minmax(0, 1fr) ${d.right}px`,gridTemplateRows:`${d.top}px minmax(0, 1fr) ${d.bottom}px`},children:[s&&e&&r.jsx("p",{className:re.title,children:e}),r.jsxs("div",{className:re.canvasArea,children:[r.jsx($i,{className:re.r3fRoot,orthographic:!0,children:r.jsxs(ei,{visRatio:c,abscissaConfig:a,ordinateConfig:o,svgOverlay:u,floatingToolbar:f,children:[r.jsx(Di,{axisOffsets:d,showAxes:s}),r.jsx(ai,{children:l}),r.jsx(Vi,{}),r.jsx(Ii,{}),i!==void 0&&r.jsx(Gi,{value:i})]})}),r.jsx("svg",{ref:h,className:re.svgOverlay,overflow:"hidden"})]}),r.jsx("div",{ref:p,className:re.floatingToolbar})]})}class Qi extends po{constructor(){super(...arguments),ae(this,"params")}prepare(e){this.params=e}}const we=Qi;class Ji extends we{constructor(e){super(),this.setAttribute("position",he(e*2))}update(e){const{abscissas:n,ordinates:a,errors:o,abscissaScale:i,ordinateScale:s,ignoreValue:l}=this.params,c=a[e],d=l?l(c):!1,u=e*2;if(d){this.attributes.position.setXYZ(u,0,0,F),this.attributes.position.setXYZ(u+1,0,0,F);return}const h=i(n[e]),f=s(c);if(!Number.isFinite(h)||!Number.isFinite(f)){this.attributes.position.setXYZ(u,0,0,F),this.attributes.position.setXYZ(u+1,0,0,F);return}const p=o[e],x=s(c-p),b=s(c+p),v=Number.isFinite(x)?x:f,g=Number.isFinite(b)?b:f;this.attributes.position.setXYZ(u,h,v,0),this.attributes.position.setXYZ(u+1,h,g,0)}}const er=Ji;class tr extends we{constructor(e){super(),this.setAttribute("position",he(e*2))}update(e){const{abscissas:n,ordinates:a,errors:o,abscissaScale:i,ordinateScale:s,ignoreValue:l}=this.params,c=a[e],d=l?l(c):!1,u=e*2;if(d){this.attributes.position.setXYZ(u,0,0,F),this.attributes.position.setXYZ(u+1,0,0,F);return}const h=i(n[e]),f=s(c);if(!Number.isFinite(h)||!Number.isFinite(f)){this.attributes.position.setXYZ(u,0,0,F),this.attributes.position.setXYZ(u+1,0,0,F);return}const p=o[e],x=s(c-p),b=s(c+p);Number.isFinite(x)?this.attributes.position.setXYZ(u,h,x,0):this.attributes.position.setXYZ(u,0,0,F),Number.isFinite(b)?this.attributes.position.setXYZ(u+1,h,b,0):this.attributes.position.setXYZ(u+1,0,0,F)}}const nr=tr;var Pe=(t=>(t.LineOnly="OnlyLine",t.GlyphsOnly="OnlyGlyphs",t.LineAndGlyphs="LineAndGlyphs",t))(Pe||{}),W=(t=>(t.Circle="Circle",t.Cross="Cross",t.Square="Square",t.Cap="Cap",t))(W||{});const ar={[W.Cross]:`
    float alphaSymbol(vec2 coord, float size) {
      vec2 pos = floor(size * coord) + 0.5;
      vec2 d_x = abs(pos.x + vec2(- pos.y, pos.y - size));
      if (min(d_x.x, d_x.y) <= 0.5) {
          return 1.0;
      } else {
          return 0.0;
      }
    }
  `,[W.Cap]:`
    float alphaSymbol(vec2 coord, float size) {
      float dy = abs(size * (coord.y - 0.5));
      if (dy < 0.5) {
          return 1.0;
      } else {
          return 0.0;
      }
    }
  `,[W.Circle]:`
    float alphaSymbol(vec2 coord, float size) {
      float r = distance(coord, vec2(0.5, 0.5));
      if( r < 0.5) {
        return 1.0;
      } else {
        return 0.0;
      }
    }
  `,[W.Square]:`
    float alphaSymbol(vec2 coord, float size) {
      return 1.0;
    }
  `};function bt(t){const{color:e,size:n,glyphType:a}=t,o=!e,i={uniforms:on({size:n,color:new ma(e)}),vertexShader:`
      ${e?"uniform vec3 color;":""}
      uniform float size;
      varying vec3 vertexColor;

      void main() {
        gl_PointSize = size;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        vertexColor = color;
      }
    `,fragmentShader:`
      uniform float size;
      varying vec3 vertexColor;

      ${ar[a]}

      void main() {
        float alpha = alphaSymbol(gl_PointCoord, size);
        if (alpha <= 0.0) {
            discard;
        } else {
            gl_FragColor = vec4(vertexColor.rgb, alpha);
        }
      }
    `};return r.jsx("shaderMaterial",{args:[i],vertexColors:o})}function or(t){const{abscissas:e,ordinates:n,errors:a,color:o,visible:i,ignoreValue:s}=t,{abscissaScale:l,ordinateScale:c}=T(),d={abscissas:e,ordinates:n,errors:a,abscissaScale:l,ordinateScale:c,ignoreValue:s},u=xe(er,n.length,d,{skipUpdates:!i}),h=xe(nr,n.length,d,{skipUpdates:!i});return r.jsxs(r.Fragment,{children:[r.jsx("lineSegments",{geometry:u,visible:i,children:r.jsx("lineBasicMaterial",{color:o})}),r.jsx("points",{geometry:h,visible:i,children:r.jsx(bt,{glyphType:W.Cap,color:o,size:9})})]})}class ir extends we{constructor(e){super(),this.setAttribute("position",he(e))}update(e){const{abscissas:n,ordinates:a,abscissaScale:o,ordinateScale:i,ignoreValue:s}=this.params,l=a[e];if(s&&s(l)){this.attributes.position.setXYZ(e,0,0,F);return}const c=o(n[e]),d=i(l);if(!Number.isFinite(c)||!Number.isFinite(d)){this.attributes.position.setXYZ(e,0,0,F);return}this.attributes.position.setXYZ(e,c,d,0)}}const rr=ir;function sr(t){const{abscissas:e,ordinates:n,glyphType:a=W.Cross,color:o,size:i=6,visible:s=!0,ignoreValue:l,...c}=t,{abscissaScale:d,ordinateScale:u}=T(),h=xe(rr,n.length,{abscissas:e,ordinates:n,abscissaScale:d,ordinateScale:u,ignoreValue:l},{skipUpdates:!s,isInteractive:rn(c)});return r.jsx("points",{geometry:h,visible:s,...c,children:r.jsx(bt,{glyphType:a,color:o,size:i})})}class lr extends we{constructor(e){super(),this.setAttribute("position",he(e))}update(e){const{abscissas:n,ordinates:a,abscissaScale:o,ordinateScale:i,ignoreValue:s}=this.params,l=a[e];if(s&&s(l)){this.attributes.position.setXYZ(e,0,0,F);return}const c=o(n[e]),d=i(l);if(!Number.isFinite(c)||!Number.isFinite(d)){this.attributes.position.setXYZ(e,0,0,F);return}this.attributes.position.setXYZ(e,c,d,0)}}const cr=lr;class dr extends sa{}Tn({Line_:dr});function ur(t){const{abscissas:e,ordinates:n,color:a,visible:o=!0,ignoreValue:i,...s}=t,{abscissaScale:l,ordinateScale:c}=T(),d=xe(cr,n.length,{abscissas:e,ordinates:n,abscissaScale:l,ordinateScale:c,ignoreValue:i},{skipUpdates:!o,isInteractive:rn(s)});return r.jsx("line_",{geometry:d,visible:o,...s,children:r.jsx("lineBasicMaterial",{color:a})})}function bl(t){const{abscissas:e,ordinates:n,errors:a,showErrors:o,color:i,curveType:s=Pe.LineOnly,glyphType:l=W.Cross,glyphSize:c=6,visible:d=!0,onDataPointClick:u,onDataPointEnter:h,onDataPointLeave:f,ignoreValue:p}=t,x=m.useCallback(g=>{const{index:S}=g;u&&S!==void 0&&u(S,g)},[u]),b=m.useCallback(g=>{const{index:S}=g;h&&S!==void 0&&h(S,g)},[h]),v=m.useCallback(g=>{const{index:S}=g;f&&S!==void 0&&f(S,g)},[f]);return r.jsxs(r.Fragment,{children:[r.jsx(ur,{abscissas:e,ordinates:n,color:i,ignoreValue:p,visible:s!==Pe.GlyphsOnly&&d}),r.jsx(sr,{abscissas:e,ordinates:n,glyphType:l,color:i,size:c,ignoreValue:p,visible:s!==Pe.LineOnly&&d,onClick:u&&x,onPointerEnter:h&&b,onPointerLeave:f&&v}),a&&r.jsx(or,{abscissas:e,ordinates:n,errors:a,color:i,ignoreValue:p,visible:d&&o})]})}function hr(t,e){if(!t)return ge(e);if(t.length<e)throw new Error(`Expected array to have length ${e} at least`);return t.slice(0,e)}const vl=$(hr),mr="_colorBar_b9941fe",pr="_gradientBar_344e777",fr="_gradient_c9d3c54",xr="_axis_2dee224",gr="_tick_31b063c",br="_bound_a503753",vr="_minBound_99af008 _bound_a503753",yr="_maxBound_e2493eb _bound_a503753",ee={colorBar:mr,gradientBar:pr,gradient:fr,axis:xr,tick:gr,bound:br,minBound:vr,maxBound:yr};var Z=(t=>(t.MinGreater="min-greater",t.InvalidMinWithScale="invalid-min-with-scale",t.InvalidMaxWithScale="invalid-max-with-scale",t.CustomMaxFallback="custom-max-fallback",t))(Z||{});function wr(t){return eo(t*360,1,.5).formatRgb()}function se(t){return e=>t(1-e)}const xn={Blues:se(to),Greens:se(no),Greys:se(ao),Oranges:se(oo),Purples:se(io),Reds:se(ro),Turbo:pa,Viridis:fa,Inferno:xa,Magma:ga,Plasma:ba,Cividis:va,Warm:ya,Cool:wa,Cubehelix:Sa,BuGn:Ca,BuPu:ja,GnBu:Ma,OrRd:_a,PuBuGn:ka,PuBu:Pa,PuRd:La,RdPu:Ta,YlGnBu:Ea,YlGn:Na,YlOrBr:za,YlOrRd:Aa,Rainbow:Ra,Sinebow:Ba,HSL:wr,BrBG:Fa,PRGn:Oa,PiYG:Da,PuOr:$a,RdBu:Ia,RdGy:Ga,RdYlBu:Va,RdYlGn:Ya,Spectral:Wa},Ft=1/20,gn=ge(0,1+Ft,Ft),Sr={[_.Linear]:t=>t,[_.Log]:Math.log10,[_.SymLog]:t=>Math.sign(t)*Math.log10(1+Math.abs(t)),[_.Sqrt]:Math.sqrt,[_.Gamma]:t=>t},Cr={float32:so,uint16:lo,uint8:Qe,uint8_clamped:Qe};function jr(t,e){return[t[0]??e[0],t[1]??e[1]]}function bn(t,e,n){if(t[0]>t[1])return[e,{minGreater:!0}];const[a,o]=t,i=en[n],s=a>=i,l=o>=i,c=s?a:e[0],d=l?o:e[1],u=c>d;return[[u?d:c,d],{minError:u?Z.CustomMaxFallback:s?void 0:Z.InvalidMinWithScale,maxError:l?void 0:Z.InvalidMaxWithScale}]}function Mr(t,e){if(e){const n=t(0),a=t(1);return`${n}, ${n} 50%, ${a} 50%, ${a}`}return gn.map(t).join(", ")}function vn(t,e,n=!1){const a=Mr(t,n);return`linear-gradient(to ${e}, ${a})`}function De(t,e){const n=xn[t];return e?a=>n(1-a):n}function _r(t,e=_.Linear){const n=Sr[e];return[n(t[0]),n(t[1])]}function kr(t,e=Kt){if(!t)return;const{rows:n,cols:a}=zo(t),o=new qt(t.data,a,n,Za,Cr[t.dtype],Xa,jt,jt,e);return o.needsUpdate=!0,o}function Pr(t){const{domain:e,scaleType:n,colorMap:a,horizontal:o,withBounds:i,invertColorMap:s}=t,[l,c]=Xt(),d=l?o?l.width:l.height:0,u=o?lt:la,h=e[0]===e[1],f=q(n,{domain:e,range:o?[0,Math.round(d+.5)]:[Math.round(d+.5),0]});return r.jsxs("div",{className:ee.colorBar,"data-horizontal":o||void 0,children:[i&&r.jsxs(r.Fragment,{children:[r.jsx("p",{className:ee.minBound,children:h?"−∞":Te(e[0])}),r.jsx("p",{className:ee.maxBound,children:h?"+∞":Te(e[1])})]}),r.jsx("div",{ref:c,className:ee.gradientBar,children:r.jsx("div",{className:ee.gradient,"data-keep-colors":!0,style:{backgroundImage:vn(De(a,s),o?"right":"top",e[0]===e[1])}})}),d>0&&r.jsx("svg",{className:ee.axis,width:o?"100%":"2.5em",height:o?"2.5em":"100%",children:r.jsx(u,{scale:f,hideAxisLine:!0,numTicks:oe(d),tickClassName:ee.tick,tickComponent:Ne,tickFormat:n===_.Log?f.tickFormat(oe(d),fe):fe})})]})}const Lr=$(jr),yn=$(bn),We=$(kr),Tr=$(De),Er=Le(255,255,255,0),Ze=256,Nr={[_.Log]:"log(value) * oneOverLog10",[_.SymLog]:"sign(value) * log(1. + abs(value)) * oneOverLog10",[_.Sqrt]:"sqrt(value)"},zr={[_.Log]:"value > 0.",[_.Sqrt]:"value >= 0."};function Ar(t){const{values:e,domain:n,scaleType:a,colorMap:o,invertColorMap:i=!1,magFilter:s,alphaValues:l,alphaDomain:c=nt,badColor:d=Er,mask:u}=t,h=We(e,s),f=We(l),p=We(u),x=m.useMemo(()=>{const C=De(o,i),j=Array.from({length:Ze}).flatMap((y,P)=>{const{r:M,g:E,b:B}=Le(C(P/(Ze-1)));return[M,E,B,255]}),w=new qt(Uint8Array.from(j),Ze,1,Vn,Qe);return w.needsUpdate=!0,w},[o,i]),[b,v]=Array.isArray(a)?a:[a,1],g=_r(n,b),S=typeof d=="string"?Le(d):d,k={uniforms:on({data:h,mask:p,colorMap:x,min:g[0],oneOverRange:1/(g[1]-g[0]),gammaExponent:v,normRevertFactor:e.dtype==="uint8"?255:1,alpha:f,withAlpha:l?1:0,alphaMin:c[0],oneOverAlphaRange:1/(c[1]-c[0]),badColor:new Yn(S.r/255,S.g/255,S.b/255,S.opacity)}),vertexShader:Qo,fragmentShader:`
      uniform sampler2D data;
      uniform sampler2D colorMap;

      uniform float min;
      uniform float oneOverRange;
      uniform float gammaExponent;
      uniform float normRevertFactor;

      uniform sampler2D alpha;
      uniform float alphaMin;
      uniform float oneOverAlphaRange;
      uniform int withAlpha;
      uniform vec4 badColor;

      uniform sampler2D mask;

      const float oneOverLog10 = 0.43429448190325176;

      varying vec2 coords;

      bool isSupported(float value) {
        return ${zr[b]||"true"};
      }

      float scale(float value) {
        return ${Nr[b]||"value"};
      }

      void main() {
        float value = texture2D(data, coords).r * normRevertFactor;
        float maskValue = texture2D(mask, coords).r;

        if (isnan(value) || !isSupported(value) || maskValue == 1.) {
            gl_FragColor = badColor;
        } else {
          float scaledValue = scale(value);
          float normalizedValue = clamp(oneOverRange * (scaledValue - min), 0., 1.);

          gl_FragColor = texture2D(colorMap, vec2(pow(normalizedValue, gammaExponent), 0.5));

          if (withAlpha == 1) {
            gl_FragColor.a = oneOverAlphaRange * (texture2D(alpha, coords).r - alphaMin);
          }
        }
      }
    `};return r.jsx("shaderMaterial",{args:[k],side:Wn})}const Rr=m.memo(Ar);function Br(t){const{values:e,domain:n,scaleType:a,colorMap:o,invertColorMap:i,magFilter:s,alphaValues:l,alphaDomain:c,badColor:d,mask:u,...h}=t;return r.jsx(fn,{...h,children:r.jsx(Rr,{values:e,domain:n,scaleType:a,colorMap:o,invertColorMap:i,magFilter:s,alphaValues:l,alphaDomain:c,badColor:d,mask:u})})}class Fr extends we{constructor(e){super(),this.setAttribute("position",he(e)),this.setAttribute("color",he(e))}update(e){const{abscissas:n,ordinates:a,data:o,abscissaScale:i,ordinateScale:s,colorScale:l,interpolator:c}=this.params,d=i(n[e]),u=s(a[e]);if(!Number.isFinite(d)||!Number.isFinite(u)){this.attributes.position.setXYZ(e,0,0,F),this.attributes.color.setXYZ(e,0,0,0);return}const{r:h,g:f,b:p}=Le(c(l(o[e])));this.attributes.position.setXYZ(e,d,u,0),this.attributes.color.setXYZ(e,h/255,f/255,p/255)}}const Or=Fr;function Dr(t){const{abscissas:e,ordinates:n,data:a,domain:o,scaleType:i,colorMap:s,invertColorMap:l,size:c,onClick:d,onPointerEnter:u,onPointerOut:h}=t,f=m.useCallback(C=>{const{index:j}=C;d&&j!==void 0&&d(j,C)},[d]),p=m.useCallback(C=>{const{index:j}=C;u&&j!==void 0&&u(j,C)},[u]),x=m.useCallback(C=>{const{index:j}=C;h&&j!==void 0&&h(j,C)},[h]),{abscissaScale:b,ordinateScale:v}=T(),g=Tr(s,l),S=m.useMemo(()=>q(i,{domain:o,range:[0,1]}),[i,o]),k=xe(Or,a.length,{abscissas:e,ordinates:n,data:a,abscissaScale:b,ordinateScale:v,colorScale:S,interpolator:g},{isInteractive:!0});return r.jsx("points",{geometry:k,onClick:d&&f,onPointerEnter:u&&p,onPointerOut:h&&x,children:r.jsx(bt,{size:c,glyphType:W.Circle})})}const $r="_root_8d3a205",Ir="_tooltipValue_9ae0e78",Ot={root:$r,tooltipValue:Ir};function yl(t){const{abscissaParams:e,ordinateParams:n,dataArray:a,domain:o,colorMap:i="Viridis",invertColorMap:s=!1,scaleType:l=_.Linear,showGrid:c=!0,title:d,size:u=10,children:h,interactions:f,onPointClick:p,className:x="",style:b}=t,{value:v,label:g,scaleType:S}=e,{value:k,label:C,scaleType:j}=n;tt(v,a.size,"abscissa"),tt(k,a.size,"ordinates");const w=zt(v,S,.01);ue(w,"Abscissas have undefined domain");const y=zt(k,j,.01);ue(y,"Ordinates have undefined domain");const{tooltipOpen:P,tooltipTop:M,tooltipLeft:E,tooltipData:B,showTooltip:L,hideTooltip:z}=Vt();return r.jsxs("figure",{className:`${Ot.root} ${x}`,style:b,"aria-label":d,"data-keep-canvas-colors":!0,children:[r.jsxs(Ui,{abscissaConfig:{visDomain:w,showGrid:c,label:g,scaleType:S},ordinateConfig:{visDomain:y,showGrid:c,label:C,scaleType:j},title:d,raycasterThreshold:u,children:[r.jsx(pi,{...f}),r.jsx(ki,{}),r.jsx(Dr,{abscissas:v,ordinates:k,data:a.data,domain:o,scaleType:l,colorMap:i,invertColorMap:s,size:u,onClick:p,onPointerEnter:(I,Se)=>L({tooltipData:I,tooltipLeft:Se.nativeEvent.offsetX,tooltipTop:Se.nativeEvent.offsetY}),onPointerOut:()=>z()}),r.jsx(pn,{tooltipOpen:P,tooltipLeft:E,tooltipTop:M,children:B!==void 0&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:`${g??"x"} = ${Ie(v[B])}, ${C??"y"} = ${Ie(k[B])}`}),r.jsx("div",{className:Ot.tooltipValue,children:r.jsx("strong",{children:Ie(a.get(B))})})]})}),h]}),r.jsx(Pr,{domain:o,scaleType:l,colorMap:i,invertColorMap:s,withBounds:!0})]})}const{btn:Gr,btnLike:Vr,icon:Yr,label:Wr,popup:Zr}=gt,Xr="_toolbar_d77010c",qr="_controls_6f2898a",Hr="_controlWrapper_c53184f",Kr="_control_72c50d3",Ur="_sep_9963159",Qr="_arrowIcon_52a7a56",Jr="_menu_9a962f8",es="_btnOption_14b8d45 btnClean",ts=`_btn_ea88005 ${Gr}`,ns=`_btnLike_059b9d6 ${Vr}`,as=`_icon_b73dfea ${Yr}`,os=`_label_917dfbf ${Wr}`,is=`_popup_486e2ed ${Zr}`,D={toolbar:Xr,controls:qr,controlWrapper:Hr,control:Kr,sep:Ur,arrowIcon:Qr,menu:Jr,btnOption:es,btn:ts,btnLike:ns,icon:as,label:os,popup:is},rs=m.forwardRef((t,e)=>{const{label:n,icon:a,iconOnly:o,small:i,raised:s,withArrow:l,disabled:c,...d}=t;return r.jsx("button",{ref:e,className:D.btn,type:"button",title:o?n:void 0,"aria-label":o?n:void 0,disabled:c,"data-small":i||void 0,"data-raised":s||void 0,...d,children:r.jsxs("span",{className:D.btnLike,children:[a&&r.jsx(a,{className:D.icon}),!o&&r.jsx("span",{className:D.label,children:n}),l&&r.jsx(Yt,{className:D.arrowIcon})]})})}),ss=rs,Xe=6,ls=320;function cs(){const[t,e]=pe();return ca({open:t,middleware:[qa(Xe),Ha({padding:Xe*2,apply({availableHeight:n,elements:a,rects:o}){Object.assign(a.floating.style,{maxHeight:`${Math.min(n,ls)}px`,minWidth:`${o.reference.width}px`})}}),Ka({padding:Xe})],onOpenChange:e,whileElementsMounted:Ua})}function ds(t){const{refs:e,onOpenChange:n}=t,{domReference:a,floating:o}=e,i=m.useCallback(c=>{var d,u;const{relatedTarget:h}=c;h&&!((d=a.current)!=null&&d.contains(h))&&!((u=o.current)!=null&&u.contains(h))&&n(!1)},[a,o,n]),s=m.useMemo(()=>({onBlur:i}),[i]),l=m.useMemo(()=>({onBlur:i}),[i]);return rt("Escape",()=>n(!1)),Wt(e.floating,c=>{const d=e.domReference.current;c.target instanceof Element&&d!=null&&d.contains(c.target)||n(!1)}),m.useMemo(()=>({reference:s,floating:l}),[s,l])}function ze(t){const{value:e,onToggle:n,...a}=t;return r.jsx(ss,{...a,"aria-pressed":e,onClick:()=>n()})}m.createContext(void 0);function us(t){const{colorMap:e,invertColorMap:n,...a}=t,o=De(e,!!n);return r.jsxs(r.Fragment,{children:[r.jsx("defs",{children:r.jsx("linearGradient",{id:"ColorMapGradient",children:gn.map(i=>r.jsx("stop",{offset:`${i*100}%`,stopColor:o(i)},i))})}),r.jsx("rect",{...a,fill:"url(#ColorMapGradient)"})]})}const hs="_container_cf95c80",ms="_histogram_7fde63e",ps="_bar_00238ad",fs="_markers_c318f1a",te={container:hs,histogram:ms,bar:ps,markers:fs},le=10;function Dt(t){const{x:e,flipArrow:n,dragState:a}=t,o=m.useMemo(()=>({onPointerMove:a==null?void 0:a.dragMove,onPointerUp:a&&(i=>{i.target.releasePointerCapture(i.pointerId),a.dragEnd(i)}),onPointerDown:a&&(i=>{i.target.setPointerCapture(i.pointerId),a.dragStart(i)})}),[a]);return r.jsxs("g",{transform:`translate(${(a==null?void 0:a.dx)||0}, 0)`,style:{cursor:a?"ew-resize":void 0},...o,children:[r.jsx("line",{x1:e,x2:e,y1:0,y2:"100%"}),r.jsx("polygon",{x:e,y:0,points:`${e},0 ${e},${le} ${n?e-le:e+le},${le/2}`}),a&&r.jsx("rect",{x:e-le,y:0,height:"100%",width:2*le,fill:"transparent",fillOpacity:0,stroke:"none"})]})}function xs(t){const{positions:e,size:n,onChangeMin:a,onChangeMax:o}=t,{height:i,width:s}=n,[l,c]=e,[d,u]=m.useState(0);return r.jsxs("g",{className:te.markers,children:[r.jsx(St,{height:i,width:s,x:l,onDragStart:({x:h})=>h&&u(h-l),onDragEnd:({dx:h})=>{a==null||a(l+h),u(0)},restrict:{xMin:d,xMax:c+d},children:h=>r.jsx(Dt,{x:l,dragState:a&&h})}),r.jsx(St,{height:i,width:s,x:c,onDragStart:({x:h})=>h&&u(h-c),onDragEnd:({dx:h})=>{o==null||o(c+h),u(0)},restrict:{xMin:l+d,xMax:s+d},children:h=>r.jsx(Dt,{x:c,flipArrow:!0,dragState:o&&h})})]})}const gs=.3;function bs(t){const{values:e,bins:n,scaleType:a,value:o,dataDomain:i,onChangeMin:s,onChangeMax:l,showLeftAxis:c=!0}=t,{colorMap:d,invertColorMap:u}=t,h=At(n,a)||nt,[f]=yn(o,i,a),p=mn([h,f,i]),x=At(e),b=x?x[1]:nt[1],v=d?-b/10:0,[g,S]=Xt();if(!g)return r.jsx("div",{ref:S,className:te.container});const{width:k,height:C}=g,j=q(a,{domain:p&&pt(p,gs,a),range:[0,k]}),w=Ae({domain:[v,b],range:[0,C]}),y=f.map(j),P=[];return e.forEach((M,E)=>P.push(r.jsx("rect",{className:te.bar,x:j(n[E]),y:C-w(M),width:j(n[E+1])-j(n[E])+.5,height:w(M)-w(0)},E))),r.jsx("div",{ref:S,className:te.container,children:r.jsxs("svg",{width:"100%",height:"100%",className:te.histogram,children:[P,d&&r.jsx(us,{x:y[0],y:C-w(0),width:y[1]-y[0],height:w(0)-w(v),colorMap:d,invertColorMap:u}),r.jsx(xs,{positions:y,size:g,onChangeMin:s&&(M=>s(j.invert(M))),onChangeMax:l&&(M=>l(j.invert(M)))}),r.jsx(lt,{top:C,scale:j,numTicks:oe(k),tickClassName:te.tick,tickComponent:Ne,tickFormat:j.tickFormat(oe(k),".3~g")}),c&&r.jsx(Ht,{scale:w.range([C,0]),numTicks:oe(C),tickClassName:te.tick,tickComponent:Ne,tickFormat:w.tickFormat(oe(C),".3~g")})]})})}const vs="_boundEditor_ce4a770",ys="_label_1e85446",ws="_value_c7f465d",qe={boundEditor:vs,label:ys,value:ws},Ss="_root_86b0b1e",Cs="_dataRange_03d542e",js="_autoscale_8ea032e",Ms="_error_841a0df",_s="_errorMessage_a16acf6",ks="_actionBtn_18350cd btnClean",Ps="_swapBtn_2e22485 _actionBtn_18350cd btnClean",U={root:Ss,dataRange:Cs,autoscale:js,error:Ms,errorMessage:_s,actionBtn:ks,swapBtn:Ps},it=m.forwardRef((t,e)=>{const{bound:n,value:a,isEditing:o,hasError:i,onEditToggle:s,onChange:l}=t,c=`${n}-bound`,d=m.useRef(null),[u,h]=m.useState("");function f(){s(!1),h($e(a))}return m.useImperativeHandle(e,()=>({cancel:f})),m.useEffect(()=>{h($e(a))},[a,h]),m.useEffect(()=>{var p,x;o||(p=d.current)==null||p.blur(),o&&n==="min"&&((x=d.current)==null||x.focus())},[o,n]),r.jsxs("form",{className:qe.boundEditor,"data-error":i||void 0,"data-editing":o,onSubmit:p=>{p.preventDefault();const x=Number.parseFloat(u.replace("−","-")),b=Number.isNaN(x)?a:tn(x);h($e(b)),l(b),s(!1)},children:[r.jsx("label",{id:`${c}-label`,className:qe.label,htmlFor:c,children:n}),r.jsx("input",{id:c,ref:d,className:qe.value,type:"text",name:"bound",value:u,title:o?void 0:a.toString(),"aria-labelledby":`${c}-label`,onChange:p=>h(p.target.value),onFocus:()=>{o||s(!0)}}),r.jsx("button",{className:U.actionBtn,type:"submit",disabled:!o,"aria-label":`Apply ${n}`,children:r.jsx(En,{})}),r.jsx("button",{className:U.actionBtn,type:"button",disabled:!o,"aria-label":`Cancel ${n}`,onClick:()=>f(),children:r.jsx(Nn,{})})]})});it.displayName="BoundEditor";const Ls={[Z.MinGreater]:{message:"Min greater than max",fallback:"data range"},[Z.InvalidMinWithScale]:{message:"Custom min invalid with this scale",fallback:"data min"},[Z.InvalidMaxWithScale]:{message:"Custom max invalid with this scale",fallback:"data max"},[Z.CustomMaxFallback]:{message:"Custom min invalid with this scale",fallback:"custom max"}};function He(t){const{error:e,showSwapBtn:n=!1,onSwap:a}=t,{message:o,fallback:i}=Ls[e];return r.jsxs("p",{className:U.error,children:[r.jsxs("span",{className:U.errorMessage,children:[o,r.jsx("br",{}),r.jsx(Zn,{})," falling back to ",r.jsx("strong",{children:i})]}),n&&a&&r.jsx("button",{className:U.swapBtn,type:"button","aria-label":"Swap min and max",onClick:()=>a(),children:r.jsx(Xn,{})})]})}const wn=m.forwardRef((t,e)=>{const{sliderDomain:n,dataDomain:a,errors:o}=t,{isAutoMin:i,isAutoMax:s,isEditingMin:l,isEditingMax:c}=t,{onAutoMinToggle:d,onAutoMaxToggle:u,onEditMin:h,onEditMax:f,onChangeMin:p,onChangeMax:x,onSwap:b}=t,{minGreater:v,minError:g,maxError:S}=o,k=m.useRef(null),C=m.useRef(null);return m.useImperativeHandle(e,()=>({cancelEditing:()=>{var j,w;(j=k.current)==null||j.cancel(),(w=C.current)==null||w.cancel()}})),r.jsxs("div",{className:U.root,children:[v&&r.jsx(He,{error:Z.MinGreater,showSwapBtn:!i&&!s,onSwap:b}),r.jsx(it,{ref:k,bound:"min",value:n[0],isEditing:l,hasError:v||!!g,onEditToggle:h,onChange:p}),g&&r.jsx(He,{error:g}),r.jsx(it,{ref:C,bound:"max",value:n[1],isEditing:c,hasError:v||!!S,onEditToggle:f,onChange:x}),S&&r.jsx(He,{error:S}),r.jsxs("p",{className:U.dataRange,children:["Data range"," ",r.jsxs("span",{children:["["," ",r.jsx("abbr",{title:a[0].toString(),children:Te(a[0])})," ",","," ",r.jsx("abbr",{title:a[1].toString(),children:Te(a[1])})," ","]"]})]}),r.jsxs("p",{className:U.autoscale,children:["Autoscale"," ",r.jsx(ze,{label:"Min",raised:!0,value:i,onToggle:d}),r.jsx(ze,{label:"Max",raised:!0,value:s,onToggle:u})]})]})});wn.displayName="DomainControls";const Ts=wn,Es="_slider_cacc447",Ns={slider:Es},zs="_thumb_be15bc7",As="_thumbBtnLike_3744319",Rs="_icon_4b34f14",Me={thumb:zs,thumbBtnLike:As,icon:Rs},Sn=m.forwardRef((t,e)=>{const{bound:n,isAuto:a,hasError:o,disabled:i,AutoIcon:s,...l}=t;return r.jsx("div",{ref:e,...l,className:Me.thumb,"aria-label":`Change ${n} limit`,"aria-disabled":i||void 0,tabIndex:i?-1:l.tabIndex,"data-auto":a,"data-error":o||void 0,children:r.jsxs("div",{className:Me.thumbBtnLike,children:[a&&r.jsx(s,{className:Me.icon}),!a&&o&&r.jsx(zn,{className:Me.icon,strokeWidth:"3"})]})})});Sn.displayName="Thumb";const Bs="_track_6d5d78c",Fs="_dataTrack_5457067",$t={track:Bs,dataTrack:Fs};function Os(t){const{scale:e,dataDomain:n}=t,[a,o]=n,i=e.copy().range([0,100]);return r.jsx("div",{className:$t.track,children:r.jsx("div",{className:$t.dataTrack,style:{left:`${i(a)}%`,right:`${100-i(o)}%`}})})}const Ke=[1,100],Ds=.3;function $s(t){const{value:e,dataDomain:n,safeVisDomain:a,scaleType:o,errors:i,isAutoMin:s,isAutoMax:l,disabled:c=!1}=t,{onChange:d,onAfterChange:u}=t,{minGreater:h,minError:f,maxError:p}=i,x=mn([a,n]),b=pt(x,Ds,o),v=q(o,{domain:b.map(w=>tn(w)),range:Ke,clamp:!0}),[g]=bn(e,n,o),S=g.map(v).map(Math.round),[k,C]=m.useState(S);function j(w,y=!1){const[P,M]=w,E=P!==k[0],B=M!==k[1],L=[E?v.invert(P):e[0],B?v.invert(M):e[1]];y?u(E,B):d(L)}return r.jsx(qn,{className:Ns.slider,pearling:!0,min:Ke[0],max:Ke[1],value:S,disabled:c,onBeforeChange:C,onChange:w=>j(w),onAfterChange:w=>j(w,!0),renderThumb:({key:w,...y},{index:P})=>r.jsx(Sn,{bound:P===0?"min":"max",isAuto:P===0?s:l,hasError:h||(P===0?!!f:!!p),disabled:c,AutoIcon:P===0?Hn:Kn,...y},w),renderTrack:({key:w},{index:y})=>y===0?r.jsx(Os,{scale:v,dataDomain:n},w):null})}const{popup:Is}=gt,Gs="_root_4bee757",Vs="_sliderContainer_b560cda",Ys="_popupOuter_18e1d97",Ws=`_popup_d3e7a5a ${Is}`,_e={root:Gs,sliderContainer:Vs,popupOuter:Ys,popup:Ws},It="h5w-domain-popup";function wl(t){const{dataDomain:e,customDomain:n,scaleType:a,disabled:o=!1}=t,{onCustomDomainChange:i,histogram:s}=t,l=Lr(n,e),[c,d]=yn(l,e,a),[u,h]=m.useState(l);m.useEffect(()=>{h(l)},[l]);const f=n[0]===null,p=n[1]===null,[x,b]=pe(!1),[v,g]=pe(!1),[S,k]=pe(!1),C=v||S;function j(M){g(M),k(M)}function w(){var M;C&&(j(!1),(M=P.current)==null||M.cancelEditing())}const y=m.useRef(null),P=m.useRef(null);return Wt(y,w),rt("Escape",()=>{b(!1),w()}),r.jsxs("div",{ref:y,className:_e.root,"data-disabled":o||void 0,onPointerEnter:()=>b(!0),onPointerLeave:()=>b(!1),children:[r.jsxs("div",{className:_e.sliderContainer,children:[r.jsx($s,{value:u,safeVisDomain:c,dataDomain:e,scaleType:a,errors:d,isAutoMin:f,isAutoMax:p,disabled:o,onChange:M=>{h(M),j(!1)},onAfterChange:(M,E)=>{i([M?u[0]:n[0],E?u[1]:n[1]])}}),r.jsx(ze,{iconOnly:!0,small:!0,label:"Edit domain","aria-expanded":x||C,"aria-controls":It,icon:An,value:C,disabled:o,onToggle:()=>j(!C)})]}),r.jsx("div",{id:It,className:_e.popupOuter,role:"dialog","aria-label":"Edit domain",hidden:!x&&!C,children:r.jsxs("div",{className:_e.popup,children:[s&&r.jsx(bs,{dataDomain:e,value:u,scaleType:a,onChangeMin:M=>i([M,n[1]]),onChangeMax:M=>i([n[0],M]),...s}),r.jsx(Ts,{ref:P,sliderDomain:u,dataDomain:e,errors:d,isAutoMin:f,isAutoMax:p,onAutoMinToggle:()=>{const M=f?e[0]:null;i([M,n[1]]),f||g(!1)},onAutoMaxToggle:()=>{const M=p?e[1]:null;i([n[0],M]),p||k(!1)},isEditingMin:v,isEditingMax:S,onEditMin:g,onEditMax:k,onChangeMin:M=>i([M,n[1]]),onChangeMax:M=>i([n[0],M]),onSwap:()=>i([n[1],n[0]])})]})})]})}const Zs="_option_ed5d8da",Xs="_gradient_584dd94",Cn={option:Zs,gradient:Xs};function qs(t){const{colorMap:e}=t;return r.jsx("div",{className:Cn.gradient,style:{backgroundImage:vn(xn[e],"right")},"data-keep-colors":!0})}function Hs(t){return Array.isArray(t)?t:Object.values(t).flat()}function Gt(t){const{activeIndex:e,selectedIndex:n,children:a,getItemProps:o,onSelect:i}=t,{ref:s,index:l}=da();return r.jsx("button",{ref:s,className:D.btnOption,type:"button",role:"option","aria-selected":l===n||void 0,tabIndex:l===e?0:-1,"data-active":l===e||void 0,...o({onClick:()=>i(l)}),children:a})}const Ks="_label_568c73e",Us="_groups_6cecc1b",Qs="_groupLabel_b6d0922",Ue={label:Ks,groups:Us,groupLabel:Qs};function jn(t){const{label:e,value:n,disabled:a,onChange:o,options:i,renderOption:s}=t,{context:l,refs:c,floatingStyles:d}=cs(),{open:u,onOpenChange:h}=l,f=m.useId(),p=m.useId(),x=m.useId(),b=m.useRef([]),[v,g]=m.useState(null),[S,k]=m.useState(()=>Hs(i).indexOf(n)),{getReferenceProps:C,getFloatingProps:j,getItemProps:w}=Un([Qn(l),ds(l),Jn(l,{listRef:b,activeIndex:v,loop:!0,focusItemOnHover:!1,onNavigate:g})]);function y(P,M){k(P),h(!1),o(M)}return r.jsxs(r.Fragment,{children:[e&&r.jsx("span",{id:f,className:Ue.label,children:e}),r.jsx("button",{ref:c.setReference,id:p,className:D.btn,type:"button",disabled:a,role:"combobox","aria-labelledby":`${e?f:""} ${x}`,"aria-haspopup":"listbox","aria-expanded":u,"aria-controls":u&&l.floatingId||void 0,...C(),children:r.jsxs("span",{id:x,className:D.btnLike,children:[s(n),r.jsx(Yt,{className:D.arrowIcon})]})}),u&&r.jsx("div",{ref:c.setFloating,id:l.floatingId,className:D.menu,style:d,role:"listbox","aria-labelledby":p,...j(),children:r.jsx(ea,{elementsRef:b,children:Array.isArray(i)?i.map(P=>r.jsx(Gt,{activeIndex:v,selectedIndex:S,getItemProps:w,onSelect:M=>y(M,P),children:s(P)},P)):r.jsx("ul",{className:Ue.groups,children:Object.entries(i).map(([P,M])=>r.jsxs("li",{children:[r.jsx("span",{className:Ue.groupLabel,children:P}),M.map(E=>r.jsx(Gt,{activeIndex:v,selectedIndex:S,getItemProps:w,onSelect:B=>y(B,E),children:s(E)},E))]},P))})})})]})}const Js={Recommended:["Viridis","Inferno","Greys","RdBu","Rainbow","Sinebow"],"Single hue":["Blues","Greens","Greys","Oranges","Purples","Reds"],"Multi hue":["Turbo","Viridis","Inferno","Magma","Plasma","Cividis","Warm","Cool","Cubehelix","BuGn","BuPu","GnBu","OrRd","PuBuGn","PuBu","PuRd","RdPu","YlGnBu","YlGn","YlOrBr","YlOrRd"],Cyclical:["Rainbow","Sinebow","HSL"],Diverging:["BrBG","PRGn","PiYG","PuOr","RdBu","RdGy","RdYlBu","RdYlGn","Spectral"]};function Sl(t){const{value:e,onValueChange:n,invert:a,onInversionChange:o}=t;return r.jsxs(r.Fragment,{children:[r.jsx(jn,{value:e,onChange:n,options:Js,renderOption:i=>r.jsxs("div",{className:Cn.option,children:[i,r.jsx(qs,{colorMap:i})]})}),r.jsx(ze,{small:!0,label:"Invert",icon:Rn,value:a,onToggle:o})]})}function el(t){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"1em",width:"1em",...t,children:r.jsx("path",{d:"M18 17v-2H6v2zm4-4v-2H2v2zm-8 8v-2h-4v2zm4-12V7H6v2zm-8-4h4V3h-4z",stroke:"none"})})}function tl(t){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",height:"1em",width:"1em",...t,children:r.jsx("polyline",{points:"2 12 6 12 9 21 15 3 19 3"})})}const nl={[_.Linear]:["Linear",Bn],[_.Log]:["Log",Fn],[_.SymLog]:["SymLog",el],[_.Sqrt]:["Square root",tl],[_.Gamma]:["Gamma",On]};function Cl(t){const{label:e,value:n,onScaleChange:a,options:o}=t;return r.jsx(jn,{label:e,value:n,onChange:a,options:o,renderOption:i=>{const[s,l]=nl[i];return r.jsxs(r.Fragment,{children:[r.jsx(l,{className:D.icon}),r.jsx("span",{children:s})]})}})}ke.Phase+"",ke.Amplitude+"",ke.PhaseAmplitude+"";function jl(t){const{x:e,y:n,overflowCanvas:a,scaleOnZoom:o,center:i,children:s,style:l,...c}=t;if((i||o)&&l!=null&&l.transform)throw new Error("Annotation with `center` and/or `scaleOnZoom` cannot have its own `transform`");const{dataToHtml:d}=T(),{htmlPt:u,cameraScale:h}=Oe(p=>({htmlPt:d(p,new N(e,n)),cameraScale:p.scale.clone()}),[e,n,d]),f=[i?"translate(-50%, -50%)":"",o?`scale(${1/h.x}, ${1/h.y})`:""];return r.jsx(ye,{overflowCanvas:a,children:r.jsx("div",{style:{position:"absolute",top:u.y,left:u.x,transformOrigin:o&&!i?"top left":void 0,transform:f.join(" ").trim(),...l},...c,children:s})})}const Mn=Dn(t=>({val:void 0,setTooltipValue:(e,n,a)=>t(()=>({val:{x:e,y:n,v:a}}))}));function al(){const t=Mn(n=>n.setTooltipValue),{worldToData:e}=T();return m.useCallback((n,a)=>{const{unprojectedPoint:o}=n,i=n.object.worldToLocal(o.clone()),s=e(o.clone()),[l,c]=a.shape,d=a.get(Math.floor(i.y+l/2),Math.floor(i.x+c/2));t(s.x,s.y,d),n.stopPropagation()},[t,e])}function ol(t){const{api:e,layer:n,x:a,y:o,magFilter:i,onPointerMove:s,...l}=t,c=e.get(n,new Q(a,o)),[d,u]=c.shape,h=ta(f=>{s==null||s(f,c)},[s],50);return r.jsx("group",{position:[a+u/2,o+d/2,0],children:r.jsx(Br,{values:c,...l,magFilter:i,size:{width:u,height:d},onPointerMove:s&&h})})}const il=m.memo(ol);function rl(t,e){const{width:n,height:a}=e,o=Math.ceil((t.min.x%n+t.max.x-t.min.x)/n),i=Math.ceil((t.min.y%a+t.max.y-t.min.y)/a),s=new Q(Math.floor(t.min.x/n)*n,Math.floor(t.min.y/a)*a),l=[];for(let c=0;c<i;c+=1)for(let d=0;d<o;d+=1)l.push(new Q(s.x+d*n,s.y+c*a));return l}function sl(t,e,n){const{width:a,height:o}=e;t.sort((i,s)=>{const l=new Q(i.x+a/2,i.y+o/2),c=new Q(s.x+a/2,s.y+o/2);return l.distanceToSquared(n)-c.distanceToSquared(n)})}function ll(t,e){const n=e.current;if(n)return n.matrixWorld.clone().invert().multiply(t.matrixWorld).multiply(t.projectionMatrixInverse)}function cl(t,e){return t?new Re(new N(0,0,0),new N(2/e.width,2/e.height,0)).applyMatrix4(t).getSize(new N):new N}const dl=new Re(new N(-1,-1,-1),new N(1,1,1));function ul(t){return t?dl.clone().applyMatrix4(t):new Re}function hl(t,e){const n=q(_.Linear,{domain:[-e.width/2,e.width/2],range:[0,t.width],clamp:!0}),a=q(_.Linear,{domain:[-e.height/2,e.height/2],range:[0,t.height],clamp:!0});return{xScale:n,yScale:a}}function _n(t,e,n){if(t.isEmpty())return new Ct;const{xScale:a,yScale:o}=hl(e,n),i=new Q(a(t.min.x),o(t.min.y)),s=new Q(a(t.max.x),o(t.max.y));return new Ct().setFromPoints([i,s])}function ml(t){const{api:e,layer:n,meshSize:a,visibleBox:o,onPointerMove:i,...s}=t,{baseLayerIndex:l,numLayers:c,tileSize:d}=e,u=e.layerSizes[n];if(o.isEmpty())return null;const h=_n(o,u,a),f=rl(h,d);return sl(f,d,h.getCenter(new Q)),r.jsx("group",{position:[-a.width/2,-a.height/2,n/c],scale:[a.width/u.width,a.height/u.height,1],children:f.map(p=>r.jsx(m.Suspense,{fallback:null,children:r.jsx(il,{api:e,layer:n,x:p.x,y:p.y,...s,magFilter:n===l?Kt:ua,onPointerMove:i})},`${p.x},${p.y}`))})}function Ml(t){const{api:e,displayLowerResolutions:n=!0,qualityFactor:a=1,size:o,...i}=t,{baseLayerIndex:s,baseLayerSize:l}=e,{canvasSize:c,visSize:d}=T(),u=o??d,h=m.useRef(null),f=Oe(g=>ll(g,h),[]),p=ul(f),x=_n(p,l,u);let b=[];if(!x.isEmpty()){const g=cl(f,c),S=Math.max(1,g.x/u.width*l.width,g.y/u.height*l.height),k=1-Zt.clamp(a,0,1),C=Math.min(Math.floor(Math.log2(S)+k),s),j=s-C;b=n?ge(j+1):[j]}const v=al();return r.jsx("group",{ref:h,children:b.map((g,S)=>r.jsx(ml,{api:e,layer:g,meshSize:u,visibleBox:p,onPointerMove:S===b.length-1?v:void 0,...i},g))})}function _l(t){const{size:e,renderTooltip:n}=t,a=Mn(o=>o.val);return r.jsx(Ni,{size:e,renderTooltip:()=>{if(!a)return;const{x:o,y:i,v:s}=a;return n(o,i,s)}})}function pl(t,e,n=!1){if(t.width<=e.width&&t.height<=e.height)return[t];const a=n?{width:Math.floor(t.width/2),height:Math.floor(t.height/2)}:{width:1+Math.floor((t.width-1)/2),height:1+Math.floor((t.height-1)/2)};return[...pl(a,e,n),t]}class kl{constructor(e,n){if(ae(this,"tileSize"),ae(this,"layerSizes"),n.length===0)throw new Error("layerSizes must not be empty");this.tileSize=e,this.layerSizes=n}get baseLayerSize(){return this.layerSizes[this.numLayers-1]}get baseLayerIndex(){return this.numLayers-1}get numLayers(){return this.layerSizes.length}}export{Sl as $,ii as B,Fe as C,yl as E,At as F,hn as G,bn as H,wl as I,ye as J,xl as K,jl as O,ki as P,Oe as Q,Cl as R,pt as S,Ui as T,yn as U,hr as V,hi as W,ui as Y,_ as a,T as b,Pe as c,bl as d,mn as e,gl as f,li as g,bs as h,W as i,Ml as j,jr as k,$s as l,Lr as m,Dr as n,X as o,Br as p,ot as q,Pr as r,Pi as s,_l as t,un as u,kl as v,Ni as w,pl as x,vl as z};
