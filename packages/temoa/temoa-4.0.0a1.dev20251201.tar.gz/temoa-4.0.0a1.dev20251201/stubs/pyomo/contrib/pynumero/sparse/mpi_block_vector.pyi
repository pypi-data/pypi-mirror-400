import numpy as np
from pyomo.common.dependencies import mpi4py as mpi4py
from pyomo.contrib.pynumero.sparse import BlockVector as BlockVector

from .base_block import BaseBlockVector as BaseBlockVector
from .base_block import vec_associative_reductions as vec_associative_reductions
from .base_block import vec_binary_ufuncs as vec_binary_ufuncs
from .base_block import vec_unary_ufuncs as vec_unary_ufuncs
from .block_vector import NotFullyDefinedBlockVectorError as NotFullyDefinedBlockVectorError

def assert_block_structure(vec) -> None: ...

class MPIBlockVector(BaseBlockVector, np.ndarray):
    def __new__(cls, nblocks, rank_owner, mpi_comm, assert_correct_owners: bool = False): ...
    def __init__(
        self, nblocks, rank_owner, mpi_comm, assert_correct_owners: bool = False
    ) -> None: ...
    def __array_prepare__(self, out_arr, context=None): ...
    def __array_wrap__(self, out_arr, context=None): ...
    def __array_ufunc__(self, ufunc, method, *inputs, **kwargs): ...
    @property
    def nblocks(self): ...
    @property
    def bshape(self): ...
    @property
    def shape(self): ...
    @property
    def size(self): ...
    @property
    def ndim(self): ...
    @property
    def has_none(self): ...
    @property
    def owned_blocks(self): ...
    @property
    def shared_blocks(self): ...
    @property
    def rank_ownership(self): ...
    @property
    def ownership_mask(self): ...
    @property
    def mpi_comm(self): ...
    def is_broadcasted(self): ...
    def block_sizes(self, copy: bool = True): ...
    def get_block_size(self, ndx): ...
    def broadcast_block_sizes(self) -> None: ...
    def finalize_block_sizes(self, broadcast: bool = True, block_sizes=None) -> None: ...
    def all(self, axis=None, out=None, keepdims: bool = False): ...
    def any(self, axis=None, out=None, keepdims: bool = False): ...
    def min(self, axis=None, out=None, keepdims: bool = False): ...
    def max(self, axis=None, out=None, keepdims: bool = False): ...
    def sum(self, axis=None, dtype=None, out=None, keepdims: bool = False): ...
    def prod(self, axis=None, dtype=None, out=None, keepdims: bool = False): ...
    def mean(self, axis=None, dtype=None, out=None, keepdims: bool = False): ...
    def conj(self): ...
    def conjugate(self): ...
    def nonzero(self): ...
    def round(self, decimals: int = 0, out=None): ...
    def clip(self, min=None, max=None, out=None): ...
    def compress(self, condition, axis=None, out=None): ...
    def copyfrom(self, other) -> None: ...
    def copyto(self, other) -> None: ...
    def set_blocks(self, blocks) -> None: ...
    def clone(self, value=None, copy: bool = True): ...
    def copy(self, order: str = 'C'): ...
    def copy_structure(self): ...
    def fill(self, value) -> None: ...
    def dot(self, other, out=None): ...
    def make_local_structure_copy(self): ...
    def make_local_copy(self): ...
    def __add__(self, other): ...
    def __radd__(self, other): ...
    def __sub__(self, other): ...
    def __rsub__(self, other): ...
    def __mul__(self, other): ...
    def __rmul__(self, other): ...
    def __truediv__(self, other): ...
    def __rtruediv__(self, other): ...
    def __floordiv__(self, other): ...
    def __rfloordiv__(self, other): ...
    def __neg__(self): ...
    def __iadd__(self, other): ...
    def __isub__(self, other): ...
    def __imul__(self, other): ...
    def __itruediv__(self, other): ...
    def __div__(self, other): ...
    def __rdiv__(self, other): ...
    def __idiv__(self, other): ...
    def __le__(self, other): ...
    def __lt__(self, other): ...
    def __ge__(self, other): ...
    def __gt__(self, other): ...
    def __eq__(self, other): ...
    def __ne__(self, other): ...
    def __contains__(self, item) -> bool: ...
    def get_block(self, key): ...
    def set_block(self, key, value) -> None: ...
    def __getitem__(self, item) -> None: ...
    def __setitem__(self, key, value) -> None: ...
    def pprint(self, root: int = 0) -> None: ...
    def __len__(self) -> int: ...
    def __iter__(self): ...
    def std(
        self, axis=None, dtype=None, out=None, ddof: int = 0, keepdims: bool = False
    ) -> None: ...
    def var(
        self, axis=None, dtype=None, out=None, ddof: int = 0, keepdims: bool = False
    ) -> None: ...
    def cumprod(self, axis=None, dtype=None, out=None) -> None: ...
    def cumsum(self, axis=None, dtype=None, out=None) -> None: ...
    def tolist(self) -> None: ...
    def flatten(self, order: str = 'C') -> None: ...
    def ravel(self, order: str = 'C') -> None: ...
