# AI 协作最佳实践指南 (AI Best Practices Guide)

本文档总结了如何高效利用 AI 助手进行代码修复和开发，确保问题能够 100% 被解决且不引入新 Bug。

## 核心原则 (The 3 Golden Rules)

### 1. 强制“先复现，再修复” (No Reproduction, No Fix)
AI 容易在没有看到具体错误的情况下“盲猜”解决方案，导致越改越乱。
*   **错误做法**：“CI 挂了，帮我修一下。”
*   **正确做法**：“不要直接修改代码。先运行 `[测试命令]`，把报错信息展示给我看。确认你能复现这个错误后，再告诉我原因。”

### 2. 强制“阅读上下文” (Read Before Write)
AI 可能会幻觉出不存在的方法或变量。必须强制它先理解现有代码结构。
*   **正确做法**：“在修改 `[类名/文件]` 之前，先读取它的完整定义，以及它父类的定义。确保你添加的方法在父类中是兼容的，并且不要调用不存在的变量。”

### 3. 强制“本地验证” (Verify Locally)
永远不要相信 AI 声称的“修复完成”，必须看到测试通过的证据。
*   **正确做法**：“修改完代码后，**必须**再次运行刚才失败的测试命令。只有当终端显示 `PASSED` 时，你才能停止任务。如果报错变了，继续修，直到通过。”

---

## 完美提示词模板 (The Perfect Prompt Template)

当你遇到顽固 Bug 或复杂任务时，请复制以下模板发送给 AI：

```markdown
**任务**：修复 [具体功能/文件] 的错误 / 实现 [具体功能]。

**约束条件 (必须严格遵守)**：
1. **不要猜测**：先运行命令 `[复现/测试命令]`，确保你看到了具体的报错信息或当前行为。
2. **不要盲写**：先读取相关文件（包括父类、依赖文件）的完整代码，理解上下文。
3. **必须验证**：修改代码后，必须再次运行测试命令证明修复有效。
   - 如果测试通过，请展示终端的 `PASSED` 结果。
   - 如果测试失败，请分析新错误并继续修复，直到通过为止。
```

## 为什么这样做有效？
1.  **消除幻觉**：强制 AI 基于事实（报错信息、文件内容）而非训练数据的记忆来工作。
2.  **闭环反馈**：通过“运行-修改-再运行”的循环，确保 AI 自己发现并修正它引入的新错误（如语法错误、类型错误）。
3.  **责任明确**：明确要求 AI 对最终结果负责，而不仅仅是提供一个“建议”。
