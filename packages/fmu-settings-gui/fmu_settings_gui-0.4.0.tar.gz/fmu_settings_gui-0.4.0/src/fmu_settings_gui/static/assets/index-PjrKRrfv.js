import{t as D,r as j,h as J,i as X,j as e,d as p,k as Y,m as Z,o as ee,s as se,n as P,p as te,a as C,c as u,q as ne,L as F,v as w,I as T,w as $,x as q,y,E as V,D as d,e as g,z as ie,A as oe,H as S,B as re,C as L,F as M,G as ae,u as ce,J as le,g as E}from"./index-CGCOPtAd.js";import{L as de}from"./common-D7_rxYMs.js";import{G as H,c as W,I as ue,f as G,a as Q,T as K,C as O,S as U}from"./field-B5157bDc.js";import{r as _}from"./validator-BVcLZbLS.js";import{P as N}from"./ProjectSelector-CA7uu16v.js";const{colors:{interactive:{primary__resting:{rgba:he},primary__hover_alt:{rgba:me},focus:{rgba:I},disabled__text:{rgba:pe}}},typography:{navigation:{menu_title:xe}},spacings:{comfortable:{medium_small:b,x_small:v,x_large:fe,xx_large:je}},clickbounds:{default__base:ge,compact__standard:be},interactions:{focused:{width:R}}}=D,f={background:he,typography:xe,width:je,spacings:{bottom:b,top:b,left:b,right:b},clickbound:{height:ge},states:{hover:{background:me},disabled:{background:pe},focus:{outline:{type:"outline",style:"dashed",width:R,color:I,offset:"10px"}}},modes:{compact:{width:fe,spacings:{bottom:v,top:v,left:v,right:v},clickbound:{height:be},states:{focus:{outline:{type:"outline",style:"dashed",width:R,color:I,offset:"2px"}}}}}},A=p.input.attrs(({type:s="radio"})=>({type:s})).withConfig({displayName:"Radio__Input",componentId:"sc-we59oz-0"})(["--scale:",";appearance:none;width:100%;height:100%;margin:0;grid-area:input;transform:scale(var(--scale));cursor:",";&:focus{outline:none;}&[data-focus-visible-added]:focus + svg{","}&:focus-visible + svg{","}&:not(:checked) ~ svg path[name='selected']{display:none;}&:not(:checked) ~ svg path[name='unselected']{display:inline;}&:checked ~ svg path[name='unselected']{display:none;}&:checked ~ svg path[name='selected']{display:inline;}"],({theme:s,$iconSize:n})=>parseFloat(s.clickbound.height)/n,({disabled:s})=>s?"not-allowed":"pointer",({theme:s})=>P(s.states.focus.outline),({theme:s})=>P(s.states.focus.outline)),ve=p.label.withConfig({displayName:"Radio__StyledLabel",componentId:"sc-we59oz-1"})(["display:inline-flex;align-items:center;cursor:",";"],({$disabled:s})=>s?"not-allowed":"pointer"),B=p.path.attrs(({$icon:s})=>({fillRule:"evenodd",clipRule:"evenodd",d:s.svgPathData})).withConfig({displayName:"Radio__StyledPath",componentId:"sc-we59oz-2"})([""]),ye=p.svg.attrs(({height:s,width:n,fill:o})=>({name:null,xmlns:"http://www.w3.org/2000/svg",height:s,width:n,fill:o})).withConfig({displayName:"Radio__Svg",componentId:"sc-we59oz-3"})(["grid-area:input;pointer-events:none;"]),Se=p.span.withConfig({displayName:"Radio__LabelText",componentId:"sc-we59oz-4"})(["",""],te(f.typography)),z=p.span.withConfig({displayName:"Radio__InputWrapper",componentId:"sc-we59oz-5"})([""," display:inline-grid;grid:[input] 1fr / [input] 1fr;position:relative;isolation:isolate;cursor:",";&::before{content:'';position:absolute;width:",";aspect-ratio:1/1;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:100%;}@media (hover:hover) and (pointer:fine){> svg{z-index:1;}&:hover{&::before{background-color:",";}}}"],({theme:s})=>se(s.spacings),({disabled:s})=>s?"not-allowed":"pointer",({theme:s})=>s.width,({disabled:s})=>s?"transparent":f.states.hover.background),k=j.forwardRef(function({label:n,disabled:o=!1,className:c,style:r,...h},m){const{density:x}=J(),a=X({density:x},f),t=24,i=o?f.states.disabled.background:f.background,l=j.useMemo(()=>e.jsxs(ye,{width:t,height:t,viewBox:`0 0 ${t} ${t}`,fill:i,"aria-hidden":!0,children:[e.jsx(B,{$icon:Y,name:"selected"}),e.jsx(B,{$icon:Z,name:"unselected"})]}),[i]);return e.jsx(ee,{theme:a,children:n?e.jsxs(ve,{$disabled:o,className:c,style:r,children:[e.jsxs(z,{disabled:o,children:[e.jsx(A,{...h,ref:m,disabled:o,$iconSize:t}),l]}),e.jsx(Se,{children:n})]}):e.jsxs(z,{disabled:o,className:c,style:r,children:[e.jsx(A,{...h,ref:m,disabled:o,$iconSize:t}),l]})})});k.displayName="Radio";const{useAppForm:_e}=W({fieldComponents:{TextField:K,Radio:k},formComponents:{SubmitButton:U,CancelButton:O},fieldContext:G,formContext:Q});function Ce({accessData:s,projectReadOnly:n,isDialogOpen:o,setIsDialogOpen:c}){const r=({formReset:t})=>{t(),c(!1)},h=$(),{mutate:m,isPending:x}=q({...re(),onSuccess:()=>{h.invalidateQueries({queryKey:M()})},onError:t=>{var i;if(((i=t.response)==null?void 0:i.status)===S){const l=L(t);console.error(l),y.error(l)}},meta:{errorPrefix:"Error saving access information",preventDefaultErrorHandling:[S]}}),a=_e({defaultValues:{assetName:(s==null?void 0:s.asset.name)??"",classification:(s==null?void 0:s.classification)??""},onSubmit:({value:t,formApi:i})=>{m({body:{asset:{name:t.assetName.trim()},classification:t.classification}},{onSuccess:()=>{y.info("Successfully set access information"),r({formReset:i.reset})}})}});return e.jsx(V,{open:o,children:e.jsxs("form",{onSubmit:t=>{t.preventDefault(),t.stopPropagation(),a.handleSubmit()},children:[e.jsx(d.Header,{children:e.jsx(d.Title,{children:"Access"})}),e.jsxs(d.Content,{children:[e.jsx(a.AppField,{name:"assetName",validators:{onBlur:_()},children:t=>e.jsx(t.TextField,{label:"Sumo target asset"})}),e.jsx(g,{}),e.jsx(a.AppField,{name:"classification",validators:{onChange:_()},children:t=>e.jsx(ue,{label:"Default security classification",color:"error",helperProps:{text:t.state.meta.isValid?"":"Required",icon:e.jsx(oe,{name:"error_filled",size:16})},children:["internal","restricted"].map(i=>e.jsx(ie,{title:i==="internal"?"Requires READ access to the asset":"Requires WRITE access to the asset",children:e.jsx("span",{children:e.jsx(k,{label:i,checked:t.state.value===i,onChange:()=>{t.handleChange(i)}})})},i))})})]}),e.jsxs(d.Actions,{children:[e.jsx(a.Subscribe,{selector:t=>[t.isDefaultValue,t.canSubmit],children:([t,i])=>e.jsx(a.SubmitButton,{label:"Save",disabled:t||!i||n,isPending:x,helperTextDisabled:n?"Project is read-only":void 0})}),e.jsx(a.CancelButton,{onClick:t=>{t.preventDefault(),r({formReset:a.reset})}})]})]})})}function we({accessData:s}){return e.jsx(T,{children:e.jsx("table",{children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Sumo target asset"}),e.jsx("td",{children:s.asset.name})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Default classification"}),e.jsx("td",{children:s.classification})]})]})})})}function Te({projectData:s,projectReadOnly:n}){const[o,c]=j.useState(!1),r=s.config.access;return e.jsxs(e.Fragment,{children:[e.jsx(C,{$variant:"h3",children:"Access control"}),e.jsx(u,{children:"This section is used to configure access permissions for data exported from the project."}),e.jsxs(u,{children:["The ",e.jsx("i",{children:"asset"})," specifies the target asset in Sumo where data will be uploaded. The ",e.jsx("i",{children:"classification"})," sets the default information classification for the data."]}),e.jsxs(ne,{children:[e.jsxs(F.Item,{children:["internal - requires ",e.jsx("i",{children:"READ"})," access to the asset"]}),e.jsxs(F.Item,{children:["restricted - requires ",e.jsx("i",{children:"WRITE"})," access to the asset"]})]}),e.jsxs(u,{children:["Read more about access control in the"," ",e.jsx("a",{href:"https://doc-sumo-doc-prod.radix.equinor.com/documentation/access_control",target:"_blank",rel:"noopener noreferrer",children:"Sumo documentation"})]}),r?e.jsx(we,{accessData:r}):e.jsx(w,{children:"No access information found in the project"}),e.jsx(H,{label:r?"Edit":"Add",disabled:n,tooltipText:n?"Project is read-only":"",onClick:()=>{c(!0)}}),e.jsx(Ce,{accessData:r,projectReadOnly:n,isDialogOpen:o,setIsDialogOpen:c})]})}const{useAppForm:ke}=W({fieldComponents:{TextField:K},formComponents:{SubmitButton:U,CancelButton:O},fieldContext:G,formContext:Q});function Pe({modelData:s,projectReadOnly:n,isDialogOpen:o,setIsDialogOpen:c}){const r=({formReset:t})=>{t(),c(!1)},h=$(),{mutate:m,isPending:x}=q({...ae(),onSuccess:()=>{h.invalidateQueries({queryKey:M()})},onError:t=>{var i;if(((i=t.response)==null?void 0:i.status)===S){const l=L(t);console.error(l),y.error(l)}},meta:{errorPrefix:"Error saving model information",preventDefaultErrorHandling:[S]}}),a=ke({defaultValues:{modelName:(s==null?void 0:s.name)??"",modelRevision:(s==null?void 0:s.revision)??"",modelDescription:s!=null&&s.description?s.description.join(`
`):""},onSubmit:({value:t,formApi:i})=>{m({body:{name:t.modelName.trim(),revision:t.modelRevision.trim(),description:t.modelDescription?[t.modelDescription.trim()]:void 0}},{onSuccess:()=>{y.info("Successfully set model information"),r({formReset:i.reset})}})}});return e.jsx(V,{open:o,$minWidth:"32em",children:e.jsxs("form",{onSubmit:t=>{t.preventDefault(),t.stopPropagation(),a.handleSubmit()},children:[e.jsx(d.Header,{children:e.jsx(d.Title,{children:"Model"})}),e.jsxs(d.Content,{children:[e.jsx(a.AppField,{name:"modelName",validators:{onBlur:_()},children:t=>e.jsx(t.TextField,{label:"Name"})}),e.jsx(g,{}),e.jsx(a.AppField,{name:"modelRevision",validators:{onBlur:_()},children:t=>e.jsx(t.TextField,{label:"Revision"})}),e.jsx(g,{}),e.jsx(a.AppField,{name:"modelDescription",children:t=>e.jsx(t.TextField,{label:"Description",multiline:!0,rows:5})})]}),e.jsxs(d.Actions,{children:[e.jsx(a.Subscribe,{selector:t=>[t.isDefaultValue,t.canSubmit],children:([t,i])=>e.jsx(a.SubmitButton,{label:"Save",disabled:t||!i||n,isPending:x,helperTextDisabled:n?"Project is read-only":void 0})}),e.jsx(a.CancelButton,{onClick:t=>{t.preventDefault(),r({formReset:a.reset})}})]})]})})}function Fe({modelData:s}){return e.jsx(T,{children:e.jsx("table",{children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("td",{children:s.name})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Revision"}),e.jsx("td",{children:s.revision})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Description"}),e.jsx("td",{children:s.description?e.jsx("span",{className:"multilineValue",children:s.description}):e.jsx("span",{className:"missingValue",children:"none"})})]})]})})})}function Ee({projectData:s,projectReadOnly:n}){const[o,c]=j.useState(!1),r=s.config.model;return e.jsxs(e.Fragment,{children:[e.jsx(C,{$variant:"h3",children:"Model"}),e.jsx(u,{children:"This section contains information about the model."}),e.jsxs(u,{children:["Each model needs a ",e.jsx("i",{children:"name"})," and ",e.jsx("i",{children:"revision"}),", usually matching your project's directory structure. For example, for the project path /project/field/resmod/ff/25.0.0/ the name would be ",e.jsx("i",{children:"ff"})," and the revision ",e.jsx("i",{children:"25.0.0"}),"."]}),r?e.jsx(Fe,{modelData:r}):e.jsx(w,{children:"No model information found in the project."}),e.jsx(H,{label:r?"Edit":"Add",disabled:n,tooltipText:n?"Project is read-only":"",onClick:()=>{c(!0)}}),e.jsx(Pe,{modelData:r,projectReadOnly:n,isDialogOpen:o,setIsDialogOpen:c})]})}function Ne({projectData:s}){const n=E(s.config.created_at);return e.jsxs(T,{children:[e.jsx(C,{$variant:"h3",$marginBottom:"0",children:s.project_dir_name}),e.jsxs(u,{$marginBottom:"0",children:[e.jsx("span",{className:"emphasis",children:s.path}),e.jsx("br",{}),"Created: ",n," by ",s.config.created_by,e.jsx("br",{}),"Last modified:"," ",s.config.last_modified_at?e.jsxs(e.Fragment,{children:[E(s.config.last_modified_at)," by"," ",s.config.last_modified_by??e.jsx("span",{className:"missingValue",children:"unknown"})]}):e.jsx("span",{className:"missingValue",children:"unknown"}),e.jsx("br",{}),"Version: ",s.config.version]})]})}function Ie({projectData:s,lockStatus:n}){return e.jsxs(e.Fragment,{children:[e.jsx(Ne,{projectData:s}),e.jsx(le,{lockStatus:n})]})}function Re({text:s}){const n=s!=="",o="No project selected"+(n?":":".");return e.jsxs(e.Fragment,{children:[e.jsx(u,{children:o}),n&&e.jsx(w,{children:s})]})}function Ae(){var o;const s=ce(),n=!(((o=s.lockStatus)==null?void 0:o.is_lock_acquired)??!1);return e.jsx(e.Fragment,{children:s.status&&s.data?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{projectData:s.data,lockStatus:s.lockStatus}),e.jsx(N,{projectReadOnly:n}),e.jsx(g,{}),e.jsx(Ee,{projectData:s.data,projectReadOnly:n}),e.jsx(g,{}),e.jsx(Te,{projectData:s.data,projectReadOnly:n})]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{text:s.text??""}),e.jsx(N,{projectReadOnly:n})]})})}const Le=function(){return e.jsxs(e.Fragment,{children:[e.jsx(C,{children:"Project"}),e.jsx(j.Suspense,{fallback:e.jsx(de,{}),children:e.jsx(Ae,{})})]})};export{Le as component};
