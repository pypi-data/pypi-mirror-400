import{y as Dt,d as me,u as m,z as Mt,A as Re,j as z,B as xe,e as x,f as Bt,C as yt,i as Gt,D as Lt,k as $e,c as L,o as B,a as g,E as _e,b as le,w as Vt,t as V,n as fe,F as Ne,r as ke,G as Ft,m as Le,v as Ve,g as Fe,s as Ue,H as Ut,I as Ht,x as jt}from"./runtime-dom.esm-bundler-BUwdlM-o.js";import{_ as ze}from"./_plugin-vue_export-helper-DlAUqK2U.js";/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const de=typeof document<"u";function _t(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Kt(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&_t(e.default)}const M=Object.assign;function Te(e,t){const n={};for(const s in t){const o=t[s];n[s]=ee(o)?o.map(e):e(o)}return n}const Ee=()=>{},ee=Array.isArray;function Ze(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}const wt=/#/g,qt=/&/g,Wt=/\//g,$t=/=/g,zt=/\?/g,Et=/\+/g,Qt=/%5B/g,Jt=/%5D/g,Rt=/%5E/g,Yt=/%60/g,At=/%7B/g,Xt=/%7C/g,Ct=/%7D/g,Zt=/%20/g;function Qe(e){return e==null?"":encodeURI(""+e).replace(Xt,"|").replace(Qt,"[").replace(Jt,"]")}function en(e){return Qe(e).replace(At,"{").replace(Ct,"}").replace(Rt,"^")}function He(e){return Qe(e).replace(Et,"%2B").replace(Zt,"+").replace(wt,"%23").replace(qt,"%26").replace(Yt,"`").replace(At,"{").replace(Ct,"}").replace(Rt,"^")}function tn(e){return He(e).replace($t,"%3D")}function nn(e){return Qe(e).replace(wt,"%23").replace(zt,"%3F")}function sn(e){return nn(e).replace(Wt,"%2F")}function Ae(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const on=/\/$/,rn=e=>e.replace(on,"");function De(e,t,n="/"){let s,o={},d="",f="";const v=t.indexOf("#");let r=t.indexOf("?");return r=v>=0&&r>v?-1:r,r>=0&&(s=t.slice(0,r),d=t.slice(r,v>0?v:t.length),o=e(d.slice(1))),v>=0&&(s=s||t.slice(0,v),f=t.slice(v,t.length)),s=un(s??t,n),{fullPath:s+d+f,path:s,query:o,hash:Ae(f)}}function an(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function et(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function ln(e,t,n){const s=t.matched.length-1,o=n.matched.length-1;return s>-1&&s===o&&pe(t.matched[s],n.matched[o])&&St(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function pe(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function St(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!cn(e[n],t[n]))return!1;return!0}function cn(e,t){return ee(e)?tt(e,t):ee(t)?tt(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function tt(e,t){return ee(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function un(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),o=s[s.length-1];(o===".."||o===".")&&s.push("");let d=n.length-1,f,v;for(f=0;f<s.length;f++)if(v=s[f],v!==".")if(v==="..")d>1&&d--;else break;return n.slice(0,d).join("/")+"/"+s.slice(f).join("/")}const se={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let je=function(e){return e.pop="pop",e.push="push",e}({}),Me=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function dn(e){if(!e)if(de){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),rn(e)}const fn=/^[^#]+#/;function pn(e,t){return e.replace(fn,"#")+t}function hn(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const Pe=()=>({left:window.scrollX,top:window.scrollY});function mn(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=hn(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function nt(e,t){return(history.state?history.state.position-t:-1)+e}const Ke=new Map;function vn(e,t){Ke.set(e,t)}function gn(e){const t=Ke.get(e);return Ke.delete(e),t}function yn(e){return typeof e=="string"||e&&typeof e=="object"}function It(e){return typeof e=="string"||typeof e=="symbol"}let H=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const Nt=Symbol("");H.MATCHER_NOT_FOUND+"",H.NAVIGATION_GUARD_REDIRECT+"",H.NAVIGATION_ABORTED+"",H.NAVIGATION_CANCELLED+"",H.NAVIGATION_DUPLICATED+"";function he(e,t){return M(new Error,{type:e,[Nt]:!0},t)}function ne(e,t){return e instanceof Error&&Nt in e&&(t==null||!!(e.type&t))}const _n=["params","query","hash"];function wn(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const n of _n)n in e&&(t[n]=e[n]);return JSON.stringify(t,null,2)}function En(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<n.length;++s){const o=n[s].replace(Et," "),d=o.indexOf("="),f=Ae(d<0?o:o.slice(0,d)),v=d<0?null:Ae(o.slice(d+1));if(f in t){let r=t[f];ee(r)||(r=t[f]=[r]),r.push(v)}else t[f]=v}return t}function st(e){let t="";for(let n in e){const s=e[n];if(n=tn(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(ee(s)?s.map(o=>o&&He(o)):[s&&He(s)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+n,o!=null&&(t+="="+o))})}return t}function Rn(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=ee(s)?s.map(o=>o==null?null:""+o):s==null?s:""+s)}return t}const An=Symbol(""),ot=Symbol(""),Je=Symbol(""),kt=Symbol(""),qe=Symbol("");function we(){let e=[];function t(s){return e.push(s),()=>{const o=e.indexOf(s);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function re(e,t,n,s,o,d=f=>f()){const f=s&&(s.enterCallbacks[o]=s.enterCallbacks[o]||[]);return()=>new Promise((v,r)=>{const u=i=>{i===!1?r(he(H.NAVIGATION_ABORTED,{from:n,to:t})):i instanceof Error?r(i):yn(i)?r(he(H.NAVIGATION_GUARD_REDIRECT,{from:t,to:i})):(f&&s.enterCallbacks[o]===f&&typeof i=="function"&&f.push(i),v())},p=d(()=>e.call(s&&s.instances[o],t,n,u));let a=Promise.resolve(p);e.length<3&&(a=a.then(u)),a.catch(i=>r(i))})}function Be(e,t,n,s,o=d=>d()){const d=[];for(const f of e)for(const v in f.components){let r=f.components[v];if(!(t!=="beforeRouteEnter"&&!f.instances[v]))if(_t(r)){const u=(r.__vccOpts||r)[t];u&&d.push(re(u,n,s,f,v,o))}else{let u=r();d.push(()=>u.then(p=>{if(!p)throw new Error(`Couldn't resolve component "${v}" at "${f.path}"`);const a=Kt(p)?p.default:p;f.mods[v]=p,f.components[v]=a;const i=(a.__vccOpts||a)[t];return i&&re(i,n,s,f,v,o)()}))}}return d}function Cn(e,t){const n=[],s=[],o=[],d=Math.max(t.matched.length,e.matched.length);for(let f=0;f<d;f++){const v=t.matched[f];v&&(e.matched.find(u=>pe(u,v))?s.push(v):n.push(v));const r=e.matched[f];r&&(t.matched.find(u=>pe(u,r))||o.push(r))}return[n,s,o]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Sn=()=>location.protocol+"//"+location.host;function Pt(e,t){const{pathname:n,search:s,hash:o}=t,d=e.indexOf("#");if(d>-1){let f=o.includes(e.slice(d))?e.slice(d).length:1,v=o.slice(f);return v[0]!=="/"&&(v="/"+v),et(v,"")}return et(n,e)+s+o}function In(e,t,n,s){let o=[],d=[],f=null;const v=({state:i})=>{const l=Pt(e,location),A=n.value,S=t.value;let N=0;if(i){if(n.value=l,t.value=i,f&&f===A){f=null;return}N=S?i.position-S.position:0}else s(l);o.forEach(O=>{O(n.value,A,{delta:N,type:je.pop,direction:N?N>0?Me.forward:Me.back:Me.unknown})})};function r(){f=n.value}function u(i){o.push(i);const l=()=>{const A=o.indexOf(i);A>-1&&o.splice(A,1)};return d.push(l),l}function p(){if(document.visibilityState==="hidden"){const{history:i}=window;if(!i.state)return;i.replaceState(M({},i.state,{scroll:Pe()}),"")}}function a(){for(const i of d)i();d=[],window.removeEventListener("popstate",v),window.removeEventListener("pagehide",p),document.removeEventListener("visibilitychange",p)}return window.addEventListener("popstate",v),window.addEventListener("pagehide",p),document.addEventListener("visibilitychange",p),{pauseListeners:r,listen:u,destroy:a}}function rt(e,t,n,s=!1,o=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:o?Pe():null}}function Nn(e){const{history:t,location:n}=window,s={value:Pt(e,n)},o={value:t.state};o.value||d(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function d(r,u,p){const a=e.indexOf("#"),i=a>-1?(n.host&&document.querySelector("base")?e:e.slice(a))+r:Sn()+e+r;try{t[p?"replaceState":"pushState"](u,"",i),o.value=u}catch(l){console.error(l),n[p?"replace":"assign"](i)}}function f(r,u){d(r,M({},t.state,rt(o.value.back,r,o.value.forward,!0),u,{position:o.value.position}),!0),s.value=r}function v(r,u){const p=M({},o.value,t.state,{forward:r,scroll:Pe()});d(p.current,p,!0),d(r,M({},rt(s.value,r,null),{position:p.position+1},u),!1),s.value=r}return{location:s,state:o,push:v,replace:f}}function kn(e){e=dn(e);const t=Nn(e),n=In(e,t.state,t.location,t.replace);function s(d,f=!0){f||n.pauseListeners(),history.go(d)}const o=M({location:"",base:e,go:s,createHref:pn.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}let ie=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var $=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}($||{});const Pn={type:ie.Static,value:""},On=/[a-zA-Z0-9_]/;function bn(e){if(!e)return[[]];if(e==="/")return[[Pn]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(l){throw new Error(`ERR (${n})/"${u}": ${l}`)}let n=$.Static,s=n;const o=[];let d;function f(){d&&o.push(d),d=[]}let v=0,r,u="",p="";function a(){u&&(n===$.Static?d.push({type:ie.Static,value:u}):n===$.Param||n===$.ParamRegExp||n===$.ParamRegExpEnd?(d.length>1&&(r==="*"||r==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),d.push({type:ie.Param,value:u,regexp:p,repeatable:r==="*"||r==="+",optional:r==="*"||r==="?"})):t("Invalid state to consume buffer"),u="")}function i(){u+=r}for(;v<e.length;){if(r=e[v++],r==="\\"&&n!==$.ParamRegExp){s=n,n=$.EscapeNext;continue}switch(n){case $.Static:r==="/"?(u&&a(),f()):r===":"?(a(),n=$.Param):i();break;case $.EscapeNext:i(),n=s;break;case $.Param:r==="("?n=$.ParamRegExp:On.test(r)?i():(a(),n=$.Static,r!=="*"&&r!=="?"&&r!=="+"&&v--);break;case $.ParamRegExp:r===")"?p[p.length-1]=="\\"?p=p.slice(0,-1)+r:n=$.ParamRegExpEnd:p+=r;break;case $.ParamRegExpEnd:a(),n=$.Static,r!=="*"&&r!=="?"&&r!=="+"&&v--,p="";break;default:t("Unknown state");break}}return n===$.ParamRegExp&&t(`Unfinished custom RegExp for param "${u}"`),a(),f(),o}const at="[^/]+?",xn={sensitive:!1,strict:!1,start:!0,end:!0};var J=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(J||{});const Tn=/[.+*?^${}()[\]/\\]/g;function Dn(e,t){const n=M({},xn,t),s=[];let o=n.start?"^":"";const d=[];for(const u of e){const p=u.length?[]:[J.Root];n.strict&&!u.length&&(o+="/");for(let a=0;a<u.length;a++){const i=u[a];let l=J.Segment+(n.sensitive?J.BonusCaseSensitive:0);if(i.type===ie.Static)a||(o+="/"),o+=i.value.replace(Tn,"\\$&"),l+=J.Static;else if(i.type===ie.Param){const{value:A,repeatable:S,optional:N,regexp:O}=i;d.push({name:A,repeatable:S,optional:N});const h=O||at;if(h!==at){l+=J.BonusCustomRegExp;try{`${h}`}catch(R){throw new Error(`Invalid custom RegExp for param "${A}" (${h}): `+R.message)}}let y=S?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;a||(y=N&&u.length<2?`(?:/${y})`:"/"+y),N&&(y+="?"),o+=y,l+=J.Dynamic,N&&(l+=J.BonusOptional),S&&(l+=J.BonusRepeatable),h===".*"&&(l+=J.BonusWildcard)}p.push(l)}s.push(p)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=J.BonusStrict}n.strict||(o+="/?"),n.end?o+="$":n.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const f=new RegExp(o,n.sensitive?"":"i");function v(u){const p=u.match(f),a={};if(!p)return null;for(let i=1;i<p.length;i++){const l=p[i]||"",A=d[i-1];a[A.name]=l&&A.repeatable?l.split("/"):l}return a}function r(u){let p="",a=!1;for(const i of e){(!a||!p.endsWith("/"))&&(p+="/"),a=!1;for(const l of i)if(l.type===ie.Static)p+=l.value;else if(l.type===ie.Param){const{value:A,repeatable:S,optional:N}=l,O=A in u?u[A]:"";if(ee(O)&&!S)throw new Error(`Provided param "${A}" is an array but it is not repeatable (* or + modifiers)`);const h=ee(O)?O.join("/"):O;if(!h)if(N)i.length<2&&(p.endsWith("/")?p=p.slice(0,-1):a=!0);else throw new Error(`Missing required param "${A}"`);p+=h}}return p||"/"}return{re:f,score:s,keys:d,parse:v,stringify:r}}function Mn(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===J.Static+J.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===J.Static+J.Segment?1:-1:0}function Ot(e,t){let n=0;const s=e.score,o=t.score;for(;n<s.length&&n<o.length;){const d=Mn(s[n],o[n]);if(d)return d;n++}if(Math.abs(o.length-s.length)===1){if(it(s))return 1;if(it(o))return-1}return o.length-s.length}function it(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Bn={strict:!1,end:!0,sensitive:!1};function Gn(e,t,n){const s=Dn(bn(e.path),n),o=M(s,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Ln(e,t){const n=[],s=new Map;t=Ze(Bn,t);function o(a){return s.get(a)}function d(a,i,l){const A=!l,S=ct(a);S.aliasOf=l&&l.record;const N=Ze(t,a),O=[S];if("alias"in a){const R=typeof a.alias=="string"?[a.alias]:a.alias;for(const T of R)O.push(ct(M({},S,{components:l?l.record.components:S.components,path:T,aliasOf:l?l.record:S})))}let h,y;for(const R of O){const{path:T}=R;if(i&&T[0]!=="/"){const q=i.record.path,j=q[q.length-1]==="/"?"":"/";R.path=i.record.path+(T&&j+T)}if(h=Gn(R,i,N),l?l.alias.push(h):(y=y||h,y!==h&&y.alias.push(h),A&&a.name&&!ut(h)&&f(a.name)),bt(h)&&r(h),S.children){const q=S.children;for(let j=0;j<q.length;j++)d(q[j],h,l&&l.children[j])}l=l||h}return y?()=>{f(y)}:Ee}function f(a){if(It(a)){const i=s.get(a);i&&(s.delete(a),n.splice(n.indexOf(i),1),i.children.forEach(f),i.alias.forEach(f))}else{const i=n.indexOf(a);i>-1&&(n.splice(i,1),a.record.name&&s.delete(a.record.name),a.children.forEach(f),a.alias.forEach(f))}}function v(){return n}function r(a){const i=Un(a,n);n.splice(i,0,a),a.record.name&&!ut(a)&&s.set(a.record.name,a)}function u(a,i){let l,A={},S,N;if("name"in a&&a.name){if(l=s.get(a.name),!l)throw he(H.MATCHER_NOT_FOUND,{location:a});N=l.record.name,A=M(lt(i.params,l.keys.filter(y=>!y.optional).concat(l.parent?l.parent.keys.filter(y=>y.optional):[]).map(y=>y.name)),a.params&&lt(a.params,l.keys.map(y=>y.name))),S=l.stringify(A)}else if(a.path!=null)S=a.path,l=n.find(y=>y.re.test(S)),l&&(A=l.parse(S),N=l.record.name);else{if(l=i.name?s.get(i.name):n.find(y=>y.re.test(i.path)),!l)throw he(H.MATCHER_NOT_FOUND,{location:a,currentLocation:i});N=l.record.name,A=M({},i.params,a.params),S=l.stringify(A)}const O=[];let h=l;for(;h;)O.unshift(h.record),h=h.parent;return{name:N,path:S,params:A,matched:O,meta:Fn(O)}}e.forEach(a=>d(a));function p(){n.length=0,s.clear()}return{addRoute:d,resolve:u,removeRoute:f,clearRoutes:p,getRoutes:v,getRecordMatcher:o}}function lt(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function ct(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Vn(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Vn(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function ut(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Fn(e){return e.reduce((t,n)=>M(t,n.meta),{})}function Un(e,t){let n=0,s=t.length;for(;n!==s;){const d=n+s>>1;Ot(e,t[d])<0?s=d:n=d+1}const o=Hn(e);return o&&(s=t.lastIndexOf(o,s-1)),s}function Hn(e){let t=e;for(;t=t.parent;)if(bt(t)&&Ot(e,t)===0)return t}function bt({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function dt(e){const t=Re(Je),n=Re(kt),s=z(()=>{const r=m(e.to);return t.resolve(r)}),o=z(()=>{const{matched:r}=s.value,{length:u}=r,p=r[u-1],a=n.matched;if(!p||!a.length)return-1;const i=a.findIndex(pe.bind(null,p));if(i>-1)return i;const l=ft(r[u-2]);return u>1&&ft(p)===l&&a[a.length-1].path!==l?a.findIndex(pe.bind(null,r[u-2])):i}),d=z(()=>o.value>-1&&$n(n.params,s.value.params)),f=z(()=>o.value>-1&&o.value===n.matched.length-1&&St(n.params,s.value.params));function v(r={}){if(Wn(r)){const u=t[m(e.replace)?"replace":"push"](m(e.to)).catch(Ee);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:z(()=>s.value.href),isActive:d,isExactActive:f,navigate:v}}function jn(e){return e.length===1?e[0]:e}const Kn=me({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:dt,setup(e,{slots:t}){const n=Lt(dt(e)),{options:s}=Re(Je),o=z(()=>({[pt(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[pt(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const d=t.default&&jn(t.default(n));return e.custom?d:yt("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},d)}}}),qn=Kn;function Wn(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function $n(e,t){for(const n in t){const s=t[n],o=e[n];if(typeof s=="string"){if(s!==o)return!1}else if(!ee(o)||o.length!==s.length||s.some((d,f)=>d.valueOf()!==o[f].valueOf()))return!1}return!0}function ft(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const pt=(e,t,n)=>e??t??n,zn=me({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=Re(qe),o=z(()=>e.route||s.value),d=Re(ot,0),f=z(()=>{let u=m(d);const{matched:p}=o.value;let a;for(;(a=p[u])&&!a.components;)u++;return u}),v=z(()=>o.value.matched[f.value]);xe(ot,z(()=>f.value+1)),xe(An,v),xe(qe,o);const r=x();return Bt(()=>[r.value,v.value,e.name],([u,p,a],[i,l,A])=>{p&&(p.instances[a]=u,l&&l!==p&&u&&u===i&&(p.leaveGuards.size||(p.leaveGuards=l.leaveGuards),p.updateGuards.size||(p.updateGuards=l.updateGuards))),u&&p&&(!l||!pe(p,l)||!i)&&(p.enterCallbacks[a]||[]).forEach(S=>S(u))},{flush:"post"}),()=>{const u=o.value,p=e.name,a=v.value,i=a&&a.components[p];if(!i)return ht(n.default,{Component:i,route:u});const l=a.props[p],A=l?l===!0?u.params:typeof l=="function"?l(u):l:null,N=yt(i,M({},A,t,{onVnodeUnmounted:O=>{O.component.isUnmounted&&(a.instances[p]=null)},ref:r}));return ht(n.default,{Component:N,route:u})||N}}});function ht(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Qn=zn;function Jn(e){const t=Ln(e.routes,e),n=e.parseQuery||En,s=e.stringifyQuery||st,o=e.history,d=we(),f=we(),v=we(),r=Dt(se);let u=se;de&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const p=Te.bind(null,c=>""+c),a=Te.bind(null,sn),i=Te.bind(null,Ae);function l(c,E){let _,C;return It(c)?(_=t.getRecordMatcher(c),C=E):C=c,t.addRoute(C,_)}function A(c){const E=t.getRecordMatcher(c);E&&t.removeRoute(E)}function S(){return t.getRoutes().map(c=>c.record)}function N(c){return!!t.getRecordMatcher(c)}function O(c,E){if(E=M({},E||r.value),typeof c=="string"){const k=De(n,c,E.path),W=t.resolve({path:k.path},E),ye=o.createHref(k.fullPath);return M(k,W,{params:i(W.params),hash:Ae(k.hash),redirectedFrom:void 0,href:ye})}let _;if(c.path!=null)_=M({},c,{path:De(n,c.path,E.path).path});else{const k=M({},c.params);for(const W in k)k[W]==null&&delete k[W];_=M({},c,{params:a(k)}),E.params=a(E.params)}const C=t.resolve(_,E),D=c.hash||"";C.params=p(i(C.params));const K=an(s,M({},c,{hash:en(D),path:C.path})),b=o.createHref(K);return M({fullPath:K,hash:D,query:s===st?Rn(c.query):c.query||{}},C,{redirectedFrom:void 0,href:b})}function h(c){return typeof c=="string"?De(n,c,r.value.path):M({},c)}function y(c,E){if(u!==c)return he(H.NAVIGATION_CANCELLED,{from:E,to:c})}function R(c){return j(c)}function T(c){return R(M(h(c),{replace:!0}))}function q(c,E){const _=c.matched[c.matched.length-1];if(_&&_.redirect){const{redirect:C}=_;let D=typeof C=="function"?C(c,E):C;return typeof D=="string"&&(D=D.includes("?")||D.includes("#")?D=h(D):{path:D},D.params={}),M({query:c.query,hash:c.hash,params:D.path!=null?{}:c.params},D)}}function j(c,E){const _=u=O(c),C=r.value,D=c.state,K=c.force,b=c.replace===!0,k=q(_,C);if(k)return j(M(h(k),{state:typeof k=="object"?M({},D,k.state):D,force:K,replace:b}),E||_);const W=_;W.redirectedFrom=E;let ye;return!K&&ln(s,C,_)&&(ye=he(H.NAVIGATION_DUPLICATED,{to:W,from:C}),Xe(C,C,!0,!1)),(ye?Promise.resolve(ye):U(W,C)).catch(X=>ne(X)?ne(X,H.NAVIGATION_GUARD_REDIRECT)?X:ve(X):ae(X,W,C)).then(X=>{if(X){if(ne(X,H.NAVIGATION_GUARD_REDIRECT))return j(M({replace:b},h(X.to),{state:typeof X.to=="object"?M({},D,X.to.state):D,force:K}),E||W)}else X=G(W,C,!0,b,D);return F(W,C,X),X})}function Y(c,E){const _=y(c,E);return _?Promise.reject(_):Promise.resolve()}function I(c){const E=Ce.values().next().value;return E&&typeof E.runWithContext=="function"?E.runWithContext(c):c()}function U(c,E){let _;const[C,D,K]=Cn(c,E);_=Be(C.reverse(),"beforeRouteLeave",c,E);for(const k of C)k.leaveGuards.forEach(W=>{_.push(re(W,c,E))});const b=Y.bind(null,c,E);return _.push(b),ue(_).then(()=>{_=[];for(const k of d.list())_.push(re(k,c,E));return _.push(b),ue(_)}).then(()=>{_=Be(D,"beforeRouteUpdate",c,E);for(const k of D)k.updateGuards.forEach(W=>{_.push(re(W,c,E))});return _.push(b),ue(_)}).then(()=>{_=[];for(const k of K)if(k.beforeEnter)if(ee(k.beforeEnter))for(const W of k.beforeEnter)_.push(re(W,c,E));else _.push(re(k.beforeEnter,c,E));return _.push(b),ue(_)}).then(()=>(c.matched.forEach(k=>k.enterCallbacks={}),_=Be(K,"beforeRouteEnter",c,E,I),_.push(b),ue(_))).then(()=>{_=[];for(const k of f.list())_.push(re(k,c,E));return _.push(b),ue(_)}).catch(k=>ne(k,H.NAVIGATION_CANCELLED)?k:Promise.reject(k))}function F(c,E,_){v.list().forEach(C=>I(()=>C(c,E,_)))}function G(c,E,_,C,D){const K=y(c,E);if(K)return K;const b=E===se,k=de?history.state:{};_&&(C||b?o.replace(c.fullPath,M({scroll:b&&k&&k.scroll},D)):o.push(c.fullPath,D)),r.value=c,Xe(c,E,_,b),ve()}let w;function P(){w||(w=o.listen((c,E,_)=>{if(!ge.listening)return;const C=O(c),D=q(C,ge.currentRoute.value);if(D){j(M(D,{replace:!0,force:!0}),C).catch(Ee);return}u=C;const K=r.value;de&&vn(nt(K.fullPath,_.delta),Pe()),U(C,K).catch(b=>ne(b,H.NAVIGATION_ABORTED|H.NAVIGATION_CANCELLED)?b:ne(b,H.NAVIGATION_GUARD_REDIRECT)?(j(M(h(b.to),{force:!0}),C).then(k=>{ne(k,H.NAVIGATION_ABORTED|H.NAVIGATION_DUPLICATED)&&!_.delta&&_.type===je.pop&&o.go(-1,!1)}).catch(Ee),Promise.reject()):(_.delta&&o.go(-_.delta,!1),ae(b,C,K))).then(b=>{b=b||G(C,K,!1),b&&(_.delta&&!ne(b,H.NAVIGATION_CANCELLED)?o.go(-_.delta,!1):_.type===je.pop&&ne(b,H.NAVIGATION_ABORTED|H.NAVIGATION_DUPLICATED)&&o.go(-1,!1)),F(C,K,b)}).catch(Ee)}))}let Q=we(),Z=we(),te;function ae(c,E,_){ve(c);const C=Z.list();return C.length?C.forEach(D=>D(c,E,_)):console.error(c),Promise.reject(c)}function ce(){return te&&r.value!==se?Promise.resolve():new Promise((c,E)=>{Q.add([c,E])})}function ve(c){return te||(te=!c,P(),Q.list().forEach(([E,_])=>c?_(c):E()),Q.reset()),c}function Xe(c,E,_,C){const{scrollBehavior:D}=e;if(!de||!D)return Promise.resolve();const K=!_&&gn(nt(c.fullPath,0))||(C||!_)&&history.state&&history.state.scroll||null;return Gt().then(()=>D(c,E,K)).then(b=>b&&mn(b)).catch(b=>ae(b,c,E))}const Oe=c=>o.go(c);let be;const Ce=new Set,ge={currentRoute:r,listening:!0,addRoute:l,removeRoute:A,clearRoutes:t.clearRoutes,hasRoute:N,getRoutes:S,resolve:O,options:e,push:R,replace:T,go:Oe,back:()=>Oe(-1),forward:()=>Oe(1),beforeEach:d.add,beforeResolve:f.add,afterEach:v.add,onError:Z.add,isReady:ce,install(c){c.component("RouterLink",qn),c.component("RouterView",Qn),c.config.globalProperties.$router=ge,Object.defineProperty(c.config.globalProperties,"$route",{enumerable:!0,get:()=>m(r)}),de&&!be&&r.value===se&&(be=!0,R(o.location).catch(C=>{}));const E={};for(const C in se)Object.defineProperty(E,C,{get:()=>r.value[C],enumerable:!0});c.provide(Je,ge),c.provide(kt,Mt(E)),c.provide(qe,r);const _=c.unmount;Ce.add(c),c.unmount=function(){Ce.delete(c),Ce.size<1&&(u=se,w&&w(),w=null,r.value=se,be=!1,te=!1),_()}}};function ue(c){return c.reduce((E,_)=>E.then(()=>I(_)),Promise.resolve())}return ge}async function Yn(){try{return await(await fetch("/api/info")).json()}catch(e){throw console.error("Failed to fetch info:",e),new Error(e.message||"获取启动信息失败")}}async function Xn(){try{const t=await(await fetch("/api/items")).json();return Array.isArray(t.items)?t.items:[]}catch(e){throw console.error("Failed to fetch items:",e),new Error("加载列表失败，请稍后重试")}}async function Zn(){try{const e=await fetch("/api/files"),t=await e.json();if(!e.ok)throw new Error(t.error||"加载失败");return t}catch(e){throw console.error("Failed to fetch files:",e),new Error(e.message||"加载文件列表失败，请稍后重试")}}async function es(e){try{const t=await fetch("/api/files/pick",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e})}),n=await t.json();if(!t.ok)throw new Error(n.error||"抽取失败");return n}catch(t){throw console.error("Failed to pick file:",t),new Error(t.message||"抽取失败")}}async function ts(e){try{const t=await fetch(`/api/files/result/${encodeURIComponent(e)}`);if(!t.ok)throw new Error("获取结果失败");return await t.json()}catch(t){throw console.error("Failed to get file result:",t),new Error(t.message||"获取结果失败")}}async function ns(e){try{if(!(await fetch("/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})})).ok)throw new Error("密码错误")}catch(t){throw console.error("Failed to login:",t),new Error(t.message||"登录失败")}}async function ss(e){try{const t=await fetch("/api/admin/codes",{headers:{"X-Admin-Password":e}});if(!t.ok)throw new Error("获取列表失败");return await t.json()}catch(t){throw console.error("Failed to fetch admin codes:",t),new Error(t.message||"获取列表失败")}}async function os(e,t){try{const n=await fetch("/api/admin/codes/add",{method:"POST",headers:{"Content-Type":"application/json","X-Admin-Password":e},body:JSON.stringify({code:t})}),s=await n.json();if(!n.ok)throw new Error(s.error||"添加失败");return s}catch(n){throw console.error("Failed to add admin code:",n),new Error(n.message||"添加失败")}}function rs(){const e=x([]),t=x(new Set),n=x(!1),s=x(3),o=x(!1),d=x("正在加载列表..."),f=x(""),v=x(""),r=z(()=>e.value.length>0),u=z(()=>t.value.size>0),p=z(()=>n.value?e.value.map((h,y)=>y).filter(h=>!t.value.has(h)):e.value.map((h,y)=>y));function a(h,y=""){d.value=h,f.value=y}async function i(){a("正在加载列表...");try{const h=await Xn();e.value=h,t.value.clear(),h.length?a(`已加载 ${h.length} 条候选项`,"ok"):a("列表为空，请先在命令行使用 --add 添加项目","err")}catch(h){a(h.message,"err")}}function l(){t.value.clear(),a("已重置，所有项目可重新抽取","ok")}function A(){n.value=!n.value}function S(h){s.value=h}function N(h){n.value&&t.value.add(h)}function O(h){v.value=h}return{items:e,drawnIndices:t,noRepeatMode:n,drawSpeed:s,isDrawing:o,statusText:d,statusType:f,selectedWinner:v,hasItems:r,hasDrawn:u,availableIndices:p,setStatus:a,loadItems:i,resetDrawn:l,toggleNoRepeatMode:A,updateSpeed:S,markAsDrawn:N,setWinner:O}}function xt(){const e=x(-1);let t=null;function n(v){return new Promise(r=>{t=setTimeout(r,v)})}function s(v){e.value=v}function o(){e.value=-1}function d(){t&&(clearInterval(t),clearTimeout(t),t=null),o()}async function f(v,r,u){const p=new Map;r.forEach((w,P)=>{p.set(w,P)});const a=p.get(v);if(a===void 0)return v;let i=-1;const l=r.length,A=2.5,N=Math.floor(l*(A+Math.random()*(4-A))),O=Math.floor(N*Math.random()*.6),h=N+O,y=.6,T=Math.floor(l*(y+Math.random()*(1.2-y))),q=Math.floor(T*Math.random()*.4),j=T+q,Y=[{steps:h,delay:50},{steps:j,delay:120}];for(const w of Y)for(let P=0;P<w.steps;P++){i=(i+1)%l;const Q=r[i];s(Q),await n(w.delay*u)}const U=((a-i)%l+l)%l+l*2,F=180,G=550;for(let w=0;w<U;w++){i=(i+1)%l;const P=r[i];s(P);const Q=w/Math.max(1,U-1),Z=(F+(G-F)*Q)*u;await n(Z)}return r[i]}return{currentHighlightIndex:e,highlight:s,clearHighlight:o,stopAnimation:d,spinToTarget:f}}const as={class:"card"},is={class:"toolbar"},ls=["disabled"],cs=["checked"],us={class:"speed-control"},ds=["value"],fs={class:"speed-value"},ps={class:"layout"},hs={class:"panel"},ms={key:0,class:"list"},vs={class:"badge"},gs={key:1,class:"muted"},ys={class:"panel"},_s={class:"result"},ws={key:0,class:"title"},Es={key:1,class:"title"},Rs={class:"value"},As={key:2,class:"muted"},Cs={key:3,class:"muted"},Ss=me({__name:"ItemPick",setup(e){const{items:t,drawnIndices:n,noRepeatMode:s,drawSpeed:o,isDrawing:d,statusText:f,statusType:v,selectedWinner:r,hasItems:u,hasDrawn:p,availableIndices:a,setStatus:i,loadItems:l,resetDrawn:A,toggleNoRepeatMode:S,updateSpeed:N,markAsDrawn:O,setWinner:h}=rs(),{currentHighlightIndex:y,stopAnimation:R,spinToTarget:T}=xt();function q(Y){const I=Y.target;N(parseFloat(I.value))}async function j(){if(!u.value){i("列表为空，请先添加候选项","err");return}if(a.value.length===0){i("所有项目已抽取完毕，请点击「重置已抽取」或刷新列表","err");return}d.value=!0,i("正在选择..."),R();try{const Y=Math.floor(Math.random()*a.value.length),I=a.value[Y],U=t.value[I],F=o.value/3;await T(I,a.value,F),O(I),h(U),i("选择完成！","ok")}catch(Y){R(),i(Y.message||"随机选择失败","err")}finally{d.value=!1}}return $e(()=>{l()}),(Y,I)=>(B(),L("main",as,[I[11]||(I[11]=g("p",{class:"desc"},[_e(" 列表数据直接来自命令行的配置文件，使用 "),g("code",null,"fcbyk pick --add"),_e(" 即可更新。 ")],-1)),g("div",is,[g("button",{id:"start-btn",class:"primary",disabled:m(d),onClick:j}," 开始选择 ",8,ls),g("button",{class:"secondary",onClick:I[0]||(I[0]=(...U)=>m(l)&&m(l)(...U))},"刷新列表"),g("div",{class:"toggle-switch",onClick:I[3]||(I[3]=(...U)=>m(S)&&m(S)(...U))},[g("input",{type:"checkbox",checked:m(s),onClick:I[1]||(I[1]=Vt(()=>{},["stop"])),onChange:I[2]||(I[2]=(...U)=>m(S)&&m(S)(...U))},null,40,cs),I[5]||(I[5]=g("label",null,"无放回模式",-1))]),g("div",us,[I[6]||(I[6]=g("label",{for:"speed-slider"},"抽奖速度：",-1)),g("input",{type:"range",id:"speed-slider",min:"1",max:"8",value:m(o),step:"0.5",onInput:q},null,40,ds),g("span",fs,V(m(o))+"秒",1)]),m(p)?(B(),L("button",{key:0,class:"secondary",onClick:I[4]||(I[4]=(...U)=>m(A)&&m(A)(...U))}," 重置已抽取 ")):le("",!0)]),g("div",{class:fe(["status",m(v)])},[I[7]||(I[7]=g("span",{class:"badge-dot"},null,-1)),_e(" "+V(m(f)),1)],2),g("div",ps,[g("section",hs,[I[9]||(I[9]=g("h3",null,"候选列表",-1)),m(u)?(B(),L("div",ms,[(B(!0),L(Ne,null,ke(m(t),(U,F)=>(B(),L("div",{key:F,class:fe(["item",{active:m(y)===F,drawn:m(n).has(F)}])},[g("span",vs,V(F+1),1),g("span",null,V(U),1)],2))),128))])):(B(),L("p",gs,[...I[8]||(I[8]=[_e(" 列表为空，请在终端执行 ",-1),g("code",null,"fcbyk pick --add 项目",-1),_e(" 添加。 ",-1)])]))]),g("section",ys,[I[10]||(I[10]=g("h3",null,"最终结果",-1)),g("div",_s,[m(r)?(B(),L("div",ws,"本轮选中")):(B(),L("div",Es,"点击「开始」随机选出一项")),g("div",Rs,V(m(r)||"—"),1),m(r)?(B(),L("div",As," 数据来源：本地配置文件 ~/.fcbyk/pick.json ")):le("",!0),m(s)&&m(p)?(B(),L("div",Cs," 已抽取 "+V(m(n).size)+"/"+V(m(t).length)+" 项 ",1)):le("",!0)])])])]))}}),Is=ze(Ss,[["__scopeId","data-v-5b1a5935"]]),Ge="file_pick_history",mt="file_pick_session",oe="file_pick_pending_result";function Ns(){const e=x([]),t=x([]),n=x(3),s=x(!1),o=x("正在加载文件列表..."),d=x(""),f=x(null),v=x(""),r=x(""),u=x("ip"),p=x(0),a=x(0),i=x(0),l=x(""),A=z(()=>e.value.length>0),S=z(()=>t.value.length>0),N=z(()=>u.value==="code"?`已使用抽奖码：${p.value} / ${a.value}`:`抽奖次数（按 IP 统计）：${i.value}`),O=z(()=>u.value==="code"?"提示：每个抽奖码只能成功抽取一次，可在命令行生成多个抽奖码发给学生。":"提示：同一 IP 只能抽一次，抽中后可反复下载。");function h(){try{const w=localStorage.getItem(Ge);t.value=w?JSON.parse(w):[]}catch{t.value=[]}}function y(){try{localStorage.setItem(Ge,JSON.stringify(t.value))}catch(w){console.warn("Failed to save history:",w)}}function R(w,P=""){o.value=w,d.value=P}function T(w){return w>=1024*1024?(w/1024/1024).toFixed(1)+" MB":w>=1024?(w/1024).toFixed(1)+" KB":w+" B"}async function q(){R("正在加载文件列表...");try{const w=await Zn();e.value=Array.isArray(w.files)?w.files:[],u.value=w.mode||"ip",p.value=w.used_codes||0,a.value=w.total_codes||0,i.value=w.draw_count||0,l.value=w.session_id||"";const P=localStorage.getItem(mt);P&&P!==l.value&&(t.value=[],localStorage.removeItem(Ge),localStorage.removeItem(oe)),localStorage.setItem(mt,l.value),e.value.length?R(`已加载 ${e.value.length} 个文件，请输入兑换码后抽取`):R("目录中没有可用文件","err"),await j()}catch(w){R(w.message||"加载失败，请重试","err")}}async function j(){try{const w=localStorage.getItem(oe);if(!w)return;const Q=JSON.parse(w).code;if(!Q)return;try{const Z=await ts(Q),te=Z.file.name;e.value.findIndex(ce=>ce.name===te)>=0&&(f.value=Z.file,v.value=Z.download_url,t.value.some(ve=>ve.name===te)||(t.value.push(Z.file),y()),R("已恢复上次抽奖结果"))}catch(Z){console.warn("Failed to restore pending result:",Z)}localStorage.removeItem(oe)}catch{localStorage.removeItem(oe)}}async function Y(){if(!e.value.length)return;const w=(r.value||"").trim().toUpperCase();if(!w){R("请输入兑换码","err");return}s.value=!0,R("正在使用兑换码抽取...");try{const P=await es(w),Q=P.file.name,Z=P.code||w;localStorage.setItem(oe,JSON.stringify({code:Z,file:P.file,download_url:P.download_url}));const te=()=>{t.value.some(ce=>ce.name===Q)||(t.value.push(P.file),y()),u.value=P.mode||"ip",p.value=P.used_codes??P.draw_count??0,a.value=P.total_codes??0,i.value=P.draw_count??0};return{targetName:Q,targetIndex:e.value.findIndex(ae=>ae.name===Q),file:P.file,downloadUrl:P.download_url,updateHistory:te}}catch(P){throw localStorage.removeItem(oe),P}}function I(w,P){f.value=w,v.value=P,localStorage.removeItem(oe),R("抽取完成！可点击下方按钮下载文件"),r.value="",s.value=!1}function U(){localStorage.removeItem(oe),s.value=!1}function F(w){n.value=w}function G(){h(),q()}return{files:e,history:t,drawSpeed:n,isDrawing:s,statusText:o,statusType:d,selectedFile:f,downloadUrl:v,codeInput:r,mode:u,usedCodes:p,totalCodes:a,drawCount:i,hasFiles:A,hasHistory:S,counterText:N,limitHint:O,setStatus:R,formatSize:T,loadFiles:q,startDraw:Y,completeDraw:I,failDraw:U,updateSpeed:F,init:G}}const ks={class:"card"},Ps={class:"toolbar"},Os={class:"redeem"},bs=["disabled"],xs=["disabled"],Ts={class:"speed-control"},Ds=["value"],Ms={class:"speed-value"},Bs={class:"status"},Gs={class:"left"},Ls={class:"counter"},Vs={class:"layout"},Fs={class:"panel"},Us={key:0,class:"list"},Hs={class:"name"},js={class:"meta"},Ks={key:1,class:"muted",id:"empty-hint"},qs={class:"panel"},Ws={class:"result"},$s={class:"title"},zs={class:"value"},Qs=["href"],Js={key:1,class:"muted"},Ys={class:"muted"},Xs={class:"history"},Zs={class:"history-list"},eo={key:0},to=["href"],no={class:"size"},so=me({__name:"FilePick",setup(e){const{files:t,history:n,drawSpeed:s,isDrawing:o,statusText:d,selectedFile:f,downloadUrl:v,codeInput:r,hasFiles:u,hasHistory:p,counterText:a,limitHint:i,formatSize:l,loadFiles:A,startDraw:S,completeDraw:N,failDraw:O,updateSpeed:h,setStatus:y,init:R}=Ns(),{currentHighlightIndex:T,stopAnimation:q,spinToTarget:j}=xt();function Y(F){const G=F.target;h(parseFloat(G.value))}async function I(){if(u.value)try{q();const F=await S();if(!F)return;if(y("正在抽奖中..."),F.targetIndex>=0){const G=t.value.map((P,Q)=>Q),w=s.value/3;await j(F.targetIndex,G,w)}N(F.file,F.downloadUrl),F.updateHistory()}catch(F){y(F.message||"抽取失败","err"),O()}}$e(()=>{R(),window.addEventListener("pageshow",U)}),Ft(()=>{window.removeEventListener("pageshow",U)});function U(){A()}return(F,G)=>(B(),L("main",ks,[G[7]||(G[7]=g("h1",null,"文件抽奖",-1)),G[8]||(G[8]=g("p",{class:"desc"}," 通过随机生成的 4 位抽奖码进行抽奖，每个抽奖码只能成功抽取一次。抽中的文件可无限次下载，用于课后给学生随机分配作品 / 素材。 ",-1)),g("div",Ps,[g("div",Os,[Le(g("input",{"onUpdate:modelValue":G[0]||(G[0]=w=>Ue(r)?r.value=w:null),type:"text",placeholder:"输入 4 位抽奖码",maxlength:"10",disabled:m(o),onKeyup:Fe(I,["enter"])},null,40,bs),[[Ve,m(r)]]),g("button",{class:"primary",disabled:m(o)||!m(u),onClick:I}," 使用抽奖码抽文件 ",8,xs)]),g("div",Ts,[G[2]||(G[2]=g("label",{for:"speed-slider"},"抽奖速度：",-1)),g("input",{id:"speed-slider",type:"range",min:"1",max:"8",value:m(s),step:"0.5",onInput:Y},null,40,Ds),g("span",Ms,V(m(s))+"秒",1)]),g("button",{class:"secondary",onClick:G[1]||(G[1]=(...w)=>m(A)&&m(A)(...w))},"刷新列表")]),g("div",Bs,[g("div",Gs,[G[3]||(G[3]=g("span",{class:"badge-dot"},null,-1)),g("span",null,V(m(d)),1)]),g("div",Ls,V(m(a)),1)]),g("div",Vs,[g("section",Fs,[G[4]||(G[4]=g("h3",null,"候选文件",-1)),m(u)?(B(),L("div",Us,[(B(!0),L(Ne,null,ke(m(t),(w,P)=>(B(),L("div",{key:P,class:fe(["item",{active:m(T)===P}])},[g("div",Hs,V(w.name),1),g("div",js,"大小："+V(m(l)(w.size)),1)],2))),128))])):(B(),L("p",Ks," 目录下没有可用文件，请检查命令行指定的路径。 "))]),g("section",qs,[G[6]||(G[6]=g("h3",null,"抽取结果",-1)),g("div",Ws,[g("div",$s,V(m(f)?"本轮抽中":"输入抽奖码并点击「使用抽奖码抽文件」随机选出一个文件"),1),g("div",zs,V(m(f)?m(f).name:"—"),1),m(f)&&m(v)?(B(),L("a",{key:0,href:m(v),download:""}," 点击下载 ",8,Qs)):le("",!0),m(f)?(B(),L("div",Js," 大小："+V(m(l)(m(f).size)),1)):le("",!0),g("div",Ys,V(m(i)),1)]),g("div",Xs,[G[5]||(G[5]=g("div",{class:"history-title"},"已抽中的文件（本页）：",-1)),g("ul",Zs,[m(p)?(B(!0),L(Ne,{key:1},ke(m(n),(w,P)=>(B(),L("li",{key:P},[g("a",{class:"name",href:`/api/files/download/${encodeURIComponent(w.name)}`,download:""},V(w.name),9,to),g("span",no,V(m(l)(w.size||0)),1)]))),128)):(B(),L("li",eo,"暂无记录"))])])])])]))}}),oo=ze(so,[["__scopeId","data-v-35db4858"]]),vt="admin_authed",gt="admin_pw";function ro(){const e=x(""),t=x(""),n=x(!1),s=x(""),o=x([]),d=x(new Set),f=x(""),v=x(""),r=x(""),u=x(""),p=z(()=>{const R=o.value.length,T=o.value.filter(q=>q.used).length;return{total:R,used:T,left:R-T}});function a(R){return"████████".slice(0,R.length)}async function i(){if(!e.value){t.value="请输入密码";return}try{await ns(e.value),sessionStorage.setItem(vt,"1"),sessionStorage.setItem(gt,e.value),s.value=e.value,n.value=!0,t.value="",await l()}catch(R){t.value=R.message}}async function l(){try{const R=await ss(s.value);o.value=R.codes}catch(R){console.error("Failed to load codes:",R)}}function A(R){d.value.has(R)?d.value.delete(R):d.value.add(R)}async function S(R){try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(R);else{const T=document.createElement("textarea");T.value=R,T.style.position="fixed",T.style.opacity="0",document.body.appendChild(T),T.select(),document.execCommand("copy"),document.body.removeChild(T)}f.value=R,setTimeout(()=>{f.value=""},800)}catch(T){console.error("Failed to copy:",T)}}async function N(){const R=v.value.trim().toUpperCase();if(!R){r.value="请输入兑换码",u.value="error";return}if(!/^[A-Z0-9]+$/.test(R)){r.value="兑换码只能包含字母和数字",u.value="error";return}try{const T=await os(s.value,R);T.error?(r.value=T.error,u.value="error"):(r.value=`成功新增兑换码: ${R}`,u.value="success",v.value="",await l(),setTimeout(()=>{r.value="",u.value=""},2e3))}catch(T){r.value="添加失败: "+T.message,u.value="error"}}function O(R){return d.value.has(R)}function h(R){return f.value===R}function y(){sessionStorage.getItem(vt)==="1"&&(s.value=sessionStorage.getItem(gt)||"",s.value&&(n.value=!0,l()))}return{password:e,loginError:t,isAuthenticated:n,codes:o,revealedCodes:d,copiedCode:f,newCode:v,addCodeMsg:r,addCodeMsgType:u,stats:p,maskCode:a,handleLogin:i,loadCodes:l,toggleReveal:A,copyCode:S,handleAddCode:N,isCodeRevealed:O,isCodeCopied:h,init:y}}const ao={class:"card admin-card"},io={key:0,class:"login-section"},lo={key:0,class:"error-msg"},co={key:1,class:"panel"},uo={class:"stats"},fo={class:"stat"},po={class:"value"},ho={class:"stat"},mo={class:"value used"},vo={class:"stat"},go={class:"value left"},yo={class:"add-code-section"},_o={class:"add-code-form"},wo={class:"table"},Eo={key:0,class:"hidden"},Ro={key:1,class:"hidden"},Ao={class:"actions"},Co=["onClick"],So=["onClick"],Io=me({__name:"Admin",setup(e){const{password:t,loginError:n,isAuthenticated:s,codes:o,newCode:d,addCodeMsg:f,addCodeMsgType:v,stats:r,maskCode:u,handleLogin:p,toggleReveal:a,copyCode:i,handleAddCode:l,isCodeRevealed:A,isCodeCopied:S,init:N}=ro();return $e(()=>{N()}),(O,h)=>(B(),L("main",ao,[h[9]||(h[9]=g("h1",null,"兑换码管理",-1)),h[10]||(h[10]=g("p",{class:"desc"},"管理员查看与分发抽奖码",-1)),m(s)?(B(),L("div",co,[g("div",uo,[g("div",fo,[h[6]||(h[6]=g("div",{class:"label"},"总数",-1)),g("div",po,V(m(r).total),1)]),g("div",ho,[h[7]||(h[7]=g("div",{class:"label"},"已使用",-1)),g("div",mo,V(m(r).used),1)]),g("div",vo,[h[8]||(h[8]=g("div",{class:"label"},"剩余",-1)),g("div",go,V(m(r).left),1)])]),g("div",yo,[g("div",_o,[Le(g("input",{"onUpdate:modelValue":h[3]||(h[3]=y=>Ue(d)?d.value=y:null),type:"text",placeholder:"请输入兑换码",maxlength:"20",onKeypress:h[4]||(h[4]=Fe((...y)=>m(l)&&m(l)(...y),["enter"]))},null,544),[[Ve,m(d)]]),g("button",{class:"primary",onClick:h[5]||(h[5]=(...y)=>m(l)&&m(l)(...y))},"新增")]),g("div",{class:fe(["add-code-msg",m(v)])},V(m(f)),3)]),g("div",wo,[(B(!0),L(Ne,null,ke(m(o),y=>(B(),L("div",{class:"row",key:y.code},[g("div",{class:fe(["code",{used:y.used}])},[y.used||m(A)(y.code)?(B(),L("span",Eo,V(y.code),1)):(B(),L("span",Ro,V(m(u)(y.code)),1))],2),g("div",{class:fe(["status",y.used?"bad":"ok"])},V(y.used?"已使用":"未使用"),3),g("div",Ao,[y.used?le("",!0):(B(),L("button",{key:0,class:"secondary small",onClick:R=>m(a)(y.code)},V(m(A)(y.code)?"隐藏":"查看"),9,Co)),g("button",{class:"primary small",onClick:R=>m(i)(y.code)},V(m(S)(y.code)?"已复制":"复制"),9,So)])]))),128))])])):(B(),L("div",io,[Le(g("input",{"onUpdate:modelValue":h[0]||(h[0]=y=>Ue(t)?t.value=y:null),type:"password",placeholder:"请输入管理员密码",onKeypress:h[1]||(h[1]=Fe((...y)=>m(p)&&m(p)(...y),["enter"]))},null,544),[[Ve,m(t)]]),g("button",{class:"primary",style:{"margin-top":"12px"},onClick:h[2]||(h[2]=(...y)=>m(p)&&m(p)(...y))},"登录"),m(n)?(B(),L("p",lo,V(m(n)),1)):le("",!0)]))]))}}),No=ze(Io,[["__scopeId","data-v-2f2f5a08"]]),Tt=()=>window.location.pathname.includes("/pick/")?"/pick/":"/",Ye=Jn({history:kn(Tt()),routes:[{path:"/",name:"item-pick",component:Is},{path:"/f",name:"file-pick",component:oo},{path:"/admin",name:"admin",component:No}]});let Se=null,Ie=null;async function ko(){return Se||Ie||(Ie=Yn(),Se=await Ie,Se)}Ye.beforeEach(async(e,t,n)=>{const s=e.path,o=Tt(),d=o!=="/"?s.replace(o,"")||"/":s;try{const f=await ko();if(d==="/"&&f.files_mode){n("/f");return}if((d==="/f"||d==="/admin")&&!f.files_mode){n("/");return}}catch{if(d==="/f"||d==="/admin"){n("/");return}}n()});const Po=me({__name:"App",setup(e){return(t,n)=>{const s=Ut("router-view");return B(),Ht(s)}}}),We=jt(Po);We.use(Ye);Ye.isReady().then(()=>{We.mount("#app")}).catch(e=>{console.error("[App] Router ready error:",e),We.mount("#app")});
