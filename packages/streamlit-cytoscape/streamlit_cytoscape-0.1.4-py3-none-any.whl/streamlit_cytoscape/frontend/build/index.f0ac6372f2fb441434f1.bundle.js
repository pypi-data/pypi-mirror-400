"use strict";(self.webpackChunkstreamlit_cytoscape=self.webpackChunkstreamlit_cytoscape||[]).push([[57],{1208:(e,t,n)=>{n.d(t,{A:()=>g});var o=n(1601),a=n.n(o),r=n(6314),i=n.n(r),l=n(4417),d=n.n(l),s=new URL(n(6245),n.b),c=i()(a()),u=d()(s);c.push([e.id,`@font-face {\n    font-family: "Cairo";\n    src: url(${u}) format("truetype");\n    weight: 125 900;\n}\n\n/* ---------------------------------------------------- */\n/* ---------------------- Main ------------------------ */\n/* ---------------------------------------------------- */\nbody[data-theme="light"] {\n    --neutral-1: hsl(223, 0%, 100%);\n    --neutral-2: hsl(223, 0%, 99%);\n    --neutral-3: hsl(223, 23%, 95%);\n\n    --neutral-8: hsl(223, 0%, 47%);\n    --neutral-9: hsl(223, 19%, 7%);\n\n    --box-shadow: hsla(223, 19%, 7%, 0.15) 0px 0px 5px -0.5px;\n}\n\nbody[data-theme="dark"] {\n    --neutral-1: hsl(223, 19%, 7%);\n    --neutral-2: hsl(223, 19%, 10%);\n    --neutral-3: hsl(223, 19%, 16%);\n\n    --neutral-8: hsl(223, 0%, 60%);\n    --neutral-9: hsl(223, 0%, 100%);\n\n    --box-shadow: hsla(0, 0%, 0%, 1) 0px 0px 5px -0.5px;\n}\n\nhtml {\n    font-size: clamp(8px, 3px + 1vw, 14px);\n}\n\nbody {\n    margin: 0px;\n    font-family: "Cairo", sans-serif;\n    --default-margin: 0.5rem;\n    --transition-duration: 200ms;\n}\n\n.container {\n    box-sizing: border-box;\n    position: relative;\n    background-color: var(--neutral-1);\n    border: var(--neutral-3) dashed;\n}\n\n/* ---------------------------------------------------- */\n/* ---------------------- UTILITY ---------------------- */\n/* ---------------------------------------------------- */\n.bar {\n    z-index: 2;\n    position: absolute;\n    margin: var(--default-margin);\n    transition-duration: var(--transition-duration);\n    display: flex;\n    background-color: var(--neutral-2);\n    box-shadow: var(--box-shadow);\n}\n\n.bar__item {\n    display: flex;\n    vertical-align: middle;\n    align-items: center;\n    cursor: pointer;\n    &:hover {\n        background-color: var(--neutral-3);\n    }\n    &:active {\n        background-color: var(--neutral-2);\n    }\n}\n\n.bar__icon {\n    fill: var(--neutral-9);\n    height: 60%;\n    width: 60%;\n    margin: auto;\n}\n\n.bar__hr {\n    margin: 0;\n    border: var(--neutral-3) solid 0.5px;\n}\n\n/* ---------------------------------------------------- */\n/* --------------- Cyotscape Container ---------------- */\n/* ---------------------------------------------------- */\n.cy {\n    z-index: 1;\n    height: 100%;\n    box-sizing: border-box;\n    width: 100%;\n}\n\n/* ---------------------------------------------------- */\n/* --------------- Information Panel ------------------ */\n/* ---------------------------------------------------- */\n.infopanel {\n    z-index: 2;\n    box-sizing: border-box;\n    position: absolute;\n    top: 0rem;\n    bottom: 0rem;\n    margin: var(--default-margin);\n    width: 0rem;\n    transition-duration: var(--transition-duration);\n    /* content */\n    display: flex;\n    flex-direction: column;\n    padding: 1rem;\n    /* theme */\n    box-shadow: var(--box-shadow);\n    background-color: var(--neutral-2);\n}\n\n.infopanel[data-expanded="true"] {\n    width: 17.5rem;\n\n    & .infopanel__props {\n        border: var(--neutral-3) solid;\n    }\n    & .infopanel__help {\n        display: none;\n    }\n}\n\n.infopanel__help {\n    position: absolute;\n    bottom: calc(50% - 5rem);\n    left: 0rem;\n    height: auto;\n    transform: rotate(-90deg);\n    transform-origin: left top;\n    white-space: nowrap;\n}\n\n.infopanel__label {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n}\n\n.infopanel__name {\n    text-align: center;\n    align-content: center;\n    border-radius: 0.5rem;\n    border: var(--neutral-2) solid;\n    margin: auto;\n    width: 75%;\n    height: 2rem;\n    /* theme */\n    color: var(--neutral-9);\n    background-color: var(--neutral-2);\n    font-weight: 600;\n}\n\n.infopanel__icon {\n    width: 2rem;\n    height: 2rem;\n    border-radius: 1.3rem;\n    margin: auto 0.5rem;\n    /* theme */\n    color: var(--neutral-9);\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: 65%;\n}\n\n.infopanel__props {\n    padding: 1rem;\n    margin-top: 1rem;\n    /* content */\n    display: flex;\n    flex-direction: column;\n    flex: 1px;\n    row-gap: 1rem;\n    overflow: auto;\n}\n\n.infopanel__key {\n    margin: 0;\n    line-height: 1.5rem;\n    color: var(--neutral-8);\n}\n\n.infopanel__val {\n    margin: 0;\n    line-height: 1.5rem;\n    color: var(--neutral-9);\n    font-weight: 600;\n}\n\n/* ---------------------------------------------------- */\n/* -------------------- Layout ------------------------ */\n/* ---------------------------------------------------- */\n#nodeActions {\n    left: 2.5rem; /*2.0 + 0.0 + 0.5*/\n    top: 0rem;\n    width: 2rem;\n    flex-direction: column;\n\n    &[data-expanded="true"] {\n        left: 18rem; /*2.0 + 17.5 + 0.5*/\n    }\n\n    & .bar__item {\n        height: 2.5rem;\n        display: none;\n    }\n}\n\n#toolbar {\n    top: 0rem;\n    right: 0rem;\n    height: 2rem;\n\n    & .bar__item {\n        width: 2.5rem;\n    }\n}\n\n#viewbar {\n    bottom: 0rem;\n    right: 0rem;\n    width: 2rem;\n    flex-direction: column;\n\n    & .bar__item {\n        height: 2.5rem;\n    }\n\n    & .viewbar__zoom {\n        height: 4rem;\n    }\n}\n`,""]);const g=c},6245:(e,t,n)=>{e.exports=n.p+"32b01d6a21d9433a251c.ttf"},9892:(e,t,n)=>{var o=n(5072),a=n.n(o),r=n(7825),i=n.n(r),l=n(7659),d=n.n(l),s=n(5056),c=n.n(s),u=n(540),g=n.n(u),m=n(1113),h=n.n(m),p=n(1208),f={};f.styleTagTransform=h(),f.setAttributes=c(),f.insert=d().bind(null,"head"),f.domAPI=i(),f.insertStyleElement=g(),a()(p.A,f),p.A&&p.A.locals&&p.A.locals;var b=n(1373);class y{constructor(){return y.instance?y.instance:(this.state={selection:{selected:null,lastSelected:null},style:{theme:"light",custom_style:[]},layout:null,lastExpanded:!1,collapsedEdges:{}},this.observers={selection:[],style:[],layout:[],lastExpanded:[],collapsedEdges:[]},y.instance=this,this)}getState(e){return this.state[e]}updateState(e,t){this.state[e]=t,this.notify(e)}subscribe(e,t){this.observers[e].push(t)}notify(e){this.observers[e].forEach((t=>{t(this.state[e])}))}}const x=new y;Object.freeze(x);const v=x;function E(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout((()=>e.apply(this,o)),t)}}function _(){const e=document.getElementById("cy")?._cyreg?.cy;return e||(console.error("Cytoscape instance not found."),null)}const w=E((function({action:e,data:t,timestamp:n}={}){b.wk.setComponentValue({action:e,data:t,timestamp:n})}),100);var k=n(165),I=n(6527),C=n.n(I),S=n(1095),L=n.n(S),A=n(5111),B=n.n(A);const z={dark:{highlight:"rgb(210, 0, 0)",line:"rgb(48, 49, 57)",font:"rgb(250, 250, 250)",border:"rgb(48, 49, 57)",fontHighlight:"rgb(250, 250, 250)"},light:{line:"rgb(195,195,195)",font:"rgb(5,5,5)",border:"rgb(250,250,250)",highlight:"rgb(255,50,50)",fontHighlight:"rgb(250, 250, 250)"}},R={width:20,height:20,"border-width":.8,"font-size":3.6,"text-valign":"bottom","text-margin-y":3.2,"background-repeat":"no-repeat","background-width":"60%","background-height":"60%","background-color":"#0a0a0a"},T={width:2,"font-size":3.2,"text-rotation":"autorotate","text-background-padding":1,"text-background-opacity":1,"text-background-shape":"round-rectangle","arrow-scale":.6,"curve-style":"bezier"},j={"outline-width":.6,"font-weight":"bold","text-background-opacity":1,"text-background-shape":"round-rectangle","text-background-padding":1},O={"font-weight":"bold"},M={"line-style":"dashed",width:3,"text-wrap":"wrap","text-max-width":"100px","text-rotation":0,"font-size":5,"text-halign":"center","text-valign":"center"};function N(e){return[{selector:"*",style:{"min-zoomed-font-size":10}},{selector:"node",style:{...R,color:z[e].font,"border-color":z[e].border}},{selector:"edge",style:{...T,color:z[e].font,"line-color":z[e].line,"background-color":z[e].line,"target-arrow-color":z[e].line,"text-background-color":z[e].line}}]}function $(){return[{selector:"edge[_isMetaEdge]",style:{...M,label:"data(_metaLabel)","line-color":"data(_preservedLineColor)","target-arrow-color":"data(_preservedArrowColor)"}}]}function D(e){return[{selector:"node:selected, node.highlight",style:{...j,color:z[e].fontHighlight,"text-background-color":z[e].highlight,"outline-color":z[e].highlight}},{selector:"edge:selected, edge.highlight",style:{...O,color:z[e].fontHighlight,"line-color":z[e].highlight,"target-arrow-color":z[e].highlight,"text-background-color":z[e].highlight}}]}const H={light:{default:N("light"),metaEdge:$(),highlight:D("light")},dark:{default:N("dark"),metaEdge:$(),highlight:D("dark")}};function U(e){const t={selected:null,lastSelected:null};"select"==e.type&&(t.lastSelected=e.target),t.selected=e.cy.$(":selected"),v.updateState("selection",t),document.body.focus()}k.A.use(C()),k.A.use(L()),k.A.use(B());const F={fullscreen:E((()=>{document.fullscreenElement?document.exitFullscreen():document.getElementById("container").requestFullscreen()}),100),refresh:E((()=>{_().layout(v.getState("layout")).run()}),200),export:E((()=>{let e=_().elements().not(":hidden").jsons();e=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),e=URL.createObjectURL(e);const t=document.createElement("a");t.href=e,t.download="graph.json",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(e)}),250)},J=200,P={plus:E((()=>{const e=_(),t=e.extent();e.animate({zoom:{level:1.25*e.zoom(),position:{x:t.x1+.5*t.w,y:t.y1+.5*t.h}},duration:50})}),50),minus:E((()=>{const e=_(),t=e.extent();e.animate({zoom:{level:.8*e.zoom(),position:{x:t.x1+.5*t.w,y:t.y1+.5*t.h}},duration:50})}),50),fit:E((()=>{_().animate({fit:{padding:20},duration:J})}),J),center:E((()=>{_().animate({center:{},duration:J})}),J)},V={name:"fcose",animationDuration:500,randomize:!1,fit:!1,nodeDimensionsIncludeLabels:!0,uniformNodeDimensions:!0,numIter:50,tile:!1},G={remove:E((function(){const e=v.getState("selection").selected?.filter("node");e?.length>0&&(e.remove(),w({action:"remove",data:{node_ids:e.map((e=>e.id()))},timestamp:Date.now()}),e.unselect(),v.updateState("lastExpanded",!1))}),150),expand:E((function(){const e=v.getState("selection").lastSelected?.filter("node");"nodes"==e?.group()&&(w({action:"expand",data:{node_ids:[e.id()]},timestamp:Date.now()}),v.updateState("lastExpanded",e))}),150)};let K={},q=null;const W={expand:E((function(e){const t=e.target;if(t.data("_isMetaEdge")){const e=t.data("_originalGroupKey"),n=t.data("_edgeCount");w({action:"expand_edge",data:{group_key:e,edge_count:n},timestamp:Date.now()}),function(e){const t=_(),n=K[e];n&&(t.getElementById(n.metaEdgeId).remove(),n.originalEdges.forEach((e=>{t.add(e)})),delete K[e],v.updateState("collapsedEdges",{...K}))}(e)}}),150)};const Y=function(e,t,n){q=n,(0!==e.length||t)&&(t&&setTimeout((()=>{!function(){const e=function(){const e=_(),t=new Map;e.edges().forEach((e=>{const n=[e.source().id(),e.target().id()].sort().join("_");t.has(n)||t.set(n,[]),t.get(n).push(e)}));const n=new Map;return t.forEach(((e,t)=>{e.length>1&&n.set(t,e)})),n}();e.forEach(((e,t)=>{!function(e,t){const n=_();let o=t[0];if(q){const e=t.find((e=>e.data("label")===q));e&&(o=e)}const a=o.style("line-color"),r=o.style("target-arrow-color"),i=t.map((e=>({group:"edges",data:{...e.data()}}))),l=`_meta_${e}`,d=o.data("label")||"",s=`(${t.length})`,c=d?`${d}\n${s}`:s,u=t[0].source().id(),g=t[0].target().id();t.forEach((e=>e.remove())),n.add({group:"edges",data:{id:l,source:u,target:g,label:d,_isMetaEdge:!0,_originalGroupKey:e,_edgeCount:t.length,_metaLabel:c,_preservedLineColor:a,_preservedArrowColor:r}}),K[e]={originalEdges:i,metaEdgeId:l},v.updateState("collapsedEdges",{...K})}(t,e)}))}()}),100),e.includes("expand")&&_().on("dblclick dbltap","edge[_isMetaEdge]",W.expand))};let Q=!0;let X,Z,ee,te,ne,oe,ae;v.subscribe("selection",(function(){const e=document.getElementById("infopanel"),t=document.getElementById("nodeActions"),{selected:n}=v.getState("selection");let o,a,r,i,l;1===n?.length?(o=n.first().style().backgroundColor,a=n.first().data(),r=a.label||n.group().slice(0,-1).toUpperCase(),i=!0,l=n.style()["background-image"]):(o="hsla(0, 0%, 0%, 0)",a={},r="",i=!1,l=null),e.setAttribute("data-expanded",i),t.setAttribute("data-expanded",i),function(e,t,n){const o=document.getElementById("infopanelLabel");o.firstChild.innerText=t,o.firstChild.style.borderColor=e,o.lastChild.style.backgroundColor=e,o.lastChild.style.backgroundImage=n&&"none"!=n?`url(${n})`:""}(o,r,l),function(e){document.getElementById("infopanelProps").innerHTML=Object.entries(e).filter((([e])=>!("label"===e||Q&&e.startsWith("_")))).map((([e,t])=>`\n        <div class='infopanel__prop'>\n            <p class='infopanel__key'>${e}</p>\n            <p class='infopanel__val'>${t}</p>\n        </div>`)).join("")}(a)})),v.subscribe("selection",(function(){const e=_(),t=v.getState("selection").lastSelected;e.$(".highlight").removeClass("highlight");const n=t?.group();"nodes"==n?t.connectedEdges().addClass("highlight"):"edges"==n&&t.connectedNodes().addClass("highlight")})),v.subscribe("layout",(function(){_().layout(v.getState("layout")).run()})),v.subscribe("style",(function(){const e=_(),{theme:t,custom_style:n,meta_edge_style:o}=v.getState("style"),a=H[t].metaEdge.map((e=>({...e,style:{...e.style,...o||{}}}))),r=[...H[t].default,...n,...a,...H[t].highlight];document.body.setAttribute("data-theme",t),e.style(r)})),document.addEventListener("fullscreenchange",(function(){setTimeout((()=>{b.wk.setFrameHeight(),document.getElementById("container").scrollIntoView()}),150)})),setTimeout((()=>{b.wk.setFrameHeight()}),150),b.wk.events.addEventListener(b.wk.RENDER_EVENT,E((function(e){const{args:t,theme:n}=e.detail;var o;if(ee=JSON.stringify(t.elements),ne=JSON.stringify(t.style)+JSON.stringify(t.metaEdgeStyle||{})+n.base,ae=JSON.stringify(t.layout),document.getElementById("container").style.height=t.height,o=t.hideUnderscoreAttrs,Q=o,X||(document.getElementById("container").style.height=t.height,X=function(e){const t=(0,k.A)({container:document.getElementById("cy")});return t.on("select unselect",E(U,100)),e.forEach((e=>{t.on(e.event_type,e.selector,(t=>{w({action:e.name,data:{type:t.type,target_id:t.target.id(),target_group:t.target.group()},timestamp:Date.now()})}),Math.max(e.debounce,100))})),t}(t.events),X.json({elements:t.elements}),Z=ee,function(e){if(0!==e.length){if(e.includes("remove")){const e=document.getElementById("nodeActionsRemove");e.addEventListener("click",G.remove),e.style.display="flex",document.addEventListener("keydown",(e=>{["Delete","Backspace"].includes(e.key)&&G.remove()})),document.body.setAttribute("tabindex","0")}if(e.includes("expand")){const e=document.getElementById("nodeActionsExpand");e.addEventListener("click",G.expand),e.style.display="flex",_().on("dblclick dbltap","node",G.expand)}}else document.getElementById("nodeActions").style.display="none"}(t.nodeActions),Y(t.edgeActions||[],t.collapseParallelEdges||!1,t.priorityEdgeLabel||null),document.getElementById("toolbarFullscreen").addEventListener("click",F.fullscreen),document.getElementById("toolbarRefresh").addEventListener("click",F.refresh),document.getElementById("toolbarExport").addEventListener("click",F.export),document.getElementById("viewbarPlus").addEventListener("click",P.plus),document.getElementById("viewbarMinus").addEventListener("click",P.minus),document.getElementById("viewbarFit").addEventListener("click",P.fit),document.getElementById("viewbarCenter").addEventListener("click",P.center),new ResizeObserver(E((e=>{const t=e[0];t&&t.contentRect.width>0&&t.contentRect.height>0&&(X.resize(),X.fit())}),100)).observe(document.getElementById("cy"))),ee!=Z){Z=ee;const e=v.getState("lastExpanded");!1===e?X.json({elements:t.elements}):function(e,t){const n=e.position(),o={...V,fixedNodeConstraint:[{nodeId:e.id(),position:n}]};t.position(n),t.addClass("highlight"),e.connectedEdges().addClass("highlight"),_().layout(o).run()}(e,X.add([...t.elements.nodes,...t.elements.edges]).filter("node"))}v.updateState("lastExpanded",!1),ne!=te&&(te=ne,v.updateState("style",{custom_style:t.style,meta_edge_style:t.metaEdgeStyle||{},theme:n.base})),ae!=oe&&(oe=ae,v.updateState("layout",t.layout)),setTimeout((()=>{b.wk.setFrameHeight()}),150)}),100)),b.wk.setComponentReady()}},e=>{e.O(0,[293,902,986,96],(()=>e(e.s=9892))),e.O()}]);