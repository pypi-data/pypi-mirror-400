"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[436],{1243:(e,s,t)=>{t.d(s,{A:()=>l});let l=(0,t(9946).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5436:(e,s,t)=>{t.r(s),t.d(s,{default:()=>ee});var l=t(5155),n=t(2115),a=t(6695),i=t(6126),r=t(6051),c=t(7778),o=t(2055),d=t(342),p=t(6958),x=t(285),u=t(6877),m=t(3717),h=t(9946);let y=(0,h.A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var g=t(4020);let f=(0,h.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var v=t(4357),j=t(4126),b=t(8698),N=t(9434);function w(e){let{...s}=e;return(0,l.jsx)(b.bL,{"data-slot":"dropdown-menu",...s})}function S(e){let{...s}=e;return(0,l.jsx)(b.l9,{"data-slot":"dropdown-menu-trigger",...s})}function E(e){let{className:s,sideOffset:t=4,...n}=e;return(0,l.jsx)(b.ZL,{children:(0,l.jsx)(b.UC,{"data-slot":"dropdown-menu-content",sideOffset:t,className:(0,N.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",s),...n})})}function P(e){let{className:s,inset:t,variant:n="default",...a}=e;return(0,l.jsx)(b.q7,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:(0,N.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...a})}var k=t(678),z=t(1222),A=t(6878),C=t(1071),_=t(8188),T=t(5196),I=t(4416),M=t(1035);function O(e){let{visible:s,setVisible:t,pipelineTypes:a,socket:i,index:c,cameraid:d}=e,[p,u]=(0,n.useState)(Array.from(a.values())[0]),[m,h]=(0,n.useState)("New Pipeline");return(0,l.jsxs)(M.L,{visible:s,onClose:()=>t(!1),className:"w-[40vw] h-[30vh] -translate-y-40",children:[(0,l.jsxs)(o.V,{gap:"gap-2",children:[(0,l.jsx)(z.A,{label:"Pipeline Name",value:m,onChange:h,textSize:"text-xl"}),(0,l.jsx)(k.m,{label:"Pipeline Type",textSize:"text-xl",value:p,onValueChange:u,options:Array.from(a.values().filter(e=>!(e.type.startsWith("$$")&&e.type.endsWith("$$")))).map(e=>({label:e.type,value:e}))}),(0,l.jsxs)("h2",{className:"text-xl text-center",style:{color:r.zq},children:["Pipeline Index: #",c]})]}),(0,l.jsx)("div",{className:"h-5"}),(0,l.jsxs)(o.f,{gap:"gap-2 pt-4 items-center justify-center",children:[(0,l.jsx)(x.$,{disabled:0===m.length,variant:"outline",className:"rounded-md bg-zinc-900 hover:bg-zinc-700 text-lg cursor-pointer",style:{borderColor:r.Cz,color:r.zq},onClick:()=>{t(!1);let e=_.wS.create({type:_.sE.MESSAGE_TYPE_PROTO_ADD_PIPELINE,pipelineInfo:A.hz.create({name:m,type:p.type,index:c===-1/0?0:c,settingsValues:{},cameraid:d})}),s=_.wS.encode(e).finish();null==i||i.sendBinary(s)},children:(0,l.jsxs)("span",{className:"flex items-center gap-2",children:[(0,l.jsx)(T.A,{}),"Add Pipeline"]})}),(0,l.jsx)(x.$,{variant:"outline",className:"rounded-md bg-zinc-900 hover:bg-zinc-700 text-lg cursor-pointer",style:{borderColor:r.Cz,color:r.zq},onClick:()=>t(!1),children:(0,l.jsxs)("span",{className:"flex items-center gap-2",children:[(0,l.jsx)(I.A,{}),"Close"]})})]})]})}function q(e){let{visible:s,setVisible:t,requestedType:n,currentType:a,setPipelineType:i}=e;return(0,l.jsx)(M.L,{visible:s,onClose:()=>t(!1),className:"w-[40vw] h-[30vh] -translate-y-40",children:(0,l.jsxs)(o.V,{gap:"gap-2",children:[(0,l.jsxs)("h1",{className:"text-center text-3xl",style:{color:r.zq},children:["Are you sure you want to switch pipeline type from",(0,l.jsxs)("span",{className:"font-semibold text-blue-300",children:[" ",null==a?void 0:a.type," "]}),"to",(0,l.jsxs)("span",{className:"font-semibold text-yellow-400",children:[" ",null==n?void 0:n.type," "]}),"?"]}),(0,l.jsx)("h1",{className:"text-lg text-center",style:{color:r.zq},children:"This action will result in all the current pipeline settings being deleted and becoming the defaults for the new pipleine"}),(0,l.jsx)("div",{className:"h-4"}),(0,l.jsx)(x.$,{variant:"outline",size:"sm",className:"rounded-md cursor-pointer bg-green-600 hover:bg-green-500 border-none",onClick:()=>{null==i||i(n),t(!1)},children:(0,l.jsxs)("span",{className:"flex items-center justify-center gap-2 font-bold",style:{color:"black"},children:[(0,l.jsx)(T.A,{}),"Confirm"]})}),(0,l.jsx)(x.$,{variant:"outline",size:"sm",className:"rounded-md cursor-pointer bg-red-600 hover:bg-red-500 border-none",onClick:()=>t(!1),children:(0,l.jsxs)("span",{className:"flex items-center justify-center gap-2",style:{color:"black"},children:[(0,l.jsx)(I.A,{}),"Cancel"]})})]})})}var V=t(1243);function R(e){let{visible:s,setVisible:t,socket:n,pipelineToBeDeleted:a,selectedCameraIndex:i,onRemovePipeline:c}=e;return(0,l.jsx)(M.L,{visible:s,onClose:()=>t(!1),className:"w-[40vw] h-[30vh] -translate-y-40",children:(0,l.jsxs)(o.V,{children:[(0,l.jsxs)("h2",{className:"text-2xl flex items-center gap-2 text-center",children:[(0,l.jsx)(V.A,{className:"text-yellow-400"}),(0,l.jsx)("span",{className:"text-yellow-400 text-2xl",children:"Warning:"})]}),(0,l.jsxs)("span",{style:{color:r.zq},className:"text-2xl text-center",children:["This action will delete the ",null==a?void 0:a.name," Pipeline and will not be able to be restored"]}),(0,l.jsx)("div",{className:"h-5"}),(0,l.jsxs)(o.V,{gap:"gap-2",style:{color:r.zq},children:[(0,l.jsx)(x.$,{variant:"outline",className:"rounded-md bg-zinc-800 hover:bg-zinc-700 text-lg cursor-pointer",style:{color:r.zq},onClick:()=>{if(a){let e=_.wS.create({type:_.sE.MESSAGE_TYPE_PROTO_DELETE_PIPELINE,removePipeline:A.kn.create({removePipelineIndex:null==a?void 0:a.index,cameraid:i})}),s=_.wS.encode(e).finish();null==n||n.sendBinary(s),c(a)}t(!1)},children:(0,l.jsxs)("span",{className:"flex items-center gap-2",children:[(0,l.jsx)(j.A,{}),"Delete Pipeline"]})}),(0,l.jsx)(x.$,{variant:"outline",className:"rounded-md bg-zinc-800 hover:bg-zinc-700 text-lg cursor-pointer",style:{color:r.zq},onClick:()=>t(!1),children:(0,l.jsxs)("span",{className:"flex items-center gap-2",children:[(0,l.jsx)(I.A,{}),"Cancel"]})})]})]})})}function L(e){let{selectedCameraIndex:s,setSelectedCameraIndexAction:t,selectedPipelineIndex:i,setSelectedPipelineIndexAction:c,selectedPipelineType:d,setSelectedPipelineTypeAction:p,cameras:h,pipelines:b,pipelinetypes:N,setpipelinesAction:T,socket:I}=e,[M,V]=(0,n.useState)(!1),[L,$]=(0,n.useState)(!1),[D,G]=(0,n.useState)(!1),[B,Y]=(0,n.useState)(void 0),[W,F]=(0,n.useState)(!1),[Z,H]=(0,n.useState)("New Pipeline"),U=h.get(s),X=b.get(i);return(0,n.useEffect)(()=>{W&&X&&H(X.name)},[W,X]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(a.Zp,{style:{backgroundColor:r.pk,color:r.zq},className:"border-gray-700",children:[" ",(0,l.jsxs)(a.Wu,{className:"space-y-3",children:[(0,l.jsx)(k.m,{label:"Camera",value:s,onValueChange:e=>t(e),options:Array.from(h.values()).map(e=>({label:(0,l.jsx)("span",{children:e.name}),value:e.index,key:e.index.toString()}))}),(0,l.jsx)(o.f,{gap:"gap-2",className:"items-center",children:W?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(z.A,{value:Z,onChange:H,label:"Pipeline Name"}),(0,l.jsx)(x.$,{variant:"outline",size:"sm",onClick:()=>F(!1),className:"rounded-md cursor-pointer bg-zinc-900 hover:bg-zinc-700",children:(0,l.jsx)(u.A,{className:"w-4 h-4",style:{color:r.zq}})}),(0,l.jsx)(x.$,{variant:"outline",size:"sm",onClick:()=>{if(!X||!U)return;let e=_.wS.create({type:_.sE.MESSAGE_TYPE_PROTO_SET_PIPELINE_NAME,setPipelineName:A.ZC.create({pipelineIndex:X.index,cameraid:U.index,name:Z})});null==I||I.sendBinary(_.wS.encode(e).finish()),F(!1)},className:"rounded-md cursor-pointer bg-zinc-900 hover:bg-zinc-700",children:(0,l.jsx)(m.A,{className:"w-4 h-4",style:{color:r.zq}})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(k.m,{label:"Pipeline",value:i,onValueChange:e=>c(e),options:Array.from(b.entries()).map(e=>{let[s,t]=e;return{label:(0,l.jsxs)("span",{className:"inline-flex items-center gap-2",children:[t.name," (#",s,")"," ",(null==U?void 0:U.defaultPipeline)===t.index&&(0,l.jsx)(y,{className:"w-4 h-4 text-yellow-500",fill:"yellow"})]}),value:s,key:s.toString()}})}),(0,l.jsxs)(w,{children:[(0,l.jsx)(S,{asChild:!0,children:(0,l.jsx)(x.$,{variant:"outline",size:"sm",className:"rounded-md cursor-pointer bg-zinc-900 hover:bg-zinc-700",style:{color:r.zq,borderColor:r.Cz},children:(0,l.jsx)(g.A,{className:"w-4 h-4",style:{color:r.zq}})})}),(0,l.jsxs)(E,{side:"bottom",align:"end",alignOffset:20,className:"rounded-md shadow-lg bg-zinc-800",style:{borderColor:r.Cz,borderWidth:"1px",color:r.zq},children:[(0,l.jsxs)(P,{onClick:()=>F(!0),disabled:!X,children:[(0,l.jsx)(m.A,{className:"w-4 h-4 mr-2"})," Rename"]}),(0,l.jsxs)(P,{onClick:()=>V(!0),children:[(0,l.jsx)(f,{className:"w-4 h-4 mr-2"})," Add Pipeline"]}),(0,l.jsxs)(P,{onClick:()=>{if(!X||!U)return;let e=_.wS.create({type:_.sE.MESSAGE_TYPE_PROTO_SET_DEFAULT_PIPELINE,setDefaultPipeline:C.PH.create({cameraIndex:U.index,pipelineIndex:X.index})});null==I||I.sendBinary(_.wS.encode(e).finish())},disabled:!X,children:[(0,l.jsx)(y,{className:"w-4 h-4 mr-2"})," Set As Default"]}),(0,l.jsxs)(P,{onClick:()=>{var e;if(!X||!d)return;let s=_.wS.create({type:_.sE.MESSAGE_TYPE_PROTO_ADD_PIPELINE,pipelineInfo:A.hz.create({name:"Copy Of ".concat(X.name),type:d.type,index:Math.max(...Array.from(b.keys()))+1,settingsValues:null!=(e=X.settingsValues)?e:{}})});null==I||I.sendBinary(_.wS.encode(s).finish())},disabled:!X,children:[(0,l.jsx)(v.A,{className:"w-4 h-4 mr-2"})," Duplicate"]}),(0,l.jsxs)(P,{onClick:()=>G(!0),disabled:!X||X.index===(null==U?void 0:U.defaultPipeline),children:[(0,l.jsx)(j.A,{className:"w-4 h-4 mr-2"})," Delete"]})]})]})]})}),(0,l.jsx)(k.m,{label:"Pipeline Type",value:null==d?void 0:d.type,onValueChange:e=>{void 0!==e&&(Y(N.get(e)),$(!0))},options:Array.from(N.values()).filter(e=>!(e.type.startsWith("$$")&&e.type.endsWith("$$"))).map(e=>({label:e.type,value:e.type,key:e.type}))})]})]}),M&&U&&(0,l.jsx)(O,{cameraid:U.index,visible:M,pipelineTypes:N,setVisible:V,socket:I,index:Math.max(...Array.from(b.keys()))+1}),L&&(0,l.jsx)(q,{visible:L,setVisible:$,requestedType:B,currentType:d,setPipelineType:e=>{if(p(e),X){var s,t;let l=_.wS.create({type:_.sE.MESSAGE_TYPE_PROTO_ADD_PIPELINE,pipelineInfo:A.hz.create({name:X.name,type:null!=(s=null==e?void 0:e.type)?s:X.type,index:X.index,settingsValues:null!=(t=X.settingsValues)?t:{}})});null==I||I.sendBinary(_.wS.encode(l).finish())}}}),D&&U&&X&&(0,l.jsx)(R,{visible:D,setVisible:G,selectedCameraIndex:U.index,socket:I,pipelineToBeDeleted:X,onRemovePipeline:e=>{let s=new Map(b);s.delete(e.index),T(s)}})]})}var $=t(793),D=t(704),G=t(4355),B=t(381);function Y(e){var s;let{selectedPipeline:t,selectedPipelineType:i,cameraInfo:c,backendConnected:o,setSetting:d,setPipelines:p,pipelines:x,locked:u}=e,[m,h]=(0,n.useState)([]),[y,g]=(0,n.useState)([]);return(0,n.useEffect)(()=>{!function(){if(!i||!o){h([]),g([]);return}let e=[],s=[];i.settings.forEach(l=>{let n=(0,$.yI)({setting:l,selectedPipeline:t,setPipelines:p,setSetting:d,locked:u,pipelines:x});"Camera Properties"===l.category?e.push(n):s.push(n)}),null==c||c.settings.forEach(s=>{let l=(0,$.yI)({setting:s,selectedPipeline:t,setPipelines:p,setSetting:d,locked:u,pipelines:x});e.push(l)}),h(e),g(s)}()},[i,t,o,u,c]),(0,l.jsx)(a.Zp,{style:{backgroundColor:r.pk},className:"border-gray-700 flex-grow overflow-auto",children:(0,l.jsx)(a.aR,{children:(0,l.jsxs)(D.tU,{defaultValue:"input",className:"w-full",style:{color:r.zq},children:[(0,l.jsxs)(D.j7,{className:"grid w-full grid-cols-2 border-gray-600 rounded-xl gap-2",style:{backgroundColor:r.pk},children:[(0,l.jsx)(D.Xi,{value:"input",className:"bg-zinc-800 rounded-md data-[state=active]:bg-pink-800 hover:bg-zinc-700 transition-colors duration-200 cursor-pointer h-8",children:(0,l.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[(0,l.jsx)("span",{children:"Camera Properties"}),(0,l.jsx)(G.A,{})]})}),(0,l.jsx)(D.Xi,{value:"pipeline",className:"bg-zinc-800 rounded-md data-[state=active]:bg-pink-800 hover:bg-zinc-700 transition-colors duration-200 cursor-pointer",children:null!=(s=null==i?void 0:i.type)?s:"Pipeline"})]}),(0,l.jsx)(D.av,{value:"input",className:"p-6 space-y-6",children:(0,l.jsx)("div",{style:{color:r.zq},children:m.length>0?(0,l.jsx)("div",{className:"space-y-2",children:m}):(0,l.jsxs)("div",{className:"text-center",style:{color:r.zq},children:[(0,l.jsx)(G.A,{className:"w-16 h-16 mx-auto mb-2 opacity-50"}),(0,l.jsx)("p",{className:"select-none",children:"Camera Settings"}),(0,l.jsx)("p",{className:"text-sm select-none",children:"Configure camera parameters"})]})})}),(0,l.jsx)(D.av,{value:"pipeline",className:"p-6 space-y-6",children:(0,l.jsx)("div",{style:{color:r.zq},children:y.length>0?(0,l.jsx)("div",{className:"space-y-2",children:y}):(0,l.jsxs)("div",{className:"text-center",style:{color:r.zq},children:[(0,l.jsx)(B.A,{className:"w-16 h-16 mx-auto mb-2 opacity-50"}),(0,l.jsx)("p",{className:"select-none",children:"Pipeline Settings"}),(0,l.jsx)("p",{className:"text-sm select-none",children:"Configure pipeline-specific parameters"})]})})})]})})})}var W=t(9397);let F=(0,h.A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Z=(0,h.A)("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),H=(0,h.A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),U=(0,h.A)("video-off",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),X=(0,h.A)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);function J(e){let{icon:s,text:t,onClick:n}=e;return(0,l.jsx)(x.$,{variant:"outline",className:"rounded-md cursor-pointer bg-gray-800 hover:bg-gray-700 border-none h-full",onClick:n,children:(0,l.jsxs)("span",{className:"flex items-center justify-center gap-2 text-lg",style:{color:r.zq},children:[s,t]})})}function K(e){let{locked:s,setLocked:t,save:n,recordingStatus:i,setRecordingStatus:c}=e;return(0,l.jsx)(a.Zp,{style:{backgroundColor:r.pk},className:"border-gray-700 flex flex-col h-full p-2",children:(0,l.jsx)(a.Wu,{children:(0,l.jsxs)(o.f,{gap:"gap-4",justify:"center",children:[(0,l.jsx)(J,{text:"Save",icon:(0,l.jsx)(F,{className:"size-10"}),onClick:n}),s?(0,l.jsx)(J,{text:"Unlock",icon:(0,l.jsx)(Z,{className:"size-10"}),onClick:()=>t(!1)}):(0,l.jsx)(J,{text:"Lock",icon:(0,l.jsx)(H,{className:"size-10"}),onClick:()=>t(!0)}),i?(0,l.jsx)(J,{text:"Stop Recording",icon:(0,l.jsx)(U,{className:"size-10"}),onClick:()=>c(!1)}):(0,l.jsx)(J,{text:"Record",icon:(0,l.jsx)(X,{className:"size-10"}),onClick:()=>c(!0)})]})})})}function Q(e){var s;let{selectedCamera:t,cameraPerformance:n}=e;return(0,l.jsxs)(a.Zp,{style:{backgroundColor:r.pk},className:"flex flex-col h-[400px] border-gray-700",children:[(0,l.jsx)(a.aR,{className:"shrink-0",children:(0,l.jsxs)(o.f,{className:"items-center justify-between",children:[(0,l.jsxs)(a.ZB,{className:"flex items-center gap-2",style:{color:r.zq},children:[(0,l.jsx)(G.A,{className:"w-5 h-5"}),"Camera Stream"]}),(0,l.jsxs)(i.E,{variant:"secondary",className:"bg-stone-700",style:{color:r.zq},children:[(0,l.jsx)(W.A,{className:"w-3 h-3 mr-1"}),"Processing @ ",null!=(s=null==n?void 0:n.fps)?s:0," FPS â€“"," ",n?n.latencyProcess.toFixed(2):"0.00","ms latency"]})]})}),(0,l.jsx)(a.Wu,{className:"flex-1 min-h-0 p-0",children:(0,l.jsx)(c.I,{stream:null==t?void 0:t.streamPath})})]})}function ee(){var e,s,t,a;let{pipelines:i,connection:c,cameras:x,socket:u,setPipelines:m,pipelinetypes:h,pipelineresults:y,cameraperformance:g,recordingstatuses:f}=(0,d.jg)(),[v,j]=(0,n.useState)(0),[b,N]=(0,n.useState)(0),[w,S]=(0,n.useState)(!1),[E,P]=(0,n.useState)(!1),k=(0,n.useMemo)(()=>{if(!x)return;let e=x.get(v);return e?C.GI.create(e):void 0},[x,v]),z=null==i||null==(e=i.get(v))?void 0:e.get(b),T=z?h.get(z.type):void 0,I=null==g?void 0:g.get(v),M=z&&(null==y?void 0:y.get(v))?null==(s=y.get(v))?void 0:s.get(z.index):void 0;function O(e){m(s=>{let t=new Map(s);return t.set(v,e),t})}return(0,n.useEffect)(()=>{var e;N(null!=(e=null==k?void 0:k.pipelineIndex)?e:0)},[null==k?void 0:k.pipelineIndex]),(0,n.useEffect)(()=>{if(k){var e;let s=null!=(e=f.get(k.index))&&e;s!==E&&P(s)}},[k,f]),(0,n.useEffect)(()=>{document.title="Synapse Client"},[]),(0,l.jsx)("div",{className:"w-full min-h-screen text-pink-600",style:{backgroundColor:r.Tp,color:r.zq},children:(0,l.jsxs)("div",{className:"max-w-8xl mx-auto",style:{backgroundColor:r.Tp,borderRadius:"12px",padding:"10px"},children:[" ",(0,l.jsxs)(o.f,{gap:"gap-2",className:"h-full",children:[" ",(0,l.jsxs)(o.V,{className:"flex-[2] space-y-2 h-full",children:[" ",(0,l.jsx)(Q,{selectedCamera:k,cameraPerformance:I}),(0,l.jsx)(Y,{pipelines:null!=(t=i.get(v))?t:new Map,cameraInfo:k,setPipelines:O,selectedPipeline:z,selectedPipelineType:T,backendConnected:c.backend,setSetting:(e,s,t)=>{if((0,d.sG)(e)){let l=_.wS.create({type:_.sE.MESSAGE_TYPE_PROTO_SET_SETTING,setPipelineSetting:A.Ob.create({pipelineIndex:t.index,cameraid:v,value:e,setting:s})});null==u||u.sendBinary(_.wS.encode(l).finish())}},locked:w})]}),(0,l.jsxs)(o.V,{className:"flex-[1.2] space-y-2 h-full",children:[(0,l.jsx)(L,{cameras:x,pipelines:null!=(a=i.get(v))?a:new Map,pipelinetypes:h,socket:u,selectedCameraIndex:v,setSelectedCameraIndexAction:j,selectedPipelineIndex:b,setSelectedPipelineIndexAction:function(e){let s=i.get(v);if(!s||!s.has(e))return;N(e);let t=_.wS.create({type:_.sE.MESSAGE_TYPE_PROTO_SET_PIPELINE_INDEX,setPipelineIndex:A.Wi.create({cameraIndex:null!=v?v:0,pipelineIndex:e})});null==u||u.sendBinary(_.wS.encode(t).finish())},selectedPipelineType:T,setSelectedPipelineTypeAction:function(e){var s;if(void 0===e||void 0===b)return;let t=null!=(s=i.get(v))?s:new Map,l=t.get(b);if(!l)return;let n={...l,type:e.type},a=new Map(t);a.set(b,n),m(e=>{let s=new Map(e);return s.set(v,a),s});let r=_.wS.create({type:_.sE.MESSAGE_TYPE_PROTO_SET_TYPE_FOR_PIPELINE,setPipelineType:A.Yc.create({newType:e.type,cameraid:v,pipelineIndex:b})});null==u||u.sendBinary(_.wS.encode(r).finish())},setpipelinesAction:O}),(0,l.jsx)(K,{locked:w,setLocked:S,save:()=>{null==u||u.sendBinary(_.wS.encode(_.wS.create({type:_.sE.MESSAGE_TYPE_PROTO_SAVE})).finish())},recordingStatus:E,setRecordingStatus:e=>{if(k){let s=_.wS.create({type:_.sE.MESSAGE_TYPE_PROTO_SET_CAMERA_RECORDING_STATUS,setCameraRecordingStatus:C.wk.create({cameraIndex:k.index,record:e})});null==u||u.sendBinary(_.wS.encode(s).finish())}}}),(0,l.jsx)(p.y,{results:M})]})]})]})})}}}]);