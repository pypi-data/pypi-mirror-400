import{j as r,o as h,B as n,aT as u,l as o,w as l,c as d,dH as s,r as m,E as x,A as p,q as F}from"./index-4cf586ed.js";function f(t){var a;const{directory:e}=t,i=c=>{t.fetchFile(c).then(()=>{t.selectFile(c)})};return r.jsxs("li",{className:h({"leaf-open":e.leafState,file:e.type==="file"},e.ext),children:[e.type==="directory"&&r.jsx(n,{variant:"link",onClick:()=>t.actions.toggleLeafState(),children:e.name}),e.type==="file"&&r.jsx(n,{variant:"link",onClick:()=>i(e.path),children:e.name}),(((a=e.children)==null?void 0:a.length)??0)>0&&r.jsx(u,{in:e.leafState,children:r.jsx("ul",{children:o.map(e.children,c=>t.renderTree(c))})})]},e.path)}f.defaultProps={leafState:!1,children:[],ext:void 0};const j=(t,e)=>({leafState:s.selector("leafState",t)[e.path]}),E=(t,e)=>({actions:{toggleLeafState:()=>s.dispatch("TOGGLE_LEAF",e.path)}}),S=l({editor:s})(d(j,E)(f));function T(t){const e=i=>r.jsx(S,{directory:i,renderTree:e,fetchFile:t.actions.fetchFile,selectFile:t.actions.selectFile},i.name);return m.useEffect(()=>{t.actions.fetchDirectories()},[t.actions]),r.jsxs(x,{children:[t.error&&r.jsxs(p,{variant:"danger",children:[r.jsx("i",{className:"fa fa-warning"})," Could not fetch directory listing",r.jsx("div",{className:"description",children:t.error})]}),o.map(t.directories,i=>r.jsx("ul",{className:"editor-tree",children:e(i)},i.name))]})}function g(t,e){const{providers:i}=e;return{directories:i.editor.directories.selector("results",t),error:i.editor.directories.selector("error",t)}}function v(t,e){return{actions:{fetchDirectories:()=>e.providers.editor.directories.fetch(),fetchFile:i=>e.providers.editor.files.fetchSingle(i),selectFile:i=>s.dispatch("SELECT_FILE",i)}}}const y=l({editor:s})(d(g,v)(T));function N(t){const{providers:e,yamlNode:i,...a}=t;return F(i,a),r.jsx(y,{providers:e})}export{N as default};
