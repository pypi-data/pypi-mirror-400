{
  "name": "UpdateApprovalDefinition",
  "fully_qualified_name": "AshbyApi.UpdateApprovalDefinition@0.1.0",
  "description": "Create or update an approval definition for an entity.\n\nThis tool updates or creates an approval definition for an entity that requires approval in Ashby. It can override the current definition or create a new one, based on the provided parameters. The tool is only applicable for entities that are within the scope of an approval managed by the API. If no approval steps are provided, the approval process is skipped.",
  "toolkit": {
    "name": "ArcadeAshbyApi",
    "description": null,
    "version": "0.1.0"
  },
  "input": {
    "parameters": [
      {
        "name": "approval_request_data",
        "required": false,
        "description": "The JSON payload containing the details for the approval definition. Include fields: entityType (e.g., 'offer'), entityId, approvalStepDefinitions (list of steps with required approvers), and submitApprovalRequest (boolean to control immediate submission).",
        "value_schema": {
          "val_type": "json",
          "inner_val_type": null,
          "enum": null,
          "properties": {
            "entityType": {
              "val_type": "string",
              "inner_val_type": null,
              "enum": [
                "offer"
              ],
              "properties": null,
              "inner_properties": null,
              "description": null
            },
            "entityId": {
              "val_type": "json",
              "inner_val_type": null,
              "enum": null,
              "properties": null,
              "inner_properties": null,
              "description": null
            },
            "approvalStepDefinitions": {
              "val_type": "array",
              "inner_val_type": "json",
              "enum": null,
              "properties": null,
              "inner_properties": {
                "approvalsRequired": {
                  "val_type": "integer",
                  "inner_val_type": null,
                  "enum": null,
                  "properties": null,
                  "inner_properties": null,
                  "description": "The number of approvers required to approve this step, before the approval moves on to the next step. The number of approvers must be non-zero and no more than the number of approvers in this step."
                },
                "approvers": {
                  "val_type": "array",
                  "inner_val_type": "json",
                  "enum": null,
                  "properties": null,
                  "inner_properties": {
                    "userId": {
                      "val_type": "json",
                      "inner_val_type": null,
                      "enum": null,
                      "properties": null,
                      "inner_properties": null,
                      "description": null
                    },
                    "type": {
                      "val_type": "string",
                      "inner_val_type": null,
                      "enum": [
                        "user"
                      ],
                      "properties": null,
                      "inner_properties": null,
                      "description": null
                    }
                  },
                  "description": "An unordered list of who can approve this step."
                }
              },
              "description": "An ordered list of approval steps that describes the number of required approvers at each step, as well as who is an approver at each step."
            },
            "submitApprovalRequest": {
              "val_type": "boolean",
              "inner_val_type": null,
              "enum": null,
              "properties": null,
              "inner_properties": null,
              "description": "Control whether an approval request created through this API should be immediately submitted.\nIf false, then the approval will need to be manually submitted in the Ashby app.\nDefault: false\n"
            }
          },
          "inner_properties": null,
          "description": ""
        },
        "inferrable": true,
        "http_endpoint_parameter_name": "requestBody"
      }
    ]
  },
  "output": {
    "description": "Response from the API endpoint 'approvalDefinitionUpdate'.",
    "available_modes": [
      "value",
      "error",
      "null"
    ],
    "value_schema": {
      "val_type": "json",
      "inner_val_type": null,
      "enum": null,
      "properties": null,
      "inner_properties": null,
      "description": null
    }
  },
  "requirements": {
    "authorization": null,
    "secrets": [
      {
        "key": "ASHBY_API_KEY"
      }
    ],
    "metadata": null
  },
  "deprecation_message": null,
  "metadata": {
    "object_type": "api_wrapper_tool",
    "version": "1.2.0",
    "description": "Tools that enable LLMs to interact directly with the Ashby API"
  },
  "http_endpoint": {
    "metadata": {
      "object_type": "http_endpoint",
      "version": "1.2.0",
      "description": ""
    },
    "url": "https://api.ashbyhq.com/approvalDefinition.update",
    "http_method": "POST",
    "headers": {},
    "parameters": [
      {
        "name": "requestBody",
        "tool_parameter_name": "approval_request_data",
        "description": "",
        "value_schema": {
          "val_type": "json",
          "inner_val_type": null,
          "enum": null,
          "properties": {
            "entityType": {
              "val_type": "string",
              "inner_val_type": null,
              "enum": [
                "offer"
              ],
              "properties": null,
              "inner_properties": null,
              "description": null
            },
            "entityId": {
              "val_type": "json",
              "inner_val_type": null,
              "enum": null,
              "properties": null,
              "inner_properties": null,
              "description": null
            },
            "approvalStepDefinitions": {
              "val_type": "array",
              "inner_val_type": "json",
              "enum": null,
              "properties": null,
              "inner_properties": {
                "approvalsRequired": {
                  "val_type": "integer",
                  "inner_val_type": null,
                  "enum": null,
                  "properties": null,
                  "inner_properties": null,
                  "description": "The number of approvers required to approve this step, before the approval moves on to the next step. The number of approvers must be non-zero and no more than the number of approvers in this step."
                },
                "approvers": {
                  "val_type": "array",
                  "inner_val_type": "json",
                  "enum": null,
                  "properties": null,
                  "inner_properties": {
                    "userId": {
                      "val_type": "json",
                      "inner_val_type": null,
                      "enum": null,
                      "properties": null,
                      "inner_properties": null,
                      "description": null
                    },
                    "type": {
                      "val_type": "string",
                      "inner_val_type": null,
                      "enum": [
                        "user"
                      ],
                      "properties": null,
                      "inner_properties": null,
                      "description": null
                    }
                  },
                  "description": "An unordered list of who can approve this step."
                }
              },
              "description": "An ordered list of approval steps that describes the number of required approvers at each step, as well as who is an approver at each step."
            },
            "submitApprovalRequest": {
              "val_type": "boolean",
              "inner_val_type": null,
              "enum": null,
              "properties": null,
              "inner_properties": null,
              "description": "Control whether an approval request created through this API should be immediately submitted.\nIf false, then the approval will need to be manually submitted in the Ashby app.\nDefault: false\n"
            }
          },
          "inner_properties": null,
          "description": ""
        },
        "accepted_as": "body",
        "required": false,
        "deprecated": false,
        "default": null,
        "documentation_urls": []
      }
    ],
    "documentation_urls": [],
    "secrets": [
      {
        "arcade_key": "ASHBY_API_KEY",
        "parameter_name": "username",
        "accepted_as": "basic_auth_username",
        "formatted_value": null,
        "description": "",
        "is_auth_token": false
      }
    ],
    "request_body_spec": "{\n  \"content\": {\n    \"application/json\": {\n      \"schema\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"entityType\": {\n            \"type\": \"string\",\n            \"enum\": [\n              \"offer\"\n            ]\n          },\n          \"entityId\": {\n            \"allOf\": [\n              {\n                \"description\": \"The id of the approval entity being updated (e.g. the id of the offer version).\"\n              },\n              {\n                \"type\": \"object\",\n                \"description\": \"Schema reference broken: #/paths/~1interviewerPool.addUser/post/requestBody/content/application~1json/schema/properties/userId\",\n                \"additionalProperties\": true,\n                \"x-moar-broken-reference\": \"#/paths/~1interviewerPool.addUser/post/requestBody/content/application~1json/schema/properties/userId\"\n              }\n            ]\n          },\n          \"approvalStepDefinitions\": {\n            \"type\": \"array\",\n            \"description\": \"An ordered list of approval steps that describes the number of required approvers at each step, as well as who is an approver at each step.\",\n            \"items\": {\n              \"type\": \"object\",\n              \"properties\": {\n                \"approvalsRequired\": {\n                  \"type\": \"integer\",\n                  \"description\": \"The number of approvers required to approve this step, before the approval moves on to the next step. The number of approvers must be non-zero and no more than the number of approvers in this step.\",\n                  \"example\": 1\n                },\n                \"approvers\": {\n                  \"type\": \"array\",\n                  \"description\": \"An unordered list of who can approve this step.\",\n                  \"items\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                      \"userId\": {\n                        \"allOf\": [\n                          {\n                            \"type\": \"object\",\n                            \"description\": \"Schema reference broken: #/paths/~1interviewerPool.addUser/post/requestBody/content/application~1json/schema/properties/userId\",\n                            \"additionalProperties\": true,\n                            \"x-moar-broken-reference\": \"#/paths/~1interviewerPool.addUser/post/requestBody/content/application~1json/schema/properties/userId\"\n                          },\n                          {\n                            \"description\": \"The id of a user who is an approver for this step.\"\n                          }\n                        ]\n                      },\n                      \"type\": {\n                        \"type\": \"string\",\n                        \"enum\": [\n                          \"user\"\n                        ]\n                      }\n                    },\n                    \"required\": [\n                      \"userId\",\n                      \"type\"\n                    ]\n                  }\n                }\n              },\n              \"required\": [\n                \"approvalsRequired\",\n                \"approvers\"\n              ]\n            }\n          },\n          \"submitApprovalRequest\": {\n            \"type\": \"boolean\",\n            \"description\": \"Control whether an approval request created through this API should be immediately submitted.\\nIf false, then the approval will need to be manually submitted in the Ashby app.\\nDefault: false\\n\"\n          }\n        },\n        \"required\": [\n          \"entityType\",\n          \"entityId\",\n          \"approvalStepDefinitions\"\n        ]\n      }\n    }\n  }\n}",
    "use_request_body_schema_mode": true,
    "validate_request_body_schema": true
  }
}
