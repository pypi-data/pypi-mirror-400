import{c as b,r as g,u as j,a as f,t as m,B as x,j as e,L as V,b as h,X as R,P as O,d as P,e as E,C as p,S as w,f as S,g as D,h as k,i as C,k as v,l as M,m as _,n as F,o as L,p as y,I as q,q as Q,s as I,A,v as B,w as K,x as J,y as U,z as $,D as H,E as X,R as T,F as Z,G as W,H as Y}from"./index-D87ilqMg.js";import{C as ee,D as se,F as ae}from"./file-text-Dkjc4zMz.js";import{P as te}from"./play-DrLrIaF7.js";import{R as G}from"./refresh-cw-kkw2GHsq.js";import{F as ne}from"./folder-plus-BRARusOr.js";import{S as le}from"./save-BbL542gH.js";import{I as re,F as ie,L as ce}from"./library-Cqp4m2hh.js";import{T as de}from"./trash-2-CTOpWkMI.js";import{f as oe}from"./library-CemcgxM6.js";import{I as me}from"./info-CbHhWaqt.js";const xe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ue=b("activity",xe);const he=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],pe=b("brain-circuit",he);const fe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],z=b("circle-x",fe);const je=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],ge=b("file-image",je);const ye=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Ne=b("hard-drive",ye);const ve=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],be=b("power",ve);function we(){const[s,c]=g.useState(null),{data:t,refetch:l}=j({queryKey:["job-status"],queryFn:async()=>(await fetch(`${x}/jobs/status`)).json(),refetchInterval:u=>u.state.data?.status==="running"?1e3:5e3}),r=f({mutationFn:async()=>{await fetch(`${x}/jobs/stop`,{method:"POST"})},onSuccess:()=>{m.info("Stopping job..."),l()}});if(!t||t.status==="idle"||t.job_id===s&&t.status!=="running")return null;const o=t.status==="running",d=t.status==="completed",i=t.status==="failed";t.status;const n=t.total>0?t.progress/t.total*100:0;return e.jsxs("div",{className:`border p-4 space-y-3 transition-colors ${d?" border-green-200":i?"bg-red-50/50 border-red-200":"bg-muted/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx(V,{className:"h-4 w-4 animate-spin text-primary"}),d&&e.jsx(ee,{className:"h-4 w-4 text-green-600"}),i&&e.jsx(z,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"font-medium text-sm",children:t.job_type==="embedding_generation"?"Generating Embeddings":"Background Job"}),e.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:t.message})]}),e.jsx("div",{className:"flex items-center gap-2",children:o?e.jsxs(h,{variant:"destructive",size:"sm",className:"h-7 text-xs",onClick:()=>r.mutate(),disabled:r.isPending,children:[e.jsx(z,{className:"h-3 w-3 mr-1"})," Stop"]}):e.jsx(h,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:()=>c(t.job_id),children:e.jsx(R,{className:"h-4 w-4"})})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(O,{value:d?100:n,className:`h-2 ${d?"[&>div]:bg-green-600":""}`}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[t.progress," / ",t.total]}),e.jsxs("span",{children:[d?"100":Math.round(n),"%"]})]})]})]})}function Se(){const{selectedModel:s,setSelectedModel:c}=P(),t=E(),{data:l}=j({queryKey:["system-stats"],queryFn:async()=>(await fetch(`${x}/jobs/stats`)).json(),refetchInterval:5e3}),{data:r}=j({queryKey:["available-models"],queryFn:async()=>(await fetch(`${x}/system/models`)).json(),refetchInterval:5e3}),o=f({mutationFn:async a=>{const N=await fetch(`${x}/system/models/${encodeURIComponent(a)}/load`,{method:"POST"});if(!N.ok)throw new Error("Failed to load model");return N.json()},onSuccess:()=>{m.success("Model loaded successfully"),t.invalidateQueries({queryKey:["available-models"]})},onError:a=>m.error(a.message)}),d=f({mutationFn:async()=>{const a=await fetch(`${x}/system/models/unload`,{method:"POST"});if(!a.ok)throw new Error("Failed to unload model");return a.json()},onSuccess:()=>{m.success("Model unloaded"),t.invalidateQueries({queryKey:["available-models"]})},onError:a=>m.error(a.message)}),i=r?.find(a=>a.loaded),n=o.isPending||d.isPending,u=i?.id===s||n;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"grid gap-1 md:grid-cols-3",children:[e.jsxs(p,{className:"p-4 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[e.jsx(ue,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium uppercase",children:"GPU Status"})]}),l?.gpu?e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium truncate",title:l.gpu.name,children:l.gpu.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Mem: ",l.gpu.memory_allocated_mb,"MB /"," ",l.gpu.memory_reserved_mb,"MB"]})]}):e.jsx("div",{className:"text-sm text-muted-foreground italic",children:l?.gpu_error?"GPU Error":"No GPU Detected"})]}),e.jsxs(p,{className:"p-4 flex flex-col justify-between gap-2!",children:[e.jsx("div",{className:"flex items-center justify-between text-muted-foreground m-0! ",children:e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${i?"bg-green-500":"bg-red-500"}`,title:i?"Model Loaded":"No Model Loaded"}),e.jsx("span",{className:"text-xs font-medium uppercase",children:"Active Model"}),i?.id===s?e.jsx(h,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-red-500 hover:text-red-600 ml-auto",onClick:()=>d.mutate(),disabled:n,title:"Unload Model",children:e.jsx(be,{className:"h-4 w-4"})}):e.jsx(h,{size:"sm",variant:"outline",className:"h-8 w-8 ml-auto p-0 text-green-500 hover:text-green-600",onClick:()=>o.mutate(s),disabled:n,title:"Load Model",children:e.jsx(te,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"flex gap-2",children:e.jsxs(w,{value:s,onValueChange:c,disabled:i?.id===s||n,children:[e.jsx(S,{className:D("h-8 text-xs flex-1",u&&"opacity-50 cursor-not-allowed"),onPointerDown:a=>{u&&(a.preventDefault(),a.stopPropagation(),m.warning("Please unload current model."))},children:e.jsx(k,{placeholder:"Select Model"})}),e.jsx(C,{children:r?.map(a=>e.jsx(v,{value:a.id,className:"text-xs",children:a.name},a.id))})]})})})]}),e.jsxs(p,{className:"p-4 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium uppercase",children:"Storage"})]}),l?.disk&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"font-medium",children:[l.disk.free_gb," GB Free"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.disk.percent,"% Used of ",l.disk.total_gb," GB"]})]})]})]}),e.jsx(we,{})]})}function ke({path:s}){const c=E(),[t,l]=g.useState(s.name||""),{selectedModel:r,batchSize:o}=P(),d=f({mutationFn:async a=>{const N=await fetch(`${x}/workspace/paths/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!N.ok)throw new Error("Failed to update path");return N.json()},onSuccess:()=>{c.invalidateQueries({queryKey:["paths"]}),m.success("Path updated")}}),i=f({mutationFn:async()=>{const a=await fetch(`${x}/workspace/paths/${s.id}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete path");return a.json()},onSuccess:()=>{c.invalidateQueries({queryKey:["paths"]}),m.success("Path deleted")}}),n=f({mutationFn:async()=>{const a=await fetch(`${x}/workspace/paths/${s.id}/thumbnails`,{method:"POST"});if(!a.ok)throw new Error("Failed to generate thumbnails");return a.json()},onSuccess:a=>{m.success(`Thumbnail generation complete! Generated ${a.generated} thumbnails.`)}}),u=f({mutationFn:async()=>{const a=await fetch(`${x}/workspace/paths/${s.id}/embeddings?model=${encodeURIComponent(r)}&batch_size=${o}`,{method:"POST"});if(!a.ok){const N=await a.json();throw new Error(N.detail||"Failed to generate embeddings")}return a.json()},onSuccess:a=>{m.success(`Embedding generation started! Job ID: ${a.job_id}`),c.invalidateQueries({queryKey:["job-status"]})},onError:a=>{m.error(a.message)}});return e.jsxs(B,{value:s.id.toString(),children:[e.jsx(K,{className:"hover:no-underline",children:e.jsxs("div",{className:"flex items-center justify-between w-full pr-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-left",children:[e.jsx(ne,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:s.name||e.jsx("span",{className:"italic text-muted-foreground",children:"Untitled Collection"})}),e.jsx("span",{className:"text-xs text-muted-foreground font-mono wrap-anywhere",children:s.path})]})]}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:e.jsxs(J,{variant:"secondary",children:[s.image_count," images"]})})]})}),e.jsx(U,{children:e.jsxs("div",{className:"p-4 space-y-2 bg-muted/30 border",children:[e.jsxs("div",{className:"grid gap-2 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Collection Name"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(q,{value:t,onChange:a=>l(a.target.value),placeholder:"Nickname",autoComplete:"off"}),e.jsx(h,{size:"sm",onClick:()=>d.mutate({name:t}),disabled:d.isPending,children:e.jsx(le,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Actions"}),e.jsxs("div",{className:"flex flex-wrap lgap-2",children:[e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>n.mutate(),disabled:n.isPending,children:[n.isPending?e.jsx(I,{className:"w-4 h-4 mr-2"}):e.jsx(re,{className:"w-4 h-4 mr-2"}),"Generate Thumbnails"]}),e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>u.mutate(),disabled:u.isPending,children:[u.isPending?e.jsx(I,{className:"w-4 h-4 mr-2"}):e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Generate Embeddings"]}),e.jsxs(h,{variant:"destructive",size:"sm",onClick:()=>{confirm("Are you sure you want to remove this path?")&&i.mutate()},children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Remove Path"]})]})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("p",{children:["Path: ",s.path]}),e.jsxs("p",{children:["ID: ",s.id]})]})]})})]})}function Ce(){const s=E(),[c,t]=g.useState(""),{data:l,isLoading:r}=j({queryKey:["paths"],queryFn:async()=>{const n=await fetch(`${x}/workspace/paths`);if(!n.ok)throw new Error("Failed to fetch paths");return n.json()}}),o=f({mutationFn:async n=>{const u=await fetch(`${x}/workspace/paths`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:n,create_if_missing:!0})});if(!u.ok){const a=await u.json();throw new Error(a.detail||"Failed to add path")}return u.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["paths"]}),s.invalidateQueries({queryKey:["library-paths"]}),t(""),m.success("Path added successfully")},onError:n=>{m.error(n.message)}}),d=f({mutationFn:async()=>{const n=await fetch(`${x}/workspace/scan`,{method:"POST"});if(!n.ok)throw new Error("Failed to scan");return n.json()},onSuccess:n=>{m.success(`Scan complete! Added ${n.added} new images.`),s.invalidateQueries({queryKey:["paths"]})}}),i=n=>{n.preventDefault(),c&&o.mutate(c)};return e.jsxs("div",{className:"space-y-1 py-1",children:[e.jsx(Se,{}),e.jsxs(p,{children:[e.jsxs(M,{children:[e.jsx(_,{children:"Library Collections"}),e.jsx(F,{children:"Manage your local image libraries and collections."})]}),e.jsxs(L,{className:"space-y-2",children:[e.jsx("form",{onSubmit:i,className:"flex gap-2",children:e.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[e.jsx(y,{htmlFor:"path",children:"Add Directory Path"}),e.jsxs("div",{className:"flex gap-2 h-full",children:[e.jsx(q,{autoComplete:"off",id:"path",placeholder:"/home/user/images",value:c,onChange:n=>t(n.target.value)}),e.jsxs(h,{type:"submit",disabled:o.isPending,children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Add Path"]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between border-t pt-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Global Actions"}),e.jsx(h,{variant:"outline",onClick:()=>d.mutate(),disabled:d.isPending,children:d.isPending?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"mr-2 h-4 w-4"})," Scanning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"mr-2 h-4 w-4"})," Scan All Libraries"]})})]}),e.jsx("div",{className:"space-y-2",children:r?e.jsx("p",{children:"Loading paths..."}):l?.length===0?e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No paths added yet."}):e.jsx(A,{type:"single",collapsible:!0,className:"w-full",children:l?.map(n=>e.jsx(ke,{path:n},n.id))})})]})]})]})}function Pe(){const[s,c]=g.useState(!1),t=g.useRef(null),{data:l}=j({queryKey:["system-logs-viewer"],queryFn:()=>H(50),refetchInterval:s?2e3:!1});return g.useEffect(()=>{s&&t.current?.scrollIntoView({behavior:"auto"})},[l,s]),e.jsx(p,{className:"p-0! gap-0!",children:e.jsx(A,{type:"single",collapsible:!0,className:"w-full",onValueChange:r=>c(r==="logs"),children:e.jsxs(B,{value:"logs",className:"border-none",children:[e.jsx(K,{className:"py-3 px-4 hover:no-underline bg-muted/20",children:e.jsx("span",{className:"text-sm font-medium",children:"System Logs"})}),e.jsx(U,{className:"p-0",children:e.jsx($,{type:"always",variant:"left-border",className:"h-50 w-full bg-muted/50 border-t border-border",children:e.jsxs("div",{className:"p-4 font-mono text-xs",children:[l?.map((r,o)=>e.jsx("div",{className:"whitespace-pre-wrap border-b border-border/50 py-0.5 last:border-0",children:r},o)),(!l||l.length===0)&&e.jsx("div",{className:"text-muted-foreground italic py-2",children:"No logs available..."}),e.jsx("div",{ref:t})]})})})]})})})}function Me(){const{data:s,refetch:c,isLoading:t}=j({queryKey:["system-info"],queryFn:async()=>{const l=await fetch(`${x}/system/info`);if(!l.ok)throw new Error("Failed to fetch system info");return l.json()}});return e.jsxs(p,{className:"my-1",children:[e.jsx(M,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_,{children:"System Information"}),e.jsx(F,{children:"Details about the running instance."})]}),e.jsx(h,{variant:"outline",size:"icon",onClick:()=>c(),disabled:t,children:e.jsx(G,{className:`h-4 w-4 ${t?"animate-spin":""}`})})]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase font-medium",children:"Frontend Version"}),e.jsx("span",{className:"font-mono text-sm",children:"0.0.2"})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase font-medium",children:"Backend Version"}),e.jsx("span",{className:"font-mono text-sm",children:s?.version||"..."})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase font-medium",children:"DB Version"}),e.jsx("span",{className:"font-mono text-sm",children:s?.db_version||"..."})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase font-medium",children:"Mode"}),e.jsxs("div",{className:"flex gap-2",children:[!1,s?.dev_mode&&e.jsx("span",{className:"inline-flex items-center rounded-md bg-yellow-400/10 px-2 py-1 text-xs font-medium text-yellow-500 ring-1 ring-inset ring-yellow-400/20",children:"BE: DEV"}),!s?.dev_mode&&e.jsx("span",{className:"inline-flex items-center rounded-md bg-green-400/10 px-2 py-1 text-xs font-medium text-green-500 ring-1 ring-inset ring-green-400/20",children:"PROD"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[e.jsx(ge,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-2xl font-bold",children:s?.stats?.images?.toLocaleString()||0}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Tracked Images"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[e.jsx(ie,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-2xl font-bold",children:s?.stats?.libraries?.toLocaleString()||0}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Libraries"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[e.jsx(se,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:"SQLite"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Database Type"})]})]})]}),e.jsx("div",{className:"pt-4 flex justify-end",children:e.jsx(h,{variant:"outline",size:"sm",disabled:!0,children:"Check for Updates"})})]})]})}function _e(){const{uploadConfig:s,setUploadConfig:c}=P(),{data:t}=j({queryKey:["libraries"],queryFn:oe}),{data:l}=j({queryKey:["collections"],queryFn:X}),r=i=>{c({...s,default_library_id:i==="none"?null:parseInt(i)})},o=i=>{c({...s,default_collection_id:i==="none"?null:parseInt(i)})},d=i=>{c({...s,default_tags:i.target.value})};return e.jsxs(p,{className:"my-1",children:[e.jsxs(M,{children:[e.jsx(_,{children:"Upload Settings"}),e.jsx(F,{children:"Configure default settings for drag-and-drop uploads."})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Default Library"}),e.jsxs(w,{value:s.default_library_id?.toString()||"none",onValueChange:r,children:[e.jsx(S,{children:e.jsx(k,{placeholder:"Select a library"})}),e.jsxs(C,{children:[e.jsx(v,{value:"none",children:"None (Use Default)"}),t?.map(i=>e.jsx(v,{value:i.id.toString(),children:i.name},i.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Default Collection"}),e.jsxs(w,{value:s.default_collection_id?.toString()||"none",onValueChange:o,children:[e.jsx(S,{children:e.jsx(k,{placeholder:"Select a collection"})}),e.jsxs(C,{children:[e.jsx(v,{value:"none",children:"None"}),l?.map(i=>e.jsx(v,{value:i.id.toString(),children:i.name},i.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Default Tags"}),e.jsx(q,{value:s.default_tags,onChange:d,placeholder:"tag1, tag2"})]})]})]})}function Fe(){const{selectedModel:s,setSelectedModel:c,batchSize:t,setBatchSize:l}=P(),[r,o]=g.useState(t);g.useEffect(()=>{o(t)},[t]);const{data:d,isLoading:i}=j({queryKey:["available-models"],queryFn:Y});return e.jsxs(p,{className:"my-1",children:[e.jsxs(M,{children:[e.jsx(_,{children:"General Settings"}),e.jsx(F,{children:"Configure global application settings."})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Global CLIP Model"}),e.jsxs(w,{value:s,onValueChange:c,children:[e.jsx(S,{className:"w-full",children:e.jsx(k,{placeholder:"Select a model"})}),e.jsx(C,{children:i?e.jsx(v,{value:"loading",disabled:!0,children:"Loading models..."}):d?.map(n=>e.jsx(v,{value:n.id,children:n.name},n.id))})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Select the CLIP model to use for embedding generation and search."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Batch Size"}),e.jsx(q,{type:"number",value:r,onChange:n=>o(parseInt(n.target.value,10)),onBlur:()=>{r!==t&&l(r)},min:1,max:100}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of images to process at once during embedding generation."})]})]})]})}const Le=()=>{const{tab:s}=T.useSearch(),c=Z({from:T.fullPath}),t=r=>{c({search:{tab:r}})},l=[{title:"General",icon:e.jsx(W,{className:"h-4 w-4"}),value:"general"},{title:"Library",icon:e.jsx(ce,{className:"h-4 w-4"}),value:"library"},{title:"Upload",icon:e.jsx(ae,{className:"h-4 w-4"}),value:"upload"},{title:"System Info",icon:e.jsx(me,{className:"h-4 w-4"}),value:"info"}];return e.jsxs("div",{className:"p-1 w-full grid grid-cols-4 grid-rows-[auto_1fr] md:grid-rows-[1fr] gap-1 h-full overflow-visible ",children:[e.jsx("div",{className:" col-span-4 md:col-span-1 shrink-0!  overflow-visible h-auto md:h-full border-none ring-0! shadow-none bg-transparent p-0! min-h-0 gap-1",children:e.jsxs(p,{className:"flex-1 h-auto md:h-full p-0! gap-0! shrink-0 flex flex-col overflow-visible min-h-0",children:[e.jsx("div",{className:"flex items-center justify-between shrink-0 border-b border-foreground/10 p-2 bg-muted/35",children:e.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Settings"})}),e.jsx($,{className:"flex-1 flex-col",children:e.jsxs("div",{className:"p-2 flex flex-row space-x-2 space-y-0 md:flex-col md:space-y-1 md:space-x-0",children:[l.map(r=>e.jsx(h,{variant:s===r.value?"secondary":"ghost",className:D("w-fit md:w-full justify-start font-normal h-9",s===r.value&&"bg-muted font-medium"),onClick:()=>t(r.value),children:e.jsxs("span",{className:"flex items-center gap-2 truncate",children:[r.icon,e.jsx("span",{className:"hidden md:inline",children:r.title})]})},r.value)),e.jsx("div",{className:"md:hidden flex items-center justify-between shrink-0 p-2 bg-card ml-auto ",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-sm font-medium",children:l.find(r=>r.value===s)?.title}),l.find(r=>r.value===s)?.icon]})})]})})]})}),e.jsx(p,{className:"col-span-4 md:col-span-3 flex grow flex-col overflow-hidden h-full border-none ring-0! shadow-none bg-transparent p-0! min-h-0",children:e.jsxs("div",{className:"h-full flex flex-col w-full! min-h-0 gap-1! space-y-0!",children:[e.jsx("div",{className:"flex-1 m-0 overflow-y-auto border border-foreground/10 bg-card",children:e.jsxs($,{className:"h-full pl-1 pr-4",variant:"left-border",type:"always",children:[s==="general"&&e.jsx(Fe,{}),s==="library"&&e.jsx(Ce,{}),s==="upload"&&e.jsx(_e,{}),s==="info"&&e.jsx(Me,{})]})}),e.jsx(Pe,{})]})})]})},Ue=Le;export{Ue as component};
