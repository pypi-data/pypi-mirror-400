"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["62042"],{67084:function(t,e,a){a.d(e,{A:function(){return o}});a(28706),a(58940);var i=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=""+t,i=1;i<e;i++)a=parseInt(a)<Math.pow(10,i)?"0".concat(a):a;return a};function o(t){var e=Math.floor(t/1e3/3600),a=Math.floor(t/1e3%3600/60),o=Math.floor(t/1e3%3600%60),n=Math.floor(t%1e3);return e>0?"".concat(e,":").concat(i(a),":").concat(i(o)):a>0?"".concat(a,":").concat(i(o)):o>0||n>0?"".concat(o).concat(n>0?".".concat(i(n,3)):""):null}},26218:function(t,e,a){a.d(e,{a:function(){return n}});var i=a(47075),o=(a(16280),a(69085),a(83851),(0,a(77796).n)(function(t){history.replaceState({scrollPosition:t},"")},300));function n(t){return function(e,a){if("object"===(0,i.A)(a))throw new Error("This decorator does not support this compilation type.");var n=e.connectedCallback;e.connectedCallback=function(){var e=this;n.call(this);var i=this[a];i&&this.updateComplete.then(function(){var a=e.renderRoot.querySelector(t);a&&setTimeout(function(){a.scrollTop=i},0)})};var r,s=Object.getOwnPropertyDescriptor(e,a);if(void 0===s)r={get:function(){var t;return this["__".concat(String(a))]||(null===(t=history.state)||void 0===t?void 0:t.scrollPosition)},set:function(t){o(t),this["__".concat(String(a))]=t},configurable:!0,enumerable:!0};else{var c=s.set;r=Object.assign(Object.assign({},s),{},{set:function(t){o(t),this["__".concat(String(a))]=t,null==c||c.call(this,t)}})}Object.defineProperty(e,a,r)}}},75428:function(t,e,a){a.d(e,{D:function(){return n}});var i=a(75158),o=a.n(i),n=function(t){return o()(t,{whiteList:{},stripIgnoreTag:!0,stripIgnoreTagBody:!0})}},23577:function(t,e,a){a.a(t,async function(t,e){try{var i,o=a(31432),n=a(72153),r=a(44734),s=a(43080),c=a(75864),h=a(69683),d=a(6454),l=(a(28706),a(50113),a(23792),a(62062),a(44114),a(18111),a(20116),a(7588),a(13579),a(75376),a(2892),a(45374),a(26099),a(31415),a(17642),a(58004),a(33853),a(45876),a(32475),a(15024),a(31698),a(47764),a(23500),a(62953),a(40445)),u=a(96196),m=a(77845),p=a(6415),_=a(12814),y=a(15638),v=a(44439),f=a(95747),g=a(20058),x=a(3461),b=a(1087),w=a(38279),A=a(8549),M=t([f,g,v]);[f,g,v]=M.then?(await M)():M;var T=function(t){var e=parseFloat(t);return isFinite(e)?e:null},k=function(t){function e(){var t;(0,r.A)(this,e);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=(0,h.A)(this,e,[].concat(i))).data=[],t.showNames=!0,t.clickForMoreInfo=!0,t.paddingYAxis=0,t.logarithmicScale=!1,t.fitYData=!1,t._chartData=[],t._entityIds=[],t._datasetToDataIndex=[],t._hiddenStats=new Set,t._yWidth=25,t._chartTime=new Date,t._previousYAxisLabelValue=0,t._yAxisMaximumFractionDigits=0,t._renderTooltip=function(e){var a=e[0].axisValue,i=(0,f.yg)(new Date(a),t.hass.locale,t.hass.config)+"<br>",o=[];t._chartData.forEach(function(i,n){var r;if(!1!==(null===(r=i.tooltip)||void 0===r?void 0:r.show)&&!t._hiddenStats.has(i.id)){var s=e.find(function(t){return t.seriesIndex===n});if(s)o.push(s);else{for(var c,h=i.data||[],d=h.length-1;d>=0;d--){var l=h[d];if(l&&l[0]<=a&&"number"==typeof l[1]){c=l;break}}c&&o.push({seriesName:i.name,seriesIndex:n,value:c,marker:'<span style="display:inline-block;margin-right:4px;margin-inline-end:4px;margin-inline-start:initial;border-radius:10px;width:10px;height:10px;background-color:'.concat(i.color,';"></span>')})}}});var n=t.unit?"".concat((0,A.A)(t.unit,t.hass.locale)).concat(t.unit):"";return i+o.map(function(e){var a=t._entityIds[e.seriesIndex],i=t.hass.states[a],o=t.hass.entities[a],r=String(e.value[1]),s=i?t.hass.formatEntityState(i,r):"".concat((0,g.ZV)(r,t.hass.locale,(0,g.ZQ)(void 0,o))).concat(n),c=t._datasetToDataIndex[e.seriesIndex],h=t.data[c];h.statistics&&h.statistics.length>0&&(s+="<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",s+=0===h.states.length||e.value[0]<h.states[0].last_changed?"".concat(t.hass.localize("ui.components.history_charts.source_stats")):"".concat(t.hass.localize("ui.components.history_charts.source_history")));return e.seriesName?"".concat(e.marker," ").concat(e.seriesName,": ").concat(s):"".concat(e.marker," ").concat(s)}).join("<br>")},t._formatYAxisLabel=function(e){var a=Math.max(1,-Math.floor(Math.log10(Math.abs(e-t._previousYAxisLabelValue||1))));t._yAxisMaximumFractionDigits=Math.max(t._yAxisMaximumFractionDigits,a);var i=(0,g.ZV)(e,t.hass.locale,{maximumFractionDigits:t._yAxisMaximumFractionDigits}),o=(0,x.W)(i,12)+5;return o>t._yWidth&&(t._yWidth=o,(0,b.r)((0,c.A)(t),"y-width-changed",{value:t._yWidth,chartIndex:t.chartIndex})),t._previousYAxisLabelValue=e,i},t}return(0,d.A)(e,t),(0,s.A)(e,[{key:"render",value:function(){return(0,u.qy)(i||(i=(0,n.A)([' <ha-chart-base .hass="','" .data="','" .options="','" .height="','" style="','" @dataset-hidden="','" @dataset-unhidden="','" @chart-zoom="','" .expandLegend="','" .hideResetButton="','"></ha-chart-base> '])),this.hass,this._chartData,this._chartOptions,this.height,(0,p.W)({height:this.height}),this._datasetHidden,this._datasetUnhidden,this._handleDataZoom,this.expandLegend,this.hideResetButton)}},{key:"_datasetHidden",value:function(t){this._hiddenStats.add(t.detail.id)}},{key:"_datasetUnhidden",value:function(t){this._hiddenStats.delete(t.detail.id)}},{key:"zoom",value:function(t,e){this.shadowRoot.querySelector("ha-chart-base").zoom(t,e,!0)}},{key:"_handleDataZoom",value:function(t){var e,a;(0,b.r)(this,"chart-zoom-with-index",{start:null!==(e=t.detail.start)&&void 0!==e?e:0,end:null!==(a=t.detail.end)&&void 0!==a?a:100,chartIndex:this.chartIndex})}},{key:"willUpdate",value:function(t){var e=this;if((t.has("data")||t.has("startTime")||t.has("endTime")||this._chartTime<new Date(this.endTime.getTime()-v.p))&&this._generateData(),!this.hasUpdated||t.has("showNames")||t.has("startTime")||t.has("endTime")||t.has("unit")||t.has("logarithmicScale")||t.has("minYAxis")||t.has("maxYAxis")||t.has("fitYData")||t.has("paddingYAxis")||t.has("_visualMap")||t.has("_yWidth")){var a=(0,y.qC)(this.hass),i=this.minYAxis,o=this.maxYAxis;"number"==typeof i?this.fitYData&&(i=function(t){var a=t.min;return Math.min(e._roundYAxis(a,Math.floor),e.minYAxis)}):this.logarithmicScale&&(i=function(t){var a=t.min,i=a>0?.95*a:1.05*a;return e._roundYAxis(i,Math.floor)}),"number"==typeof o?this.fitYData&&(o=function(t){var a=t.max;return Math.max(e._roundYAxis(a,Math.ceil),e.maxYAxis)}):this.logarithmicScale&&(o=function(t){var a=t.max,i=a>0?1.05*a:.95*a;return e._roundYAxis(i,Math.ceil)}),this._chartOptions={xAxis:{type:"time",min:this.startTime,max:this.endTime},yAxis:{type:this.logarithmicScale?"log":"value",name:this.unit,min:this._clampYAxis(i),max:this._clampYAxis(o),position:a?"right":"left",scale:!0,nameGap:2,nameTextStyle:{align:"left"},axisLine:{show:!1},axisLabel:{margin:5,formatter:this._formatYAxisLabel}},legend:{type:"custom",show:this.showNames},grid:{top:15,left:a?1:Math.max(this.paddingYAxis,this._yWidth),right:a?Math.max(this.paddingYAxis,this._yWidth):1,bottom:20},visualMap:this._visualMap,tooltip:{trigger:"axis",appendTo:document.body,formatter:this._renderTooltip}}}}},{key:"_generateData",value:function(){var t=this,e=0,a=getComputedStyle(this),i=this.data,n=[],r=[],s=[];if(0!==i.length){this._chartTime=new Date;var c=this.endTime,h=this.names||{};i.forEach(function(i,d){var l=i.domain,u=h[i.entity_id]||i.name,m=null,p=[],y=function(t,e){e&&(t>c||(p.forEach(function(a,i){null===e[i]&&m&&null!==m[i]&&a.data.push([t,m[i]]),a.data.push([t,e[i]])}),m=e))},v=function(t,o,n){var c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n||(n=(0,_.fI)(e,a),e++),p.push({id:t,data:[],type:"line",cursor:"default",name:o,color:n,symbol:"circle",symbolSize:1,step:"end",sampling:"minmax",animationDurationUpdate:0,lineStyle:{width:c?0:1.5},areaStyle:c?{color:n+"7F"}:void 0,tooltip:{show:!c}}),r.push(i.entity_id),s.push(d)};if("thermostat"===l||"climate"===l||"water_heater"===l){var f=i.states.some(function(t){var e;return null===(e=t.attributes)||void 0===e?void 0:e.hvac_action}),g="climate"===l&&f?function(t){var e;return"heat"===w.sx[null===(e=t.attributes)||void 0===e?void 0:e.hvac_action]}:function(t){return"heat"===t.state},x="climate"===l&&f?function(t){var e;return"cool"===w.sx[null===(e=t.attributes)||void 0===e?void 0:e.hvac_action]}:function(t){return"cool"===t.state},b=i.states.some(g),A=i.states.some(x),M=i.states.some(function(t){return t.attributes&&t.attributes.target_temp_high!==t.attributes.target_temp_low});v(i.entity_id+"-current_temperature",t.showNames?t.hass.localize("ui.card.climate.current_temperature",{name:u}):t.hass.localize("component.climate.entity_component._.state_attributes.current_temperature.name")),b&&v(i.entity_id+"-heating",t.showNames?t.hass.localize("ui.card.climate.heating",{name:u}):t.hass.localize("component.climate.entity_component._.state_attributes.hvac_action.state.heating"),a.getPropertyValue("--state-climate-heat-color"),!0),A&&v(i.entity_id+"-cooling",t.showNames?t.hass.localize("ui.card.climate.cooling",{name:u}):t.hass.localize("component.climate.entity_component._.state_attributes.hvac_action.state.cooling"),a.getPropertyValue("--state-climate-cool-color"),!0),M?(v(i.entity_id+"-target_temperature_mode",t.showNames?t.hass.localize("ui.card.climate.target_temperature_mode",{name:u,mode:t.hass.localize("ui.card.climate.high")}):t.hass.localize("component.climate.entity_component._.state_attributes.target_temp_high.name")),v(i.entity_id+"-target_temperature_mode_low",t.showNames?t.hass.localize("ui.card.climate.target_temperature_mode",{name:u,mode:t.hass.localize("ui.card.climate.low")}):t.hass.localize("component.climate.entity_component._.state_attributes.target_temp_low.name"))):v(i.entity_id+"-target_temperature",t.showNames?t.hass.localize("ui.card.climate.target_temperature_entity",{name:u}):t.hass.localize("component.climate.entity_component._.state_attributes.temperature.name")),i.states.forEach(function(t){if(t.attributes){var e=T(t.attributes.current_temperature),a=[e];if(b&&a.push(g(t)?e:null),A&&a.push(x(t)?e:null),M){var i=T(t.attributes.target_temp_high),o=T(t.attributes.target_temp_low);a.push(i,o),y(new Date(t.last_changed),a)}else{var n=T(t.attributes.temperature);a.push(n),y(new Date(t.last_changed),a)}}})}else if("humidifier"===l){var k=i.states.some(function(t){var e;return null===(e=t.attributes)||void 0===e?void 0:e.action}),D=i.states.some(function(t){var e;return null===(e=t.attributes)||void 0===e?void 0:e.current_humidity}),z=k&&i.states.some(function(t){var e;return"humidifying"===(null===(e=t.attributes)||void 0===e?void 0:e.action)}),Z=k&&i.states.some(function(t){var e;return"drying"===(null===(e=t.attributes)||void 0===e?void 0:e.action)});v(i.entity_id+"-target_humidity",t.showNames?t.hass.localize("ui.card.humidifier.target_humidity_entity",{name:u}):t.hass.localize("component.humidifier.entity_component._.state_attributes.humidity.name")),D&&v(i.entity_id+"-current_humidity",t.showNames?t.hass.localize("ui.card.humidifier.current_humidity_entity",{name:u}):t.hass.localize("component.humidifier.entity_component._.state_attributes.current_humidity.name")),z?v(i.entity_id+"-humidifying",t.showNames?t.hass.localize("ui.card.humidifier.humidifying",{name:u}):t.hass.localize("component.humidifier.entity_component._.state_attributes.action.state.humidifying"),a.getPropertyValue("--state-humidifier-on-color"),!0):Z?v(i.entity_id+"-drying",t.showNames?t.hass.localize("ui.card.humidifier.drying",{name:u}):t.hass.localize("component.humidifier.entity_component._.state_attributes.action.state.drying"),a.getPropertyValue("--state-humidifier-on-color"),!0):v(i.entity_id+"-on",t.showNames?t.hass.localize("ui.card.humidifier.on_entity",{name:u}):t.hass.localize("component.humidifier.entity_component._.state.on"),void 0,!0),i.states.forEach(function(t){var e;if(t.attributes){var a,i=T(t.attributes.humidity),o=D?T(null===(e=t.attributes)||void 0===e?void 0:e.current_humidity):i,n=[i];if(D&&n.push(o),z)n.push("humidifying"===(null===(a=t.attributes)||void 0===a?void 0:a.action)?o:null);else if(Z){var r;n.push("drying"===(null===(r=t.attributes)||void 0===r?void 0:r.action)?o:null)}else n.push("on"===t.state?o:null);y(new Date(t.last_changed),n)}})}else{var Y,S;v(i.entity_id,u);var I=null,C=function(t){var e=T(t.state),a=new Date(t.last_changed);if(null!==e&&I){var i,o=a.getTime(),n=I.getTime(),r=null===(i=S)||void 0===i?void 0:i.getTime();y(I,[(n-r)/(o-r)*(e-Y)+Y]),y(new Date(n+1),[null]),y(a,[e]),S=a,Y=e,I=null}else null!==e&&null===I?(y(a,[e]),S=a,Y=e):null===e&&null===I&&void 0!==Y&&(I=a)};if(i.statistics){var N,W=i.states&&0!==i.states.length?i.states[0].last_changed:0,B=(0,o.A)(i.statistics);try{for(B.s();!(N=B.n()).done;){var L=N.value;if(W&&L.last_changed>=W)break;C(L)}}catch(E){B.e(E)}finally{B.f()}}i.states.forEach(function(t){C(t)}),null!==I&&y(I,[null])}y(c,m),Array.prototype.push.apply(n,p)}),this._chartData=n,this._entityIds=r,this._datasetToDataIndex=s;var d=[];this._chartData.forEach(function(e,a){var i,o,n=t._datasetToDataIndex[a],r=t.data[n];if(r.statistics&&0!==r.statistics.length){var s=null!==(i=null===(o=r.states[0])||void 0===o?void 0:o.last_changed)&&void 0!==i?i:t.endTime.getTime();d.push({show:!1,seriesIndex:a,dimension:0,pieces:[{max:s-.01,colorAlpha:.5},{min:s,colorAlpha:1}]})}}),this._visualMap=d.length>0?d:void 0}}},{key:"_clampYAxis",value:function(t){if(this.logarithmicScale){if("number"==typeof t)return Math.max(t,Number.EPSILON);if("function"==typeof t)return function(e){return Math.max(t(e),Number.EPSILON)}}return t}},{key:"_roundYAxis",value:function(t,e){return Math.abs(t)<1?t:e(t)}}])}(u.WF);(0,l.__decorate)([(0,m.MZ)({attribute:!1})],k.prototype,"hass",void 0),(0,l.__decorate)([(0,m.MZ)({attribute:!1})],k.prototype,"data",void 0),(0,l.__decorate)([(0,m.MZ)({attribute:!1})],k.prototype,"names",void 0),(0,l.__decorate)([(0,m.MZ)()],k.prototype,"unit",void 0),(0,l.__decorate)([(0,m.MZ)()],k.prototype,"identifier",void 0),(0,l.__decorate)([(0,m.MZ)({attribute:"show-names",type:Boolean})],k.prototype,"showNames",void 0),(0,l.__decorate)([(0,m.MZ)({attribute:"click-for-more-info",type:Boolean})],k.prototype,"clickForMoreInfo",void 0),(0,l.__decorate)([(0,m.MZ)({attribute:!1})],k.prototype,"startTime",void 0),(0,l.__decorate)([(0,m.MZ)({attribute:!1})],k.prototype,"endTime",void 0),(0,l.__decorate)([(0,m.MZ)({attribute:!1,type:Number})],k.prototype,"paddingYAxis",void 0),(0,l.__decorate)([(0,m.MZ)({attribute:!1,type:Number})],k.prototype,"chartIndex",void 0),(0,l.__decorate)([(0,m.MZ)({attribute:"logarithmic-scale",type:Boolean})],k.prototype,"logarithmicScale",void 0),(0,l.__decorate)([(0,m.MZ)({attribute:!1,type:Number})],k.prototype,"minYAxis",void 0),(0,l.__decorate)([(0,m.MZ)({attribute:!1,type:Number})],k.prototype,"maxYAxis",void 0),(0,l.__decorate)([(0,m.MZ)({attribute:"fit-y-data",type:Boolean})],k.prototype,"fitYData",void 0),(0,l.__decorate)([(0,m.MZ)({type:String})],k.prototype,"height",void 0),(0,l.__decorate)([(0,m.MZ)({attribute:"expand-legend",type:Boolean})],k.prototype,"expandLegend",void 0),(0,l.__decorate)([(0,m.MZ)({attribute:"hide-reset-button",type:Boolean})],k.prototype,"hideResetButton",void 0),(0,l.__decorate)([(0,m.wk)()],k.prototype,"_chartData",void 0),(0,l.__decorate)([(0,m.wk)()],k.prototype,"_entityIds",void 0),(0,l.__decorate)([(0,m.wk)()],k.prototype,"_chartOptions",void 0),(0,l.__decorate)([(0,m.wk)()],k.prototype,"_yWidth",void 0),(0,l.__decorate)([(0,m.wk)()],k.prototype,"_visualMap",void 0),customElements.define("state-history-chart-line",k),e()}catch(D){e(D)}})},13672:function(t,e,a){a.a(t,async function(t,e){try{var i,o,n=a(72153),r=a(44734),s=a(43080),c=a(69683),h=a(6454),d=(a(28706),a(50113),a(44114),a(18111),a(20116),a(7588),a(2892),a(69085),a(26099),a(27495),a(25440),a(79978),a(23500),a(40445)),l=a(96196),u=a(77845),m=a(95747),p=a(67084),_=a(15638),y=a(44439),v=a(72190),f=a(71578),g=a(79622),x=a(79468),b=a(3461),w=a(1087),A=t([m,y]);[m,y]=A.then?(await A)():A;var M=function(t){function e(){var t;(0,r.A)(this,e);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=(0,c.A)(this,e,[].concat(i))).data=[],t.narrow=!1,t.showNames=!0,t.clickForMoreInfo=!0,t.chunked=!1,t.paddingYAxis=0,t._chartData=[],t._yWidth=0,t._chartTime=new Date,t._renderItem=function(t,e){var a=e.value(0),i=e.coord([e.value(1),a]),o=e.coord([e.value(2),a]),n=t.coordSys,r=f.default.graphic.clipRectByRect({x:i[0],y:i[1]-10,width:o[0]-i[0],height:20},{x:n.x,y:n.y,width:n.width,height:n.height});if(!r)return null;var s={type:"rect",transition:"shape",shape:r,style:{fill:e.value(4)}},c=e.value(3).replaceAll("\n"," ");return(0,b.W)(c,12)<r.width-8?{type:"group",children:[s,{type:"text",style:Object.assign(Object.assign({},r),{},{x:r.x+4,text:c,fill:e.value(5),fontSize:12,lineHeight:r.height})}]}:s},t._renderTooltip=function(e){var a=Array.isArray(e)?e[0]:e,i=a.value,o=a.name,n=a.marker,r=a.seriesName,s=a.color,c=r?'<h4 style="text-align: center; margin: 0;">'.concat(r,"</h4>"):"",h=i[2]-i[1],d="".concat(t.hass.localize("ui.components.history_charts.duration"),": ").concat((0,p.A)(h));return[c,[((0,_.qC)(t.hass)?'<span style="direction: rtl;display:inline-block;margin-right:4px;margin-inline-end:4px;border-radius:10px;width:10px;height:10px;background-color:'.concat(s,';"></span>'):n)+o,(0,m.yg)(new Date(i[1]),t.hass.locale,t.hass.config),(0,m.yg)(new Date(i[2]),t.hass.locale,t.hass.config),d].join("<br>")].join("")},t}return(0,h.A)(e,t),(0,s.A)(e,[{key:"render",value:function(){return(0,l.qy)(i||(i=(0,n.A)([' <ha-chart-base .hass="','" .options="','" .height="','" .data="','" small-controls @chart-click="','" @chart-zoom="','" .hideResetButton="','"></ha-chart-base> '])),this.hass,this._chartOptions,"".concat(30*this.data.length+30,"px"),this._chartData,this._handleChartClick,this._handleDataZoom,this.hideResetButton)}},{key:"willUpdate",value:function(t){(t.has("startTime")||t.has("endTime")||t.has("data")||this._chartTime<new Date(this.endTime.getTime()-y.p))&&this._generateData(),(!this.hasUpdated||t.has("startTime")||t.has("endTime")||t.has("showNames")||t.has("paddingYAxis")||t.has("_yWidth"))&&this._createOptions()}},{key:"_createOptions",value:function(){var t=this,e=this.narrow,a=this.chunked||this.showNames,i=e?105:185,o=a?Math.max(this.paddingYAxis,this._yWidth):0,n=(0,_.qC)(this.hass);this._chartOptions={xAxis:{type:"time",min:this.startTime,max:this.endTime,axisTick:{show:!0},splitLine:{show:!1}},yAxis:{type:"category",inverse:!0,position:n?"right":"left",triggerEvent:!0,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:a,width:o,overflow:"truncate",margin:5,formatter:function(e){var a,o=null===(a=t._chartData.find(function(t){return t.id===e}))||void 0===a?void 0:a.name,n=o?Math.min((0,b.W)(o,12)+5,i):0;return n>t._yWidth&&(t._yWidth=n,(0,w.r)(t,"y-width-changed",{value:t._yWidth,chartIndex:t.chartIndex})),o},hideOverlap:!0}},grid:{top:10,bottom:30,left:n?1:o,right:n?o:1},tooltip:{appendTo:document.body,formatter:this._renderTooltip}}}},{key:"zoom",value:function(t,e){this.shadowRoot.querySelector("ha-chart-base").zoom(t,e,!0)}},{key:"_handleDataZoom",value:function(t){var e,a;(0,w.r)(this,"chart-zoom-with-index",{start:null!==(e=t.detail.start)&&void 0!==e?e:0,end:null!==(a=t.detail.end)&&void 0!==a?a:100,chartIndex:this.chartIndex})}},{key:"_generateData",value:function(){var t=this,e=getComputedStyle(this),a=this.data;a||(a=[]),this._chartTime=new Date;var i=this.startTime,o=this.endTime,n=[],r=this.names||{};a.forEach(function(a){var s,c=null,h=null,d=i,l=t.showNames?r[a.entity_id]||a.name||a.entity_id:"",u=[];if(a.data.forEach(function(i){var n=i.state;if(n||(n=null),!(new Date(i.last_changed)>o))if(null===c)c=n,h=i.state_localize,d=new Date(i.last_changed);else if(n!==c){s=new Date(i.last_changed);var r=(0,v.c)(c,e,t.hass.states[a.entity_id]);u.push({value:[a.entity_id,d,s,h,r,(0,g.EP)((0,x.xp)(r))>.5?"#000":"#fff"],itemStyle:{color:r}}),c=n,h=i.state_localize,d=s}}),null!==c){var m=(0,v.c)(c,e,t.hass.states[a.entity_id]);u.push({value:[a.entity_id,d,o,h,m,(0,g.EP)((0,x.xp)(m))>.5?"#000":"#fff"],itemStyle:{color:m}})}n.push({id:a.entity_id,data:u,name:l,dimensions:["id","start","end","name","color","textColor"],type:"custom",encode:{x:[1,2],y:0,itemName:3},renderItem:t._renderItem,progressive:0})}),this._chartData=n}},{key:"_handleChartClick",value:function(t){if("axisLabel"===t.detail.targetType){var e=this._chartData[t.detail.dataIndex];e&&(0,w.r)(this,"hass-more-info",{entityId:e.id})}}}])}(l.WF);M.styles=(0,l.AH)(o||(o=(0,n.A)(["ha-chart-base{--chart-max-height:none}"]))),(0,d.__decorate)([(0,u.MZ)({attribute:!1})],M.prototype,"hass",void 0),(0,d.__decorate)([(0,u.MZ)({attribute:!1})],M.prototype,"data",void 0),(0,d.__decorate)([(0,u.MZ)({type:Boolean})],M.prototype,"narrow",void 0),(0,d.__decorate)([(0,u.MZ)({attribute:!1})],M.prototype,"names",void 0),(0,d.__decorate)([(0,u.MZ)()],M.prototype,"unit",void 0),(0,d.__decorate)([(0,u.MZ)()],M.prototype,"identifier",void 0),(0,d.__decorate)([(0,u.MZ)({attribute:"show-names",type:Boolean})],M.prototype,"showNames",void 0),(0,d.__decorate)([(0,u.MZ)({attribute:"click-for-more-info",type:Boolean})],M.prototype,"clickForMoreInfo",void 0),(0,d.__decorate)([(0,u.MZ)({type:Boolean})],M.prototype,"chunked",void 0),(0,d.__decorate)([(0,u.MZ)({attribute:!1})],M.prototype,"startTime",void 0),(0,d.__decorate)([(0,u.MZ)({attribute:!1})],M.prototype,"endTime",void 0),(0,d.__decorate)([(0,u.MZ)({attribute:!1,type:Number})],M.prototype,"paddingYAxis",void 0),(0,d.__decorate)([(0,u.MZ)({attribute:!1,type:Number})],M.prototype,"chartIndex",void 0),(0,d.__decorate)([(0,u.MZ)({attribute:"hide-reset-button",type:Boolean})],M.prototype,"hideResetButton",void 0),(0,d.__decorate)([(0,u.wk)()],M.prototype,"_chartData",void 0),(0,d.__decorate)([(0,u.wk)()],M.prototype,"_chartOptions",void 0),(0,d.__decorate)([(0,u.wk)()],M.prototype,"_yWidth",void 0),M=(0,d.__decorate)([(0,u.EM)("state-history-chart-timeline")],M),e()}catch(T){e(T)}})},66737:function(t,e,a){a.a(t,async function(t,e){try{var i,o,n,r,s,c,h,d,l,u,m,p=a(7739),_=a(72153),y=a(44734),v=a(43080),f=a(69683),g=a(6454),x=(a(28706),a(74423),a(23792),a(62062),a(44114),a(72712),a(18111),a(7588),a(61701),a(18237),a(2892),a(26099),a(16034),a(23500),a(62953),a(40445)),b=a(96196),w=a(77845),A=a(36312),M=a(26218),T=a(85614),k=(a(27661),a(67094),a(23577)),D=a(13672),z=t([k,D]);[k,D]=z.then?(await z)():z;var Z=function(t){function e(){var t;(0,y.A)(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=(0,f.A)(this,e,[].concat(r))).narrow=!1,t.virtualize=!1,t.upToNow=!1,t.showNames=!0,t.clickForMoreInfo=!0,t.isLoadingData=!1,t.logarithmicScale=!1,t.fitYData=!1,t.syncCharts=!1,t._maxYWidth=0,t._childYWidths=[],t._chartCount=0,t._hasZoomedCharts=!1,t._isSyncing=!1,t._renderHistoryItem=function(e,a){return e&&void 0!==a?Array.isArray(e)?(0,b.qy)(n||(n=(0,_.A)(['<div class="entry-container timeline"> <state-history-chart-timeline .hass="','" .data="','" .startTime="','" .endTime="','" .showNames="','" .names="','" .narrow="','" .chunked="','" .paddingYAxis="','" .chartIndex="','" .clickForMoreInfo="','" @y-width-changed="','" @chart-zoom-with-index="','" ?hide-reset-button="','"></state-history-chart-timeline> </div> '])),t.hass,e,t._computedStartTime,t._computedEndTime,t.showNames,t.names,t.narrow,t.virtualize,t._maxYWidth,a,t.clickForMoreInfo,t._yWidthChanged,t._handleTimelineSync,t.syncCharts):(0,b.qy)(o||(o=(0,_.A)(['<div class="entry-container line"> <state-history-chart-line .hass="','" .unit="','" .data="','" .identifier="','" .showNames="','" .startTime="','" .endTime="','" .paddingYAxis="','" .names="','" .chartIndex="','" .clickForMoreInfo="','" .logarithmicScale="','" .minYAxis="','" .maxYAxis="','" .fitYData="','" @y-width-changed="','" @chart-zoom-with-index="','" .height="','" .expandLegend="','" ?hide-reset-button="','"></state-history-chart-line> </div> '])),t.hass,e.unit,e.data,e.identifier,t.showNames,t._computedStartTime,t._computedEndTime,t._maxYWidth,t.names,a,t.clickForMoreInfo,t.logarithmicScale,t.minYAxis,t.maxYAxis,t.fitYData,t._yWidthChanged,t._handleTimelineSync,t.virtualize?void 0:t.height,t.expandLegend,t.syncCharts):(0,b.qy)(i||(i=(0,_.A)([""])))},t}return(0,g.A)(e,t),(0,v.A)(e,[{key:"render",value:function(){var t=this;if(!(0,A.x)(this.hass,"history"))return(0,b.qy)(r||(r=(0,_.A)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.history_charts.history_disabled"));if(this.isLoadingData&&!this.historyData)return(0,b.qy)(s||(s=(0,_.A)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.history_charts.loading_history"));if(this._isHistoryEmpty())return(0,b.qy)(c||(c=(0,_.A)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.history_charts.no_history_found"));var e,a,i=this.historyData.timeline.length?(this.virtualize?(e=this.historyData.timeline,a=10,e.reduce(function(t,e,i){var o=Math.floor(i/a);return t[o]||(t[o]=[]),t[o].push(e),t},[])):[this.historyData.timeline]).concat(this.historyData.line):this.historyData.line;return this._chartCount=i.length,(0,b.qy)(h||(h=(0,_.A)([" "," "," "])),this.virtualize?(0,b.qy)(d||(d=(0,_.A)(['<div class="container ha-scrollbar" @scroll="','"> <lit-virtualizer scroller class="ha-scrollbar" .items="','" .renderItem="','"> </lit-virtualizer> </div>'])),this._saveScrollPos,i,this._renderHistoryItem):(0,b.qy)(l||(l=(0,_.A)(["",""])),i.map(function(e,a){return t._renderHistoryItem(e,a)})),this.syncCharts&&this._hasZoomedCharts?(0,b.qy)(u||(u=(0,_.A)(['<ha-fab slot="fab" class="reset-button" .label="','" @click="','"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> </ha-fab>'])),this.hass.localize("ui.components.history_charts.zoom_reset"),this._handleGlobalZoomReset,"M12,4C14.1,4 16.1,4.8 17.6,6.3C20.7,9.4 20.7,14.5 17.6,17.6C15.8,19.5 13.3,20.2 10.9,19.9L11.4,17.9C13.1,18.1 14.9,17.5 16.2,16.2C18.5,13.9 18.5,10.1 16.2,7.7C15.1,6.6 13.5,6 12,6V10.6L7,5.6L12,0.6V4M6.3,17.6C3.7,15 3.3,11 5.1,7.9L6.6,9.4C5.5,11.6 5.9,14.4 7.8,16.2C8.3,16.7 8.9,17.1 9.6,17.4L9,19.4C8,19 7.1,18.4 6.3,17.6Z"):b.s6)}},{key:"shouldUpdate",value:function(t){return(1!==t.size||!t.has("hass"))&&(1!==t.size||!t.has("_maxYWidth")||t.get("_maxYWidth")!==this._maxYWidth)}},{key:"willUpdate",value:function(t){if(this.hasUpdated||(0,T.i)(),(0,p.A)(t.keys()).some(function(t){return!["_maxYWidth","_childYWidths","_chartCount"].includes(t)})){var e=new Date;if(this._computedEndTime=this.upToNow||!this.endTime||this.endTime>e?e:this.endTime,this.startTime)this._computedStartTime=this.startTime;else if(this.hoursToShow)this._computedStartTime=new Date((new Date).getTime()-3600*this.hoursToShow*1e3);else{var a,i,o,n,r=(null!==(a=null===(i=this.historyData)||void 0===i?void 0:i.timeline)&&void 0!==a?a:[]).reduce(function(t,e){return Math.min(t,new Date(e.data[0].last_changed).getTime())},(new Date).getTime());r=(null!==(o=null===(n=this.historyData)||void 0===n?void 0:n.line)&&void 0!==o?o:[]).reduce(function(t,e){return Math.min(t,e.data.reduce(function(t,e){return Math.min(t,new Date(e.states[0].last_changed).getTime())},t))},r),this._computedStartTime=new Date(r)}}}},{key:"updated",value:function(t){t.has("_chartCount")&&this._chartCount<this._childYWidths.length&&(this._childYWidths.length=this._chartCount,this._maxYWidth=Math.max.apply(Math,(0,p.A)(Object.values(this._childYWidths)).concat([0])))}},{key:"_yWidthChanged",value:function(t){this._childYWidths[t.detail.chartIndex]=t.detail.value,this._maxYWidth=Math.max.apply(Math,(0,p.A)(Object.values(this._childYWidths)).concat([0]))}},{key:"_handleTimelineSync",value:function(t){if(this.syncCharts&&!this._isSyncing){var e=t.detail,a=e.start,i=e.end,o=e.chartIndex;this._hasZoomedCharts=0!==a||100!==i,this._syncZoomToAllCharts(a,i,o)}}},{key:"_syncZoomToAllCharts",value:function(t,e,a){var i=this;this._isSyncing=!0,requestAnimationFrame(function(){i.renderRoot.querySelectorAll("state-history-chart-line, state-history-chart-timeline").forEach(function(i,o){o!==a&&"zoom"in i&&i.zoom(t,e)}),i._isSyncing=!1})}},{key:"_handleGlobalZoomReset",value:function(){var t=this;this._hasZoomedCharts=!1,this._isSyncing=!0,requestAnimationFrame(function(){t.renderRoot.querySelectorAll("state-history-chart-line, state-history-chart-timeline").forEach(function(t){var e,a=null===(e=t.renderRoot)||void 0===e?void 0:e.querySelector("ha-chart-base");a&&a.chart&&a.zoom(0,100)}),t._isSyncing=!1})}},{key:"_isHistoryEmpty",value:function(){var t=!this.historyData||!this.historyData.timeline||!this.historyData.line||0===this.historyData.timeline.length&&0===this.historyData.line.length;return!this.isLoadingData&&t}},{key:"_saveScrollPos",value:function(t){this._savedScrollPos=t.target.scrollTop}}])}(b.WF);Z.styles=(0,b.AH)(m||(m=(0,_.A)([":host{display:flex;flex-direction:column;min-height:60px}:host([virtualize]){height:100%}.info{text-align:center;line-height:60px;color:var(--secondary-text-color)}.container{max-height:var(--history-max-height)}.entry-container{width:100%}.entry-container.line{flex:1;padding-top:8px;overflow:hidden}.entry-container:hover{z-index:1}:host([virtualize]) .entry-container{padding-left:1px;padding-right:1px;padding-inline-start:1px;padding-inline-end:1px}.entry-container.timeline:first-child{margin-top:var(--timeline-top-margin)}.entry-container:not(:first-child){border-top:2px solid var(--divider-color);margin-top:16px}.container,lit-virtualizer{height:100%;width:100%}lit-virtualizer{contain:size layout!important}state-history-chart-line,state-history-chart-timeline{width:100%}.reset-button{position:fixed;bottom:calc(24px + var(--safe-area-inset-bottom));right:calc(24px + var(--safe-area-inset-bottom));z-index:1}"]))),(0,x.__decorate)([(0,w.MZ)({attribute:!1})],Z.prototype,"hass",void 0),(0,x.__decorate)([(0,w.MZ)({attribute:!1})],Z.prototype,"historyData",void 0),(0,x.__decorate)([(0,w.MZ)({type:Boolean})],Z.prototype,"narrow",void 0),(0,x.__decorate)([(0,w.MZ)({attribute:!1})],Z.prototype,"names",void 0),(0,x.__decorate)([(0,w.MZ)({type:Boolean,reflect:!0})],Z.prototype,"virtualize",void 0),(0,x.__decorate)([(0,w.MZ)({attribute:!1})],Z.prototype,"endTime",void 0),(0,x.__decorate)([(0,w.MZ)({attribute:!1})],Z.prototype,"startTime",void 0),(0,x.__decorate)([(0,w.MZ)({type:Boolean,attribute:"up-to-now"})],Z.prototype,"upToNow",void 0),(0,x.__decorate)([(0,w.MZ)({attribute:!1,type:Number})],Z.prototype,"hoursToShow",void 0),(0,x.__decorate)([(0,w.MZ)({attribute:"show-names",type:Boolean})],Z.prototype,"showNames",void 0),(0,x.__decorate)([(0,w.MZ)({attribute:"click-for-more-info",type:Boolean})],Z.prototype,"clickForMoreInfo",void 0),(0,x.__decorate)([(0,w.MZ)({attribute:"is-loading-data",type:Boolean})],Z.prototype,"isLoadingData",void 0),(0,x.__decorate)([(0,w.MZ)({attribute:"logarithmic-scale",type:Boolean})],Z.prototype,"logarithmicScale",void 0),(0,x.__decorate)([(0,w.MZ)({attribute:!1,type:Number})],Z.prototype,"minYAxis",void 0),(0,x.__decorate)([(0,w.MZ)({attribute:!1,type:Number})],Z.prototype,"maxYAxis",void 0),(0,x.__decorate)([(0,w.MZ)({attribute:"fit-y-data",type:Boolean})],Z.prototype,"fitYData",void 0),(0,x.__decorate)([(0,w.MZ)({type:String})],Z.prototype,"height",void 0),(0,x.__decorate)([(0,w.MZ)({attribute:"expand-legend",type:Boolean})],Z.prototype,"expandLegend",void 0),(0,x.__decorate)([(0,w.MZ)({attribute:"sync-charts",type:Boolean})],Z.prototype,"syncCharts",void 0),(0,x.__decorate)([(0,w.wk)()],Z.prototype,"_maxYWidth",void 0),(0,x.__decorate)([(0,w.wk)()],Z.prototype,"_childYWidths",void 0),(0,x.__decorate)([(0,w.wk)()],Z.prototype,"_chartCount",void 0),(0,x.__decorate)([(0,w.wk)()],Z.prototype,"_hasZoomedCharts",void 0),(0,x.__decorate)([(0,M.a)(".container")],Z.prototype,"_savedScrollPos",void 0),(0,x.__decorate)([(0,w.Ls)({passive:!0})],Z.prototype,"_saveScrollPos",null),Z=(0,x.__decorate)([(0,w.EM)("state-history-charts")],Z),e()}catch(Y){e(Y)}})},34296:function(t,e,a){var i,o,n,r,s=a(72153),c=a(44734),h=a(43080),d=a(69683),l=a(6454),u=a(25460),m=(a(28706),a(69085),a(40445)),p=a(96229),_=a(26069),y=a(91735),v=a(42034),f=a(96196),g=a(77845),x=function(t){function e(){var t;(0,c.A)(this,e);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=(0,d.A)(this,e,[].concat(i))).filled=!1,t.active=!1,t}return(0,l.A)(e,t),(0,h.A)(e,[{key:"renderOutline",value:function(){return this.filled?(0,f.qy)(i||(i=(0,s.A)(['<span class="filled"></span>']))):(0,u.A)(e,"renderOutline",this,3)([])}},{key:"getContainerClasses",value:function(){return Object.assign(Object.assign({},(0,u.A)(e,"getContainerClasses",this,3)([])),{},{active:this.active})}},{key:"renderPrimaryContent",value:function(){return(0,f.qy)(o||(o=(0,s.A)([' <span class="leading icon" aria-hidden="true"> ',' </span> <span class="label">','</span> <span class="touch"></span> <span class="trailing leading icon" aria-hidden="true"> '," </span> "])),this.renderLeadingIcon(),this.label,this.renderTrailingIcon())}},{key:"renderTrailingIcon",value:function(){return(0,f.qy)(n||(n=(0,s.A)(['<slot name="trailing-icon"></slot>'])))}}])}(p.k);x.styles=[y.R,v.R,_.R,(0,f.AH)(r||(r=(0,s.A)([":host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-assist-chip-container-shape:var(\n          --ha-assist-chip-container-shape,\n          16px\n        );--md-assist-chip-outline-color:var(--outline-color);--md-assist-chip-label-text-weight:400}.filled{display:flex;pointer-events:none;border-radius:inherit;inset:0;position:absolute;background-color:var(--ha-assist-chip-filled-container-color)}::slotted([slot=icon]),::slotted([slot=trailing-icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px);font-size:var(--_label-text-size)!important}.trailing.icon ::slotted(*),.trailing.icon svg{margin-inline-end:unset;margin-inline-start:var(--_icon-label-space)}::before{background:var(--ha-assist-chip-container-color,transparent);opacity:var(--ha-assist-chip-container-opacity, 1)}:where(.active)::before{background:var(--ha-assist-chip-active-container-color);opacity:var(--ha-assist-chip-active-container-opacity)}.label{font-family:var(--ha-font-family-body)}"])))],(0,m.__decorate)([(0,g.MZ)({type:Boolean,reflect:!0})],x.prototype,"filled",void 0),(0,m.__decorate)([(0,g.MZ)({type:Boolean})],x.prototype,"active",void 0),x=(0,m.__decorate)([(0,g.EM)("ha-assist-chip")],x)},27661:function(t,e,a){var i,o,n,r=a(72153),s=a(44734),c=a(43080),h=a(69683),d=a(25460),l=a(6454),u=a(40445),m=a(51978),p=a(94743),_=a(77845),y=a(96196),v=a(63091),f=function(t){function e(){return(0,s.A)(this,e),(0,h.A)(this,e,arguments)}return(0,l.A)(e,t),(0,c.A)(e,[{key:"firstUpdated",value:function(t){(0,d.A)(e,"firstUpdated",this,3)([t]),this.style.setProperty("--mdc-theme-secondary","var(--primary-color)")}}])}(m.n);f.styles=[p.R,(0,y.AH)(i||(i=(0,r.A)([":host{--mdc-typography-button-text-transform:none;--mdc-typography-button-font-size:var(--ha-font-size-l);--mdc-typography-button-font-family:var(--ha-font-family-body);--mdc-typography-button-font-weight:var(--ha-font-weight-medium)}:host .mdc-fab--extended{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab.mdc-fab--extended .ripple{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab--extended .mdc-fab__icon{margin-inline-start:-8px;margin-inline-end:12px;direction:var(--direction)}:disabled{--mdc-theme-secondary:var(--disabled-text-color);pointer-events:none}"]))),"rtl"===v.G.document.dir?(0,y.AH)(o||(o=(0,r.A)([":host .mdc-fab--extended .mdc-fab__icon{direction:rtl}"]))):(0,y.AH)(n||(n=(0,r.A)([""])))],f=(0,u.__decorate)([(0,_.EM)("ha-fab")],f)},71578:function(t,e,a){a.r(e),a.d(e,{LinearGradient:function(){return g.A}});var i=a(88648),o=a(59126),n=a(25636),r=a(2403),s=a(3650),c=a(30137),h=a(69913),d=a(43401),l=a(87370),u=a(57610),m=a(44390),p=a(11069),_=a(88132),y=a(6036),v=a(88298),f=a(15490),g=a(67665);i.Y([n.a,r.a,s.a,c.a,h.a,d.a,l.a,u.a,m.a,p.a,y._,v.i,f.a,_.a]),e.default=o},85614:function(t,e,a){a.d(e,{i:function(){return n}});var i=a(61397),o=a(50264),n=(a(23792),a(26099),a(3362),a(47764),a(62953),function(){var t=(0,o.A)((0,i.A)().m(function t(){return(0,i.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Promise.all([a.e("38085"),a.e("1506")]).then(a.bind(a,40772));case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}())},3461:function(t,e,a){a.d(e,{W:function(){return o}});var i;a(28706);function o(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Roboto, Noto, sans-serif";i||(i=document.createElement("canvas"));var o=i.getContext("2d");if(!o)return 0;o.font="".concat(e,"px ").concat(a);var n=o.measureText(t);return Math.ceil(Math.max(n.actualBoundingBoxRight+n.actualBoundingBoxLeft,n.width))}}}]);
//# sourceMappingURL=62042.62f2e71952357a9f.js.map