
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../code_management/">
      
      
        <link rel="next" href="../release-notes/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.30">
    
    
      
        <title>Description - Package auto assembler</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="green">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-package-versioning" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Package auto assembler" class="md-header__button md-logo" aria-label="Package auto assembler" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Package auto assembler
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Description
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="green"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="green"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Package auto assembler" class="md-nav__button md-logo" aria-label="Package auto assembler" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Package auto assembler
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intro
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli_tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cli tools
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../code_management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code management
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Description
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Description
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-package-versioning" class="md-nav__link">
    <span class="md-ellipsis">
      1. Package versioning
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-import-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      2. Import mapping
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-extracting-and-merging-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      3. Extracting and merging requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-preparing-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      4. Preparing metadata
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-merging-local-dependacies-into-single-module" class="md-nav__link">
    <span class="md-ellipsis">
      5. Merging local dependacies into single module
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-prepare-readme" class="md-nav__link">
    <span class="md-ellipsis">
      6. Prepare README
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-assembling-setup-directory" class="md-nav__link">
    <span class="md-ellipsis">
      7. Assembling setup directory
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-creating-release-notes-from-commit-messages" class="md-nav__link">
    <span class="md-ellipsis">
      8. Creating release notes from commit messages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-analysing-package-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      9. Analysing package dependencies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-adding-cli-interfaces" class="md-nav__link">
    <span class="md-ellipsis">
      10. Adding cli interfaces
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-adding-routes-and-running-fastapi-application" class="md-nav__link">
    <span class="md-ellipsis">
      11. Adding routes and running FastAPI application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12-adding-ui-and-running-streamlit-application" class="md-nav__link">
    <span class="md-ellipsis">
      12. Adding ui and running streamlit application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13-adding-artifacts-to-packages" class="md-nav__link">
    <span class="md-ellipsis">
      13 Adding artifacts to packages
    </span>
  </a>
  
    <nav class="md-nav" aria-label="13 Adding artifacts to packages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-description-of-default-tracking-files" class="md-nav__link">
    <span class="md-ellipsis">
      1. Description of default tracking files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-adding-files" class="md-nav__link">
    <span class="md-ellipsis">
      2. Adding files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-accessing-packaged-artifacts" class="md-nav__link">
    <span class="md-ellipsis">
      3. Accessing packaged artifacts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#14-preparing-module-for-packaging" class="md-nav__link">
    <span class="md-ellipsis">
      14. Preparing module for packaging
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14. Preparing module for packaging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-preparing-code-for-packaging" class="md-nav__link">
    <span class="md-ellipsis">
      1. Preparing code for packaging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-preparing-documentation-for-packaging" class="md-nav__link">
    <span class="md-ellipsis">
      2. Preparing documentation for packaging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-preparing-files-for-packaging" class="md-nav__link">
    <span class="md-ellipsis">
      3. Preparing files for packaging
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#15-making-a-package" class="md-nav__link">
    <span class="md-ellipsis">
      15. Making a package
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#16-making-simple-mkdocs-site" class="md-nav__link">
    <span class="md-ellipsis">
      16. Making simple MkDocs site
    </span>
  </a>
  
    <nav class="md-nav" aria-label="16. Making simple MkDocs site">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-preparing-inputs" class="md-nav__link">
    <span class="md-ellipsis">
      1. Preparing inputs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-preparing-site" class="md-nav__link">
    <span class="md-ellipsis">
      2. Preparing site
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-test-running-site" class="md-nav__link">
    <span class="md-ellipsis">
      3. Test-running site
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release notes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../python_packaging_repo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python packaging repo
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-package-versioning" class="md-nav__link">
    <span class="md-ellipsis">
      1. Package versioning
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-import-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      2. Import mapping
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-extracting-and-merging-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      3. Extracting and merging requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-preparing-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      4. Preparing metadata
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-merging-local-dependacies-into-single-module" class="md-nav__link">
    <span class="md-ellipsis">
      5. Merging local dependacies into single module
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-prepare-readme" class="md-nav__link">
    <span class="md-ellipsis">
      6. Prepare README
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-assembling-setup-directory" class="md-nav__link">
    <span class="md-ellipsis">
      7. Assembling setup directory
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-creating-release-notes-from-commit-messages" class="md-nav__link">
    <span class="md-ellipsis">
      8. Creating release notes from commit messages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-analysing-package-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      9. Analysing package dependencies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-adding-cli-interfaces" class="md-nav__link">
    <span class="md-ellipsis">
      10. Adding cli interfaces
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-adding-routes-and-running-fastapi-application" class="md-nav__link">
    <span class="md-ellipsis">
      11. Adding routes and running FastAPI application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12-adding-ui-and-running-streamlit-application" class="md-nav__link">
    <span class="md-ellipsis">
      12. Adding ui and running streamlit application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13-adding-artifacts-to-packages" class="md-nav__link">
    <span class="md-ellipsis">
      13 Adding artifacts to packages
    </span>
  </a>
  
    <nav class="md-nav" aria-label="13 Adding artifacts to packages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-description-of-default-tracking-files" class="md-nav__link">
    <span class="md-ellipsis">
      1. Description of default tracking files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-adding-files" class="md-nav__link">
    <span class="md-ellipsis">
      2. Adding files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-accessing-packaged-artifacts" class="md-nav__link">
    <span class="md-ellipsis">
      3. Accessing packaged artifacts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#14-preparing-module-for-packaging" class="md-nav__link">
    <span class="md-ellipsis">
      14. Preparing module for packaging
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14. Preparing module for packaging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-preparing-code-for-packaging" class="md-nav__link">
    <span class="md-ellipsis">
      1. Preparing code for packaging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-preparing-documentation-for-packaging" class="md-nav__link">
    <span class="md-ellipsis">
      2. Preparing documentation for packaging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-preparing-files-for-packaging" class="md-nav__link">
    <span class="md-ellipsis">
      3. Preparing files for packaging
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#15-making-a-package" class="md-nav__link">
    <span class="md-ellipsis">
      15. Making a package
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#16-making-simple-mkdocs-site" class="md-nav__link">
    <span class="md-ellipsis">
      16. Making simple MkDocs site
    </span>
  </a>
  
    <nav class="md-nav" aria-label="16. Making simple MkDocs site">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-preparing-inputs" class="md-nav__link">
    <span class="md-ellipsis">
      1. Preparing inputs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-preparing-site" class="md-nav__link">
    <span class="md-ellipsis">
      2. Preparing site
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-test-running-site" class="md-nav__link">
    <span class="md-ellipsis">
      3. Test-running site
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Description</h1>

<p>The following includes additional details to how some features of the packages work with examples that involve internal components. Even though using the package this way is very much possible, <a href="https://kiril-mordan.github.io/reusables/package_auto_assembler/cli_tools">cli interface</a> is recomended. </p>
<pre><code class="language-python">from package_auto_assembler import (VersionHandler, \
    ImportMappingHandler, RequirementsHandler, MetadataHandler, \
        LocalDependaciesHandler, LongDocHandler, SetupDirHandler, \
            ReleaseNotesHandler, MkDocsHandler, PackageAutoAssembler, \
                DependenciesAnalyser)
</code></pre>
<h3 id="1-package-versioning">1. Package versioning</h3>
<p>Package versioning within paa is done based on semantic versioning.</p>
<p><code>major.minor.patch</code></p>
<p>By default, patch is updated, but the minor and major could also be update based on, for example, commit messages or manually from the log file. </p>
<p>Package auto assembler does try to pull latest version from package storage, but in case of failure uses version logs stored in <code>.paa/tracking</code>.</p>
<hr />
<p>initialize VersionHandler</p>
<pre><code class="language-python">pv = VersionHandler(
    # required
    versions_filepath = '../tests/package_auto_assembler/other/lsts_package_versions.yml',
    log_filepath = '../tests/package_auto_assembler/other/version_logs.csv',
    # optional
    default_version = &quot;0.0.1&quot;)
</code></pre>
<p>add new package</p>
<pre><code class="language-python">pv.add_package(
    package_name = &quot;new_package&quot;,
    # optional
    version = &quot;0.0.1&quot;
)
</code></pre>
<p>update package version</p>
<pre><code class="language-python">pv.increment_patch(
    package_name = &quot;new_package&quot;
)
## for not tracked package
pv.increment_patch(
    package_name = &quot;another_new_package&quot;,
    # optional
    default_version = &quot;0.0.1&quot;
)
</code></pre>
<pre><code>There are no known versions of 'another_new_package', 0.0.1 will be used!
</code></pre>
<p>display current versions and logs</p>
<pre><code class="language-python">pv.get_versions(
    # optional
    versions_filepath = '../tests/package_auto_assembler/other/lsts_package_versions.yml'
)
</code></pre>
<pre><code>{'another_new_package': '0.0.1', 'new_package': '0.0.2'}
</code></pre>
<pre><code class="language-python">pv.get_version(
    package_name='new_package'
)
</code></pre>
<pre><code>'0.0.2'
</code></pre>
<pre><code class="language-python">pv.get_logs(
    # optional
    log_filepath = '../tests/package_auto_assembler/other/version_logs.csv'
)
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Timestamp</th>
      <th>Package</th>
      <th>Version</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2024-07-29 03:26:39</td>
      <td>new_package</td>
      <td>0.0.1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2024-07-29 03:26:40</td>
      <td>new_package</td>
      <td>0.0.2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2024-07-29 03:26:40</td>
      <td>another_new_package</td>
      <td>0.0.1</td>
    </tr>
  </tbody>
</table>
</div>

<p>flush versions and logs</p>
<pre><code class="language-python">pv.flush_versions()
pv.flush_logs()
</code></pre>
<p>get latest available version with pip</p>
<pre><code class="language-python">pv.get_latest_pip_version(package_name = 'package-auto-assembler')
</code></pre>
<pre><code>'0.3.1'
</code></pre>
<h3 id="2-import-mapping">2. Import mapping</h3>
<p>Install and import names of dependencies may vary. The mapping files maps import names to install names so that requirements extraction from <code>.py</code> files is possible. Some of the mapping are packaged and would not need to provided, but in case a dependency used within new package was not inluded, it is possible to augment default mapping through <code>.paa/package_mapping.json</code>.</p>
<hr />
<p>initialize ImportMappingHandler</p>
<pre><code class="language-python">im = ImportMappingHandler(
    # required
    mapping_filepath = &quot;../env_spec/package_mapping.json&quot;
)
</code></pre>
<p>load package mappings</p>
<pre><code class="language-python">im.load_package_mappings(
    # optional
    mapping_filepath = &quot;../env_spec/package_mapping.json&quot;
)
</code></pre>
<pre><code>{'PIL': 'Pillow',
 'bs4': 'beautifulsoup4',
 'fitz': 'PyMuPDF',
 'attr': 'attrs',
 'dotenv': 'python-dotenv',
 'googleapiclient': 'google-api-python-client',
 'google_auth_oauthlib': 'google-auth-oauthlib',
 'sentence_transformers': 'sentence-transformers',
 'flask': 'Flask',
 'stdlib_list': 'stdlib-list',
 'sklearn': 'scikit-learn',
 'yaml': 'pyyaml',
 'package_auto_assembler': 'package-auto-assembler',
 'git': 'gitpython'}
</code></pre>
<h3 id="3-extracting-and-merging-requirements">3. Extracting and merging requirements</h3>
<p>Maintaining requirements is much simpler, when done automatically based on the <code>.py</code> files. </p>
<p>The actual requirements files is still constructed. Standard libraries are not added, others are added with their versions, if specified. Local files are also used as dependencies, from which imports are extracted as well. </p>
<p>For example:</p>
<pre><code class="language-python">import os
import pandas
import attr #&gt;=22.2.0
from .components.local_dep import *
</code></pre>
<p>produces </p>
<pre><code class="language-txt">pandas
attrs &gt;=22.2.0
yaml
</code></pre>
<p>as requirements file, where <code>yaml</code> is extracted from <code>local_dep.py</code> file.</p>
<p>Checking dependecies for vulnerabilities is usefull and it is done with <code>pip audit</code> which is integrated into the paa package and is used by default.</p>
<p>Optional requirements for <code>extras_require</code> could be probided the same way normal requirements are, but each like that contains an import like that should be commented out in a special way, starting with <code>#!</code>, for example:</p>
<pre><code class="language-python">import os
import pandas
import attr #&gt;=22.2.0
#! import hnswlib #==0.8.0
</code></pre>
<p>produces</p>
<pre><code class="language-txt">pandas
attrs &gt;=22.2.0
hnswlib==0.8.0; extra == &quot;hnswlib&quot;
</code></pre>
<p>Sometimes automatic translation of import names to install names via <code>package_mapping.json</code>, for packages where these names differ, may not be enough. A manual overwrite can be done with exlusion of some dependencies from automatic extraction pipeline with <code>#-</code> comment next to import and <code>#@</code> prefix before text that is intended to end up in an equivalent requirements file, for example:</p>
<pre><code class="language-python">import os
import pandas
import attr #&gt;=22.2.0
import tensorflow #-
#@ tensorflow-gpu
</code></pre>
<p>produces</p>
<pre><code class="language-txt">pandas
attrs &gt;=22.2.0
tensorflow-gpu
</code></pre>
<hr />
<p>initialize RequirementsHandler</p>
<pre><code class="language-python">rh = RequirementsHandler(
    # optional/required later
    module_filepath = &quot;../tests/package_auto_assembler/other/example_module.py&quot;,
    package_mappings = {'PIL': 'Pillow',
                        'bs4': 'beautifulsoup4',
                        'fitz': 'PyMuPDF',
                        'attr': 'attrs',
                        'dotenv': 'python-dotenv',
                        'googleapiclient': 'google-api-python-client',
                        'sentence_transformers': 'sentence-transformers',
                        'flask': 'Flask',
                        'stdlib_list': 'stdlib-list',
                        'sklearn': 'scikit-learn',
                        'yaml': 'pyyaml'},
    requirements_output_path = &quot;../tests/package_auto_assembler/other/&quot;,
    output_requirements_prefix = &quot;requirements_&quot;,
    custom_modules_filepath = &quot;../tests/package_auto_assembler/dependancies&quot;,
    python_version = '3.8',
    add_header = True
)
</code></pre>
<p>list custom modules for a given directory</p>
<pre><code class="language-python">rh.list_custom_modules(
    # optional
    custom_modules_filepath=&quot;../tests/package_auto_assembler/dependancies&quot;
)
</code></pre>
<pre><code>['example_local_dependacy_1', 'example_local_dependacy_2']
</code></pre>
<p>check if module is a standard python library</p>
<pre><code class="language-python">rh.is_standard_library(
    # required
    module_name = 'example_local_dependacy_1',
    # optional
    python_version = '3.8'
)
</code></pre>
<pre><code>False
</code></pre>
<pre><code class="language-python">rh.is_standard_library(
    # required
    module_name = 'logging',
    # optional
    python_version = '3.8'
)
</code></pre>
<pre><code>True
</code></pre>
<p>extract requirements from the module file</p>
<pre><code class="language-python">rh.extract_requirements(
    # optional
    module_filepath = &quot;../tests/package_auto_assembler/other/example_module.py&quot;,
    custom_modules = ['example_local_dependacy_2', 'example_local_dependacy_1'],
    package_mappings = {'PIL': 'Pillow',
                        'bs4': 'beautifulsoup4',
                        'fitz': 'PyMuPDF',
                        'attr': 'attrs',
                        'dotenv': 'python-dotenv',
                        'googleapiclient': 'google-api-python-client',
                        'sentence_transformers': 'sentence-transformers',
                        'flask': 'Flask',
                        'stdlib_list': 'stdlib-list',
                        'sklearn': 'scikit-learn',
                        'yaml': 'pyyaml'},
    python_version = '3.8',
    add_header=True
)
</code></pre>
<pre><code>(['attrs&gt;=22.2.0'],
 ['torch&lt;=2.4.1', 'fastapi[all]', 'scikit-learn==1.5.1', 'numpy'])
</code></pre>
<pre><code class="language-python">rh.requirements_list
</code></pre>
<pre><code>['attrs&gt;=22.2.0']
</code></pre>
<pre><code class="language-python">rh.optional_requirements_list
</code></pre>
<pre><code>['torch&lt;=2.4.1', 'fastapi[all]', 'scikit-learn==1.5.1', 'numpy']
</code></pre>
<p>audit dependencies</p>
<pre><code class="language-python">rh.check_vulnerabilities(
    # optional if ran extract_requirements() before
    requirements_list = None,
    raise_error = True
)
</code></pre>
<pre><code>No known vulnerabilities found
</code></pre>
<pre><code class="language-python">rh.vulnerabilities
</code></pre>
<pre><code>[]
</code></pre>
<pre><code class="language-python">try:
    rh.check_vulnerabilities(
        # optional if ran extract_requirements() before
        requirements_list = ['attrs&gt;=22.2.0', 'pandas', 'hnswlib==0.7.0'],
        raise_error = True
    )
except Exception as e:
    print(f&quot;Error: {e}&quot;)
</code></pre>
<pre><code>Found 1 known vulnerability in 1 package



Name    Version ID                  Fix Versions
------- ------- ------------------- ------------
hnswlib 0.7.0   GHSA-xwc8-rf6m-xr86

Error: Found vulnerabilities, resolve them or ignore check to move forwards!
</code></pre>
<pre><code class="language-python">rh.vulnerabilities
</code></pre>
<pre><code>[{'name': 'hnswlib',
  'version': '0.7.0',
  'id': 'GHSA-xwc8-rf6m-xr86',
  'fix_versions': None}]
</code></pre>
<p>save requirements to a file</p>
<pre><code class="language-python">rh.write_requirements_file(
    # optional/required later
    module_name = 'example_module',
    requirements = ['### example_module.py', 'attrs&gt;=22.2.0'],
    output_path = &quot;../tests/package_auto_assembler/other/&quot;,
    prefix = &quot;requirements_&quot;
)
</code></pre>
<p>read requirements</p>
<pre><code class="language-python">rh.read_requirements_file(
    # required
    requirements_filepath = &quot;../tests/package_auto_assembler/other/requirements_example_module.txt&quot;
)
</code></pre>
<pre><code>['attrs&gt;=22.2.0']
</code></pre>
<h3 id="4-preparing-metadata">4. Preparing metadata</h3>
<p>Since all of the necessary information for building a package needs to be contained within main component <code>.py</code> file, basic metadata is provided with the use of <code>__package_metadata__</code> dictionary object, defined within that <code>.py</code> file. It is also used as a trigger for package building within paa pipeline. </p>
<p>Even though some general information shared between packages could be provided through general config, but package specific info should be provided through <code>__package_metadata__</code>. It should support most text fields from setup file, but for others the following fields are available:</p>
<ul>
<li><code>classifiers</code>: adds classifiers to the general ones from config, unless it's <code>Development Status ::</code> then module level definition will overwrite the one from config</li>
<li><code>extras_require</code>: a dictionary of optional package that wouldn't be installed during normal installation. The key could be used during installation and the value would be a list of dependencies.</li>
<li><code>install_requires</code> : adds requirements to the list read from imports</li>
</ul>
<p>* Note that providing dependencies this way does not check them through pip-audit or translate them through package mapping</p>
<hr />
<p>initializing MetadataHandler</p>
<pre><code class="language-python">mh = MetadataHandler(
    # optional/required later
    module_filepath = &quot;../tests/package_auto_assembler/other/example_module.py&quot;
)
</code></pre>
<p>check if metadata is available</p>
<pre><code class="language-python">mh.is_metadata_available(
    # optional
    module_filepath = &quot;../tests/package_auto_assembler/other/example_module.py&quot;
)
</code></pre>
<pre><code>True
</code></pre>
<p>extract metadata from module</p>
<pre><code class="language-python">mh.get_package_metadata(
    # optional
    module_filepath = &quot;../tests/package_auto_assembler/other/example_module.py&quot;
)
</code></pre>
<pre><code>{'author': 'Kyrylo Mordan',
 'author_email': 'parachute.repo@gmail.com',
 'version': '0.0.1',
 'description': 'A mock handler for simulating a vector database.',
 'keywords': ['python', 'vector database', 'similarity search']}
</code></pre>
<h3 id="5-merging-local-dependacies-into-single-module">5. Merging local dependacies into single module</h3>
<p>Package auto assembler creates <code>single module packages</code>, meaning that once package is built all of the object are imported from a single place. The packaging tool does allow for <code>local dependecies</code> which are <code>.py</code> files imported from specified dependencies directory and its subfolders. Packaging structure may look like the following:</p>
<pre><code>packaging repo/
└src/
  ├ &lt;package names&gt;.py
  └ components
    ├local_dependecy.py
    └subdir_1
      └local_dependency_2.py 
</code></pre>
<p>During packaging process paa merges main module with its local dependies into a single file.</p>
<hr />
<p>initializing LocalDependaciesHandler</p>
<pre><code class="language-python">ldh = LocalDependaciesHandler(
    # required
    main_module_filepath = &quot;../tests/package_auto_assembler/other/example_module.py&quot;,
    dependencies_dir = &quot;../tests/package_auto_assembler/dependancies/&quot;,
    # optional
    save_filepath = &quot;./combined_example_module.py&quot;
)
</code></pre>
<p>combine main module with dependacies</p>
<pre><code class="language-python">print(ldh.combine_modules(
    # optional
    main_module_filepath = &quot;../tests/package_auto_assembler/other/example_module.py&quot;,
    dependencies_dir = &quot;../tests/package_auto_assembler/dependancies/&quot;,
    add_empty_design_choices = False
)[0:1000])
</code></pre>
<pre><code>"""
Mock Vector Db Handler

This class is a mock handler for simulating a vector database, designed primarily for testing and development scenarios.
It offers functionalities such as text embedding, hierarchical navigable small world (HNSW) search,
and basic data management within a simulated environment resembling a vector database.
"""

import logging
import json
import time
import attr #&gt;=22.2.0
import sklearn

__design_choices__ = {}

@attr.s
class Shouter:

    """
    A class for managing and displaying formatted log messages.

    This class uses the logging module to create and manage a logger
    for displaying formatted messages. It provides a method to output
    various types of lines and headers, with customizable message and
    line lengths.
    """

    # Formatting settings
    dotline_length = attr.ib(default=50)

    # Logger settings
    logger = attr.ib(default=None)
    logger_name = attr.ib(default='Shouter')
    loggerLvl = attr.ib(default=logging.DEBUG)
    log
</code></pre>
<pre><code class="language-python">ldh.dependencies_names_list
</code></pre>
<pre><code>['example_local_dependacy_2', 'example_local_dependacy_1', 'dep_from_bundle_1']
</code></pre>
<p>save combined module</p>
<pre><code class="language-python">ldh.save_combined_modules(
    # optional
    combined_module = ldh.combine_modules(),
    save_filepath = &quot;./combined_example_module.py&quot;
)
</code></pre>
<h3 id="6-prepare-readme">6. Prepare README</h3>
<p>Package description is based on <code>.ipynb</code> with same name as the <code>.py</code>. By default it is converted to markdown as is, but there is also an option to execute it.</p>
<hr />
<pre><code class="language-python">import logging
ldh = LongDocHandler(
    # optional/required later
    notebook_path = &quot;../tests/package_auto_assembler/other/example_module.ipynb&quot;,
    markdown_filepath = &quot;../example_module.md&quot;,
    timeout = 600,
    kernel_name = 'python3',
    # logger
    loggerLvl = logging.DEBUG
)
</code></pre>
<p>convert notebook to md without executing</p>
<pre><code class="language-python">ldh.convert_notebook_to_md(
    # optional
    notebook_path = &quot;../tests/package_auto_assembler/other/example_module.ipynb&quot;,
    output_path = &quot;../example_module.md&quot;
)
</code></pre>
<pre><code>Converted ../tests/package_auto_assembler/example_module.ipynb to ../example_module.md
</code></pre>
<p>convert notebook to md with executing</p>
<pre><code class="language-python">ldh.convert_and_execute_notebook_to_md(
    # optional
    notebook_path = &quot;../tests/package_auto_assembler/other/example_module.ipynb&quot;,
    output_path = &quot;../example_module.md&quot;,
    timeout = 600,
    kernel_name = 'python3'
)
</code></pre>
<pre><code>Converted and executed ../tests/package_auto_assembler/example_module.ipynb to ../example_module.md
</code></pre>
<p>return long description</p>
<pre><code class="language-python">long_description = ldh.return_long_description(
    # optional
    markdown_filepath = &quot;../example_module.md&quot;
)
</code></pre>
<h3 id="7-assembling-setup-directory">7. Assembling setup directory</h3>
<p>Packages are created following rather simple sequence of steps. At some point of the process a temporary directory is created to store the following files:</p>
<ul>
<li><code>__init__.py</code> is a simple import from a single module</li>
<li><code>&lt;package name&gt;.py</code> is a single module with all of the local dependecies</li>
<li><code>cli.py</code> is optional packaged cli tool</li>
<li><code>routes.py</code> is optional packaged file with fastapi routes</li>
<li><code>streamlit.py</code> is optional packaged streamlit app</li>
<li><code>setup.py</code> is a setup file for making a package</li>
<li><code>README.md</code> is a package description file based on <code>.ipynb</code> file</li>
<li><code>LICENSE</code> is optional license file</li>
<li><code>MANIFEST.in</code> is a list of additional files to be included with the package</li>
<li><code>mkdocs</code> is a folder with built mkdocs site based on optional <code>extra_docs</code> for the module, module docstring and <code>README.md</code></li>
<li><code>artifacts</code> contains optional files that would be packaged with the module</li>
<li><code>tests</code> contains files needed to run tests with <a href="https://docs.pytest.org/en/stable/"><code>pytest</code></a></li>
<li><code>.paa.tracking</code> contains tracking files from <code>.paa</code> dir to make each release of the package independent of PPR that released it</li>
</ul>
<hr />
<p>initializing SetupDirHandler</p>
<pre><code class="language-python">sdh = SetupDirHandler(
    # required
    module_filepath = &quot;../tests/package_auto_assembler/other/example_module.py&quot;,
    # optional/ required
    module_name = &quot;example_module&quot;,
    metadata = {'author': 'Kyrylo Mordan',
                'version': '0.0.1',
                'description': 'Example module.',
                'long_description' : long_description,
                'keywords': ['python']},
    license_path = &quot;../LICENSE&quot;,
    requirements = ['attrs&gt;=22.2.0'],
    classifiers = ['Development Status :: 3 - Alpha',
                   'Intended Audience :: Developers',
                   'Intended Audience :: Science/Research',
                   'Programming Language :: Python :: 3',
                   'Programming Language :: Python :: 3.9',
                   'Programming Language :: Python :: 3.10',
                   'Programming Language :: Python :: 3.11',
                   'License :: OSI Approved :: MIT License',
                   'Topic :: Scientific/Engineering'],
    setup_directory = &quot;./example_setup_dir&quot;
)
</code></pre>
<p>create empty setup dir</p>
<pre><code class="language-python">sdh.flush_n_make_setup_dir(
    # optional
    setup_directory = &quot;./example_setup_dir&quot;
)
</code></pre>
<p>copy module to setup dir</p>
<pre><code class="language-python">sdh.copy_module_to_setup_dir(
    # optional
    module_filepath = &quot;./combined_example_module.py&quot;,
    setup_directory = &quot;./example_setup_dir&quot;
)
</code></pre>
<p>copy license to setup dir</p>
<pre><code class="language-python">sdh.copy_module_to_setup_dir(
    # optional
    license_path = &quot;../LICENSE&quot;,
    setup_directory = &quot;./example_setup_dir&quot;
)
</code></pre>
<p>create init file</p>
<pre><code class="language-python">sdh.create_init_file(
    # optional
    module_name = &quot;example_module&quot;,
    setup_directory = &quot;./example_setup_dir&quot;
)
</code></pre>
<p>create setup file</p>
<pre><code class="language-python">sdh.write_setup_file(
    # optional
    module_name = &quot;example_module&quot;,
    metadata = {'author': 'Kyrylo Mordan',
                'version': '0.0.1',
                'description': 'Example Module',
                'keywords': ['python']},
    requirements = ['attrs&gt;=22.2.0'],
    classifiers = ['Development Status :: 3 - Alpha',
                   'Intended Audience :: Developers',
                   'Intended Audience :: Science/Research',
                   'Programming Language :: Python :: 3',
                   'Programming Language :: Python :: 3.9',
                   'Programming Language :: Python :: 3.10',
                   'Programming Language :: Python :: 3.11',
                   'License :: OSI Approved :: MIT License',
                   'Topic :: Scientific/Engineering'],
    setup_directory = &quot;./example_setup_dir&quot;
)
</code></pre>
<h3 id="8-creating-release-notes-from-commit-messages">8. Creating release notes from commit messages</h3>
<p>Package versioning could be enhanced with release notes. Since the tool is mainly meant for ci/cd, it takes advantage of commit messages to construct a release note for every version. </p>
<p>Commit history is analysed from the last merge, if nothiong found then the next and the next, until at least one of <code>[&lt;package name&gt;]</code> labels are found within commit messages. They are bundled together to for a note, where each commit message or messages deliminated with <code>;</code> are turned in a list element. Previos notes are used to establish which part of commit history to use as a starting point.</p>
<p>Commit messages could also be used to increment version by something other then a default patch. </p>
<ul>
<li><code>[&lt;package name&gt;][..+]</code> increments patch (default behavior)</li>
<li><code>[&lt;package name&gt;][.+.]</code> increments minor</li>
<li><code>[&lt;package name&gt;][+..]</code> increments major</li>
<li><code>[&lt;package name&gt;][0.1.2]</code> forces specific version <code>0.1.2</code></li>
</ul>
<p>* First release within new packaging repo may struggle to extract release note since commit messages are only analysed from merges in the commit history. </p>
<hr />
<pre><code class="language-python">rnh = ReleaseNotesHandler(
    # path to existing or new release notes file
    filepath = '../tests/package_auto_assembler/other/release_notes.md',
    # name of label in commit message [example_module] for filter
    label_name = 'example_module',
    # new version to be used in release notes
    version = '0.0.1'
)
</code></pre>
<pre><code>No relevant commit messages found!
..trying depth 2 !
No relevant commit messages found!
No messages to clean were provided
</code></pre>
<p>overwritting commit messages from example</p>
<pre><code class="language-python"># commit messages from last merge
rnh.commit_messages
</code></pre>
<pre><code>['fixing paa tests',
 'fixing paa tests',
 'fixing paa tests',
 '[package_auto_assembler] increasing default max search depth for commit history to 5',
 'fixing mocker-db release notes',
 'Update package version tracking files',
 'Update README',
 'Update requirements']
</code></pre>
<pre><code class="language-python">example_commit_messages = [
    '[example_module] usage example for initial release notes; bugfixes for RNH',
    '[BUGFIX] missing parameterframe usage example and reduntant png file',
    '[example_module][0.1.2] initial release notes handler',
    'Update README',
    'Update requirements'
]
rnh.commit_messages = example_commit_messages
</code></pre>
<p>internal methods that run on intialiazation of ReleaseNotesHandler</p>
<pre><code class="language-python"># get messages relevant only for label
rnh._filter_commit_messages_by_package()
print(&quot;Example filtered_messaged:&quot;)
print(rnh.filtered_messages)

# clean messages
rnh._clean_and_split_commit_messages()
print(&quot;Example processed_messages:&quot;)
print(rnh.processed_messages)
</code></pre>
<pre><code>Example filtered_messaged:
['[example_module] usage example for initial release notes; bugfixes for RNH', '[example_module][0.1.2] initial release notes handler']
Example processed_messages:
['usage example for initial release notes', 'bugfixes for RNH', 'initial release notes handler']
</code></pre>
<p>get version update from relevant messages</p>
<pre><code class="language-python">version_update = rnh.extract_latest_version()
print(f&quot;Example version_update: {version_update}&quot;)
</code></pre>
<pre><code>Example version_update: 0.1.2
</code></pre>
<p>get latest version from relevant release notes</p>
<pre><code class="language-python">latest_version = rnh.extract_latest_version()
print(f&quot;Example latest_version: {latest_version}&quot;)
</code></pre>
<pre><code>Example latest_version: 0.1.2
</code></pre>
<p>augment existing release note with new entries or create new</p>
<pre><code class="language-python"># augment existing release note with new entries or create new
rnh.create_release_note_entry(
    # optional
    existing_contents=rnh.existing_contents,
    version=rnh.version,
    new_messages=rnh.processed_messages
)
print(&quot;Example processed_note_entries:&quot;)
print(rnh.processed_note_entries)
</code></pre>
<pre><code>Example processed_note_entries:
['# Release notes\n', '\n', '### 0.1.2\n', '\n', '    - usage example for initial release notes\n', '\n', '    - bugfixes for RNH\n', '\n', '    - initial release notes handler\n', '\n', '### 0.0.1\n', '\n', '    - initial version of example_module\n']
</code></pre>
<p>saving updated relese notes</p>
<pre><code class="language-python">rnh.existing_contents
</code></pre>
<pre><code>['# Release notes\n',
 '\n',
 '### 0.1.2\n',
 '\n',
 '    - usage example for initial release notes\n',
 '    - bugfixes for RNH\n',
 '    - initial release notes handler\n',
 '### 0.1.2\n',
 '\n',
 '    - usage example for initial release notes\n',
 '\n',
 '    - bugfixes for RNH\n',
 '\n',
 '    - initial release notes handler\n',
 '\n',
 '### 0.0.1\n',
 '\n',
 '    - initial version of example_module\n']
</code></pre>
<pre><code class="language-python">rnh.save_release_notes()
</code></pre>
<pre><code class="language-python"># updated content
rnh.get_release_notes_content()
</code></pre>
<pre><code>['# Release notes\n',
 '\n',
 '### 0.1.2\n',
 '\n',
 '    - usage example for initial release notes\n',
 '\n',
 '    - bugfixes for RNH\n',
 '\n',
 '    - initial release notes handler\n',
 '\n',
 '### 0.0.1\n',
 '\n',
 '    - initial version of example_module\n']
</code></pre>
<h3 id="9-analysing-package-dependencies">9. Analysing package dependencies</h3>
<p>Extracting info from installed dependencies can provide important insight into inner workings of a package and help avoid some of the licenses. </p>
<p>Licenses are extracted from package metadata and normalized for analysis. Missing labels are marked with <code>-</code> and not recognized licenses with <code>unknown</code>.</p>
<p>Information about unrecognized license labels could be provided through <code>.paa/package_licenses json</code> file that would contain install package name and corresponding license label.</p>
<hr />
<pre><code class="language-python">da = DependenciesAnalyser(
    # optional
    package_name = 'mocker-db',
    package_licenses_filepath = '../tests/package_auto_assembler/other/package_licenses.json',
    allowed_licenses = ['mit', 'apache-2.0', 'lgpl-3.0', 'bsd-3-clause', 'bsd-2-clause', '-', 'mpl-2.0']
)
</code></pre>
<p>finding installed packages with a list of tags</p>
<pre><code class="language-python">da.filter_packages_by_tags(tags=['aa-paa-tool'])
</code></pre>
<pre><code>[('comparisonframe', '0.0.0'),
 ('mocker-db', '0.0.1'),
 ('package-auto-assembler', '0.0.0'),
 ('proompter', '0.0.0')]
</code></pre>
<p>extracting some metadata from the installed package</p>
<pre><code class="language-python">package_metadata = da.get_package_metadata(
    package_name = 'mocker-db'
)
package_metadata
</code></pre>
<pre><code>{'keywords': ['aa-paa-tool'],
 'version': '0.0.1',
 'author': 'Kyrylo Mordan',
 'author_email': 'parachute.repo@gmail.com',
 'classifiers': ['Development Status :: 3 - Alpha',
  'Intended Audience :: Developers',
  'Intended Audience :: Science/Research',
  'Programming Language :: Python :: 3',
  'Programming Language :: Python :: 3.9',
  'Programming Language :: Python :: 3.10',
  'Programming Language :: Python :: 3.11',
  'License :: OSI Approved :: MIT License',
  'Topic :: Scientific/Engineering',
  'PAA-Version :: 0.4.3',
  'PAA-CLI :: False'],
 'paa_version': '0.4.3',
 'paa_cli': 'False',
 'license_label': 'MIT'}
</code></pre>
<p>extracting package requirements</p>
<pre><code class="language-python">package_requirements = da.get_package_requirements(
    package_name = 'mocker-db'
)
package_requirements
</code></pre>
<pre><code>['requests',
 'attrs &gt;=22.2.0',
 'httpx',
 'hnswlib ==0.8.0',
 'gridlooper ==0.0.1',
 'dill ==0.3.7',
 'numpy ==1.26.0',
 "sentence-transformers ; extra == 'sentence_transformers'"]
</code></pre>
<p>extracting tree of dependencies</p>
<pre><code class="language-python">extracted_dependencies_tree = da.extract_dependencies_tree(
    package_name = 'mocker-db'
)
extracted_dependencies_tree
</code></pre>
<pre><code>{'requests': {'charset-normalizer': [],
  'idna': [],
  'urllib3': [],
  'certifi': []},
 'attrs': {'importlib-metadata': {'zipp': [], 'typing-extensions': []}},
 'httpx': {'anyio': {'idna': [],
   'sniffio': [],
   'exceptiongroup': [],
   'typing-extensions': []},
  'certifi': [],
  'httpcore': {'certifi': [], 'h11': {'typing-extensions': []}},
  'idna': [],
  'sniffio': []},
 'hnswlib': {'numpy': []},
 'gridlooper': {'dill': [],
  'attrs': {'importlib-metadata': {'zipp': [], 'typing-extensions': []}},
  'tqdm': {'colorama': []}},
 'dill': [],
 'numpy': []}
</code></pre>
<p>addding license labels to tree of dependencies</p>
<pre><code class="language-python">extracted_dependencies_tree_license = da.add_license_labels_to_dep_tree(
    dependencies_tree = extracted_dependencies_tree
)
extracted_dependencies_tree_license
</code></pre>
<pre><code>{'requests': 'apache-2.0',
 'requests.charset-normalizer': '-',
 'requests.idna': '-',
 'requests.urllib3': '-',
 'requests.certifi': 'mpl-2.0',
 'attrs': '-',
 'attrs.importlib-metadata': '-',
 'attrs.importlib-metadata.zipp': '-',
 'attrs.importlib-metadata.typing-extensions': '-',
 'httpx': '-',
 'httpx.anyio': 'mit',
 'httpx.anyio.idna': '-',
 'httpx.anyio.sniffio': '-',
 'httpx.anyio.exceptiongroup': '-',
 'httpx.anyio.typing-extensions': '-',
 'httpx.certifi': 'mpl-2.0',
 'httpx.httpcore': '-',
 'httpx.httpcore.certifi': 'mpl-2.0',
 'httpx.httpcore.h11': 'mit',
 'httpx.httpcore.h11.typing-extensions': '-',
 'httpx.idna': '-',
 'httpx.sniffio': '-',
 'hnswlib': '-',
 'hnswlib.numpy': 'bsd-3-clause',
 'gridlooper': '-',
 'gridlooper.dill': 'bsd-3-clause',
 'gridlooper.attrs': '-',
 'gridlooper.attrs.importlib-metadata': '-',
 'gridlooper.attrs.importlib-metadata.zipp': '-',
 'gridlooper.attrs.importlib-metadata.typing-extensions': '-',
 'gridlooper.tqdm': '-',
 'gridlooper.tqdm.colorama': '-',
 'dill': 'bsd-3-clause',
 'numpy': 'bsd-3-clause'}
</code></pre>
<p>printing extracted tree of dependencies</p>
<pre><code class="language-python">da.print_flattened_tree(extracted_dependencies_tree_license)
</code></pre>
<pre><code>└── requests : apache-2.0
    ├── charset-normalizer : -
    ├── idna : -
    ├── urllib3 : -
    └── certifi : mpl-2.0
└── attrs : -
    └── importlib-metadata : -
        ├── zipp : -
        └── typing-extensions : -
└── httpx : -
    ├── anyio : mit
        ├── idna : -
        ├── sniffio : -
        ├── exceptiongroup : -
        └── typing-extensions : -
    ├── certifi : mpl-2.0
    ├── httpcore : -
        ├── certifi : mpl-2.0
        └── h11 : mit
            └── typing-extensions : -
    ├── idna : -
    └── sniffio : -
└── hnswlib : -
    └── numpy : bsd-3-clause
└── gridlooper : -
    ├── dill : bsd-3-clause
    ├── attrs : -
        └── importlib-metadata : -
            ├── zipp : -
            └── typing-extensions : -
    └── tqdm : -
        └── colorama : -
└── dill : bsd-3-clause
└── numpy : bsd-3-clause
</code></pre>
<p>filtering for unexpected licenses in tree of dependencies</p>
<pre><code class="language-python">allowed_licenses = ['mit', 'apache-2.0', 'lgpl-3.0', 'mpl-2.0', '-']

da.find_unexpected_licenses_in_deps_tree(
    tree_dep_license = extracted_dependencies_tree_license,
    # optional
    allowed_licenses = allowed_licenses,
    raise_error = True
)
</code></pre>
<pre><code>{'hnswlib': '', 'gridlooper': ''}
└── dill : bsd-3-clause
└── numpy : bsd-3-clause
└── hnswlib : 
    └── numpy : bsd-3-clause
└── gridlooper : 
    └── dill : bsd-3-clause



---------------------------------------------------------------------------

Exception                                 Traceback (most recent call last)

Cell In[9], line 3
      1 allowed_licenses = ['mit', 'apache-2.0', 'lgpl-3.0', 'mpl-2.0', '-']
----&gt; 3 da.find_unexpected_licenses_in_deps_tree(
      4     tree_dep_license = extracted_dependencies_tree_license,
      5     # optional
      6     allowed_licenses = allowed_licenses,
      7     raise_error = True
      8 )


File ~/miniforge3/envs/testenv/lib/python3.10/site-packages/package_auto_assembler/package_auto_assembler.py:2670, in DependenciesAnalyser.find_unexpected_licenses_in_deps_tree(self, tree_dep_license, allowed_licenses, raise_error)
   2668 if raise_error and out != {}:
   2669     self.print_flattened_tree(flattened_dict = out)
-&gt; 2670     raise Exception("Found unexpected licenses!")
   2671 else:
   2672     self.logger.info("No unexpected licenses found")


Exception: Found unexpected licenses!
</code></pre>
<h3 id="10-adding-cli-interfaces">10. Adding cli interfaces</h3>
<p>The tool allows to make a package with optional cli interfaces. These could be sometimes preferable when a package contains a standalone tool that would be called from script anyway.</p>
<p>All of the cli logic would need to be included within a <code>.py</code> file which should be stored within <code>cli_dir</code> provided in <code>.paa.config</code>. 
Dependencies from these files are extracted in the similar manner to the main module.</p>
<p>Tools from main <code>.py</code> file could still be imported like the following:</p>
<pre><code class="language-python">from package_name.package_name import ToBeImported
</code></pre>
<p>The code is wired in <code>setup.py</code> via the following automatically assuming that appropriate file with the same name as the package exists within <code>cli_dir</code> location.</p>
<pre><code class="language-python">...,
entry_points = {'console_scripts': [
    '&lt;package_alias&gt; = package_name.cli:cli']} ,
...
</code></pre>
<p>Alias for name could be provided via the following piece of code, defined after imports, otherwise package name would be used.</p>
<pre><code class="language-python">__cli_metadata__ = {
    &quot;name&quot; : &lt;package_alias&gt;
}
</code></pre>
<p>Package-auto-assembler tool itself uses <a href="https://pypi.org/project/click/"><code>click</code></a> dependency to build that file, use its <a href="https://github.com/Kiril-Mordan/reusables/blob/main/cli/package_auto_assembler.py">cli definition</a> as example.</p>
<h3 id="11-adding-routes-and-running-fastapi-application">11. Adding routes and running FastAPI application</h3>
<p>The tool allows to make a package with optional routes for FastAPI application and run them. Each packages can have one routes file where its logic should be defined. Package-auto-assembler itself can combine multiple routes from packages and filepaths into one application.</p>
<p>A <code>.py</code>  file with the same name of the package should be stored within <code>api_routes_dir</code> provided in <code>.paa.config</code>.</p>
<p>Dependencies from these files are extracted in the similar manner to the main module.</p>
<p>Tools from main <code>.py</code> file could still be imported like the following:</p>
<pre><code class="language-python">from package_name.package_name import ToBeImported
</code></pre>
<p>Api description, middleware and run parameters could be provided via optional <code>.paa.api.config</code> file, which for example would look like:</p>
<pre><code>DESCRIPTION : {
    'version' : 0.0.0
}
MIDDLEWARE : {
    allow_origins : ['*']
}
RUN : {
 host : 0.0.0.0
}
</code></pre>
<p>where DESCRIPTION contains parameters for <code>FastAPI</code>, MIDDLEWARE for <code>CORSMiddleware</code> and RUN for <code>uvicorn.run</code></p>
<h3 id="12-adding-ui-and-running-streamlit-application">12. Adding ui and running streamlit application</h3>
<p>The tools allows to make a package with optional <a href="https://streamlit.io/"><code>streamlit</code></a> application as interface to the packaged code.  Each package can have one streamlit file. Package-auto-assembler itself would then be used to run packaged applications from the package. </p>
<p>A <code>.py</code>  file with the same name of the package should be stored within <code>streamlit_dir</code> provided in <code>.paa.config</code>.</p>
<p>Dependencies from these files are extracted in the similar manner to the main module.</p>
<p>Tools from main <code>.py</code> file could still be imported like the following:</p>
<pre><code class="language-python">from package_name import ToBeImported
</code></pre>
<p>Config file with server, theme and other settings can be provided via optional <code>.paa.streamlit.config</code>. </p>
<h3 id="13-adding-artifacts-to-packages">13 Adding artifacts to packages</h3>
<p>The tool allows to add files to packages that could be accessed from the package or extracted into selected directory.</p>
<p>There are different types of artifacts with a package like this:</p>
<ul>
<li><code>.paa.tracking</code> : includes some tracking files for the purposes of the tool, added to every package</li>
<li><code>mkdocs</code> : optional static mkdocs site </li>
<li><code>artifacts</code> contains directories, files and links to files copied from <code>artifacts_dir/&lt;package_name&gt;</code> (from <code>.paa.config</code>)</li>
<li><code>tests</code> contains optional directory with tests with <code>pytest</code>, copied from <code>tests_dir/&lt;package_name&gt;</code> (from <code>.paa.config</code>)</li>
</ul>
<h5 id="1-description-of-default-tracking-files">1. Description of default tracking files</h5>
<p>Tracking files are added automatically of artifacts adding was not turned off. At the moment contains:</p>
<ul>
<li><code>.paa.config</code> : config file that specifies how paa show work</li>
<li><code>.paa.version</code>: version of <code>package-auto-assembler</code> that was used for packaging</li>
<li><code>release_notes.md</code> : latest release notes for the package</li>
<li><code>version_logs.csv</code> : logs for version updates for all packages in the packaging repo</li>
<li><code>lsts_package_versions.yml</code> : latests versions of all packages in the packaging repo</li>
<li><code>package_mapping.json</code> : additional user-provided remapping of package import names to install names</li>
<li><code>package_licenses.json</code> : additional user-provided license labels to overwrite detected ones</li>
<li><code>notebook.ipynb</code> : optional jupyter notebook that was used for package description`</li>
</ul>
<h5 id="2-adding-files">2. Adding files</h5>
<p>User provided artifacts could be provided in two ways:</p>
<ol>
<li>
<p>adding directory, file or link to the file under <code>artifacts_dir/&lt;package_name&gt;</code></p>
<p>These files would be packaged with the packages, and files from links would be downloaded and packaged as well. To add a link, create a file with <code>.link</code> extension in the name.</p>
</li>
<li>
<p>adding <code>artifact_urls</code> dictionary to <code>__package_metadata__</code> within module <code>.py</code> file</p>
</li>
</ol>
<p>Example of <code>__package_metadata__</code> with these additional dictionary would be:</p>
<pre><code class="language-python">__package_metadata__ = {
    ...,
    &quot;artifact_urls&quot; : {
        'downloaded.md' : 'https://raw.githubusercontent.com/Kiril-Mordan/reusables/refs/heads/main/docs/module_from_raw_file.md',
        'downloaded.png' : 'https://raw.githubusercontent.com/Kiril-Mordan/reusables/refs/heads/main/docs/reuse_logo.png'
    }
}
</code></pre>
<p>where key would contain name of the artifact and value its link.</p>
<p>These files would not be downloaded and only links would be packaged. After package installation both kinds of links could be refreshed/donwloaded using <a href="https://kiril-mordan.github.io/reusables/package_auto_assembler/cli/"><code>cli interface</code></a> from <code>package-auto-assembler</code>.</p>
<h5 id="3-accessing-packaged-artifacts">3. Accessing packaged artifacts</h5>
<p>Artifacts packaged within the package could be accessed in two ways:</p>
<ol>
<li>
<p>using <a href="https://kiril-mordan.github.io/reusables/package_auto_assembler/cli_tools/#extracting-files-from-packages"><code>package-auto-assembler</code> cli tools</a> to copy a file or files into a selected directory</p>
</li>
<li>
<p>reading packaged artifacts from the package, by the use of similar code that finds path to installed package in your system:</p>
</li>
</ol>
<pre><code class="language-python">import importlib
import importlib.metadata
import importlib.resources as pkg_resources

installed_package_path = pkg_resources.files('&lt;package_name&gt;')

file_name_path = None
if 'artifacts' in os.listdir(installed_package_path):

    with pkg_resources.path('&lt;package_name&gt;.artifacts', '&lt;file_name&gt;') as path:
        file_name_path = path
</code></pre>
<h3 id="14-preparing-module-for-packaging">14. Preparing module for packaging</h3>
<h4 id="1-preparing-code-for-packaging">1. Preparing code for packaging</h4>
<p>To add/edit a python package with <code>package-auto-assembler</code>, its building blocks would need to follow requirements mentioned below. </p>
<p><strong>Note</strong>: For basic package only <code>main module</code> would be required. More about role of optional files could be seen <a href="https://kiril-mordan.github.io/reusables/package_auto_assembler/python_packaging_repo/#inputs-and-outputs-of-ppr">here</a>.</p>
<ul>
<li>
<p>Main module <strong>[required]</strong></p>
<p>Main module is considered to be a <code>&lt;package_name&gt;.py</code> file stored in <code>module_dir</code> (from <code>.paa.config</code>), which can also me called <code>packaging layer</code>. 
This is where most code of the package would be, unless <code>local dependencies</code> are used. </p>
<p>Requirements to this file:</p>
<ol>
<li>starts with module docstring (will be used in package description)</li>
<li>contains <a href="https://kiril-mordan.github.io/reusables/package_auto_assembler/description/#4-preparing-metadata"><code>__package_metadata__</code></a> (a way to provide package metadata)</li>
<li><strong>[optional]</strong> import from <code>local dependencies</code> stored only in <code>dependencies_dir</code></li>
<li><strong>[optional]</strong> contains <a href="https://kiril-mordan.github.io/reusables/package_auto_assembler/description/#3-extracting-and-merging-requirements">versions of module dependencies</a> (specifying requirements)</li>
</ol>
</li>
<li>
<p>Local dependencies</p>
<p>Local dependencies are optional modules that other modules from <code>packaging layer</code> would import from, and are not packaged on their own. These are useful for segmenting codebase into smaller independent components.
They would be stored in subdirectory of <code>module_dir</code>, specified as <code>dependencies_dir</code> in <code>.paa.config</code>. </p>
<p>Requirements for these files:</p>
<ol>
<li>stored only in <code>dependencies_dir</code> or its subdirectories </li>
<li>do not import any other moduled stored locally</li>
<li><strong>[optional]</strong> contain <a href="https://kiril-mordan.github.io/reusables/package_auto_assembler/description/#3-extracting-and-merging-requirements">versions of module dependencies</a> (specifying requirements)</li>
</ol>
</li>
<li>
<p>Cli interface</p>
<p>Command line interface could be optionally defined for a package by placing <code>&lt;package_name&gt;.py</code> file into <code>cli_dir</code> (from <code>.paa.config</code>). More about adding cli could be found <a href="https://kiril-mordan.github.io/reusables/package_auto_assembler/description/#10-adding-cli-interfaces">here</a>.</p>
<p>Requirements for this file:</p>
<ol>
<li>imports and uses <a href="https://pypi.org/project/click/"><code>click</code></a> to define cli tools</li>
<li>contains <a href="https://kiril-mordan.github.io/reusables/package_auto_assembler/description/#10-adding-cli-interfaces"><code>__cli_metadata__</code></a> (a way to provide alias for cli tools)</li>
<li><strong>[optional]</strong> imports from packaging layer and local dependencies only with <code>from &lt;package_name&gt;.&lt;package_name&gt; import ToBeImported</code></li>
<li><strong>[optional]</strong> contains <a href="https://kiril-mordan.github.io/reusables/package_auto_assembler/description/#3-extracting-and-merging-requirements">versions of module dependencies</a> (specifying requirements)</li>
</ol>
</li>
<li>
<p>API routes</p>
<p>Routes for FastAPI application could be optionally defined for a package by placing <code>&lt;package_name&gt;.py</code> file into <code>api_routes_dir</code> (from <code>.paa.config</code>). More about adding api routes could be found <a href="https://kiril-mordan.github.io/reusables/package_auto_assembler/description/#11-adding-routes-and-running-fastapi-application">here</a>.</p>
<p>Requirements for this file:</p>
<ol>
<li>imports <code>from fastapi import APIRouter</code></li>
<li>defines <code>router = APIRouter(prefix = "/&lt;package-name&gt;")</code></li>
<li>uses <code>@router.*</code> to define endpoints</li>
<li><strong>[optional]</strong> import from packaging layer and local dependencies only with <code>from &lt;package_name&gt;.&lt;package_name&gt; import ToBeImported</code></li>
<li><strong>[optional]</strong> contain <a href="https://kiril-mordan.github.io/reusables/package_auto_assembler/description/#3-extracting-and-merging-requirements">versions of module dependencies</a> (specifying requirements)</li>
</ol>
</li>
<li>
<p>Streamlit app</p>
<p>Streamlit application could be optionally defined for a package by placing <code>&lt;package_name&gt;.py</code> file into <code>streamlit_dir</code> (from <code>.paa.config</code>). More about adding streamlit app could be found <a href="https://kiril-mordan.github.io/reusables/package_auto_assembler/description/#12-adding-ui-and-running-streamlit-application">here</a>.</p>
<p>Requirements for this file:</p>
<ol>
<li>imports <a href="https://pypi.org/project/streamlit/"><code>streamlit</code></a></li>
<li><strong>[optional]</strong> import from packaging layer and local dependencies only with <code>from &lt;package_name&gt;.&lt;package_name&gt; import ToBeImported</code></li>
<li><strong>[optional]</strong> contain <a href="https://kiril-mordan.github.io/reusables/package_auto_assembler/description/#3-extracting-and-merging-requirements">versions of module dependencies</a> (specifying requirements)</li>
</ol>
</li>
</ul>
<h4 id="2-preparing-documentation-for-packaging">2. Preparing documentation for packaging</h4>
<ul>
<li>
<p>Package description</p>
<p>Providing package description is a useful way to show what the package is about to the intended audience. By default, <a href="https://kiril-mordan.github.io/reusables/package_auto_assembler/description/#preparing-code-for-packaging"><code>main_module</code></a> docstring would be used for this purpose and stored alongside the package in a <code>README.md</code> file, as shown <a href="https://kiril-mordan.github.io/reusables/package_auto_assembler/python_packaging_repo/#inputs-and-outputs-of-ppr">here</a>. </p>
<p>Optionally, one could provide additional information that would be appended to the package docstring via <code>&lt;package_name&gt;.ipynb</code> file, placed into <code>example_notebooks_path</code> (from <code>.paa.config</code>). In the early stages of development, this file could both serve as a place where code is developed/tested before a release and a way to show usage examples.</p>
</li>
<li>
<p>Additional documentation</p>
<p>Package description may not be enough to store documentation. 
A simple <a href="https://www.mkdocs.org/">mkdocs</a> static site is built by default for every package with for followig tabs:</p>
<ul>
<li><code>intro</code> contains module docstring and <code>pypi</code> link for <code>github + pypi</code> type of packaging repository</li>
<li><code>description</code> contains optional content from <code>&lt;package_name&gt;.ipynb</code> file, placed into <code>example_notebooks_path</code> (from <code>.paa.config</code>)</li>
<li><code>release notes</code> contains release notes assembled based on commit messages</li>
</ul>
<p>Additional documentation can be provided via the following files:</p>
<ol>
<li><code>&lt;package_name&gt;.drawio</code> file, placed into <code>drawio_dir</code> (from <code>.paa.config</code>). Each tab would be turned into <code>&lt;package_name&gt;-&lt;tab_name&gt;.png</code>, which if not referenced would be presented as a separate tab;</li>
<li><code>.png</code>, <code>.ipynb</code> or <code>.md</code> files placed in <code>extra_docs_dir/&lt;package_name&gt;</code> (from <code>.paa.config</code>). Each file would be turned into a separate tab, but just like <code>.png</code> from drawio, if referenced, would not be presented as a separate tab.</li>
</ol>
<p><strong>Note</strong>: During packaging process files derived from <code>&lt;package_name&gt;.drawio</code> conversion and files from <code>extra_docs_dir/&lt;package_name&gt;</code> would both be placed into <code>.paa/docs</code> with <code>&lt;package_name&gt;-*</code> prefix. Make sure not to name drawio tabs and extra docs with the same names. </p>
</li>
</ul>
<h4 id="3-preparing-files-for-packaging">3. Preparing files for packaging</h4>
<p>Packaging files alongside code and documentation could be achieved by placing files  into <code>artifacts_dir/&lt;package_name&gt;</code> directory (from <code>.paa.config</code>). These files could be referenced from within the package and there is an option to provide links instead of physical files. More about adding artifacts to the package could be found <a href="https://kiril-mordan.github.io/reusables/package_auto_assembler/description/#13-adding-artifacts-to-packages">here</a>.</p>
<p>Tests that would be used in ci/cd pipeline are expected to be placed into <code>tests_dir&lt;package_name&gt;</code> directory (from <code>.paa.config</code>). These would be copied into the package as well. </p>
<h3 id="15-making-a-package">15. Making a package</h3>
<p>Main wrapper for the package integrates described above components into a class that could be used to build package building pipelines within python scripts. </p>
<p>To simplify usage <a href="https://kiril-mordan.github.io/reusables/package_auto_assembler/cli/">cli interface</a> is recomended instead. </p>
<hr />
<p>initializing PackageAutoAssembler</p>
<pre><code class="language-python">paa = PackageAutoAssembler(
    # required
    module_name = &quot;example_module&quot;,
    module_filepath  = &quot;../tests/package_auto_assembler/other/example_module.py&quot;,
    # optional
    mapping_filepath = &quot;../env_spec/package_mapping.json&quot;,
    licenses_filepath = &quot;../tests/package_auto_assembler/other/package_licenses.json&quot;,
    allowed_licenses = ['mit', 'apache-2.0', 'lgpl-3.0', 'mpl-2.0', '-'],
    dependencies_dir = &quot;../tests/package_auto_assembler/dependancies/&quot;,
    example_notebook_path = &quot;./mock_vector_database.ipynb&quot;,
    versions_filepath = '../tests/package_auto_assembler/other/lsts_package_versions.yml',
    log_filepath = '../tests/package_auto_assembler/other/version_logs.csv',
    setup_directory = &quot;./example_module&quot;,
    release_notes_filepath = &quot;../tests/package_auto_assembler/other/release_notes.md&quot;,
    license_path = &quot;../LICENSE&quot;,
    license_label = &quot;mit&quot;,
    classifiers = ['Development Status :: 3 - Alpha',
                    'Intended Audience :: Developers',
                    'Intended Audience :: Science/Research',
                    'Programming Language :: Python :: 3',
                    'Programming Language :: Python :: 3.9',
                    'Programming Language :: Python :: 3.10',
                    'Programming Language :: Python :: 3.11',
                    'License :: OSI Approved :: MIT License',
                    'Topic :: Scientific/Engineering'],
    requirements_list = [],
    execute_readme_notebook = True,
    python_version = &quot;3.8&quot;,
    version_increment_type = &quot;patch&quot;,
    default_version = &quot;0.0.1&quot;,
    check_vulnerabilities = True,
    check_dependencies_licenses = False,
    add_requirements_header = True
)
</code></pre>
<p>add metadata from module</p>
<pre><code class="language-python">paa.add_metadata_from_module(
    # optional
    module_filepath  = &quot;../tests/package_auto_assembler/other/example_module.py&quot;
)
</code></pre>
<pre><code>Adding metadata ...
</code></pre>
<p>add or update version</p>
<pre><code class="language-python">paa.add_or_update_version(
    # overwrites auto mode (not suggested)
    version_increment_type = &quot;patch&quot;,
    version = &quot;1.2.6&quot;,
    # optional
    module_name = &quot;example_module&quot;,
    versions_filepath = '../tests/package_auto_assembler/lsts_package_versions.yml',
    log_filepath = '../tests/package_auto_assembler/version_logs.csv'
)
</code></pre>
<pre><code>Incrementing version ...
No relevant commit messages found!
..trying depth 2 !
No relevant commit messages found!
..trying depth 3 !
No relevant commit messages found!
..trying depth 4 !
No relevant commit messages found!
..trying depth 5 !
No relevant commit messages found!
No messages to clean were provided
</code></pre>
<p>add release notes from commit messages</p>
<pre><code class="language-python">paa.add_or_update_release_notes(
    # optional
    filepath=&quot;../tests/package_auto_assembler/release_notes.md&quot;,
    version=paa.metadata['version']
)
</code></pre>
<pre><code>Updating release notes ...
</code></pre>
<p>prepare setup directory</p>
<pre><code class="language-python">paa.prep_setup_dir()
</code></pre>
<pre><code>Preparing setup directory ...
</code></pre>
<p>merge local dependacies</p>
<pre><code class="language-python">paa.merge_local_dependacies(
    # optional
    main_module_filepath = &quot;../tests/package_auto_assembler/other/example_module.py&quot;,
    dependencies_dir= &quot;../tests/package_auto_assembler/dependancies/&quot;,
    save_filepath = &quot;./example_module/example_module.py&quot;
)
</code></pre>
<pre><code>Merging ../tests/package_auto_assembler/other/example_module.py with dependecies from ../tests/package_auto_assembler/dependancies/ into ./example_module/example_module.py
</code></pre>
<p>add requirements from module</p>
<pre><code class="language-python">paa.add_requirements_from_module(
    # optional
    module_filepath = &quot;../tests/package_auto_assembler/other/example_module.py&quot;,
    import_mappings = {'PIL': 'Pillow',
                        'bs4': 'beautifulsoup4',
                        'fitz': 'PyMuPDF',
                        'attr': 'attrs',
                        'dotenv': 'python-dotenv',
                        'googleapiclient': 'google-api-python-client',
                        'sentence_transformers': 'sentence-transformers',
                        'flask': 'Flask',
                        'stdlib_list': 'stdlib-list',
                        'sklearn': 'scikit-learn',
                        'yaml': 'pyyaml',
                        'git' : 'gitpython'}
)
</code></pre>
<pre><code>Adding requirements from ../tests/package_auto_assembler/other/example_module.py
No known vulnerabilities found
</code></pre>
<pre><code class="language-python">paa.requirements_list
</code></pre>
<pre><code>['### example_module.py', 'attrs&gt;=22.2.0']
</code></pre>
<p>make README out of example notebook</p>
<pre><code class="language-python">paa.add_readme(
    # optional
    example_notebook_path = &quot;../tests/package_auto_assembler/other/example_module.ipynb&quot;,
    output_path = &quot;./example_module/README.md&quot;,
    execute_notebook=False,
)
</code></pre>
<pre><code>Adding README from ../tests/package_auto_assembler/other/example_module.ipynb to ./example_module/README.md
</code></pre>
<p>prepare setup file</p>
<pre><code class="language-python">paa.prep_setup_file(
    # optional
    metadata = {'author': 'Kyrylo Mordan',
                'version': '0.0.1',
                'description': 'Example module',
                'keywords': ['python'],
                'license' : 'mit'},
    requirements = ['### example_module.py',
                    'attrs&gt;=22.2.0'],
    classifiers = ['Development Status :: 3 - Alpha',
                    'Intended Audience :: Developers',
                    'Intended Audience :: Science/Research',
                    'Programming Language :: Python :: 3',
                    'Programming Language :: Python :: 3.9',
                    'Programming Language :: Python :: 3.10',
                    'Programming Language :: Python :: 3.11',
                    'License :: OSI Approved :: MIT License',
                    'Topic :: Scientific/Engineering'],
    cli_module_filepath = &quot;../tests/package_auto_assembler/other/cli.py&quot;

)
</code></pre>
<pre><code>Preparing setup file for example-module package ...
</code></pre>
<p>make package</p>
<pre><code class="language-python">paa.make_package(
    # optional
    setup_directory = &quot;./example_module&quot;
)
</code></pre>
<pre><code>Making package from ./example_module ...





CompletedProcess(args=['python', './example_module/setup.py', 'sdist', 'bdist_wheel'], returncode=0, stdout="running sdist\nrunning egg_info\nwriting example_module.egg-info/PKG-INFO\nwriting dependency_links to example_module.egg-info/dependency_links.txt\nwriting entry points to example_module.egg-info/entry_points.txt\nwriting requirements to example_module.egg-info/requires.txt\nwriting top-level names to example_module.egg-info/top_level.txt\nreading manifest file 'example_module.egg-info/SOURCES.txt'\nwriting manifest file 'example_module.egg-info/SOURCES.txt'\nrunning check\ncreating example_module-0.0.0\ncreating example_module-0.0.0/example_module\ncreating example_module-0.0.0/example_module.egg-info\ncopying files to example_module-0.0.0...\ncopying example_module/__init__.py -&gt; example_module-0.0.0/example_module\ncopying example_module/cli.py -&gt; example_module-0.0.0/example_module\ncopying example_module/example_module.py -&gt; example_module-0.0.0/example_module\ncopying example_module/setup.py -&gt; example_module-0.0.0/example_module\ncopying example_module.egg-info/PKG-INFO -&gt; example_module-0.0.0/example_module.egg-info\ncopying example_module.egg-info/SOURCES.txt -&gt; example_module-0.0.0/example_module.egg-info\ncopying example_module.egg-info/dependency_links.txt -&gt; example_module-0.0.0/example_module.egg-info\ncopying example_module.egg-info/entry_points.txt -&gt; example_module-0.0.0/example_module.egg-info\ncopying example_module.egg-info/requires.txt -&gt; example_module-0.0.0/example_module.egg-info\ncopying example_module.egg-info/top_level.txt -&gt; example_module-0.0.0/example_module.egg-info\ncopying example_module.egg-info/SOURCES.txt -&gt; example_module-0.0.0/example_module.egg-info\nWriting example_module-0.0.0/setup.cfg\nCreating tar archive\nremoving 'example_module-0.0.0' (and everything under it)\nrunning bdist_wheel\nrunning build\nrunning build_py\ncopying example_module/example_module.py -&gt; build/lib/example_module\ncopying example_module/__init__.py -&gt; build/lib/example_module\ncopying example_module/setup.py -&gt; build/lib/example_module\ncopying example_module/cli.py -&gt; build/lib/example_module\ninstalling to build/bdist.linux-x86_64/wheel\nrunning install\nrunning install_lib\ncreating build/bdist.linux-x86_64/wheel\ncreating build/bdist.linux-x86_64/wheel/example_module\ncopying build/lib/example_module/example_module.py -&gt; build/bdist.linux-x86_64/wheel/example_module\ncopying build/lib/example_module/__init__.py -&gt; build/bdist.linux-x86_64/wheel/example_module\ncopying build/lib/example_module/setup.py -&gt; build/bdist.linux-x86_64/wheel/example_module\ncopying build/lib/example_module/cli.py -&gt; build/bdist.linux-x86_64/wheel/example_module\nrunning install_egg_info\nCopying example_module.egg-info to build/bdist.linux-x86_64/wheel/example_module-0.0.0-py3.10.egg-info\nrunning install_scripts\ncreating build/bdist.linux-x86_64/wheel/example_module-0.0.0.dist-info/WHEEL\ncreating 'dist/example_module-0.0.0-py3-none-any.whl' and adding 'build/bdist.linux-x86_64/wheel' to it\nadding 'example_module/__init__.py'\nadding 'example_module/cli.py'\nadding 'example_module/example_module.py'\nadding 'example_module/setup.py'\nadding 'example_module-0.0.0.dist-info/METADATA'\nadding 'example_module-0.0.0.dist-info/WHEEL'\nadding 'example_module-0.0.0.dist-info/entry_points.txt'\nadding 'example_module-0.0.0.dist-info/top_level.txt'\nadding 'example_module-0.0.0.dist-info/RECORD'\nremoving build/bdist.linux-x86_64/wheel\n", stderr='warning: sdist: standard file not found: should have one of README, README.rst, README.txt, README.md\n\n/home/kyriosskia/miniconda3/envs/testenv/lib/python3.10/site-packages/setuptools/_distutils/cmd.py:66: SetuptoolsDeprecationWarning: setup.py install is deprecated.\n!!\n\n        ********************************************************************************\n        Please avoid running ``setup.py`` directly.\n        Instead, use pypa/build, pypa/installer or other\n        standards-based tools.\n\n        See https://blog.ganssle.io/articles/2021/10/setup-py-deprecated.html for details.\n        ********************************************************************************\n\n!!\n  self.initialize_options()\n')
</code></pre>
<h3 id="16-making-simple-mkdocs-site">16. Making simple MkDocs site</h3>
<p>Package documentation can be presented in a form of mkdocs static site, which could be either served or deployed to something like github packages. </p>
<p>Main module docstring is used as intro package that contains something like optional pypi and license badges. Package description and realease notes are turned into separate tabs. Png with diagrams for example could be provided and displayed as their own separate tabs as well.</p>
<p>The one for this package can be seen <a href="https://kiril-mordan.github.io/reusables/package_auto_assembler/">here</a></p>
<p>It can be packaged with the package and be displayed in web browser like documentation for api via <code>&lt;package-name&gt;\docs</code> when using included api handling capabilities.</p>
<hr />
<h5 id="1-preparing-inputs">1. Preparing inputs</h5>
<pre><code class="language-python">package_name = &quot;example_module&quot;

module_content = LongDocHandler().read_module_content(filepath=f&quot;../tests/package_auto_assembler/{package_name}.py&quot;)

docstring = LongDocHandler().extract_module_docstring(module_content=module_content)
pypi_link = LongDocHandler().get_pypi_badge(module_name=package_name)


docs_file_paths = {
    &quot;../example_module.md&quot; : &quot;usage-examples.md&quot;,
    '../tests/package_auto_assembler/release_notes.md' : 'release_notes.md'
}
</code></pre>
<pre><code class="language-python">mdh = MkDocsHandler(
    # required
    ## name of the package to be displayed
    package_name = package_name,
    ## dictionary of markdown files, with path as keys
    docs_file_paths = docs_file_paths,
    # optional
    ## module docstring to be displayed in the index
    module_docstring = docstring,
    ## pypi badge to be displayed in the index
    pypi_badge = pypi_link,
    ## license badge to be displayed in the index
    license_badge=&quot;[![License](https://img.shields.io/github/license/Kiril-Mordan/reusables)](https://github.com/Kiril-Mordan/reusables/blob/main/LICENSE)&quot;,
    ## name of the project directory
    project_name = &quot;temp_project&quot;)
</code></pre>
<h5 id="2-preparing-site">2. Preparing site</h5>
<pre><code class="language-python">mdh.create_mkdocs_dir()
mdh.move_files_to_docs()
mdh.generate_markdown_for_images()
mdh.create_index()
mdh.create_mkdocs_yml()
mdh.build_mkdocs_site()
</code></pre>
<pre><code>Created new MkDocs dir: temp_project
Copied ../example_module.md to temp_project/docs/usage-examples.md
Copied ../tests/package_auto_assembler/release_notes.md to temp_project/docs/release_notes.md
index.md has been created with site_name: example-module
mkdocs.yml has been created with site_name: Example module
Custom CSS created at temp_project/docs/css/extra.css


INFO    -  Cleaning site directory
INFO    -  Building documentation to directory: /home/kyriosskia/Documents/nlp/reusables/example_notebooks/temp_project/site
INFO    -  Documentation built in 0.12 seconds
</code></pre>
<h5 id="3-test-running-site">3. Test-running site</h5>
<pre><code class="language-python">mdh.serve_mkdocs_site()
</code></pre>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>