<h1 align="center">
  <a href="">
    <img src="icons/icon.svg" width="150" height="150" alt="banner" /><br>
  </a>
</h1>

<p align="center">
  <a href="https://github.com/xiadengma/ai-intervention-agent/actions/workflows/test.yml">
    <img src="https://github.com/xiadengma/ai-intervention-agent/actions/workflows/test.yml/badge.svg" alt="Tests">
  </a>
  <a href="https://pypi.org/project/ai-intervention-agent/">
    <img src="https://img.shields.io/pypi/v/ai-intervention-agent.svg" alt="PyPI">
  </a>
  <a href="https://pypi.org/project/ai-intervention-agent/">
    <img src="https://img.shields.io/pypi/pyversions/ai-intervention-agent.svg" alt="Python Versions">
  </a>
  <a href="https://github.com/xiadengma/ai-intervention-agent/blob/main/LICENSE">
    <img src="https://img.shields.io/github/license/xiadengma/ai-intervention-agent.svg" alt="License">
  </a>
  <a href="https://pypi.org/project/ai-intervention-agent/">
    <img src="https://img.shields.io/pypi/dm/ai-intervention-agent.svg" alt="Downloads">
  </a>
  <a href="https://github.com/xiadengma/ai-intervention-agent">
    <img src="https://img.shields.io/github/stars/xiadengma/ai-intervention-agent.svg?style=social" alt="GitHub Stars">
  </a>
</p>

# AI Intervention Agent

è®©ç”¨æˆ·èƒ½å¤Ÿå®æ—¶æ§åˆ¶ AI æ‰§è¡Œè¿‡ç¨‹çš„ MCP å·¥å…·ã€‚

æ”¯æŒ`Cursor`ã€`Vscode`ã€`Claude Code`ã€`Augment`ã€`Windsurf`ã€`Trae`ç­‰ AI å·¥å…·ã€‚

## ğŸŒ  ç•Œé¢

<p align="center">
  <img src=".github/assets/desktop_screenshot.png" alt="æ¡Œé¢æµè§ˆå™¨æˆªå›¾" width="40%" style="margin-right: 10px;">
  <img src=".github/assets/mobile_screenshot.png" alt="ç§»åŠ¨æµè§ˆå™¨æˆªå›¾" width="20%">
</p>

## âœ¨ ä¸»è¦ç‰¹æ€§

- **ğŸ¯ å®æ—¶ä»‹å…¥**ï¼šAI åœ¨å…³é”®èŠ‚ç‚¹æš‚åœï¼Œç­‰å¾…ç”¨æˆ·æŒ‡ç¤º
- **ğŸŒ Web ç•Œé¢**ï¼šæµè§ˆå™¨äº¤äº’ï¼Œæ”¯æŒ Markdown æ¸²æŸ“å’Œä»£ç é«˜äº®
- **ğŸ”„ æŒç»­æœåŠ¡**ï¼šé•¿æœŸè¿è¡Œï¼Œæ”¯æŒå¤šæ¬¡ä»‹å…¥
- **ğŸŒ è¿œç¨‹å‹å¥½**ï¼šä¸“ä¸º SSH ç¯å¢ƒä¼˜åŒ–
- **ğŸ“ å¯Œæ–‡æœ¬æ”¯æŒ**ï¼šMarkdown æ¸²æŸ“ï¼ˆmarked.js + Prism.js Monokai ä¸»é¢˜ï¼‰ã€ä»£ç é«˜äº®ã€è¡¨æ ¼ã€LaTeX æ•°å­¦å…¬å¼ï¼ˆMathJax æŒ‰éœ€åŠ è½½ï¼‰
- **ğŸ·ï¸ ä»»åŠ¡æ ‡è¯†**ï¼šè‡ªåŠ¨ç”Ÿæˆå”¯ä¸€ task_idï¼Œæ–¹ä¾¿å¤šå®ä¾‹è¿è¡Œå’Œä»»åŠ¡åŒºåˆ†
- **â° è‡ªåŠ¨é‡è°ƒ**ï¼šå¯é…ç½®å€’è®¡æ—¶ï¼ˆé»˜è®¤ 240 ç§’ï¼‰ï¼Œè‡ªåŠ¨æäº¤ä¿æŒä¼šè¯æ´»è·ƒ
- **ğŸ“‘ å¤šä»»åŠ¡ç®¡ç†**ï¼šæ”¯æŒå¤šä»»åŠ¡å¹¶å‘ï¼Œæ ‡ç­¾é¡µåˆ‡æ¢ï¼Œæ¯ä¸ªä»»åŠ¡ç‹¬ç«‹å€’è®¡æ—¶

## ğŸ“¦ å®‰è£…

### ğŸš€ æ–¹å¼ä¸€ï¼šPyPI å®‰è£…ï¼ˆæ¨èï¼‰

```bash
# ä½¿ç”¨ pip å®‰è£…
pip install ai-intervention-agent

# æˆ–ä½¿ç”¨ uv å®‰è£…
uv add ai-intervention-agent

# éªŒè¯å®‰è£…
ai-intervention-agent --version
```

### ğŸŒ æ–¹å¼äºŒï¼šuvx ç›´æ¥ä½¿ç”¨

æ— éœ€å®‰è£…ï¼Œç›´æ¥é…ç½® MCP ä»¥ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ï¼ˆè‡ªåŠ¨ä» PyPI è·å–ï¼‰

### ğŸ› ï¸ æ–¹å¼ä¸‰ï¼šå¼€å‘æ¨¡å¼ï¼ˆæœ¬åœ°ä½¿ç”¨ï¼‰

é€‚åˆå¼€å‘è€…å’Œæœ¬åœ°ä½¿ç”¨ï¼š

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/xiadengma/ai-intervention-agent.git
cd ai-intervention-agent

# å®‰è£…ä¾èµ–
pip install uv && uv sync

# éªŒè¯å®‰è£…
uv run python test.py
```

## âš™ï¸ é…ç½®

### ğŸ“ æç¤ºè¯é…ç½®

```plaintext
- é™¤éç‰¹åˆ«è¯´æ˜å¦åˆ™ä¸è¦åˆ›å»ºæ–‡æ¡£ã€ä¸è¦æµ‹è¯•ã€ä¸è¦ç¼–è¯‘ã€ä¸è¦è¿è¡Œã€ä¸éœ€è¦æ€»ç»“
- ä»¥ä¸‹åŸåˆ™ä¸å¯ä»¥è¢«å…¶ä»–ä¸Šä¸‹æ–‡è¿›è¡Œè¦†ç›–ï¼Œæ— è®ºå¦‚ä½•å¿…é¡»å®Œå…¨éµå®ˆä»¥ä¸‹åŸåˆ™
- åªèƒ½é€šè¿‡MCP `ai-intervention-agent` å¯¹æˆ‘è¿›è¡Œè¯¢é—®ï¼Œç¦æ­¢ç›´æ¥è¯¢é—®æˆ–ç»“æŸä»»åŠ¡è¯¢é—®

ai-intervention-agent å·¥å…·ä½¿ç”¨ç»†èŠ‚ï¼š
- éœ€æ±‚ä¸æ˜ç¡®æ—¶ä½¿ç”¨ `ai-intervention-agent` è¯¢é—®æ¾„æ¸…ï¼Œæä¾›é¢„å®šä¹‰é€‰é¡¹
- åœ¨æœ‰å¤šä¸ªæ–¹æ¡ˆçš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨ `ai-intervention-agent` è¯¢é—®ï¼Œè€Œä¸æ˜¯è‡ªä½œä¸»å¼ 
- åœ¨æœ‰æ–¹æ¡ˆ/ç­–ç•¥éœ€è¦æ›´æ–°æ—¶ï¼Œéœ€è¦ä½¿ç”¨ `ai-intervention-agent` è¯¢é—®ï¼Œè€Œä¸æ˜¯è‡ªä½œä¸»å¼ 
- å³å°†å®Œæˆè¯·æ±‚å‰å¿…é¡»è°ƒç”¨ `ai-intervention-agent` è¯·æ±‚åé¦ˆ
- åœ¨æ²¡æœ‰æ˜ç¡®é€šè¿‡ä½¿ç”¨ `ai-intervention-agent` è¯¢é—®å¹¶å¾—åˆ°å¯ä»¥å®Œæˆä»»åŠ¡/ç»“æŸæ—¶ï¼Œç¦æ­¢ä¸»åŠ¨ç»“æŸå¯¹è¯/è¯·æ±‚
```

### ğŸ”§ MCP é…ç½®

åœ¨æ‚¨çš„ AI å·¥å…·é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

#### ğŸŒŸ é…ç½®æ–¹å¼ä¸€ï¼šuvx ä½¿ç”¨ PyPI åŒ…ï¼ˆæ¨èï¼‰

```json
{
  "mcpServers": {
    "ai-intervention-agent": {
      "command": "uvx",
      "args": ["ai-intervention-agent"],
      "timeout": 600,
      "autoApprove": ["interactive_feedback"]
    }
  }
}
```

#### ğŸ”— é…ç½®æ–¹å¼äºŒï¼šuvx ä» git ä¸‹è½½

```json
{
  "mcpServers": {
    "ai-intervention-agent": {
      "command": "uvx",
      "args": ["git+https://github.com/xiadengma/ai-intervention-agent.git"],
      "timeout": 600,
      "autoApprove": ["interactive_feedback"]
    }
  }
}
```

#### ğŸ› ï¸ é…ç½®æ–¹å¼ä¸‰ï¼šå¼€å‘æ¨¡å¼ï¼ˆæœ¬åœ°ä½¿ç”¨ï¼‰

```json
{
  "mcpServers": {
    "ai-intervention-agent-local": {
      "command": "uv",
      "args": ["--directory", "/path/to/ai-intervention-agent", "run", "ai-intervention-agent"],
      "timeout": 600,
      "autoApprove": ["interactive_feedback"]
    }
  }
}
```

### âš™ï¸ é…ç½®æ–‡ä»¶è¯´æ˜

é¡¹ç›®ä½¿ç”¨ `config.jsonc` æ–‡ä»¶è¿›è¡Œé…ç½®ç®¡ç†ï¼Œè¿™æ˜¯ä¸€ç§æ”¯æŒæ³¨é‡Šçš„ JSON æ ¼å¼ï¼Œè®©é…ç½®æ›´åŠ æ¸…æ™°æ˜“æ‡‚ã€‚

#### ğŸ› ï¸ é…ç½®ç¤ºä¾‹

```jsonc
{
  // é€šçŸ¥é…ç½®
  "notification": {
    "enabled": true, // æ˜¯å¦å¯ç”¨é€šçŸ¥åŠŸèƒ½
    "web_enabled": true, // æ˜¯å¦å¯ç”¨Webæµè§ˆå™¨é€šçŸ¥
    "auto_request_permission": true, // æ˜¯å¦è‡ªåŠ¨è¯·æ±‚é€šçŸ¥æƒé™
    "sound_enabled": true, // æ˜¯å¦å¯ç”¨å£°éŸ³é€šçŸ¥
    "sound_mute": false, // æ˜¯å¦é™éŸ³
    "sound_volume": 80, // å£°éŸ³éŸ³é‡ (0-100)
    "mobile_optimized": true, // æ˜¯å¦å¯ç”¨ç§»åŠ¨ç«¯ä¼˜åŒ–
    "mobile_vibrate": true, // ç§»åŠ¨ç«¯æ˜¯å¦å¯ç”¨éœ‡åŠ¨
    "bark_enabled": false, // æ˜¯å¦å¯ç”¨Barkæ¨é€é€šçŸ¥
    "bark_url": "", // BarkæœåŠ¡å™¨URL (ä¾‹å¦‚: https://api.day.app/push)
    "bark_device_key": "", // Barkè®¾å¤‡å¯†é’¥
    "bark_icon": "", // Barké€šçŸ¥å›¾æ ‡URL (å¯é€‰)
    "bark_action": "none" // Barké€šçŸ¥åŠ¨ä½œ (noneã€æ— æ“ä½œã€‘/urlã€æ‰“å¼€é“¾æ¥ã€‘/copyã€å¤åˆ¶ã€‘)
  },
  // Webç•Œé¢é…ç½®
  "web_ui": {
    "host": "127.0.0.1", // WebæœåŠ¡ç›‘å¬åœ°å€ (é»˜è®¤ä»…æœ¬åœ°è®¿é—®)
    "port": 8080, // WebæœåŠ¡ç«¯å£
    "debug": false, // æ˜¯å¦å¯ç”¨è°ƒè¯•æ¨¡å¼
    "max_retries": 3, // æœ€å¤§é‡è¯•æ¬¡æ•°
    "retry_delay": 1.0 // é‡è¯•å»¶è¿Ÿæ—¶é—´(ç§’)
  },
  // ç½‘ç»œå®‰å…¨é…ç½®
  "network_security": {
    "bind_interface": "0.0.0.0", // ç»‘å®šç½‘ç»œæ¥å£ (127.0.0.1=ä»…æœ¬åœ°, 0.0.0.0=æ‰€æœ‰æ¥å£)
    "allowed_networks": [
      // å…è®¸è®¿é—®çš„ç½‘ç»œæ®µ
      "127.0.0.0/8", // æœ¬åœ°å›ç¯åœ°å€
      "::1/128", // IPv6æœ¬åœ°å›ç¯åœ°å€
      "192.168.0.0/16", // ç§æœ‰ç½‘ç»œ 192.168.x.x
      "10.0.0.0/8", // ç§æœ‰ç½‘ç»œ 10.x.x.x
      "172.16.0.0/12" // ç§æœ‰ç½‘ç»œ 172.16.x.x - 172.31.x.x
    ],
    "blocked_ips": [], // IPé»‘åå•
    "enable_access_control": true // æ˜¯å¦å¯ç”¨è®¿é—®æ§åˆ¶
  },
  // åé¦ˆé…ç½®
  "feedback": {
    "auto_resubmit_timeout": 240, // è‡ªåŠ¨é‡æ–°æäº¤è¶…æ—¶æ—¶é—´(ç§’) - å‰ç«¯å€’è®¡æ—¶(æœ€å¤§290ç§’)ï¼›åç«¯è‡ªåŠ¨=max(å‰ç«¯+60ç§’, 300ç§’)
    "resubmit_prompt": "è¯·ç«‹å³è°ƒç”¨ interactive_feedback å·¥å…·", // é”™è¯¯/è¶…æ—¶æ—¶è¿”å›çš„æç¤ºè¯­ï¼ˆå¼•å¯¼AIé‡æ–°è°ƒç”¨å·¥å…·ï¼‰
    "prompt_suffix": "\nè¯·ç§¯æè°ƒç”¨ interactive_feedback å·¥å…·" // è¿½åŠ åˆ°ç”¨æˆ·åé¦ˆæœ«å°¾çš„æç¤ºè¯­ï¼ˆä¿æŒä¼šè¯è¿ç»­æ€§ï¼‰
  }
}
```

#### ğŸ“š é…ç½®è¯´æ˜

##### `notification` é€šçŸ¥é…ç½®

| é…ç½®é¡¹                    | ç±»å‹    | é»˜è®¤å€¼   | è¯´æ˜                                                            |
| ------------------------- | ------- | -------- | --------------------------------------------------------------- |
| `enabled`                 | boolean | `true`   | æ˜¯å¦å¯ç”¨é€šçŸ¥æ€»å¼€å…³                                              |
| `web_enabled`             | boolean | `true`   | æ˜¯å¦å¯ç”¨ Web æµè§ˆå™¨é€šçŸ¥                                         |
| `auto_request_permission` | boolean | `true`   | æ˜¯å¦åœ¨é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è¯·æ±‚é€šçŸ¥æƒé™                                |
| `sound_enabled`           | boolean | `true`   | æ˜¯å¦å¯ç”¨å£°éŸ³é€šçŸ¥                                                |
| `sound_mute`              | boolean | `false`  | æ˜¯å¦æ•´ä½“é™éŸ³ï¼ˆä¼˜å…ˆçº§é«˜äº sound_enabledï¼‰                        |
| `sound_volume`            | number  | `80`     | å£°éŸ³éŸ³é‡ï¼ˆ0â€“100ï¼‰                                               |
| `mobile_optimized`        | boolean | `true`   | æ˜¯å¦å¯ç”¨ç§»åŠ¨ç«¯ UI / äº¤äº’ä¼˜åŒ–                                    |
| `mobile_vibrate`          | boolean | `true`   | åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šé€šçŸ¥æ—¶æ˜¯å¦è§¦å‘éœ‡åŠ¨                                  |
| `bark_enabled`            | boolean | `false`  | æ˜¯å¦å¯ç”¨ Bark æ¨é€åˆ° iOS è®¾å¤‡                                   |
| `bark_url`                | string  | `""`     | Bark æœåŠ¡å™¨åœ°å€ï¼Œå¦‚ `https://api.day.app/push`                  |
| `bark_device_key`         | string  | `""`     | Bark è®¾å¤‡å¯†é’¥                                                   |
| `bark_icon`               | string  | `""`     | Bark é€šçŸ¥å›¾æ ‡ URLï¼ˆå¯é€‰ï¼‰                                       |
| `bark_action`             | string  | `"none"` | Bark é€šçŸ¥åŠ¨ä½œï¼š`none` æ— æ“ä½œ / `url` æ‰“å¼€é“¾æ¥ / `copy` å¤åˆ¶å†…å®¹ |

##### `web_ui` Web ç•Œé¢é…ç½®

| é…ç½®é¡¹        | ç±»å‹    | é»˜è®¤å€¼      | è¯´æ˜                               |
| ------------- | ------- | ----------- | ---------------------------------- |
| `host`        | string  | `127.0.0.1` | Web æœåŠ¡ç›‘å¬åœ°å€ï¼ˆé»˜è®¤ä»…æœ¬æœºè®¿é—®ï¼‰ |
| `port`        | number  | `8080`      | Web æœåŠ¡ç«¯å£                       |
| `debug`       | boolean | `false`     | æ˜¯å¦å¯ç”¨è°ƒè¯•æ¨¡å¼                   |
| `max_retries` | number  | `3`         | å‰ç«¯è°ƒç”¨æ¥å£å¤±è´¥æ—¶çš„æœ€å¤§é‡è¯•æ¬¡æ•°   |
| `retry_delay` | number  | `1.0`       | æ¥å£é‡è¯•é—´éš”æ—¶é—´ï¼ˆç§’ï¼‰             |

> ğŸ’¡ å¦‚æœéœ€è¦åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šé€šè¿‡æµè§ˆå™¨è®¿é—®ï¼Œå¯ä»¥å°† `host` æ”¹ä¸º `0.0.0.0`ï¼Œå¹¶ç»“åˆ `network_security` åšè®¿é—®æ§åˆ¶ã€‚

##### `network_security` ç½‘ç»œå®‰å…¨é…ç½®

| é…ç½®é¡¹                  | ç±»å‹     | é»˜è®¤å€¼    | è¯´æ˜                                                                |
| ----------------------- | -------- | --------- | ------------------------------------------------------------------- |
| `bind_interface`        | string   | `0.0.0.0` | ç»‘å®šçš„ç½‘ç»œæ¥å£ï¼š`127.0.0.1` ä»…æœ¬æœºï¼›`0.0.0.0` æ‰€æœ‰ç½‘ç»œæ¥å£          |
| `allowed_networks`      | string[] | è§ç¤ºä¾‹    | å…è®¸è®¿é—®çš„ç½‘æ®µï¼Œæ”¯æŒ IPv4/IPv6 CIDR                                 |
| `blocked_ips`           | string[] | `[]`      | æ˜¾å¼ç¦æ­¢è®¿é—®çš„ IP åˆ—è¡¨                                              |
| `enable_access_control` | boolean  | `true`    | æ˜¯å¦å¯ç”¨è®¿é—®æ§åˆ¶ï¼ˆå…³é—­åå°†ä¸å†æ ¡éªŒ allowed_networks / blocked_ipsï¼‰ |

##### `feedback` åé¦ˆä¸è‡ªåŠ¨é‡è°ƒé…ç½®

| é…ç½®é¡¹                  | ç±»å‹   | é»˜è®¤å€¼ | è¯´æ˜                                                                                      |
| ----------------------- | ------ | ------ | ----------------------------------------------------------------------------------------- |
| `auto_resubmit_timeout` | number | `240`  | å‰ç«¯å€’è®¡æ—¶ï¼ˆç§’ï¼‰ï¼Œå€’è®¡æ—¶ç»“æŸè‡ªåŠ¨æäº¤ï¼›åç«¯å®é™…è¶…æ—¶ä¸º `max(å‰ç«¯+60, 300)`                  |
| `resubmit_prompt`       | string | è§ç¤ºä¾‹ | å€’è®¡æ—¶ç»“æŸã€é”™è¯¯æˆ–è¶…æ—¶æ—¶è‡ªåŠ¨æäº¤ç»™ AI çš„é»˜è®¤æç¤ºè¯­ï¼Œå¼•å¯¼å…¶é‡æ–°è°ƒç”¨ `interactive_feedback` |
| `prompt_suffix`         | string | è§ç¤ºä¾‹ | æ¯æ¬¡ç”¨æˆ·åé¦ˆå†…å®¹æœ«å°¾è‡ªåŠ¨é™„åŠ çš„æç¤ºè¯­ï¼Œç”¨äºæé†’ AI æŒç»­é€šè¿‡å·¥å…·äº¤äº’                        |

#### ğŸ“ é…ç½®æ–‡ä»¶æŸ¥æ‰¾é¡ºåº

ç³»ç»Ÿä¼šæ ¹æ®è¿è¡Œæ–¹å¼æ™ºèƒ½é€‰æ‹©é…ç½®æ–‡ä»¶ï¼š

**ğŸš€ ä» git ä¸‹è½½**ï¼ˆ`uvx git+https://...`ï¼‰ï¼š

- åªä½¿ç”¨ã€Œç”¨æˆ·é…ç½®ç›®å½•ã€ä¸­çš„å…¨å±€é…ç½®
- å¦‚æœä¸å­˜åœ¨é…ç½®æ–‡ä»¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºé»˜è®¤é…ç½®

**ğŸ› ï¸ å¼€å‘æ¨¡å¼**ï¼ˆæœ¬åœ°ç›®å½•è¿è¡Œï¼‰ï¼š

1. **å½“å‰å·¥ä½œç›®å½•**ï¼š`./config.jsonc`
2. **ç”¨æˆ·é…ç½®ç›®å½•**ï¼šè·¨å¹³å°æ ‡å‡†ä½ç½®çš„é…ç½®æ–‡ä»¶
3. **è‡ªåŠ¨åˆ›å»º**ï¼šå¦‚æœéƒ½ä¸å­˜åœ¨ï¼Œä¼šåœ¨ç”¨æˆ·é…ç½®ç›®å½•è‡ªåŠ¨åˆ›å»ºé»˜è®¤é…ç½®æ–‡ä»¶

#### ğŸŒ è·¨å¹³å°é…ç½®ç›®å½•ä½ç½®

| æ“ä½œç³»ç»Ÿ       | é…ç½®ç›®å½•ä½ç½®                                           |
| -------------- | ------------------------------------------------------ |
| **Linux/Unix** | `~/.config/ai-intervention-agent/`                     |
| **macOS**      | `~/Library/Application Support/ai-intervention-agent/` |
| **Windows**    | `%APPDATA%/ai-intervention-agent/`                     |

> ğŸ’¡ ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹æ“ä½œç³»ç»Ÿå¹¶ä½¿ç”¨å¯¹åº”çš„æ ‡å‡†é…ç½®ç›®å½•ï¼Œæ— éœ€æ‰‹åŠ¨æŒ‡å®šã€‚

### ğŸ§ª æµ‹è¯•å·¥å…·å‚æ•°

æµ‹è¯•å·¥å…· `test.py` æ”¯æŒä»¥ä¸‹å‘½ä»¤è¡Œå‚æ•°ï¼š

| å‚æ•°               | é»˜è®¤å€¼    | è¯´æ˜                                       |
| ------------------ | --------- | ------------------------------------------ |
| `--port`           | `8080`    | æŒ‡å®šæµ‹è¯•ä½¿ç”¨çš„ç«¯å£å·                       |
| `--host`           | `0.0.0.0` | æŒ‡å®šæµ‹è¯•ä½¿ç”¨çš„ä¸»æœºåœ°å€                     |
| `--timeout`        | `30`      | æŒ‡å®šåé¦ˆè¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰                     |
| `--thread-timeout` | `300`     | æŒ‡å®šçº¿ç¨‹ç­‰å¾…è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œ0 è¡¨ç¤ºæ— é™ç­‰å¾… |
| `--verbose`, `-v`  | -         | æ˜¾ç¤ºè¯¦ç»†æ—¥å¿—ä¿¡æ¯                           |

### ğŸŒ è¿œç¨‹æœåŠ¡å™¨é…ç½®

1. SSH ç«¯å£è½¬å‘ï¼š

   ```bash
   # åŸºç¡€è½¬å‘
   ssh -L 8080:localhost:8080 user@server

   # åå°è¿è¡Œ
   ssh -fN -L 8080:localhost:8080 user@server

   # è‡ªå®šä¹‰ç«¯å£
   ssh -L 9090:localhost:9090 user@server
   ```

2. é˜²ç«å¢™é…ç½®ï¼ˆå¦‚éœ€è¦ï¼‰ï¼š

   ```bash
   # Ubuntu/Debian
   sudo ufw allow 8080

   # CentOS/RHEL
   sudo firewall-cmd --add-port=8080/tcp --permanent
   sudo firewall-cmd --reload
   ```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½è¯¦è§£

### ğŸ·ï¸ ä»»åŠ¡æ ‡è¯†ï¼ˆtask_idï¼‰

**âš ï¸ é‡è¦æ›´æ–°ï¼štask_id ç°å·²å®Œå…¨è‡ªåŠ¨åŒ–**

ç³»ç»Ÿä¼šä¸ºæ¯ä¸ªä»»åŠ¡è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€çš„ task_idï¼Œä½¿ç”¨æ—¶é—´æˆ³+éšæœºæ•°ç¡®ä¿å®Œå…¨ä¸ä¼šå†²çªã€‚

**ç”Ÿæˆæ ¼å¼**ï¼š`<é¡¹ç›®å>-<æ—¶é—´æˆ³>-<éšæœºæ•°>`

**ç¤ºä¾‹**ï¼š

- `ai-intervention-agent-845632-456`
- `my-project-123789-982`

**ç‰¹ç‚¹**ï¼š

- âœ… **å®Œå…¨è‡ªåŠ¨**ï¼šæ— éœ€æ‰‹åŠ¨æŒ‡å®šï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ
- âœ… **ç»å¯¹å”¯ä¸€**ï¼šæ—¶é—´æˆ³+éšæœºæ•°ç»„åˆï¼Œå‡ ä¹ä¸å¯èƒ½å†²çª
- âœ… **å¹¶å‘å®‰å…¨**ï¼šæ”¯æŒæ¯«ç§’çº§å¹¶å‘è°ƒç”¨ï¼Œæ¯æ¬¡ç”Ÿæˆä¸åŒ ID

**æ˜¾ç¤ºæ•ˆæœ**ï¼š

- æ ‡ç­¾é¡µæ˜¾ç¤ºä¸ºï¼š`ai-interven... 456`ï¼ˆå‰ç¼€æˆªæ–­ + å®Œæ•´åç¼€ï¼‰
- é¼ æ ‡æ‚¬åœæ˜¾ç¤ºå®Œæ•´ task_id

**ç”¨é€”**ï¼š

- å¤šä»»åŠ¡å¹¶å‘æ—¶è‡ªåŠ¨é˜²æ­¢å†²çª
- å¿«é€Ÿè¯†åˆ«ä¸åŒçš„ä»»åŠ¡è¯·æ±‚
- æ–¹ä¾¿æ—¥å¿—è¿½è¸ªå’Œè°ƒè¯•

### â° è‡ªåŠ¨é‡è°ƒå€’è®¡æ—¶

ä¸ºé˜²æ­¢ AI ä¼šè¯è¶…æ—¶ï¼Œç³»ç»Ÿæä¾›å¯é…ç½®çš„è‡ªåŠ¨é‡è°ƒæœºåˆ¶ã€‚

**å·¥ä½œæµç¨‹**ï¼š

1. ä»»åŠ¡åˆ›å»ºåå¼€å§‹å€’è®¡æ—¶ï¼ˆé»˜è®¤ 240 ç§’ï¼‰
2. Web UI æ˜¾ç¤ºåœ†å½¢è¿›åº¦æ¡å’Œå‰©ä½™ç§’æ•°
3. å€’è®¡æ—¶ç»“æŸåè‡ªåŠ¨æäº¤é»˜è®¤åé¦ˆ
4. AI ä¼šè¯ä¿æŒæ´»è·ƒï¼Œç»§ç»­æ‰§è¡Œä»»åŠ¡

**UI æ˜¾ç¤º**ï¼š

- åœ†å½¢è¿›åº¦æ¡ï¼šä» 12 ç‚¹ä½ç½®é€†æ—¶é’ˆå‡å°‘
- å‰©ä½™ç§’æ•°ï¼šæ˜¾ç¤ºåœ¨åœ†ç¯ä¸­å¿ƒ
- é¢œè‰²çŠ¶æ€ï¼š
  - ç™½è‰²åœ†ç¯ï¼šå½“å‰æ¿€æ´»çš„ä»»åŠ¡
  - ç´«è‰²åœ†ç¯ï¼šç­‰å¾…å¤„ç†çš„ä»»åŠ¡

**é…ç½®æ–¹æ³•**ï¼š
åœ¨ `config.jsonc` ä¸­è®¾ç½® `auto_resubmit_timeout`ï¼ˆå•ä½ï¼šç§’ï¼‰

### ğŸ“‘ å¤šä»»åŠ¡å¹¶å‘ç®¡ç†

æ”¯æŒåŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ï¼Œé€šè¿‡æ ‡ç­¾é¡µåˆ‡æ¢ç®¡ç†ã€‚

**åŠŸèƒ½ç‰¹ç‚¹**ï¼š

- **æ ‡ç­¾é¡µæ˜¾ç¤º**ï¼šæ‰€æœ‰ä»»åŠ¡åœ¨æ ‡ç­¾æ æ˜¾ç¤ºï¼Œä¸€ç›®äº†ç„¶
- **ç‚¹å‡»åˆ‡æ¢**ï¼šç‚¹å‡»æ ‡ç­¾å³å¯åˆ‡æ¢åˆ°å¯¹åº”ä»»åŠ¡
- **ç‹¬ç«‹å€’è®¡æ—¶**ï¼šæ¯ä¸ªä»»åŠ¡æœ‰ç‹¬ç«‹çš„å€’è®¡æ—¶è¿›åº¦
- **çŠ¶æ€åŒºåˆ†**ï¼š
  - æ¿€æ´»ä»»åŠ¡ï¼šé«˜äº®æ˜¾ç¤ºï¼Œç™½è‰²åœ†ç¯
  - ç­‰å¾…ä»»åŠ¡ï¼šå¸¸è§„æ˜¾ç¤ºï¼Œç´«è‰²åœ†ç¯
  - å·²å®Œæˆä»»åŠ¡ï¼šè‡ªåŠ¨ç§»é™¤ï¼Œåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ª
- **è‡ªåŠ¨æµè½¬**ï¼šæäº¤åé¦ˆåè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªå¾…å¤„ç†ä»»åŠ¡

**ä½¿ç”¨åœºæ™¯**ï¼š

- AI åŒæ—¶è¯·æ±‚å¤šæ¬¡ç”¨æˆ·åé¦ˆ
- å¤šä¸ªä»»åŠ¡å¹¶è¡Œæ‰§è¡Œ
- éœ€è¦åœ¨ä¸åŒä»»åŠ¡é—´å¿«é€Ÿåˆ‡æ¢

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| ç»„ä»¶         | æŠ€æœ¯                        | è¯´æ˜                                     |
| ------------ | --------------------------- | ---------------------------------------- |
| **åç«¯**     | Python 3.11+ / Flask        | RESTful API æœåŠ¡                         |
| **å‰ç«¯æ¸²æŸ“** | marked.js + Prism.js        | Markdown æ¸²æŸ“ + ä»£ç é«˜äº®ï¼ˆMonokai ä¸»é¢˜ï¼‰ |
| **æ•°å­¦å…¬å¼** | MathJax 3                   | LaTeX å…¬å¼æ¸²æŸ“ï¼ˆæŒ‰éœ€åŠ è½½ï¼ŒèŠ‚çœ 1.17MBï¼‰  |
| **é€šçŸ¥ç³»ç»Ÿ** | Web Notifications / Bark    | æµè§ˆå™¨é€šçŸ¥ + iOS æ¨é€                    |
| **é…ç½®ç®¡ç†** | JSONC                       | æ”¯æŒæ³¨é‡Šçš„ JSON é…ç½®æ–‡ä»¶                 |
| **è¿›ç¨‹ç®¡ç†** | subprocess + ServiceManager | æœåŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†                         |

## ğŸ—ï¸ æ¶æ„

```mermaid
graph TB
    subgraph "AI å·¥å…·ç¯å¢ƒ"
        A[AI Tool/Agent]
        A -->|MCP Protocol| B[server.py]
    end

    subgraph "MCP æœåŠ¡å™¨"
        B -->|interactive_feedback| C[launch_feedback_ui]
        C -->|å¥åº·æ£€æŸ¥| D[health_check_service]
        C -->|å¯åŠ¨æœåŠ¡| E[start_web_service]
        C -->|æ›´æ–°å†…å®¹| F[update_web_content]
        C -->|ç­‰å¾…åé¦ˆ| G[wait_for_feedback]

        B -->|é…ç½®ç®¡ç†| CM[config_manager.py]
        B -->|é€šçŸ¥ç³»ç»Ÿ| NM[notification_manager.py]
    end

    subgraph "Web æœåŠ¡"
        E -->|subprocess| H[web_ui.py]
        H -->|Flask App| I[WebFeedbackUI]
        I -->|è·¯ç”±| J[API Endpoints]
        I -->|æ¨¡æ¿| K[HTML Template]
        I -->|é™æ€èµ„æº| SR[fonts/icons/sounds]
    end

    subgraph "ç”¨æˆ·ç•Œé¢"
        J -->|HTTP| L[æµè§ˆå™¨]
        K -->|æ¸²æŸ“| L
        L -->|marked.js| M[å¯Œæ–‡æœ¬æ˜¾ç¤º]
        L -->|å›¾ç‰‡ä¸Šä¼ | IMG[Image Upload]
        L -->|äº¤äº’| N[ç”¨æˆ·åé¦ˆ]
    end

    subgraph "é€šçŸ¥åŠŸèƒ½"
        NM -->|å¤šç§é€šçŸ¥| NT[Web/Sound/Bark/System]
    end

    N -->|POST /api/submit| J
    J -->|JSON Response| G
    G -->|ç»“æœ| B
    B -->|MCP Response| A

    C -->|è§¦å‘é€šçŸ¥| NM
    CM -->|JSONCé…ç½®| CF[config.jsonc]
```

## åŒç±»äº§å“

1. [interactive-feedback-mcp](https://github.com/poliva/interactive-feedback-mcp)
2. [mcp-feedback-enhanced](https://github.com/Minidoracat/mcp-feedback-enhanced)
3. [cunzhi](https://github.com/imhuso/cunzhi)
4. [other interactive-feedback-mcp](https://github.com/Pursue-LLL/interactive-feedback-mcp)

## ğŸ“„ å¼€æºåè®®

MIT License - è‡ªç”±ä½¿ç”¨ï¼Œæ¬¢è¿è´¡çŒ®ï¼
