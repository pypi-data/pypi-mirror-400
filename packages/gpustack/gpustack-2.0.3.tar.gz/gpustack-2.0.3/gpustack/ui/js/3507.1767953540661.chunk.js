"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3507],{75306:function(e,n,t){var r,a=t(26068),o=t.n(a),i=t(67825),l=t.n(i),c=t(53649),u=t.n(c),s=t(43458),d=(t(75271),t(67585)),p=t(52676),f=["height","size","options","className","theme","showTitle"],m={color:"var(--color-white-tertiary)",itemColorHover:"var(--color-white-secondary)",itemSelectedColor:"var(--color-white-primary)",thumbBgColor:"var(--color-white-primary)",fontWeight:400},g={color:"var(--ant-segmented-item-color)",itemColorHover:"var(--ant-segmented-item-hover-color)",itemSelectedColor:"var(--ant-segmented-item-selected-color)",thumbBgColor:"var(--ant-color-primary)",fontWeight:500},h=d.ZP.div(r||(r=u()(["\n  .ant-segmented.segment-line {\n    padding: 0;\n    background-color: transparent;\n    color: ",";\n    font-weight: ",";\n    border: none;\n    box-shadow: none;\n    height: ","px;\n    display: flex;\n    align-items: center;\n    .ant-segmented-group {\n      gap: 16px;\n      height: 100%;\n    }\n    .ant-segmented-item:hover {\n      color: ",";\n    }\n    .ant-segmented-thumb {\n      height: 2px;\n      padding: 0px;\n      bottom: 0px;\n      top: unset;\n      background-color: "," !important;\n    }\n    .ant-segmented-item-label {\n      display: flex;\n      align-items: center;\n      padding: 0;\n      font-size: var(--font-size-small);\n    }\n    .ant-segmented-item {\n      background-color: transparent;\n      padding-bottom: 2px;\n      display: flex;\n      align-items: center;\n      &::after {\n        background-color: "," !important;\n        width: 100%;\n        height: 0px;\n        border-radius: 2px;\n        bottom: 0px;\n        top: unset;\n        opacity: 1;\n      }\n    }\n\n    .ant-segmented-item-selected {\n      background-color: transparent;\n      box-shadow: none;\n      color: ",";\n      &::after {\n        height: 2px;\n        opacity: 1;\n      }\n    }\n  }\n  &.with-title .ant-segmented.segment-line {\n    .ant-segmented-item.ant-segmented-item-selected::after {\n      display: none;\n    }\n  }\n"])),(function(e){return e.$theme.color}),(function(e){return e.$theme.fontWeight}),(function(e){return e.$height}),(function(e){return e.$theme.itemColorHover}),(function(e){return e.$theme.thumbBgColor}),(function(e){return e.$theme.thumbBgColor}),(function(e){return e.$theme.itemSelectedColor}));n.Z=function(e){var n=e.height,t=void 0===n?32:n,r=e.size,a=void 0===r?"small":r,i=e.options,c=void 0===i?[]:i,u=e.className,d=void 0===u?"segment-line":u,v=e.theme,b=void 0===v?"dark":v,x=e.showTitle,k=void 0!==x&&x,_=l()(e,f);return(0,p.jsx)(h,{className:k?"with-title":"",$height:t,$theme:"dark"===b?m:g,children:(0,p.jsx)(s.Z,o()(o()({},_),{},{size:a,options:c,className:d}))})}},71920:function(e,n,t){t.d(n,{d4:function(){return l}});var r=t(48305),a=t.n(r),o=(0,t(48075).oc)(),i={CREATE:["Alt+Ctrl+N","Alt+Meta+N"],CLEAR:["Alt+Ctrl+K","Alt+Meta+K"],RIGHT:["Ctrl+RIGHT","Meta+RIGHT"],SAVE:["Ctrl+S","Meta+S"],SUBMIT:["Enter","Enter"],ENTER:["Enter","Enter"],SHIFT:["Shift","Shift"],CTRL:["Ctrl","Meta"],OPTION:["Alt","Option"],SAVEAS:["Alt+Ctrl+S","Alt+Meta+S"],OPEN:["Alt+Ctrl+O","Alt+Meta+O"],UNDO:["Ctrl+Z","Meta+Z"],CANCEL:["Ctrl+W","Meta+W"],DELETE:["delete"],COPY:["Ctrl+C","Meta+C"],REFRESH:["Ctrl+R","Meta+R"],EDIT:["Ctrl+E","Meta+E"],SEARCH:["Ctrl+K","Meta+K"],RESET:["Alt+Ctrl+R","Alt+Meta+R"],INPUT:["Ctrl+K","Meta+K"],NEW1:["Ctrl+1","Meta+1"],NEW2:["Ctrl+2","Meta+2"],NEW3:["Ctrl+3","Meta+3"],NEW4:["Ctrl+4","Meta+4"],FOCUS:["/","/"],ADD:["Alt+Ctrl+Enter","Alt+Meta+Enter"],ESC:["Esc","Esc"]},l=Object.entries(i).map((function(e){var n=a()(e,2),t=n[0],r=n[1],i=o.isMac&&r[1]||r[0];return{keybinding:i,command:t,textKeybinding:o.isMac?i.replace("Meta","Cmd").replace("Alt","Option"):i.replace("Ctrl","Ctrl"),iconKeybinding:o.isMac?i.replace("Meta","⌘").replace("Alt","⌥"):i.replace("Ctrl","Ctrl")}})).reduce((function(e,n){return e[n.command]=n,e}),{});n.ZP=i},21363:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(75271);function a(){var e=r.useRef(0),n=r.useRef({}),t=r.useRef(null),a=r.useRef(null),o=r.useRef(null),i=function(){var e;t.current=null===(e=window.__GPUSTACK_BODY_SCROLLER__)||void 0===e||null===(e=e.elements())||void 0===e?void 0:e.scrollEventElement,a.current=window.__GPUSTACK_BODY_SCROLLER__},l=r.useCallback((function(){var r,o,l,c;t.current||i(),n.current=null===(r=a.current)||void 0===r?void 0:r.state();var u=null===(o=n.current)||void 0===o||null===(o=o.overflowAmount)||void 0===o?void 0:o.y;e.current=u,null===(l=a.current)||void 0===l||null===(c=l.options)||void 0===c||c.call(l,{overflow:{x:"hidden",y:"visible"}})}),[]),c=r.useCallback((function(){o.current&&clearTimeout(o.current),o.current=setTimeout((function(){var e,n;null===(e=a.current)||void 0===e||null===(n=e.options)||void 0===n||n.call(e,{overflow:{x:"hidden",y:"scroll"}})}),500)}),[]);return r.useEffect((function(){return i(),function(){t.current=null,a.current=null}}),[]),{saveScrollHeight:l,restoreScrollHeight:c,bodyScroller:t.current}}},35817:function(e,n,t){var r,a=t(48305),o=t.n(a),i=t(53649),l=t.n(i),c=t(12272),u=t(78714),s=t(41273),d=t(75306),p=t(75271),f=t(67585),m=t(52676),g=f.ZP.div(r||(r=l()(["\n  width: 100%;\n  padding-inline: 12px 10px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background-color: var(--color-editor-header-bg);\n"])));n.Z=function(e){var n=e||{},t=n.code,r=n.copyText,a=void 0===r?"":r,i=n.defaultValue,l=n.options,f=void 0===l?[]:l,h=n.headerHeight,v=void 0===h?40:h,b=n.height,x=void 0===b?380:b,k=n.showTitle,_=void 0!==k&&k,y=n.lang,T=n.onChange,S=p.useState(i||""),w=o()(S,2),E=w[0],C=w[1];return(0,m.jsx)(u.Z,{header:(0,m.jsxs)(g,{children:[(0,m.jsx)(d.Z,{height:v,defaultValue:i,value:E,size:"small",options:f,showTitle:_,onChange:function(e){C(e),null==T||T(e)}}),(0,m.jsx)(c.Z,{text:a||t,size:"small",style:{color:"rgba(255,255,255,.7)"}})]}),children:(0,m.jsx)(s.Z,{height:x,theme:"dark",code:t,lang:y||E,copyable:!1})})}},67996:function(e,n,t){t.d(n,{$i:function(){return j},Ae:function(){return C},Cz:function(){return P},Db:function(){return L},G:function(){return u},OI:function(){return O},TM:function(){return b},Tx:function(){return p},UM:function(){return f},Uf:function(){return x},Us:function(){return A},V6:function(){return M},WA:function(){return _},XI:function(){return c},Xl:function(){return g},YB:function(){return h},YK:function(){return v},ZT:function(){return s},_3:function(){return R},bI:function(){return m},bn:function(){return N},dY:function(){return S},fx:function(){return I},hg:function(){return d},i7:function(){return k},mW:function(){return w},pw:function(){return T},s0:function(){return y},tn:function(){return E}});t(48305);var r=t(82092),a=t.n(r),o=t(91315),i=t(13554),l=t(40562),c=[{title:l.sk.vllm,tips:"models.form.backend.vllm"},{title:l.sk.SGLang,tips:"models.form.backend.sglang"},{title:l.sk.ascendMindie,tips:"models.form.backend.mindie"},{title:l.sk.voxBox,tips:"models.form.backend.voxbox"}],u=[{title:{text:"models.localpath.gguf.tips.title",locale:!0},tips:"models.localpath.gguf.tips"},{title:{text:"models.localpath.shared.tips.title",locale:!0},tips:"models.localpath.chunks.tips"},{title:{text:"models.localpat.safe.tips.title",locale:!0},tips:"models.localpath.safe.tips"}],s=(a()(a()(a()(a()(a()({},l.sk.llamaBox,"llama-box"),l.sk.vllm,"vLLM"),l.sk.voxBox,"vox-box"),l.sk.ascendMindie,"Ascend MindIE"),l.sk.custom,"Custom"),a()(a()(a()(a()({},l.sk.llamaBox,{holder:"models.form.backend_parameters.llamabox.placeholder",tooltip:"models.form.backend_parameters.vllm.tips"}),l.sk.vllm,{holder:"models.form.backend_parameters.vllm.placeholder",tooltip:"models.form.backend_parameters.vllm.tips"}),l.sk.SGLang,{holder:"models.form.backend_parameters.sglang.placeholder",tooltip:""}),l.sk.voxBox,null)),d={textToSpeech:"text-to-speech",speechToText:"speech-to-text",textToText:"text-to-text",textToImage:"text-to-image",audio:"audio",image:"image"},p=a()(a()(a()(a()(a()({},d.textToSpeech,"text-to-speech"),d.speechToText,"auto-speech-recognition"),d.textToText,"TextToText"),d.textToImage,"text-to-image"),"audio",["text-to-speech","auto-speech-recognition"]),f=a()(a()(a()(a()(a()({},d.textToSpeech,"text-to-speech"),d.speechToText,"automatic-speech-recognition"),d.textToText,"text-2-text"),d.textToImage,"text-to-image"),"audio",["text-to-speech","automatic-speech-recognition"]),m={huggingface:"Hugging Face",huggingface_value:"huggingface",ollama_library:"Ollama Library",ollama_library_value:"ollama_library",modelScope:"ModelScope",modelscope_value:"model_scope",model_scope:"ModelScope",local_path:"Local Path",local_path_value:"local_path"},g=a()(a()(a()(a()({},m.huggingface_value,m.huggingface),m.ollama_library_value,m.ollama_library),m.modelscope_value,m.modelScope),m.local_path_value,m.local_path),h=[{label:"Hugging Face",value:m.huggingface_value,key:"huggingface"},{label:"ModelScope",value:m.modelscope_value,key:"model_scope"},{label:"models.form.localPath",locale:!0,value:m.local_path_value,key:"local_path"}],v={Initializing:"initializing",Starting:"starting",Pending:"pending",Running:"running",Scheduled:"scheduled",Error:"error",Downloading:"downloading",Unknown:"unknown",Analyzing:"analyzing",Unreachable:"unreachable"},b=[v.Downloading,v.Initializing,v.Starting],x=a()(a()(a()(a()(a()(a()(a()(a()(a()(a()({},v.Initializing,"Initializing"),v.Pending,"Pending"),v.Running,"Running"),v.Scheduled,"Scheduled"),v.Error,"Error"),v.Downloading,"Downloading"),v.Unknown,"Unknown"),v.Analyzing,"Analyzing"),v.Starting,"Starting"),v.Unreachable,"Unreachable"),k=a()(a()(a()(a()(a()(a()(a()(a()(a()(a()({},v.Running,o.iE.success),v.Pending,o.iE.transitioning),v.Initializing,o.iE.transitioning),v.Scheduled,o.iE.transitioning),v.Error,o.iE.error),v.Downloading,o.iE.transitioning),v.Unknown,o.iE.inactive),v.Analyzing,o.iE.transitioning),v.Starting,o.iE.transitioning),v.Unreachable,o.iE.error),_={Inactive:"stopped",Degrade:"not_ready",Active:"ready"},y=a()(a()(a()({},_.Inactive,o.iE.inactive),_.Degrade,o.iE.error),_.Active,o.iE.success),T=a()(a()(a()({},_.Inactive,"models.mymodels.status.inactive"),_.Degrade,"models.mymodels.status.degrade"),_.Active,"models.mymodels.status.active"),S={Auto:"auto",Manual:"manual",SpecificGPUType:"specific_gpu_type"},w=[{label:"models.form.scheduletype.auto",locale:!0,value:S.Auto},{label:"models.form.scheduletype.manual",value:S.Manual,locale:!0}],E=(i.Z,i.Z,i.Z,{trendingScore:"trendingScore",likes:"likes",downloads:"downloads",lastModified:"lastModified"}),C=a()(a()(a()(a()({},E.trendingScore,"Default"),E.likes,"StarsCount"),E.downloads,"DownloadsCount"),E.lastModified,"GmtModified"),M=[{label:"Spread",value:"spread"},{label:"Binpack",value:"binpack"}],A={image:"image",text_to_speech:"text_to_speech",speech_to_text:"speech_to_text",embedding:"embedding",reranker:"reranker",llm:"llm"},O=[{label:"LLM",value:A.llm},{label:"Embedding",value:A.embedding},{label:"Reranker",value:A.reranker},{label:"Image",value:A.image},{label:"Text-to-Speech",value:A.text_to_speech},{label:"Speech-to-Text",value:A.speech_to_text}],R=[{label:"common.options.auto",value:null,locale:!0}].concat(O),P=["model_scope_model_id","huggingface_repo_id","huggingface_filename","model_scope_file_path","name","description","env","source","cluster_id","quantization","size","restart_on_error","worker_selector","backend_parameters","local_path","backend_version","ollama_library_model_name","scheduleType","placement_strategy","backend","gpu_selector.gpu_ids","run_command","image_name","extended_kv_cache.enabled","extended_kv_cache.ram_size","speculative_config.enabled","speculative_config.draft_model"],N=["categories","replicas","description"],I={replicas:1,description:"",categories:null,env:{},scheduleType:S.Auto,placement_strategy:"spread",gpu_ids:null,gpu_selector:{},worker_selector:{},backend_parameters:[],backend_version:null},L=function(e){return e===l.sk.llamaBox?{backend:"llama-box",releases:"https://github.com/gpustack/llama-box/releases",link:"https://github.com/gpustack/llama-box?tab=readme-ov-file#usage",version:"v0.0.140"}:e===l.sk.vllm?{backend:"vLLM",releases:"https://github.com/vllm-project/vllm/releases",link:"https://docs.vllm.ai/en/stable/cli/serve.html",version:"v0.8.5"}:e===l.sk.ascendMindie?{backend:"Ascend MindIE",releases:"",link:"http://docs.gpustack.ai/latest/user-guide/inference-backends/#parameters-reference_2",version:"1.0.0"}:e===l.sk.SGLang?{backend:"SGLang",releases:"",link:"https://docs.sglang.ai/advanced_features/server_arguments.html",version:"v0.5.4"}:{backend:"vox-box",releases:"https://github.com/gpustack/vox-box/releases",link:"",version:"v0.0.13"}},j=function(e){return e.DEPLOYMENT="deployment",e.CATALOG="catalog",e}({})},13507:function(e,n,t){t.d(n,{AA:function(){return k},Bi:function(){return T},Mo:function(){return l.Mo},OE:function(){return y},Or:function(){return v},Qe:function(){return h},U$:function(){return d},Y:function(){return g},d8:function(){return f},d9:function(){return p},jQ:function(){return S},kW:function(){return b},nb:function(){return x},qt:function(){return s},wE:function(){return w},xO:function(){return _}});var r=t(90228),a=t.n(r),o=t(87999),i=t.n(o),l=t(93203),c=t(28367),u=t(53231),s="/".concat(l.Mo,"/chat/completions"),d="/".concat(l.Mo,"/images/generations"),p="/".concat(l.Mo,"/images/edits"),f="/".concat(l.Mo,"/embeddings"),m="/".concat(l.Mo,"/models"),g="/".concat(l.Mo,"/rerank"),h="/".concat(l.Mo,"/audio/speech"),v="/".concat(l.Mo,"/audio/transcriptions"),b="/model/proxy";var x=function(){var e=i()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(m),{method:"GET",params:n}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=i()(a()().mark((function e(n,t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(g),{method:"POST",data:n,cancelToken:null==t?void 0:t.cancelToken}));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),_=function(){var e=i()(a()().mark((function e(n,t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(f),{method:"POST",data:n,cancelToken:null==t?void 0:t.cancelToken}));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),y=function(){var e=i()(a()().mark((function e(n){var t;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p,{method:"POST",body:(0,c.ki)(n.data),signal:n.signal});case 2:if((t=e.sent).ok){e.next=7;break}return e.next=6,(0,c.Po)(t);case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",t.json());case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),T=function(){var e=i()(a()().mark((function e(n){var t;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(d,{method:"POST",body:JSON.stringify(n.data),signal:n.signal,headers:{"Content-Type":"application/json"}});case 2:if((t=e.sent).ok){e.next=7;break}return e.next=6,(0,c.Po)(t);case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",t.json());case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),S=function(){var e=i()(a()().mark((function e(n,t){var r,o,i,l;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h,{method:"POST",body:JSON.stringify(n.data),headers:{"Content-Type":"application/json"},signal:n.signal});case 2:if((o=e.sent).ok){e.next=7;break}return e.next=6,o.json();case 6:return e.abrupt("return",e.sent);case 7:return e.next=9,o.blob();case 9:if(-1!==(null==(i=e.sent)||null===(r=i.type)||void 0===r?void 0:r.indexOf("audio"))){e.next=12;break}return e.abrupt("return",{url:"",type:""});case 12:return l=i.size>0?URL.createObjectURL(i):"",e.abrupt("return",{url:l,type:i.type});case 14:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),w=function(){var e=i()(a()().mark((function e(n,t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)(v,{method:"POST",data:n.data,cancelToken:null==t?void 0:t.cancelToken,headers:{"Content-Type":"multipart/form-data"}}));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},65548:function(e,n,t){t.d(n,{G4:function(){return d},GT:function(){return p},Yy:function(){return s}});var r=t(26068),a=t.n(r),o=t(31759),i=t.n(o),l=t(32699),c=t.n(l);function u(e){var n=JSON.stringify(e,null,2).replace(/'/g,"'\\''");return"".concat(n)}var s=function(e,n){return n?c().keys(e).reduce((function(n,t){var r=e[t],a="object"===i()(r)?u(r):"".concat(function(e){return JSON.stringify(e,null,2).replace(/'/g,"'\\''")}(r));return n+"-F ".concat(t,'="').concat(a,'" \\\n')}),""):"-d '".concat(u(e),"'")},d=function(e){return c().keys(e).reduce((function(n,t){if(null===e[t]||void 0===e[t])return n;var r=i()(e[t]),a="object"===r?JSON.stringify(e[t],null,2):"string"===r?'"'.concat(e[t],'"'):e[t];return n+"  ".concat(t,"=").concat(a,",\n")}),"")},p=function(e){return JSON.stringify(a()({},e),null,4)}},28367:function(e,n,t){t.d(n,{LN:function(){return w},Po:function(){return y},U3:function(){return T},ki:function(){return S}});t(335);var r=t(15558),a=t.n(r),o=t(25298),i=t.n(o),l=t(17069),c=t.n(l),u=t(82092),s=t.n(u),d=t(31759),p=t.n(d),f=t(26068),m=t.n(f),g=t(90228),h=t.n(g),v=t(87999),b=t.n(v),x=t(32699),k=t(83861),_=function(e){var n=[];if(!e)return{results:n,remaining:""};for(var t=e.split(/\n\n/),r="",a=0;a<t.length;a++){var o=t[a].trim();if(o)if(o.startsWith("data:")||o.startsWith("error:")){var i=o.slice(5).trim();try{var l=JSON.parse(i);n.push(l)}catch(e){r+=o}}else r+=o}return{results:n,remaining:r}},y=function(){var e=b()(h()().mark((function e(n){var t;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.json();case 3:return t=e.sent,e.abrupt("return",{error:!0,data:t});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{error:!0,message:n.statusText});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),T=function(){var e=b()(h()().mark((function e(n){var t,r,a,o,i,l;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.method||"POST",a=n.url,n.params&&(a="".concat(a,"?").concat(k.Z.stringify(n.params))),e.next=5,fetch(a,{method:r,body:"POST"===r?JSON.stringify(n.data):null,signal:n.signal,headers:m()({"Content-Type":"application/json"},n.headers)});case 5:if((o=e.sent).ok){e.next=10;break}return e.next=9,y(o);case 9:return e.abrupt("return",e.sent);case 10:return i=null==o||null===(t=o.body)||void 0===t?void 0:t.getReader(),l=new TextDecoder("utf-8",{fatal:!0}),e.abrupt("return",{reader:i,decoder:l});case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),S=function(e){var n=new FormData,t=function(e,t){t instanceof File?n.append(e,t):"object"===p()(t)&&null!==t?n.append(e,JSON.stringify(t)):null!=t&&n.append(e,t)};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r]);return n},w=function(){var e=b()(h()().mark((function e(n,t,r){var o,l,u,d,p,f,m,g,v,b,k,y,T,S,w,E=arguments;return h()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=E.length>3&&void 0!==E[3]?E[3]:200,l=new(function(){function e(){i()(this,e),s()(this,"buffer",[])}return c()(e,[{key:"add",value:function(e){this.buffer.push(e)}},{key:"flush",value:function(){if(this.buffer.length>0){var e=a()(this.buffer);this.buffer=[],e.forEach((function(e){return r(e)}))}}},{key:"getBuffer",value:function(){return this.buffer}}]),e}()),u=(0,x.throttle)((function(){l.flush()}),o),d=!0,p="";case 6:if(!d){e.next=21;break}return e.next=9,n.read();case 9:f=e.sent,m=f.done,g=f.value;try{(p+=t.decode(g,{stream:!0})).startsWith("error:")?(v=p.slice(7).trim(),b=JSON.parse(v),l.add({error:b}),p=""):(k=_(p),y=k.results,T=k.remaining,y.forEach((function(e){l.add(e)})),p=T),u()}catch(e){l.add({error:e})}if(!m){e.next=19;break}return(p+=t.decode())&&(S=_(p),w=S.results,S.remaining,w.forEach((function(e){return l.add(e)}))),l.flush(),d=!1,e.abrupt("break",21);case 19:e.next=6;break;case 21:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}()}}]);