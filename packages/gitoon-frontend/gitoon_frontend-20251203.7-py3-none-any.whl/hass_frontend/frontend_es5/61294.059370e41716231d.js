"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["61294"],{5127:function(e,t,n){n.a(e,async function(e,t){try{var a,i,r,o,s,l,c,u=n(72153),d=n(44734),_=n(43080),h=n(69683),v=n(6454),g=n(25460),p=(n(28706),n(62062),n(26910),n(18111),n(61701),n(2892),n(26099),n(40445)),f=n(96196),m=n(77845),y=n(6415),x=n(20058),b=n(67258),A=n(12587),k=n(36240),M=e([x]);x=(M.then?(await M)():M)[0];var S=function(e,t,n){return 180*(0,k.NN)((0,k.S8)(e,t,n),t,n)/100},w=function(e){function t(){var e;(0,d.A)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=(0,h.A)(this,t,[].concat(a))).min=0,e.max=100,e.value=0,e.needle=!1,e.label="",e._angle=0,e._updated=!1,e._segment_label="",e}return(0,v.A)(t,e),(0,_.A)(t,[{key:"firstUpdated",value:function(e){var n=this;(0,g.A)(t,"firstUpdated",this,3)([e]),(0,A.m)(function(){n._updated=!0,n._angle=S(n.value,n.min,n.max),n._segment_label=n._getSegmentLabel(),n._rescaleSvg()})}},{key:"updated",value:function(e){(0,g.A)(t,"updated",this,3)([e]),this._updated&&(e.has("value")||e.has("valueText")||e.has("label")||e.has("_segment_label"))&&(this._angle=S(this.value,this.min,this.max),this._segment_label=this._getSegmentLabel(),this._rescaleSvg())}},{key:"render",value:function(){var e=this;return(0,f.JW)(a||(a=(0,u.A)([' <svg viewBox="-50 -50 100 50" class="gauge"> '," "," ",'  </svg> <svg class="text"> <text class="value-text"> ',""," </text> </svg>"])),this.needle&&this.levels?"":(0,f.JW)(i||(i=(0,u.A)(['<path class="dial" d="M -40 0 A 40 40 0 0 1 40 0"></path>']))),this.levels?this.levels.sort(function(e,t){return e.level-t.level}).map(function(t,n){var a;if(0===n&&t.level!==e.min){var i=S(e.min,e.min,e.max);a=(0,f.JW)(r||(r=(0,u.A)(['<path stroke="var(--info-color)" class="level" d="M\n                          ',"\n                          ",'\n                         A 40 40 0 0 1 40 0\n                        "></path>'])),0-40*Math.cos(i*Math.PI/180),0-40*Math.sin(i*Math.PI/180))}var s=S(t.level,e.min,e.max);return(0,f.JW)(o||(o=(0,u.A)(["",'<path stroke="','" class="level" d="M\n                        ',"\n                        ",'\n                       A 40 40 0 0 1 40 0\n                      "></path>'])),a,t.stroke,0-40*Math.cos(s*Math.PI/180),0-40*Math.sin(s*Math.PI/180))}):"",this.needle?(0,f.JW)(s||(s=(0,u.A)(['<path class="needle" d="M -25 -2.5 L -47.5 0 L -25 2.5 z" style="','"> </path>'])),(0,y.W)({transform:"rotate(".concat(this._angle,"deg)")})):(0,f.JW)(l||(l=(0,u.A)(['<path class="value" d="M -40 0 A 40 40 0 1 0 40 0" style="','"></path>'])),(0,y.W)({transform:"rotate(".concat(this._angle,"deg)")})),this._segment_label?this._segment_label:this.valueText||(0,x.ZV)(this.value,this.locale,this.formatOptions),this._segment_label?"":"%"===this.label?(0,b.d)(this.locale)+"%":" ".concat(this.label))}},{key:"_rescaleSvg",value:function(){var e=this.shadowRoot.querySelector(".text"),t=e.querySelector("text").getBBox();e.setAttribute("viewBox","".concat(t.x," ").concat(t.y," ").concat(t.width," ").concat(t.height))}},{key:"_getSegmentLabel",value:function(){if(this.levels){this.levels.sort(function(e,t){return e.level-t.level});for(var e=this.levels.length-1;e>=0;e--)if(this.value>=this.levels[e].level)return this.levels[e].label}return""}}])}(f.WF);w.styles=(0,f.AH)(c||(c=(0,u.A)([":host{position:relative}.dial{fill:none;stroke:var(--primary-background-color);stroke-width:15}.value{fill:none;stroke-width:15;stroke:var(--gauge-color);transition:all 1s ease 0s}.needle{fill:var(--primary-text-color);transition:all 1s ease 0s}.level{fill:none;stroke-width:15}.gauge{display:block}.text{position:absolute;max-height:40%;max-width:55%;left:50%;bottom:-6%;transform:translate(-50%,0%)}.value-text{font-size:50px;fill:var(--primary-text-color);text-anchor:middle;direction:ltr}"]))),(0,p.__decorate)([(0,m.MZ)({type:Number})],w.prototype,"min",void 0),(0,p.__decorate)([(0,m.MZ)({type:Number})],w.prototype,"max",void 0),(0,p.__decorate)([(0,m.MZ)({type:Number})],w.prototype,"value",void 0),(0,p.__decorate)([(0,m.MZ)({attribute:!1})],w.prototype,"formatOptions",void 0),(0,p.__decorate)([(0,m.MZ)({attribute:!1,type:String})],w.prototype,"valueText",void 0),(0,p.__decorate)([(0,m.MZ)({attribute:!1})],w.prototype,"locale",void 0),(0,p.__decorate)([(0,m.MZ)({type:Boolean})],w.prototype,"needle",void 0),(0,p.__decorate)([(0,m.MZ)({type:Array})],w.prototype,"levels",void 0),(0,p.__decorate)([(0,m.MZ)()],w.prototype,"label",void 0),(0,p.__decorate)([(0,m.wk)()],w.prototype,"_angle",void 0),(0,p.__decorate)([(0,m.wk)()],w.prototype,"_updated",void 0),(0,p.__decorate)([(0,m.wk)()],w.prototype,"_segment_label",void 0),w=(0,p.__decorate)([(0,m.EM)("ha-gauge")],w),t()}catch(W){t(W)}})},23528:function(e,t,n){n.a(e,async function(e,a){try{n.d(t,{$3:function(){return f},$O:function(){return S},$j:function(){return m},ED:function(){return s},JE:function(){return w},OQ:function(){return W},PU:function(){return N},Ph:function(){return g},Uf:function(){return M},W1:function(){return p},Wr:function(){return _},Z:function(){return u},gF:function(){return y},iY:function(){return x},jU:function(){return l},nN:function(){return k},p3:function(){return d},pJ:function(){return v},r_:function(){return c},sz:function(){return h}});n(74423),n(18111),n(13579),n(62953);var i=n(28978),r=n(380),o=e([r]);r=(o.then?(await o)():o)[0];var s=function(e){return e[e.NONE=0]="NONE",e[e.ARITHMETIC=1]="ARITHMETIC",e[e.CIRCULAR=2]="CIRCULAR",e}({});const l=["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"],c=["L","gal","ft³","m³","CCF","MCF"],u=e=>e.sendMessagePromise({type:"recorder/info"}),d=(e,t)=>e.callWS({type:"recorder/list_statistic_ids",statistic_type:t}),_=(e,t)=>e.callWS({type:"recorder/get_statistics_metadata",statistic_ids:t}),h=(e,t,n,a,i="hour",r,o)=>e.callWS({type:"recorder/statistics_during_period",start_time:t.toISOString(),end_time:null==n?void 0:n.toISOString(),statistic_ids:a,period:i,units:r,types:o}),v=(e,t,n,a)=>e.callWS({type:"recorder/statistic_during_period",statistic_id:t,units:a,fixed_period:n.fixed_period?{start_time:n.fixed_period.start instanceof Date?n.fixed_period.start.toISOString():n.fixed_period.start,end_time:n.fixed_period.end instanceof Date?n.fixed_period.end.toISOString():n.fixed_period.end}:void 0,calendar:n.calendar?{..."week"===n.calendar.period?{first_weekday:(0,r.D)(e.locale).substring(0,3)}:{},...n.calendar}:void 0,rolling_window:n.rolling_window}),g=e=>e.callWS({type:"recorder/validate_statistics"}),p=(e,t,n,a)=>e.callWS({type:"recorder/update_statistics_metadata",statistic_id:t,unit_of_measurement:n,unit_class:a}),f=(e,t)=>e.callWS({type:"recorder/clear_statistics",statistic_ids:t}),m=e=>{let t=null;if(!e)return null;for(const n of e)null!==n.change&&void 0!==n.change&&(null===t?t=n.change:t+=n.change);return t},y=(e,t)=>{let n=null;for(const a of t){if(!(a in e))continue;const t=m(e[a]);null!==t&&(null===n?n=t:n+=t)}return n},x=(e,t)=>e.some(e=>void 0!==e[t]&&null!==e[t]),b=["mean","min","max"],A=["sum","state","change"],k=(e,t)=>!(!b.includes(t)||0===e.mean_type)||!(!A.includes(t)||!e.has_sum),M=(e,t,n,a,i)=>{const r=new Date(n).toISOString();return e.callWS({type:"recorder/adjust_sum_statistics",statistic_id:t,start_time:r,adjustment:a,adjustment_unit_of_measurement:i})},S=(e,t,n)=>{const a=e.states[t];return a?(0,i.u)(a):(null==n?void 0:n.name)||t},w=(e,t,n)=>{let a;var i;t&&(a=null===(i=e.states[t])||void 0===i?void 0:i.attributes.unit_of_measurement);return void 0===a?null==n?void 0:n.statistics_unit_of_measurement:a},W=e=>e.includes(":"),N=e=>e.callWS({type:"recorder/update_statistics_issues"});a()}catch(l){a(l)}})},80449:function(e,t,n){n.a(e,async function(e,a){try{n.r(t);var i,r,o,s,l=n(72153),c=n(44734),u=n(43080),d=n(69683),_=n(6454),h=(n(28706),n(40445)),v=n(96196),g=n(77845),p=n(20058),f=(n(76776),n(5127)),m=(n(67094),n(34127)),y=n(38114),x=n(54706),b=n(784),A=e([f,m,y,p]);[f,m,y,p]=A.then?(await A)():A;var k=[{level:-1,stroke:"var(--energy-grid-consumption-color)"},{level:0,stroke:"var(--energy-grid-return-color)"}],M=function(e){function t(){var e;(0,c.A)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=(0,d.A)(this,t,[].concat(a))).hassSubscribeRequiredHostProps=["_config"],e}return(0,_.A)(t,e),(0,u.A)(t,[{key:"hassSubscribe",value:function(){var e,t=this;return[(0,y.tb)(this.hass,{key:null===(e=this._config)||void 0===e?void 0:e.collection_key}).subscribe(function(e){t._data=e})]}},{key:"getCardSize",value:function(){return 4}},{key:"setConfig",value:function(e){this._config=e}},{key:"shouldUpdate",value:function(e){return(0,b.xP)(this,e)||e.size>1||!e.has("hass")}},{key:"render",value:function(){var e,t;if(!this._config||!this.hass)return v.s6;if(!this._data)return(0,v.qy)(i||(i=(0,l.A)(["",""])),this.hass.localize("ui.panel.lovelace.cards.energy.loading"));var n,a=(0,y.gv)(this._data),s=a.summedData;a.compareSummedData;if(!("from_grid"in s.total))return v.s6;var c=null!==(e=s.total.from_grid)&&void 0!==e?e:0,u=null!==(t=s.total.to_grid)&&void 0!==t?t:0;return null!==c&&null!==u&&(n=u>c?1-c/u:u<c?-1*(1-u/c):0),(0,v.qy)(r||(r=(0,l.A)([" <ha-card> "," </ha-card> "])),void 0!==n?(0,v.qy)(o||(o=(0,l.A)([' <ha-gauge min="-1" max="1" .value="','" .valueText="','" .locale="','" .levels="','" label="kWh" needle></ha-gauge> <ha-svg-icon id="info" .path="','"></ha-svg-icon> <ha-tooltip for="info" placement="left"> '," <br><br> ",' </ha-tooltip> <div class="name"> '," </div> "])),n,(0,p.ZV)(Math.abs(u-c),this.hass.locale,{maximumFractionDigits:2}),this.hass.locale,k,"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.energy_dependency"),this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.color_explain"),u>=c?this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.net_returned_grid"):this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.net_consumed_grid")):this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.grid_neutrality_not_calculated"))}}])}((0,x.E)(v.WF));M.styles=(0,v.AH)(s||(s=(0,l.A)(["ha-card{height:100%;overflow:hidden;padding:16px;display:flex;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}ha-gauge{width:100%;max-width:250px;direction:ltr}.name{text-align:center;line-height:initial;color:var(--primary-text-color);width:100%;font-size:var(--ha-font-size-m);margin-top:8px}ha-svg-icon{position:absolute;right:4px;inset-inline-end:4px;inset-inline-start:initial;top:4px;color:var(--secondary-text-color)}ha-tooltip::part(base__popup){margin-top:4px}"]))),(0,h.__decorate)([(0,g.MZ)({attribute:!1})],M.prototype,"hass",void 0),(0,h.__decorate)([(0,g.wk)()],M.prototype,"_config",void 0),(0,h.__decorate)([(0,g.wk)()],M.prototype,"_data",void 0),M=(0,h.__decorate)([(0,g.EM)("hui-energy-grid-neutrality-gauge-card")],M),a()}catch(S){a(S)}})},36240:function(e,t,n){n.d(t,{NN:function(){return i},S8:function(){return a},gN:function(){return r}});var a=function(e,t,n){return isNaN(e)||isNaN(t)||isNaN(n)?0:e>n?n:e<t?t:e},i=function(e,t,n){return 100*(e-t)/(n-t)},r=function(e){return Math.round(10*e)/10}},56434:function(e,t,n){n.d(t,{e:function(){return i}});var a=n(81977);function i(e,t,n){return(0,a.P)(e,12*t,n)}}}]);
//# sourceMappingURL=61294.059370e41716231d.js.map