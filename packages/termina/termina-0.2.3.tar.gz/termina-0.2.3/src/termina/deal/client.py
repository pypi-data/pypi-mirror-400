# This file was auto-generated by Fern from our API Definition.

import typing

from ..core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ..core.request_options import RequestOptions
from ..types.deal_extra_metadata_response import DealExtraMetadataResponse
from ..types.deal_metadata_tag import DealMetadataTag
from ..types.deal_search_filter import DealSearchFilter
from ..types.deal_status import DealStatus
from ..types.deal_user_access_response import DealUserAccessResponse
from ..types.deal_with_files_response import DealWithFilesResponse
from ..types.default_role import DefaultRole
from ..types.list_deals_response import ListDealsResponse
from ..types.paginated_response_user_member_response import PaginatedResponseUserMemberResponse
from ..types.priority import Priority
from ..types.sort_criterion import SortCriterion
from .raw_client import AsyncRawDealClient, RawDealClient
from .types.metadata import Metadata

# this is used as the default value for optional parameters
OMIT = typing.cast(typing.Any, ...)


class DealClient:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._raw_client = RawDealClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> RawDealClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        RawDealClient
        """
        return self._raw_client

    def advanced_search(
        self,
        *,
        filters: typing.Optional[DealSearchFilter] = OMIT,
        sort: typing.Optional[typing.Sequence[SortCriterion]] = OMIT,
        page: typing.Optional[int] = OMIT,
        page_size: typing.Optional[int] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> ListDealsResponse:
        """
        Parameters
        ----------
        filters : typing.Optional[DealSearchFilter]

        sort : typing.Optional[typing.Sequence[SortCriterion]]
            Optional list of sort criteria. Earlier items take precedence. Each item must specify 'sort_by' (SortField, BenchmarkMetricField, or DateField enum) and 'sort_order'. 'sort_by' values must be unique.

        page : typing.Optional[int]
            Page number

        page_size : typing.Optional[int]
            Number of items per page

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ListDealsResponse
            Successful Response

        Examples
        --------
        from termina import Termina

        client = Termina(
            token="YOUR_TOKEN",
        )
        client.deal.advanced_search()
        """
        _response = self._raw_client.advanced_search(
            filters=filters, sort=sort, page=page, page_size=page_size, request_options=request_options
        )
        return _response.data

    def batch_lookup_deals(
        self,
        *,
        deal_ids: typing.Sequence[int],
        sort_by: typing.Optional[str] = None,
        sort_order: typing.Optional[str] = None,
        page: typing.Optional[int] = None,
        page_size: typing.Optional[int] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> ListDealsResponse:
        """
        Batch lookup deals by IDs with pagination.

        Returns only deals the user has access to (via group membership OR direct deal access).
        Silently filters out deals without access (no errors for inaccessible deals).

        Super users can see all deals.

        Parameters
        ----------
        deal_ids : typing.Sequence[int]
            List of deal IDs to retrieve

        sort_by : typing.Optional[str]

        sort_order : typing.Optional[str]

        page : typing.Optional[int]

        page_size : typing.Optional[int]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ListDealsResponse
            Successful Response

        Examples
        --------
        from termina import Termina

        client = Termina(
            token="YOUR_TOKEN",
        )
        client.deal.batch_lookup_deals(
            sort_by="sort_by",
            sort_order="sort_order",
            page=1,
            page_size=1,
            deal_ids=[1, 2, 3],
        )
        """
        _response = self._raw_client.batch_lookup_deals(
            deal_ids=deal_ids,
            sort_by=sort_by,
            sort_order=sort_order,
            page=page,
            page_size=page_size,
            request_options=request_options,
        )
        return _response.data

    def search_users(
        self,
        group_id: int,
        deal_id: int,
        *,
        text: typing.Optional[str] = None,
        only_direct: typing.Optional[bool] = None,
        sort_by: typing.Optional[str] = None,
        sort_order: typing.Optional[str] = None,
        page: typing.Optional[int] = None,
        page_size: typing.Optional[int] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> PaginatedResponseUserMemberResponse:
        """
        Search users who have access to this deal.

        Requires READER role or above on the deal. By default, users with either group or direct deal access are returned.
        Set `only_direct` to true to limit results to users with direct deal access only.

        Args:
            text: Optional case-insensitive search across user name and email

        Parameters
        ----------
        group_id : int

        deal_id : int

        text : typing.Optional[str]

        only_direct : typing.Optional[bool]
            When true, returns only users with direct access to the deal (excludes group access)

        sort_by : typing.Optional[str]

        sort_order : typing.Optional[str]

        page : typing.Optional[int]

        page_size : typing.Optional[int]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        PaginatedResponseUserMemberResponse
            Successful Response

        Examples
        --------
        from termina import Termina

        client = Termina(
            token="YOUR_TOKEN",
        )
        client.deal.search_users(
            group_id=1,
            deal_id=1,
            text="text",
            only_direct=True,
            sort_by="sort_by",
            sort_order="sort_order",
            page=1,
            page_size=1,
        )
        """
        _response = self._raw_client.search_users(
            group_id,
            deal_id,
            text=text,
            only_direct=only_direct,
            sort_by=sort_by,
            sort_order=sort_order,
            page=page,
            page_size=page_size,
            request_options=request_options,
        )
        return _response.data

    def set_user_deal_role(
        self,
        group_id: int,
        deal_id: int,
        user_id: int,
        *,
        role_name: typing.Optional[DefaultRole] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> DealUserAccessResponse:
        """
        Set the user's direct access role for this deal.

        The user will always end up with exactly one direct role for the deal.
        Requires admin role to manage members.

        Parameters
        ----------
        group_id : int

        deal_id : int

        user_id : int

        role_name : typing.Optional[DefaultRole]
            The role to set for the user

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        DealUserAccessResponse
            Successful Response

        Examples
        --------
        from termina import Termina

        client = Termina(
            token="YOUR_TOKEN",
        )
        client.deal.set_user_deal_role(
            group_id=1,
            deal_id=1,
            user_id=1,
        )
        """
        _response = self._raw_client.set_user_deal_role(
            group_id, deal_id, user_id, role_name=role_name, request_options=request_options
        )
        return _response.data

    def remove_user_from_deal(
        self, group_id: int, deal_id: int, user_id: int, *, request_options: typing.Optional[RequestOptions] = None
    ) -> None:
        """
        Remove a user's direct access to this deal.
        Requires admin role to manage members.

        Parameters
        ----------
        group_id : int

        deal_id : int

        user_id : int

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        from termina import Termina

        client = Termina(
            token="YOUR_TOKEN",
        )
        client.deal.remove_user_from_deal(
            group_id=1,
            deal_id=1,
            user_id=1,
        )
        """
        _response = self._raw_client.remove_user_from_deal(group_id, deal_id, user_id, request_options=request_options)
        return _response.data

    def create(
        self,
        group_id: int,
        *,
        round_name: str,
        company_id: int,
        notes: typing.Optional[str] = OMIT,
        priority: typing.Optional[Priority] = OMIT,
        status: typing.Optional[DealStatus] = OMIT,
        round_amount: typing.Optional[int] = OMIT,
        round_target: typing.Optional[int] = OMIT,
        tags: typing.Optional[typing.Sequence[str]] = OMIT,
        company_summary: typing.Optional[str] = OMIT,
        deal_lead_id: typing.Optional[int] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> DealWithFilesResponse:
        """
        Create a new deal.

        Parameters
        ----------
        group_id : int

        round_name : str
            The name of the round

        company_id : int

        notes : typing.Optional[str]
            Notes about the deal

        priority : typing.Optional[Priority]
            The priority of the deal

        status : typing.Optional[DealStatus]
            The current status of the deal

        round_amount : typing.Optional[int]
            The dollar amount to be raised of the round

        round_target : typing.Optional[int]
            The target post-money dollar amount of the round

        tags : typing.Optional[typing.Sequence[str]]
            The tags associated with the deal

        company_summary : typing.Optional[str]
            The summary of the company

        deal_lead_id : typing.Optional[int]
            The id of the user who is the deal lead

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        DealWithFilesResponse
            Successful Response

        Examples
        --------
        from termina import Termina

        client = Termina(
            token="YOUR_TOKEN",
        )
        client.deal.create(
            group_id=1,
            round_name="round_name",
            company_id=1,
        )
        """
        _response = self._raw_client.create(
            group_id,
            round_name=round_name,
            company_id=company_id,
            notes=notes,
            priority=priority,
            status=status,
            round_amount=round_amount,
            round_target=round_target,
            tags=tags,
            company_summary=company_summary,
            deal_lead_id=deal_lead_id,
            request_options=request_options,
        )
        return _response.data

    def list(
        self,
        group_id: int,
        *,
        sort_by: typing.Optional[str] = None,
        sort_order: typing.Optional[str] = None,
        page: typing.Optional[int] = None,
        page_size: typing.Optional[int] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> ListDealsResponse:
        """
        Get all deals for a group.

        Parameters
        ----------
        group_id : int

        sort_by : typing.Optional[str]

        sort_order : typing.Optional[str]

        page : typing.Optional[int]

        page_size : typing.Optional[int]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ListDealsResponse
            Successful Response

        Examples
        --------
        from termina import Termina

        client = Termina(
            token="YOUR_TOKEN",
        )
        client.deal.list(
            group_id=1,
            sort_by="sort_by",
            sort_order="sort_order",
            page=1,
            page_size=1,
        )
        """
        _response = self._raw_client.list(
            group_id,
            sort_by=sort_by,
            sort_order=sort_order,
            page=page,
            page_size=page_size,
            request_options=request_options,
        )
        return _response.data

    def search(
        self,
        group_id: int,
        *,
        round_name: typing.Optional[str] = None,
        notes: typing.Optional[str] = None,
        tags: typing.Optional[str] = None,
        company_name: typing.Optional[str] = None,
        company_domain: typing.Optional[str] = None,
        categories: typing.Optional[str] = None,
        deal_lead: typing.Optional[str] = None,
        ignore_archived: typing.Optional[bool] = None,
        sort_by: typing.Optional[str] = None,
        sort_order: typing.Optional[str] = None,
        page: typing.Optional[int] = None,
        page_size: typing.Optional[int] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> ListDealsResponse:
        """
        Search deals within a group.

        Parameters
        ----------
        group_id : int

        round_name : typing.Optional[str]

        notes : typing.Optional[str]

        tags : typing.Optional[str]

        company_name : typing.Optional[str]

        company_domain : typing.Optional[str]

        categories : typing.Optional[str]

        deal_lead : typing.Optional[str]

        ignore_archived : typing.Optional[bool]

        sort_by : typing.Optional[str]

        sort_order : typing.Optional[str]

        page : typing.Optional[int]

        page_size : typing.Optional[int]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ListDealsResponse
            Successful Response

        Examples
        --------
        from termina import Termina

        client = Termina(
            token="YOUR_TOKEN",
        )
        client.deal.search(
            group_id=1,
            round_name="round_name",
            notes="notes",
            tags="tags",
            company_name="company_name",
            company_domain="company_domain",
            categories="categories",
            deal_lead="deal_lead",
            ignore_archived=True,
            sort_by="sort_by",
            sort_order="sort_order",
            page=1,
            page_size=1,
        )
        """
        _response = self._raw_client.search(
            group_id,
            round_name=round_name,
            notes=notes,
            tags=tags,
            company_name=company_name,
            company_domain=company_domain,
            categories=categories,
            deal_lead=deal_lead,
            ignore_archived=ignore_archived,
            sort_by=sort_by,
            sort_order=sort_order,
            page=page,
            page_size=page_size,
            request_options=request_options,
        )
        return _response.data

    def search_advanced(
        self,
        group_id: int,
        *,
        filters: typing.Optional[DealSearchFilter] = OMIT,
        sort: typing.Optional[typing.Sequence[SortCriterion]] = OMIT,
        page: typing.Optional[int] = OMIT,
        page_size: typing.Optional[int] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> ListDealsResponse:
        """
        Search deals within a group using flexible filters.

        .. deprecated::
            This endpoint is deprecated and will be removed in favor of the /deal/advanced-search endpoint.

        Parameters
        ----------
        group_id : int

        filters : typing.Optional[DealSearchFilter]

        sort : typing.Optional[typing.Sequence[SortCriterion]]
            Optional list of sort criteria. Earlier items take precedence. Each item must specify 'sort_by' (SortField, BenchmarkMetricField, or DateField enum) and 'sort_order'. 'sort_by' values must be unique.

        page : typing.Optional[int]
            Page number

        page_size : typing.Optional[int]
            Number of items per page

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ListDealsResponse
            Successful Response

        Examples
        --------
        from termina import Termina

        client = Termina(
            token="YOUR_TOKEN",
        )
        client.deal.search_advanced(
            group_id=1,
        )
        """
        _response = self._raw_client.search_advanced(
            group_id, filters=filters, sort=sort, page=page, page_size=page_size, request_options=request_options
        )
        return _response.data

    def get(
        self, group_id: int, deal_id: int, *, request_options: typing.Optional[RequestOptions] = None
    ) -> DealWithFilesResponse:
        """
        Retrieve a deal by its ID.

        Parameters
        ----------
        group_id : int

        deal_id : int

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        DealWithFilesResponse
            Successful Response

        Examples
        --------
        from termina import Termina

        client = Termina(
            token="YOUR_TOKEN",
        )
        client.deal.get(
            group_id=1,
            deal_id=1,
        )
        """
        _response = self._raw_client.get(group_id, deal_id, request_options=request_options)
        return _response.data

    def update(
        self,
        group_id: int,
        deal_id: int,
        *,
        round_name: typing.Optional[str] = OMIT,
        notes: typing.Optional[str] = OMIT,
        priority: typing.Optional[Priority] = OMIT,
        status: typing.Optional[DealStatus] = OMIT,
        round_amount: typing.Optional[int] = OMIT,
        round_target: typing.Optional[int] = OMIT,
        tags: typing.Optional[typing.Sequence[str]] = OMIT,
        company_summary: typing.Optional[str] = OMIT,
        deal_lead_id: typing.Optional[int] = OMIT,
        company_id: typing.Optional[int] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> DealWithFilesResponse:
        """
        Update a deal.

        Parameters
        ----------
        group_id : int

        deal_id : int

        round_name : typing.Optional[str]

        notes : typing.Optional[str]
            Notes about the deal

        priority : typing.Optional[Priority]
            The priority of the deal

        status : typing.Optional[DealStatus]

        round_amount : typing.Optional[int]
            The dollar amount to be raised of the round

        round_target : typing.Optional[int]
            The target post-money dollar amount of the round

        tags : typing.Optional[typing.Sequence[str]]
            The tags associated with the deal

        company_summary : typing.Optional[str]
            The summary of the company

        deal_lead_id : typing.Optional[int]
            The id of the user who is the deal lead

        company_id : typing.Optional[int]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        DealWithFilesResponse
            Successful Response

        Examples
        --------
        from termina import Termina

        client = Termina(
            token="YOUR_TOKEN",
        )
        client.deal.update(
            group_id=1,
            deal_id=1,
        )
        """
        _response = self._raw_client.update(
            group_id,
            deal_id,
            round_name=round_name,
            notes=notes,
            priority=priority,
            status=status,
            round_amount=round_amount,
            round_target=round_target,
            tags=tags,
            company_summary=company_summary,
            deal_lead_id=deal_lead_id,
            company_id=company_id,
            request_options=request_options,
        )
        return _response.data

    def delete(
        self,
        group_id: int,
        deal_id: int,
        *,
        archive: typing.Optional[bool] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> None:
        """
        Delete a deal.

        Parameters
        ----------
        group_id : int

        deal_id : int

        archive : typing.Optional[bool]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        from termina import Termina

        client = Termina(
            token="YOUR_TOKEN",
        )
        client.deal.delete(
            group_id=1,
            deal_id=1,
            archive=True,
        )
        """
        _response = self._raw_client.delete(group_id, deal_id, archive=archive, request_options=request_options)
        return _response.data

    def extra_metadata(
        self, group_id: int, deal_id: int, *, request_options: typing.Optional[RequestOptions] = None
    ) -> DealExtraMetadataResponse:
        """
        Retrieve extra metadata for a deal, such as questions and meeting times.

        Parameters
        ----------
        group_id : int

        deal_id : int

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        DealExtraMetadataResponse
            Successful Response

        Examples
        --------
        from termina import Termina

        client = Termina(
            token="YOUR_TOKEN",
        )
        client.deal.extra_metadata(
            group_id=1,
            deal_id=1,
        )
        """
        _response = self._raw_client.extra_metadata(group_id, deal_id, request_options=request_options)
        return _response.data

    def set_metadata(
        self,
        group_id: int,
        deal_id: int,
        metadata_tag: DealMetadataTag,
        *,
        request: Metadata,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> DealExtraMetadataResponse:
        """
        Create or update questions for a deal. If questions already exist for this deal, they will be updated.
        If no questions exist, they will be created.


        Limitations:
        - The metadata payload cannot exceed 2048 characters.

        Parameters
        ----------
        group_id : int

        deal_id : int

        metadata_tag : DealMetadataTag

        request : Metadata

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        DealExtraMetadataResponse
            Successful Response

        Examples
        --------
        from termina import Termina

        client = Termina(
            token="YOUR_TOKEN",
        )
        client.deal.set_metadata(
            group_id=1,
            deal_id=1,
            metadata_tag="questions",
            request={"key": "value"},
        )
        """
        _response = self._raw_client.set_metadata(
            group_id, deal_id, metadata_tag, request=request, request_options=request_options
        )
        return _response.data

    def delete_metadata(
        self,
        group_id: int,
        deal_id: int,
        metadata_tag: DealMetadataTag,
        *,
        archive: typing.Optional[bool] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> None:
        """
        Delete questions for a deal.

        Parameters
        ----------
        group_id : int

        deal_id : int

        metadata_tag : DealMetadataTag

        archive : typing.Optional[bool]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        from termina import Termina

        client = Termina(
            token="YOUR_TOKEN",
        )
        client.deal.delete_metadata(
            group_id=1,
            deal_id=1,
            metadata_tag="questions",
            archive=True,
        )
        """
        _response = self._raw_client.delete_metadata(
            group_id, deal_id, metadata_tag, archive=archive, request_options=request_options
        )
        return _response.data

    def order(
        self, group_id: int, deal_id: int, *, request_options: typing.Optional[RequestOptions] = None
    ) -> typing.Optional[typing.Any]:
        """
        Submit an order for a deal scan to be performed.

        Parameters
        ----------
        group_id : int

        deal_id : int

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        typing.Optional[typing.Any]
            Successful Response

        Examples
        --------
        from termina import Termina

        client = Termina(
            token="YOUR_TOKEN",
        )
        client.deal.order(
            group_id=1,
            deal_id=1,
        )
        """
        _response = self._raw_client.order(group_id, deal_id, request_options=request_options)
        return _response.data

    def get_comparable_deals(
        self,
        group_id: int,
        deal_id: int,
        *,
        category: typing.Optional[typing.Union[str, typing.Sequence[str]]] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> typing.List[DealWithFilesResponse]:
        """
        Get deals comparable to the current deal.

        Categories are required for meaningful comparison. Only deals with overlapping categories
        will be returned. If the current deal has no categories, no comparable deals will be returned.

        Returns the top 5 most recent deals with overlapping categories, sorted by updated timestamp.

        Parameters
        ----------
        group_id : int

        deal_id : int

        category : typing.Optional[typing.Union[str, typing.Sequence[str]]]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        typing.List[DealWithFilesResponse]
            Successful Response

        Examples
        --------
        from termina import Termina

        client = Termina(
            token="YOUR_TOKEN",
        )
        client.deal.get_comparable_deals(
            group_id=1,
            deal_id=1,
        )
        """
        _response = self._raw_client.get_comparable_deals(
            group_id, deal_id, category=category, request_options=request_options
        )
        return _response.data


class AsyncDealClient:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._raw_client = AsyncRawDealClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> AsyncRawDealClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        AsyncRawDealClient
        """
        return self._raw_client

    async def advanced_search(
        self,
        *,
        filters: typing.Optional[DealSearchFilter] = OMIT,
        sort: typing.Optional[typing.Sequence[SortCriterion]] = OMIT,
        page: typing.Optional[int] = OMIT,
        page_size: typing.Optional[int] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> ListDealsResponse:
        """
        Parameters
        ----------
        filters : typing.Optional[DealSearchFilter]

        sort : typing.Optional[typing.Sequence[SortCriterion]]
            Optional list of sort criteria. Earlier items take precedence. Each item must specify 'sort_by' (SortField, BenchmarkMetricField, or DateField enum) and 'sort_order'. 'sort_by' values must be unique.

        page : typing.Optional[int]
            Page number

        page_size : typing.Optional[int]
            Number of items per page

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ListDealsResponse
            Successful Response

        Examples
        --------
        import asyncio

        from termina import AsyncTermina

        client = AsyncTermina(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.deal.advanced_search()


        asyncio.run(main())
        """
        _response = await self._raw_client.advanced_search(
            filters=filters, sort=sort, page=page, page_size=page_size, request_options=request_options
        )
        return _response.data

    async def batch_lookup_deals(
        self,
        *,
        deal_ids: typing.Sequence[int],
        sort_by: typing.Optional[str] = None,
        sort_order: typing.Optional[str] = None,
        page: typing.Optional[int] = None,
        page_size: typing.Optional[int] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> ListDealsResponse:
        """
        Batch lookup deals by IDs with pagination.

        Returns only deals the user has access to (via group membership OR direct deal access).
        Silently filters out deals without access (no errors for inaccessible deals).

        Super users can see all deals.

        Parameters
        ----------
        deal_ids : typing.Sequence[int]
            List of deal IDs to retrieve

        sort_by : typing.Optional[str]

        sort_order : typing.Optional[str]

        page : typing.Optional[int]

        page_size : typing.Optional[int]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ListDealsResponse
            Successful Response

        Examples
        --------
        import asyncio

        from termina import AsyncTermina

        client = AsyncTermina(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.deal.batch_lookup_deals(
                sort_by="sort_by",
                sort_order="sort_order",
                page=1,
                page_size=1,
                deal_ids=[1, 2, 3],
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.batch_lookup_deals(
            deal_ids=deal_ids,
            sort_by=sort_by,
            sort_order=sort_order,
            page=page,
            page_size=page_size,
            request_options=request_options,
        )
        return _response.data

    async def search_users(
        self,
        group_id: int,
        deal_id: int,
        *,
        text: typing.Optional[str] = None,
        only_direct: typing.Optional[bool] = None,
        sort_by: typing.Optional[str] = None,
        sort_order: typing.Optional[str] = None,
        page: typing.Optional[int] = None,
        page_size: typing.Optional[int] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> PaginatedResponseUserMemberResponse:
        """
        Search users who have access to this deal.

        Requires READER role or above on the deal. By default, users with either group or direct deal access are returned.
        Set `only_direct` to true to limit results to users with direct deal access only.

        Args:
            text: Optional case-insensitive search across user name and email

        Parameters
        ----------
        group_id : int

        deal_id : int

        text : typing.Optional[str]

        only_direct : typing.Optional[bool]
            When true, returns only users with direct access to the deal (excludes group access)

        sort_by : typing.Optional[str]

        sort_order : typing.Optional[str]

        page : typing.Optional[int]

        page_size : typing.Optional[int]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        PaginatedResponseUserMemberResponse
            Successful Response

        Examples
        --------
        import asyncio

        from termina import AsyncTermina

        client = AsyncTermina(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.deal.search_users(
                group_id=1,
                deal_id=1,
                text="text",
                only_direct=True,
                sort_by="sort_by",
                sort_order="sort_order",
                page=1,
                page_size=1,
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.search_users(
            group_id,
            deal_id,
            text=text,
            only_direct=only_direct,
            sort_by=sort_by,
            sort_order=sort_order,
            page=page,
            page_size=page_size,
            request_options=request_options,
        )
        return _response.data

    async def set_user_deal_role(
        self,
        group_id: int,
        deal_id: int,
        user_id: int,
        *,
        role_name: typing.Optional[DefaultRole] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> DealUserAccessResponse:
        """
        Set the user's direct access role for this deal.

        The user will always end up with exactly one direct role for the deal.
        Requires admin role to manage members.

        Parameters
        ----------
        group_id : int

        deal_id : int

        user_id : int

        role_name : typing.Optional[DefaultRole]
            The role to set for the user

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        DealUserAccessResponse
            Successful Response

        Examples
        --------
        import asyncio

        from termina import AsyncTermina

        client = AsyncTermina(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.deal.set_user_deal_role(
                group_id=1,
                deal_id=1,
                user_id=1,
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.set_user_deal_role(
            group_id, deal_id, user_id, role_name=role_name, request_options=request_options
        )
        return _response.data

    async def remove_user_from_deal(
        self, group_id: int, deal_id: int, user_id: int, *, request_options: typing.Optional[RequestOptions] = None
    ) -> None:
        """
        Remove a user's direct access to this deal.
        Requires admin role to manage members.

        Parameters
        ----------
        group_id : int

        deal_id : int

        user_id : int

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        import asyncio

        from termina import AsyncTermina

        client = AsyncTermina(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.deal.remove_user_from_deal(
                group_id=1,
                deal_id=1,
                user_id=1,
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.remove_user_from_deal(
            group_id, deal_id, user_id, request_options=request_options
        )
        return _response.data

    async def create(
        self,
        group_id: int,
        *,
        round_name: str,
        company_id: int,
        notes: typing.Optional[str] = OMIT,
        priority: typing.Optional[Priority] = OMIT,
        status: typing.Optional[DealStatus] = OMIT,
        round_amount: typing.Optional[int] = OMIT,
        round_target: typing.Optional[int] = OMIT,
        tags: typing.Optional[typing.Sequence[str]] = OMIT,
        company_summary: typing.Optional[str] = OMIT,
        deal_lead_id: typing.Optional[int] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> DealWithFilesResponse:
        """
        Create a new deal.

        Parameters
        ----------
        group_id : int

        round_name : str
            The name of the round

        company_id : int

        notes : typing.Optional[str]
            Notes about the deal

        priority : typing.Optional[Priority]
            The priority of the deal

        status : typing.Optional[DealStatus]
            The current status of the deal

        round_amount : typing.Optional[int]
            The dollar amount to be raised of the round

        round_target : typing.Optional[int]
            The target post-money dollar amount of the round

        tags : typing.Optional[typing.Sequence[str]]
            The tags associated with the deal

        company_summary : typing.Optional[str]
            The summary of the company

        deal_lead_id : typing.Optional[int]
            The id of the user who is the deal lead

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        DealWithFilesResponse
            Successful Response

        Examples
        --------
        import asyncio

        from termina import AsyncTermina

        client = AsyncTermina(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.deal.create(
                group_id=1,
                round_name="round_name",
                company_id=1,
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.create(
            group_id,
            round_name=round_name,
            company_id=company_id,
            notes=notes,
            priority=priority,
            status=status,
            round_amount=round_amount,
            round_target=round_target,
            tags=tags,
            company_summary=company_summary,
            deal_lead_id=deal_lead_id,
            request_options=request_options,
        )
        return _response.data

    async def list(
        self,
        group_id: int,
        *,
        sort_by: typing.Optional[str] = None,
        sort_order: typing.Optional[str] = None,
        page: typing.Optional[int] = None,
        page_size: typing.Optional[int] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> ListDealsResponse:
        """
        Get all deals for a group.

        Parameters
        ----------
        group_id : int

        sort_by : typing.Optional[str]

        sort_order : typing.Optional[str]

        page : typing.Optional[int]

        page_size : typing.Optional[int]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ListDealsResponse
            Successful Response

        Examples
        --------
        import asyncio

        from termina import AsyncTermina

        client = AsyncTermina(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.deal.list(
                group_id=1,
                sort_by="sort_by",
                sort_order="sort_order",
                page=1,
                page_size=1,
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.list(
            group_id,
            sort_by=sort_by,
            sort_order=sort_order,
            page=page,
            page_size=page_size,
            request_options=request_options,
        )
        return _response.data

    async def search(
        self,
        group_id: int,
        *,
        round_name: typing.Optional[str] = None,
        notes: typing.Optional[str] = None,
        tags: typing.Optional[str] = None,
        company_name: typing.Optional[str] = None,
        company_domain: typing.Optional[str] = None,
        categories: typing.Optional[str] = None,
        deal_lead: typing.Optional[str] = None,
        ignore_archived: typing.Optional[bool] = None,
        sort_by: typing.Optional[str] = None,
        sort_order: typing.Optional[str] = None,
        page: typing.Optional[int] = None,
        page_size: typing.Optional[int] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> ListDealsResponse:
        """
        Search deals within a group.

        Parameters
        ----------
        group_id : int

        round_name : typing.Optional[str]

        notes : typing.Optional[str]

        tags : typing.Optional[str]

        company_name : typing.Optional[str]

        company_domain : typing.Optional[str]

        categories : typing.Optional[str]

        deal_lead : typing.Optional[str]

        ignore_archived : typing.Optional[bool]

        sort_by : typing.Optional[str]

        sort_order : typing.Optional[str]

        page : typing.Optional[int]

        page_size : typing.Optional[int]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ListDealsResponse
            Successful Response

        Examples
        --------
        import asyncio

        from termina import AsyncTermina

        client = AsyncTermina(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.deal.search(
                group_id=1,
                round_name="round_name",
                notes="notes",
                tags="tags",
                company_name="company_name",
                company_domain="company_domain",
                categories="categories",
                deal_lead="deal_lead",
                ignore_archived=True,
                sort_by="sort_by",
                sort_order="sort_order",
                page=1,
                page_size=1,
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.search(
            group_id,
            round_name=round_name,
            notes=notes,
            tags=tags,
            company_name=company_name,
            company_domain=company_domain,
            categories=categories,
            deal_lead=deal_lead,
            ignore_archived=ignore_archived,
            sort_by=sort_by,
            sort_order=sort_order,
            page=page,
            page_size=page_size,
            request_options=request_options,
        )
        return _response.data

    async def search_advanced(
        self,
        group_id: int,
        *,
        filters: typing.Optional[DealSearchFilter] = OMIT,
        sort: typing.Optional[typing.Sequence[SortCriterion]] = OMIT,
        page: typing.Optional[int] = OMIT,
        page_size: typing.Optional[int] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> ListDealsResponse:
        """
        Search deals within a group using flexible filters.

        .. deprecated::
            This endpoint is deprecated and will be removed in favor of the /deal/advanced-search endpoint.

        Parameters
        ----------
        group_id : int

        filters : typing.Optional[DealSearchFilter]

        sort : typing.Optional[typing.Sequence[SortCriterion]]
            Optional list of sort criteria. Earlier items take precedence. Each item must specify 'sort_by' (SortField, BenchmarkMetricField, or DateField enum) and 'sort_order'. 'sort_by' values must be unique.

        page : typing.Optional[int]
            Page number

        page_size : typing.Optional[int]
            Number of items per page

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ListDealsResponse
            Successful Response

        Examples
        --------
        import asyncio

        from termina import AsyncTermina

        client = AsyncTermina(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.deal.search_advanced(
                group_id=1,
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.search_advanced(
            group_id, filters=filters, sort=sort, page=page, page_size=page_size, request_options=request_options
        )
        return _response.data

    async def get(
        self, group_id: int, deal_id: int, *, request_options: typing.Optional[RequestOptions] = None
    ) -> DealWithFilesResponse:
        """
        Retrieve a deal by its ID.

        Parameters
        ----------
        group_id : int

        deal_id : int

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        DealWithFilesResponse
            Successful Response

        Examples
        --------
        import asyncio

        from termina import AsyncTermina

        client = AsyncTermina(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.deal.get(
                group_id=1,
                deal_id=1,
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.get(group_id, deal_id, request_options=request_options)
        return _response.data

    async def update(
        self,
        group_id: int,
        deal_id: int,
        *,
        round_name: typing.Optional[str] = OMIT,
        notes: typing.Optional[str] = OMIT,
        priority: typing.Optional[Priority] = OMIT,
        status: typing.Optional[DealStatus] = OMIT,
        round_amount: typing.Optional[int] = OMIT,
        round_target: typing.Optional[int] = OMIT,
        tags: typing.Optional[typing.Sequence[str]] = OMIT,
        company_summary: typing.Optional[str] = OMIT,
        deal_lead_id: typing.Optional[int] = OMIT,
        company_id: typing.Optional[int] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> DealWithFilesResponse:
        """
        Update a deal.

        Parameters
        ----------
        group_id : int

        deal_id : int

        round_name : typing.Optional[str]

        notes : typing.Optional[str]
            Notes about the deal

        priority : typing.Optional[Priority]
            The priority of the deal

        status : typing.Optional[DealStatus]

        round_amount : typing.Optional[int]
            The dollar amount to be raised of the round

        round_target : typing.Optional[int]
            The target post-money dollar amount of the round

        tags : typing.Optional[typing.Sequence[str]]
            The tags associated with the deal

        company_summary : typing.Optional[str]
            The summary of the company

        deal_lead_id : typing.Optional[int]
            The id of the user who is the deal lead

        company_id : typing.Optional[int]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        DealWithFilesResponse
            Successful Response

        Examples
        --------
        import asyncio

        from termina import AsyncTermina

        client = AsyncTermina(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.deal.update(
                group_id=1,
                deal_id=1,
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.update(
            group_id,
            deal_id,
            round_name=round_name,
            notes=notes,
            priority=priority,
            status=status,
            round_amount=round_amount,
            round_target=round_target,
            tags=tags,
            company_summary=company_summary,
            deal_lead_id=deal_lead_id,
            company_id=company_id,
            request_options=request_options,
        )
        return _response.data

    async def delete(
        self,
        group_id: int,
        deal_id: int,
        *,
        archive: typing.Optional[bool] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> None:
        """
        Delete a deal.

        Parameters
        ----------
        group_id : int

        deal_id : int

        archive : typing.Optional[bool]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        import asyncio

        from termina import AsyncTermina

        client = AsyncTermina(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.deal.delete(
                group_id=1,
                deal_id=1,
                archive=True,
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.delete(group_id, deal_id, archive=archive, request_options=request_options)
        return _response.data

    async def extra_metadata(
        self, group_id: int, deal_id: int, *, request_options: typing.Optional[RequestOptions] = None
    ) -> DealExtraMetadataResponse:
        """
        Retrieve extra metadata for a deal, such as questions and meeting times.

        Parameters
        ----------
        group_id : int

        deal_id : int

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        DealExtraMetadataResponse
            Successful Response

        Examples
        --------
        import asyncio

        from termina import AsyncTermina

        client = AsyncTermina(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.deal.extra_metadata(
                group_id=1,
                deal_id=1,
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.extra_metadata(group_id, deal_id, request_options=request_options)
        return _response.data

    async def set_metadata(
        self,
        group_id: int,
        deal_id: int,
        metadata_tag: DealMetadataTag,
        *,
        request: Metadata,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> DealExtraMetadataResponse:
        """
        Create or update questions for a deal. If questions already exist for this deal, they will be updated.
        If no questions exist, they will be created.


        Limitations:
        - The metadata payload cannot exceed 2048 characters.

        Parameters
        ----------
        group_id : int

        deal_id : int

        metadata_tag : DealMetadataTag

        request : Metadata

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        DealExtraMetadataResponse
            Successful Response

        Examples
        --------
        import asyncio

        from termina import AsyncTermina

        client = AsyncTermina(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.deal.set_metadata(
                group_id=1,
                deal_id=1,
                metadata_tag="questions",
                request={"key": "value"},
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.set_metadata(
            group_id, deal_id, metadata_tag, request=request, request_options=request_options
        )
        return _response.data

    async def delete_metadata(
        self,
        group_id: int,
        deal_id: int,
        metadata_tag: DealMetadataTag,
        *,
        archive: typing.Optional[bool] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> None:
        """
        Delete questions for a deal.

        Parameters
        ----------
        group_id : int

        deal_id : int

        metadata_tag : DealMetadataTag

        archive : typing.Optional[bool]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        import asyncio

        from termina import AsyncTermina

        client = AsyncTermina(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.deal.delete_metadata(
                group_id=1,
                deal_id=1,
                metadata_tag="questions",
                archive=True,
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.delete_metadata(
            group_id, deal_id, metadata_tag, archive=archive, request_options=request_options
        )
        return _response.data

    async def order(
        self, group_id: int, deal_id: int, *, request_options: typing.Optional[RequestOptions] = None
    ) -> typing.Optional[typing.Any]:
        """
        Submit an order for a deal scan to be performed.

        Parameters
        ----------
        group_id : int

        deal_id : int

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        typing.Optional[typing.Any]
            Successful Response

        Examples
        --------
        import asyncio

        from termina import AsyncTermina

        client = AsyncTermina(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.deal.order(
                group_id=1,
                deal_id=1,
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.order(group_id, deal_id, request_options=request_options)
        return _response.data

    async def get_comparable_deals(
        self,
        group_id: int,
        deal_id: int,
        *,
        category: typing.Optional[typing.Union[str, typing.Sequence[str]]] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> typing.List[DealWithFilesResponse]:
        """
        Get deals comparable to the current deal.

        Categories are required for meaningful comparison. Only deals with overlapping categories
        will be returned. If the current deal has no categories, no comparable deals will be returned.

        Returns the top 5 most recent deals with overlapping categories, sorted by updated timestamp.

        Parameters
        ----------
        group_id : int

        deal_id : int

        category : typing.Optional[typing.Union[str, typing.Sequence[str]]]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        typing.List[DealWithFilesResponse]
            Successful Response

        Examples
        --------
        import asyncio

        from termina import AsyncTermina

        client = AsyncTermina(
            token="YOUR_TOKEN",
        )


        async def main() -> None:
            await client.deal.get_comparable_deals(
                group_id=1,
                deal_id=1,
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.get_comparable_deals(
            group_id, deal_id, category=category, request_options=request_options
        )
        return _response.data
