import{r as n,a8 as j,aa as v,j as e,p as h,A as f,a1 as p,av as k,aw as N,dA as y,q as O}from"./index-4cf586ed.js";import{Z as E}from"./ZoomPanCanvas-1365066d.js";import"./CanvasEnhancer-abaa5025.js";function S(a){const[g,s]=n.useState(0),[o,i]=n.useState(""),[l,c]=n.useState(""),r=n.useRef(),m=j.create({...a.proxy?v.getOptions():null}),u=n.useCallback(()=>{m.get(a.url).then(t=>{c(t.data.jpegData),r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{u()},a.interval??500)}).catch(t=>{var d;console.log("Couldnt load image"),i((d=t.response.data)==null?void 0:d.error)})},[a.url,c]);return n.useEffect(()=>(u(),()=>{r.current&&clearTimeout(r.current)}),[u]),e.jsxs("div",{className:"plot2d-container",children:[e.jsxs("div",{children:[a.title&&e.jsx("h3",{children:a.title}),e.jsx("div",{className:"message"}),e.jsxs("div",{className:"zoom",children:["Zoom:",(g*100).toFixed(0),"%"]})]}),e.jsx(h,{children:e.jsx(E,{className:"scanimage",url:l&&`data:image/jpg;base64,${l}`,onZoomChange:t=>s(t),onLoadProgress:t=>{},onError:(t,d,x)=>i(x),maxZoom:4,markings:a.markings,children:e.jsx("div",{className:"plot-error",children:o&&e.jsxs(f,{variant:"danger",children:["Error loading image: ",o]})})})})]})}function C(a){const{providers:g,yamlNode:s,url:o,interval:i,proxy:l,markings:c,...r}=a;return p(s,"url",o),k(s,"interval",i),N(s,"proxy",l),y(s,"markings",c,m=>"x"in m&&"y"in m,"Marking"),O(s,r),e.jsx(S,{url:o,interval:i,proxy:l,markings:c})}export{C as default};
