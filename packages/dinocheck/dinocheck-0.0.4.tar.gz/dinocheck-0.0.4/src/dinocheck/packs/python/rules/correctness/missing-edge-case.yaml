id: python/missing-edge-case
name: Missing Edge Case Handling
level: major
category: correctness
description: |
  Detects functions that don't handle common edge cases like
  None, empty collections, zero, negative numbers, or boundary
  conditions that could cause unexpected behavior.

triggers:
  file_patterns:
    - "**/*.py"
  code_patterns:
    - "def \\w+\\(.*\\):"
    - "\\[.*\\]"
    - "for .+ in .+:"
    - "/ |// |% "

checklist:
  - What happens if input is None?
  - What happens if collection is empty?
  - What happens if number is zero or negative?
  - What happens at boundary values (0, -1, MAX_INT)?
  - What happens if string is empty or whitespace only?
  - Is there division that could divide by zero?

fix: |
  Add explicit handling for edge cases. Use early returns for
  invalid inputs. Document expected input constraints. Consider
  using Optional type hints to make None-handling explicit.

tags:
  - correctness
  - edge-cases
  - robustness

examples:
  bad: |
    def average(numbers):
        return sum(numbers) / len(numbers)  # Fails on empty list!
  good: |
    def average(numbers):
        if not numbers:
            return 0.0
        return sum(numbers) / len(numbers)
