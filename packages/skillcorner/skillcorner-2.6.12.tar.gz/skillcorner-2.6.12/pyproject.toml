[project]
name = "skillcorner"
version = "2.6.12"
description = "Python client for interact with SkillCorner API"
homepage = "https://skillcorner.com/"
repository = "https://gitlab.com/public-corner/skillcorner"
documentation = "https://skillcorner.readthedocs.io/en/latest/"
readme = "README.md"
requires-python = ">=3.10,<3.14"
dependencies = [
    "fitrequest~=1.5.2",
    "makefun>=1.15.6",
    "orjson>=3.9.10",
    "progress>=1.6",
]

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"


[tool.hatch.build]
exclude = [".venv", ".uv-cache", "env", "venv"]


[project.scripts]
skillcorner-cli = "skillcorner.client:SkillcornerClient.cli_run"

[tool.poe.tasks.lock]
help = "Lock file"
shell = "uv lock"

[tool.poe.tasks.lock_upgrade]
help = "Lock file"
shell = "uv lock --upgrade"

[tool.poe.tasks.test]
sequence = [
  {cmd = "coverage run -m pytest --junitxml=junit_test.xml"},
  {cmd = "coverage xml"},
  {cmd = "coverage html"},
  {cmd = "coverage report --omit 'tests/*'"}
]

[tool.ruff]
fix = true
line-length = 120
lint.select = ["B", "E", "F", "I001", "Q", "SIM", "UP", "W"]

[tool.ruff.lint.flake8-quotes]
inline-quotes = "single"

[tool.ruff.format]
quote-style = "single"

[tool.ruff.lint.isort]
combine-as-imports = true
force-wrap-aliases = true

[tool.ruff.lint.per-file-ignores]
"**/{tests}/*" = [
  # Error: Checks for variable definitions that redefine (or "shadow") unused variables.
  # Why it's disabled: This error is triggered when imported fixtures are used as arguments in test functions,
  # even though they are intentionally not referenced elsewhere in the code.
  "F811"
]

[dependency-groups]
dev = [
    "coverage>=7.6.1",
    "defusedxml>=0.7.1",
    "ipython>=8.18.1",
    "poethepoet>=0.28.0",
    "pre-commit>=3.5.0",
    "pytest>=8.3.3",
    "respx>=0.22.0",
    "rich>=13.9.4",
    "ruff>=0.6.4",
    "sphinx>=7.4.7",
    "sphinx-book-theme>=1.1.3",
    "autodoc-pydantic>=2.2.0",
    "sphinx-copybutton>=0.5.2",
    "sphinx-design>=0.6.1",
]

[tool.poe.tasks.doc]
help = "Build docs"
shell = "sphinx-build -M html ./docs/source/ ./build -W"
