(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[782],{668:function(e,t,s){Promise.resolve().then(s.bind(s,3859))},3859:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return B}});var a=s(7437),n=s(2265),l=s(2219),o=s(4630),r=s(9124),i=s(2530),c=s(2871),d=s(5288),m=s(6936),u=s(14),x=s(7660),p=s(9657);async function*g(e,t,s){var a;let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=JSON.stringify({prompt:t,...s,do_sample:!0});console.log("Starting completion stream with request:",JSON.parse(l));let o=n?"".concat(p.R,"/proxy/").concat(e.port,"/v1/completions?streaming=").concat(s.stream):"http://127.0.0.1:".concat(e.port,"/v1/completions"),r=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:l});if(!r.ok){let e=Error("Stream request failed.");throw e.status=r.status,e}let i=null===(a=r.body)||void 0===a?void 0:a.getReader(),c=new TextDecoder;for(;;){let{value:e,done:t}=await i.read();if(t){console.debug("Stream done.");break}let s=c.decode(e,{stream:!0}).split("\n\n");console.debug("Received chunks:",s);let a=s.filter(e=>""!==e).map(e=>"data: [DONE]"===e?{choices:[{delta:{content:""}}]}:JSON.parse(e.replace("data: {","{")));yield a}}async function*h(e,t,s){var a;let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=JSON.stringify({messages:t,...s});console.log("Starting chat completion stream with request:",JSON.parse(l));let o=n?"".concat(p.R,"/proxy/").concat(e.port,"/v1/chat/completions?streaming=").concat(s.stream):"http://127.0.0.1:".concat(e.port,"/v1/chat/completions"),r=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:l});if(!r.ok){let e=Error("Stream request failed.");throw e.status=r.status,e}let i=null===(a=r.body)||void 0===a?void 0:a.getReader(),c=new TextDecoder;for(;;){let{value:e,done:t}=await i.read();if(t){console.debug("Stream done.");break}let s=c.decode(e,{stream:!0}).split("\n\n");console.debug("Received chunks:",s);let a=s.filter(e=>""!==e).map(e=>"data: [DONE]"===e?{choices:[{delta:{content:""}}]}:JSON.parse(e.replace("data: {","{")));yield a}}var b=s(9613),f=s(7442),y=s(1345),v=s(6310),j=s(7203),N=s(718),w=s.n(N);function k(e){let{prompt:t,setPrompt:s,handleSubmit:n,selectedService:l}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900",children:"Prompt"}),(0,a.jsx)("div",{className:"flex items-start space-x-4 mt-2",children:(0,a.jsx)("div",{className:"min-w-0 flex-1",children:(0,a.jsxs)("form",{action:"#",onSubmit:n,className:"relative",children:[(0,a.jsxs)("div",{className:"rounded-lg bg-white outline outline-1 -outline-offset-1 outline-gray-300 shadow-md",children:[(0,a.jsx)("label",{htmlFor:"text-generation-text-input",className:"sr-only",children:"Prompt anything"}),(0,a.jsx)("textarea",{id:"text-generation-text-input",name:"text-generation-text-input",rows:10,placeholder:"Orcas are awesome because...",value:t,onChange:e=>{var t;s((t=e.target.value)||""),sessionStorage.setItem("tgci",t||"")},onKeyDown:e=>{"Enter"===e.key&&e.shiftKey||"Enter"!==e.key||(e.preventDefault(),n(e))},className:"block w-full resize-none bg-transparent px-4 py-3 text-sm text-gray-900 placeholder:text-gray-400 border-0  focus:border-0 focus:outline-none focus:ring-0 sm:text-sm/6 overflow-visible"}),(0,a.jsx)("div",{"aria-hidden":"true",className:"py-2",children:(0,a.jsx)("div",{className:"py-px",children:(0,a.jsx)("div",{className:"h-9"})})})]}),(0,a.jsxs)("div",{className:"absolute inset-x-0 bottom-0 flex justify-between py-2 pl-3 pr-2",children:[(0,a.jsx)("div",{className:"flex items-center space-x-5",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("button",{type:"button",className:"-m-2.5 flex size-10 items-center justify-center rounded-full text-gray-400 hover:text-gray-500",children:[(0,a.jsx)(b.Z,{"aria-hidden":"true",className:"size-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Attach a file"})]})})}),(0,a.jsx)("div",{className:"shrink-0",children:(0,a.jsx)("button",{type:"submit",disabled:!l||l.status!==j.$J.HEALTHY,onClick:()=>{console.log("Submit button clicked:",t)},className:"inline-flex items-center rounded-full bg-white p-2 text-sm font-semibold text-gray-900 border border-gray-300 shadow-sm hover:bg-gray-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600 disabled:text-gray-400 disabled:opacity-50 disabled:hover:bg-white disabled:border-gray-200 disabled:shadow-none",children:(0,a.jsx)(f.Z,{className:"size-5"})})})]})]})})})]})}function S(e){let{content:t,handleSubmit:s,selectedService:n}=e;if(t&&t.length>0){try{sessionStorage.setItem("tgco",t)}catch(e){console.error(e)}return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)("div",{className:"block w-full max-w-4xl overflow-y-auto bg-white text-sm/6 text-gray-900 rounded-lg ml-1",children:t})}),(0,a.jsxs)("div",{className:"flex flex-row h-8 mt-1",children:[(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(t).then(console.log("copied assistant message")).catch(e=>{console.error("Failed to copy content: ",e)})},children:(0,a.jsx)(y.Z,{className:"w-5 h-5 text-gray-600 hover:text-gray-400 m-0.5"})}),(0,a.jsx)("button",{disabled:!n||n.status!==j.$J.HEALTHY,onClick:s,children:(0,a.jsx)(v.Z,{className:"w-5 h-5 text-gray-600 hover:text-gray-400 m-0.5"})})]})]})}}function _(e){let{parameters:t}=e,{selectedService:s}=(0,n.useContext)(x.o),[l,o]=n.useState(sessionStorage.getItem("tgci")||""),[r,i]=n.useState(sessionStorage.getItem("tgco")||""),[c,d]=n.useState(!1),m=async e=>{e.preventDefault();let a=""===l?"Write me a haiku about orcas.":l;d(!0),i(""),sessionStorage.setItem("tgco","");let n=g(s,a,{...t,stream:!0},!0),o=await n.next();d(!1);let r=o.value.map(e=>e.choices[0].text).join("").trimStart();for await(let e of(i(e=>e+r),n)){let t=e.map(e=>e.choices[0].text).join("");i(e=>e+t)}};return(0,a.jsxs)("div",{className:"flex flex-col grow pt-2 bg-white",children:[(0,a.jsx)(k,{prompt:l||"",setPrompt:o,handleSubmit:m,selectedService:s,isLoading:c}),(0,a.jsx)(S,{content:r||"",handleSubmit:m,selectedService:s,isLoading:c})]})}k.propTypes={prompt:w().string,setPrompt:w().func,handleSubmit:w().func,selectedService:w().object,isLoading:w().bool},S.propTypes={content:w().string,handleSubmit:w().func,selectedService:w().object,isLoading:w().bool},_.propTypes={parameters:w().object};var C=s(7165),T=s(7233),M=s(2594);let D={USER:"user",ASSISTANT:"assistant",SYSTEM:"system"};function E(e){let{message:t,onChange:s}=e;return(0,a.jsxs)("div",{className:"mb-10",children:[(0,a.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900",children:"System Message"}),(0,a.jsx)("textarea",{placeholder:"You are a helpful assistant.",rows:5,value:t.content||"",onChange:s,className:"w-full rounded-lg bg-white p-2 mt-2 resize-none shadow-md px-4 py-3 text-sm text-gray-900 placeholder:text-gray-400 border-0 focus:ring-1 focus:ring-gray-300 sm:text-sm/6 outline outline-1 outline-gray-300"})]})}function R(e){let{message:t,onChange:s,onSubmit:n}=e;return(0,a.jsx)("div",{className:"flex items-start space-x-4 mt-10",children:(0,a.jsx)("div",{className:"min-w-0 flex-1",children:(0,a.jsxs)("form",{action:"#",onSubmit:n,className:"relative",children:[(0,a.jsxs)("div",{className:"rounded-lg bg-white outline outline-1 -outline-offset-1 outline-gray-300 shadow-md",children:[(0,a.jsx)("label",{htmlFor:"comment",className:"sr-only",children:"Ask anything"}),(0,a.jsx)("textarea",{id:"comment",name:"comment",rows:3,placeholder:"Why are orcas so awesome?",value:t&&t.content||"",onChange:s,onKeyDown:e=>{"Enter"===e.key&&e.shiftKey||"Enter"!==e.key||(e.preventDefault(),n(e))},className:"block w-full resize-none bg-transparent px-4 py-3 text-sm text-gray-900 placeholder:text-gray-400 border-0  focus:border-0 focus:outline-none focus:ring-0 sm:text-sm/6"}),(0,a.jsx)("div",{"aria-hidden":"true",className:"py-2",children:(0,a.jsx)("div",{className:"py-px",children:(0,a.jsx)("div",{className:"h-9"})})})]}),(0,a.jsxs)("div",{className:"absolute inset-x-0 bottom-0 flex justify-between py-2 pl-3 pr-2",children:[(0,a.jsx)("div",{className:"flex items-center space-x-5",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("button",{type:"button",className:"-m-2.5 flex size-10 items-center justify-center rounded-full text-gray-400 hover:text-gray-500",children:[(0,a.jsx)(b.Z,{"aria-hidden":"true",className:"size-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Attach a file"})]})})}),(0,a.jsx)("div",{className:"shrink-0",children:(0,a.jsxs)("button",{type:"submit",disabled:t&&t.content&&0===t.content.length,className:"inline-flex items-center rounded-full bg-white p-2 text-sm font-semibold text-gray-900 border border-gray-300 shadow-sm hover:bg-gray-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600 disabled:text-gray-400 disabled:opacity-50 disabled:hover:bg-white disabled:border-gray-200 disabled:shadow-none",children:[(0,a.jsx)(f.Z,{className:"size-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Submit"})]})})]})]})})})}function q(e){let{message:t,onDeleteMessage:s,onEditMessage:l}=e,[o,r]=(0,n.useState)(!1),[i,c]=(0,n.useState)(!1),[d,m]=(0,n.useState)(t.content);return i?(0,a.jsx)("div",{className:"flex flex-row-reverse space-x-4 mt-5",children:(0,a.jsx)("div",{className:"min-w-0 max-w-xl flex-1",children:(0,a.jsxs)("form",{action:"#",onSubmit:e=>{e.preventDefault(),l(d),c(!1)},className:"relative",children:[(0,a.jsxs)("div",{className:"rounded-lg bg-gray-100 shadow-md",children:[(0,a.jsx)("label",{htmlFor:"comment",className:"sr-only",children:"Edit message"}),(0,a.jsx)("textarea",{id:"edit-message",name:"edit-message",rows:3,defaultValue:d,onChange:e=>{m(e.target.value)},className:"block w-full resize-none bg-transparent px-4 py-3 text-sm text-gray-900 placeholder:text-gray-400 border-0  focus:border-0 focus:outline-none focus:ring-0 sm:text-sm"}),(0,a.jsx)("div",{"aria-hidden":"true",className:"py-2",children:(0,a.jsx)("div",{className:"py-px",children:(0,a.jsx)("div",{className:"h-9"})})})]}),(0,a.jsxs)("div",{className:"absolute inset-x-0 bottom-0 flex justify-between py-2 pl-3 pr-2",children:[(0,a.jsx)("div",{className:"flex items-center space-x-5"}),(0,a.jsxs)("div",{className:"shrink-0",children:[(0,a.jsxs)("button",{onClick:()=>{console.log("cancel button clicked"),c(!1),m(t.content)},className:"inline-flex items-center rounded-full bg-transparent mr-2 p-2 text-sm font-semibold text-gray-900 hover:bg-gray-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600 disabled:text-gray-400 disabled:opacity-50 disabled:hover:bg-white disabled:border-gray-200 disabled:shadow-none",children:[(0,a.jsx)(C.Z,{className:"size-5 text-gray-900 hover:text-gray-400"}),(0,a.jsx)("span",{className:"sr-only",children:"Cancel"})]}),(0,a.jsxs)("button",{type:"submit",disabled:0===d.length,className:"inline-flex items-center rounded-full bg-white p-2 text-sm font-semibold text-gray-900 border border-gray-300 shadow-sm hover:bg-gray-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600 disabled:text-gray-400 disabled:opacity-50 disabled:hover:bg-white disabled:border-gray-200 disabled:shadow-none",children:[(0,a.jsx)(T.Z,{className:"size-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Save"})]})]})]})]})})}):(0,a.jsxs)("div",{onMouseOver:()=>{r(!0)},onMouseLeave:()=>{r(!1)},className:"mt-5",children:[(0,a.jsx)("div",{className:"flex flex-row-reverse",children:(0,a.jsx)("div",{className:"max-w-xl content-end bg-gray-100 text-sm rounded-lg px-4 py-3 shadow-md",children:d})}),(0,a.jsxs)("div",{className:"flex flex-row-reverse h-8",children:[(0,a.jsxs)("button",{hidden:!o,onClick:()=>{console.log("deleting user message"),s()},children:[(0,a.jsx)(C.Z,{className:"w-5 h-5 text-gray-600 hover:text-gray-400 m-0.5 mt-2"}),(0,a.jsx)("span",{className:"sr-only",children:'Delete message: "'.concat(t.content,'"')})]}),(0,a.jsxs)("button",{hidden:!o,onClick:()=>{console.log("edit button clicked"),c(!0)},children:[(0,a.jsx)(M.Z,{className:"w-5 h-5 text-gray-600 hover:text-gray-400 m-0.5 mt-2"}),(0,a.jsx)("span",{className:"sr-only",children:'Edit message: "'.concat(t.content,'"')})]}),(0,a.jsxs)("button",{hidden:!o,onClick:()=>{navigator.clipboard.writeText(d).then(console.log("copied user message")).catch(e=>{console.error("Failed to copy content: ",e)})},children:[(0,a.jsx)(y.Z,{className:"w-5 h-5 text-gray-600 hover:text-gray-400 m-0.5 mt-2"}),(0,a.jsx)("span",{className:"sr-only",children:"Copy message to clipboard: ".concat(t.content)})]})]})]})}function O(e){let{message:t,handleResubmit:s}=e;return(0,a.jsxs)("div",{className:"mt-5 max-w-xl",children:[(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)("div",{className:"w-fit content-end bg-white text-sm rounded-lg ml-2",children:t.content})}),(0,a.jsxs)("div",{className:"flex flex-row h-8",children:[(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(t.content).then(console.log("copied assistant message")).catch(e=>{console.error("Failed to copy content: ",e)})},children:(0,a.jsx)(y.Z,{className:"ml-1.5 w-5 h-5 text-gray-600 hover:text-gray-400 m-0.5"})}),(0,a.jsx)("button",{onClick:s,children:(0,a.jsx)(v.Z,{className:"w-5 h-5 text-gray-600 hover:text-gray-400 m-0.5"})})]})]})}function I(e){let{message:t,onEditMessage:s,onDeleteMessage:n,handleResubmit:l}=e;return t.role===D.USER?(0,a.jsx)(q,{message:t,onEditMessage:s,onDeleteMessage:n}):t.role===D.ASSISTANT?(0,a.jsx)(O,{message:t,handleResubmit:l}):void 0}function Z(e){let{messages:t,setMessages:s,handleResubmit:n,elementRef:l}=e;try{sessionStorage.setItem("tgcc-ml",JSON.stringify(t))}catch(e){console.error(e)}return(0,a.jsxs)("div",{className:"block overflow-y-auto h-[calc(100vh-50vh)] px-8",children:[t.map((e,t)=>(0,a.jsx)(I,{message:e,onEditMessage:a=>{console.log("editing message:",e),s(e=>e.map((e,s)=>s===t?{...e,content:a}:e))},onDeleteMessage:()=>{console.log("delete message:",e),s(e=>e.filter((e,s)=>s!==t&&s!==t+1))},handleResubmit:n},t)),(0,a.jsx)("div",{ref:l})]})}function z(e){let{parameters:t}=e,{selectedService:s}=(0,n.useContext)(x.o),l=sessionStorage.getItem("tgcc-ml"),[o,r]=(0,n.useState)(l?JSON.parse(l):[]),[i,c]=(0,n.useState)({role:D.SYSTEM,content:sessionStorage.getItem("tgcc-sm")||""}),[d,m]=(0,n.useState)({role:D.USER,content:sessionStorage.getItem("tgcc-um")||""}),u=n.useRef(null),p=()=>{var e;null===(e=u.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,n.useEffect)(()=>{p()},[o]);let g=async e=>{e.preventDefault(),console.log("user message submitted");let a=h(s,[i,...o,d],{...t,stream:!0},!0);r(e=>[...e,d]);let n=await a.next();console.debug("data:",n);let l=n.value.map(e=>e.choices[0].delta.content).join("").trimStart();for await(let e of(r(e=>[...e.slice(0,e.length),{role:"assistant",content:l}]),a)){console.debug("data:",e);let t=e.map(e=>e.choices[0].delta.content).join("");console.debug("response: ",l+=t),r(e=>[...e.slice(0,e.length-1),{role:"assistant",content:l}])}},b=async e=>{e.preventDefault(),console.log("user message resubmitted");let a=h(s,[i,...o.slice(0,o.length-1)],{...t,stream:!0},!0);r(e=>e.slice(0,e.length-1));let n=await a.next();console.debug("data:",n);let l=n.value.map(e=>e.choices[0].delta.content).join("").trimStart();for await(let e of(r(e=>[...e.slice(0,e.length),{role:"assistant",content:l}]),a)){console.debug("data:",e);let t=e.map(e=>e.choices[0].delta.content).join("");console.debug("response: ",l+=t),r(e=>[...e.slice(0,e.length-1),{role:"assistant",content:l}])}};return(0,a.jsxs)("div",{className:"flex flex-col grow pt-2 bg-white",children:[(0,a.jsx)(E,{message:i.content?i:{...i,content:sessionStorage.getItem("tgcc-sm")||""},onChange:e=>{var t;return t=e.target.value,void(c({...i,content:t}),sessionStorage.setItem("tgcc-sm",t))}}),(0,a.jsx)(Z,{messages:o,setMessages:r,handleResubmit:b,elementRef:u}),(0,a.jsx)(R,{message:d.content?d:{...d,content:sessionStorage.getItem("tgcc-um")},onChange:e=>{var t;return t=e.target.value,void(m({...d,content:t}),sessionStorage.setItem("tgcc-um",t))},onSubmit:g})]})}function P(e){let{id:t,checked:s,onChange:n,disabled:l,label:o,help:r}=e;return(0,a.jsxs)("div",{className:"relative flex gap-x-3",children:[(0,a.jsx)("div",{className:"flex h-6 items-center",children:(0,a.jsx)("input",{id:t,name:t,type:"checkbox",disabled:l,checked:s,onChange:n,className:"h-4 w-4 rounded border-gray-300 text-blue-500 focus:ring-blue-500 disabled:bg-gray-100"})}),(0,a.jsxs)("div",{className:"text-sm leading-6",children:[(0,a.jsx)("label",{htmlFor:t,className:"font-medium text-gray-900",children:o}),(0,a.jsx)("p",{className:"text-gray-500",children:r})]})]})}function A(e){let{containerOptions:t,setContainerOptions:s,disabled:n}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("fieldset",{children:[(0,a.jsx)("legend",{className:"text-sm font-semibold leading-6 text-gray-900",children:"Deployment"}),(0,a.jsx)("p",{className:"mt-1 mb-2 text-sm leading-6 text-gray-600",children:"Customize the service deployment."}),(0,a.jsx)(P,{checked:t.disable_custom_kernels,onChange:()=>s(e=>({...e,disable_custom_kernels:!e.disable_custom_kernels})),label:"Disable Custom Kernels",help:"Disables custom CUDA kernels that may not work on all devices.",disabled:n})]})})}E.propTypes={message:w().object,onChange:w().func},R.propTypes={message:w().string,onChange:w().func,onSubmit:w().func},q.propTypes={message:w().string,onDeleteMessage:w().func,onEditMessage:w().func},O.propTypes={message:w().string,handleResubmit:w().func},I.propTypes={message:w().string,onEditMessage:w().func,onDeleteMessage:w().func,handleResubmit:w().func},Z.propTypes={messages:w().string,setMessages:w().func,handleResubmit:w().func,elementRef:w().node},z.propTypes={parameters:w().object},P.propTypes={id:w().string,checked:w().bool,onChange:w().func,disabled:w().bool,label:w().string,help:w().string},A.propTypes={containerOptions:w().object,setContainerOptions:w().func,disabled:w().bool};var F=s(5375);function J(e){let{label:t,htmlFor:s,description:n,disabled:l}=e;return(0,a.jsxs)("label",{htmlFor:null!=s?s:t,className:"relative group inline-flex grow text-sm font-normal leading-6 hover:underline hover:decoration-dotted ".concat(l?"text-gray-300":"text-gray-900"),children:[t,(0,a.jsx)("div",{className:"hidden group-hover:block absolute bottom-6 left-0 lg:-bottom-1 lg:-left-64 w-60 p-2 font-light text-gray-800 text-sm rounded-md bg-white shadow-sm ring-1 ring-inset ring-gray-300 z-10",children:n})]})}J.propTypes={label:w().string,htmlFor:w().string,description:w().string,disabled:w().bool};var K=s(8804);function L(e){let{name:t,value:s,onSliderChange:n,onTextChange:l,onReset:o,min:r,max:i,step:c,tooltip:d,disabled:m,optional:u,enabled:x,onOptionalToggle:p}=e,g=m||u&&!x,h=t.toLowerCase().replaceAll(" ","-");return(0,a.jsxs)("div",{className:"sm:col-span-4",children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[u&&(0,a.jsx)("input",{type:"checkbox",checked:x,onChange:()=>null==p?void 0:p(!x),className:"mr-1 ml-1 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,a.jsx)(J,{htmlFor:h,label:t,description:d,disabled:g})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:o,disabled:g,className:(0,j.AK)("mr-0.5",g?"cursor-not-allowed opacity-40":""),children:(0,a.jsx)(K.Z,{className:"h-3 w-3 text-gray-500"})}),(0,a.jsx)("input",{type:"number",step:null!=c?c:1,value:s,onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()},onChange:l,disabled:g,className:"block w-20 border border-gray-300 rounded-md shadow-sm h-7 text-right sm:text-sm font-light text-gray-900 focus:ring-inset focus:ring-2 focus:ring-blue-500 focus:border-white"})]})]}),(0,a.jsx)("div",{className:"mt-0",children:(0,a.jsx)("div",{className:"flex sm:max-w-md",children:(0,a.jsx)("input",{type:"range",name:h,id:h,min:r,max:i,step:null!=c?c:1,value:s,onChange:n,disabled:g,className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6"})})})]})}function Y(e){let{label:t,tooltip:s,value:n,onChange:l,placeholder:o,disabled:r,error:i}=e;return(0,a.jsxs)("div",{className:"sm:col-span-4",children:[(0,a.jsx)("div",{className:"flex flex-row justify-start",children:(0,a.jsx)(J,{label:t,description:s,disabled:r})}),(0,a.jsx)("input",{type:"text",value:n,onChange:l,placeholder:o,disabled:r,onKeyDown:e=>{if((!e.metaKey||"a"!==e.key)&&!["Backspace","Enter","Esc","Tab"].includes(e.key)){if(isNaN(Number(e.key)))e.preventDefault()}},className:"mt-1 block w-full border ".concat(i?"border-red-500":r?"border-gray-100":"border-gray-300"," rounded-md shadow-sm px-2 py-1 focus:border-white focus:ring-2 focus:ring-blue-500 sm:text-sm")}),i&&(0,a.jsx)("p",{className:"text-xs text-red-500 mt-1",children:i})]})}function H(e){let{label:t,tooltip:s,parameters:l,setParameters:o}=e,[r,i]=(0,n.useState)(""),c=e=>{if("Enter"===e.key){e.preventDefault();let t=r.trim();t&&l.stop.length<4&&!l.stop.includes(t)&&(o(e=>({...e,stop:[...e.stop,r]})),i(""))}},d=e=>{o(t=>({...t,stop:t.stop.filter((t,s)=>s!==e)}))};return(0,a.jsxs)("div",{className:"sm:col-span-4",children:[(0,a.jsx)("div",{className:"flex flex-row justify-start",children:(0,a.jsx)(J,{label:t,description:s})}),(0,a.jsx)("input",{type:"text",value:r,onChange:e=>i(e.target.value),onKeyDown:e=>c(e),className:"mt-1 block w-full border-1 border-gray-300 rounded-md shadow-sm py-1 px-2 focus:border-white focus:ring-2 focus:ring-blue-500 sm:text-sm"}),(0,a.jsx)("div",{className:"mt-1.5 flex flex-wrap gap-1",children:l.stop.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center bg-blue-500 text-white font-extralight sm:text-sm pl-3 pr-2 py-1 rounded-full",children:[(0,a.jsx)("span",{children:e}),(0,a.jsx)("button",{type:"button",onClick:()=>d(t),className:"ml-1 text-white font-light hover:text-blue-200",children:(0,a.jsx)(F.Z,{className:"h-4 w-4"})})]},"".concat(e,"-").concat(t)))})]})}L.propTypes={name:w().string,value:w().number,onSliderChange:w().func,onTextChange:w().func,onReset:w().func,min:w().number,max:w().number,step:w().number,tooltip:w().string,disabled:w().bool,optional:w().bool,enabled:w().bool,onOptionalToggle:w().func},Y.propTypes={label:w().string,tooltip:w().string,value:w().string,onChange:w().func,placeholder:w().string,disabled:w().bool,error:w().string},H.propTypes={label:w().string,tooltip:w().string,parameters:w().object,setParameters:w().func};let U={frequency_penalty:0,max_tokens:16,presence_penalty:0,seed:null,stop:[],stream:!0,temperature:.1},W={frequency_penalty:0,max_completion_tokens:16,presence_penalty:0,seed:null,stop:[],stream:!0,temperature:.1};function $(e){var t;let{mode:s,parameters:l,setParameters:o}=e,[r,i]=(0,n.useState)(null!==(t=l.seed)&&void 0!==t?t:""),[c,d]=(0,n.useState)({seed:""}),m="completion"===s.value?U:W,u=e=>{i(e);let t=Number(e),s=""===e||Number.isInteger(t)&&t>=0,a=s?"":"Must be a positive integer.";d(e=>({...e,seed:a})),o(a=>({...a,seed:s?""===e?null:t:null}))};return(0,a.jsx)("div",{className:"bg-white sm:rounded-md mt-2 grow",children:(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("form",{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-1 gap-y-4",children:["completion"===s.value?(0,a.jsx)(L,{name:"Max tokens",value:l.max_tokens,tooltip:"The maximum number of tokens that can be generated in the completion.  The token count of your prompt plus max_tokens cannot exceed the model's context length. ",min:1,max:4096,onSliderChange:e=>{o({...l,max_tokens:Number(e.target.value)})},onTextChange:e=>{let t=Number(e.target.value);t>4096?(console.warn("Maximum max_tokens is 4096!"),o({...l,max_tokens:4096})):t<1?(console.warn("Minimum max_tokens is 1!"),o({...l,max_tokens:1})):o({...l,max_tokens:Math.round(t)})},onReset:e=>{e.preventDefault(),o({...l,max_tokens:m.max_tokens})}}):(0,a.jsx)(L,{name:"Max completion tokens",value:l.max_completion_tokens,tooltip:"An upper bound for the number of tokens that can be generated for a completion, including visible output tokens and reasoning tokens.",min:1,max:4096,onSliderChange:e=>{o({...l,max_completion_tokens:Number(e.target.value)})},onTextChange:e=>{let t=Number(e.target.value);t>4096?(console.warn("Maximum max_completion_tokens is 4096!"),o({...l,max_completion_tokens:4096})):t<1?(console.warn("Minimum max_completion_tokens is 1!"),o({...l,max_completion_tokens:1})):o({...l,max_completion_tokens:Math.round(t)})},onReset:e=>{e.preventDefault(),o({...l,max_completion_tokens:m.max_completion_tokens})}}),(0,a.jsx)(L,{name:"Temperature",value:l.temperature,tooltip:"What sampling temperature to use, between 0 and 2. Higher values like 0.8 will make the output more random, while lower values like 0.2 will make it more focused and deterministic.  We generally recommend altering this or top_p but not both.",min:0,max:2,step:.01,onSliderChange:e=>{let t=Number(e.target.value);o({...l,temperature:t})},onTextChange:e=>{let t=Number(e.target.value);t>2?(console.warn("Maximum temperature is 2.0!"),o({...l,temperature:2})):t<0?(console.warn("Minimum temperature is 0.0!"),o({...l,temperature:0})):o({...l,temperature:t})},onReset:e=>{e.preventDefault(),o({...l,temperature:m.temperature})}}),(0,a.jsx)(L,{name:"Frequency penalty",value:l.frequency_penalty,tooltip:"Number between -2.0 and 2.0. Positive values penalize new tokens based on their existing frequency in the text so far, decreasing the model's likelihood to repeat the same line verbatim.",min:-2,max:2,step:.01,onSliderChange:e=>{let t=Number(e.target.value);o({...l,frequency_penalty:t})},onTextChange:e=>{let t=Number(e.target.value);t>2?(console.warn("Maximum frequency penalty is 2.0!"),o({...l,frequency_penalty:2})):t<-2?(console.warn("Minimum frequency penalty is -2.0!"),o({...l,frequency_penalty:-2})):o({...l,frequency_penalty:t})},onReset:e=>{e.preventDefault(),o({...l,frequency_penalty:m.frequency_penalty})}}),(0,a.jsx)(L,{name:"Presence penalty",value:l.presence_penalty,tooltip:"Number between -2.0 and 2.0. Positive values penalize new tokens based on whether they appear in the text so far, increasing the model's likelihood to talk about new topics.",min:-2,max:2,step:.01,onSliderChange:e=>{let t=Number(e.target.value);o({...l,presence_penalty:t})},onTextChange:e=>{let t=Number(e.target.value);t>2?(console.warn("Maximum presence penalty is 2.0!"),o({...l,presence_penalty:2})):t<-2?(console.warn("Minimum presence penalty is -2.0!"),o({...l,presence_penalty:-2})):o({...l,presence_penalty:t})},onReset:e=>{e.preventDefault(),o({...l,presence_penalty:m.presence_penalty})}}),(0,a.jsx)(Y,{label:"Seed",tooltip:"If specified, our system will make a best effort to sample deterministically, such that repeated requests with the same seed and parameters should return the same result.",value:r,onChange:e=>u(e.target.value),placeholder:"",error:c.seed}),(0,a.jsx)(H,{label:"Stop sequences",tooltip:"Up to 4 sequences where the API will stop generating further tokens. The returned text will not contain the stop sequence.",parameters:l,setParameters:o})]})})})})}function V(e){let{selectedMode:t,setSelectedMode:s}=e,[d,m]=(0,n.useState)([{label:"Completion",value:"completion",icon:null},{label:"Chat",value:"chat",icon:null}]);return(0,a.jsxs)(l.Ri,{value:t,onChange:s,children:[(0,a.jsx)(o.__,{className:"block text-sm font-medium leading-6 text-gray-900",children:"Task"}),(0,a.jsxs)("div",{className:"relative mt-2 mb-2 w-64",children:[t?(0,a.jsx)(l.Y4,{className:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-1 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 sm:text-sm sm:leading-6",children:(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"ml-3 block truncate",children:t.label?t.label:""}),(0,a.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,a.jsx)(r.Z,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]})}):(0,a.jsx)(l.Y4,{className:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-1 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 sm:text-sm sm:leading-6",children:(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"pointer-events-none flex-shrink-0 pl-3",children:(0,a.jsx)(i.Z,{className:"h-5 w-5 text-yellow-400","aria-hidden":"true"})}),(0,a.jsx)("span",{className:"ml-3 block truncate",children:"No profile selected"}),(0,a.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,a.jsx)(r.Z,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]})}),(0,a.jsx)(l.O_,{className:"absolute z-10 mt-1 max-h-60 overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm w-[var(--button-width)]",anchor:"bottom",children:d.map(e=>(0,a.jsxs)(l.wt,{value:e,className:"group flex gap-2 bg-white data-[focus]:bg-blue-500 data-[focus]:text-white relative cursor-default select-none py-2 pl-1 pr-9 text-gray-900",children:[(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("span",{className:"ml-3 block truncate font-normal data-[selected]:font-semibold",children:e.label})}),(0,a.jsx)("span",{className:"invisible group-data-[selected]:visible absolute inset-y-0 right-0 flex items-center pr-4 group-data-[focus]:text-white text-blue-600",children:(0,a.jsx)(c.Z,{className:"size-5"})})]},e.value))})]})]})}function B(){let[e,t]=(0,n.useState)({label:"Completion",value:"completion",icon:null}),[s,l]=(0,n.useState)({frequency_penalty:0,max_tokens:16,presence_penalty:0,seed:null,stop:[],stream:!0,temperature:.1}),[o,r]=(0,n.useState)({frequency_penalty:0,max_completion_tokens:16,presence_penalty:0,seed:null,stop:[],stream:!0,temperature:.1}),i=(0,n.useMemo)(()=>({disable_custom_kernels:!1}),[]),[c,x]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{x(!0)},[]),c)?(0,a.jsxs)(d.T,{task:"text-generation",children:[(0,a.jsxs)(m.$,{children:[(0,a.jsx)(V,{selectedMode:e,setSelectedMode:t}),"completion"===e.value?(0,a.jsx)(_,{parameters:s}):(0,a.jsx)(z,{parameters:o})]}),(0,a.jsx)(u._,{task:"text-generation",defaultContainerOptions:i,ContainerOptionsFormComponent:A,children:(0,a.jsx)($,{mode:e,parameters:"completion"===e.value?s:o,setParameters:"completion"===e.value?l:r})})]}):null}$.propTypes={mode:w().string,parameters:w().object,setParameters:w().func},V.propTypes={selectedMode:w().object,setSelectedMode:w().func}}},function(e){e.O(0,[501,753,242,516,503,971,117,744],function(){return e(e.s=668)}),_N_E=e.O()}]);