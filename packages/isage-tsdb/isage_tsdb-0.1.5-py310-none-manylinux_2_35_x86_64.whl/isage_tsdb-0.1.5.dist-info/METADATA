Metadata-Version: 2.2
Name: isage-tsdb
Version: 0.1.5
Summary: High-Performance Time Series Database with C++ Core
Author-Email: SAGE Team <shuhao_zhang@hust.edu.cn>
License: MIT
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: Database
Classifier: Topic :: Scientific/Engineering
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: C++
Project-URL: Homepage, https://github.com/intellistream/sageTSDB
Project-URL: Repository, https://github.com/intellistream/sageTSDB.git
Project-URL: Bug Tracker, https://github.com/intellistream/sageTSDB/issues
Requires-Python: >=3.10
Requires-Dist: numpy<2.3.0,>=1.26.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-cov>=4.0.0; extra == "dev"
Requires-Dist: ruff>=0.1.0; extra == "dev"
Description-Content-Type: text/markdown

# sageTSDB

**High-Performance Time Series Database with C++ Core**

sageTSDB is a high-performance time series database designed for streaming data processing with support for out-of-order data, window-based operations, and pluggable algorithms.

## ğŸŒŸ Features

- **Efficient Time Series Storage**: Optimized data structures for time series indexing
- **Out-of-Order Data Handling**: Automatic buffering and watermarking for late data
- **Pluggable Algorithms**: Extensible architecture for custom stream processing algorithms
- **Window Operations**: Support for tumbling, sliding, and session windows
- **Stream Join**: Window-based join for multiple time series streams
- **Python Bindings**: Easy-to-use Python API via pybind11

## ğŸ—ï¸ Project Structure

```
sageTSDB/
â”œâ”€â”€ include/sage_tsdb/          # Public header files
â”‚   â”œâ”€â”€ core/                   # Core time series database
â”‚   â”œâ”€â”€ algorithms/             # Stream processing algorithms
â”‚   â”œâ”€â”€ plugins/                # Plugin system (PECJ, fault detection)
â”‚   â””â”€â”€ utils/                  # Utilities and helpers
â”‚
â”œâ”€â”€ src/                        # Implementation files
â”‚   â”œâ”€â”€ core/                   # Core implementation
â”‚   â”œâ”€â”€ algorithms/             # Algorithm implementations
â”‚   â”œâ”€â”€ plugins/                # Plugin implementations
â”‚   â””â”€â”€ utils/                  # Utility implementations
â”‚
â”œâ”€â”€ tests/                      # ğŸ”¬ Unit tests (GoogleTest)
â”‚   â”œâ”€â”€ test_*.cpp              # All test files with detailed comments
â”‚   â””â”€â”€ CMakeLists.txt          # Test build configuration
â”‚
â”œâ”€â”€ examples/                   # ğŸ“š Demo programs
â”‚   â”œâ”€â”€ persistence_example.cpp # Data persistence demo
â”‚   â”œâ”€â”€ plugin_usage_example.cpp# Plugin system demo
â”‚   â”œâ”€â”€ integrated_demo.cpp     # PECJ integration demo
â”‚   â”œâ”€â”€ pecj_replay_demo.cpp    # PECJ replay demo
â”‚   â”œâ”€â”€ performance_benchmark.cpp # Performance testing
â”‚   â””â”€â”€ README.md               # Examples documentation
â”‚
â”œâ”€â”€ docs/                       # ğŸ“– Documentation
â”‚   â”œâ”€â”€ DESIGN_DOC_SAGETSDB_PECJ.md  # Architecture design
â”‚   â”œâ”€â”€ PERSISTENCE.md               # Persistence guide
â”‚   â”œâ”€â”€ LSM_TREE_IMPLEMENTATION.md   # LSM Tree details
â”‚   â”œâ”€â”€ RESOURCE_MANAGER_GUIDE.md    # Resource management
â”‚   â””â”€â”€ README.md                     # Documentation index
â”‚
â”œâ”€â”€ scripts/                    # ğŸ› ï¸ Build and utility scripts
â”‚   â”œâ”€â”€ build.sh                # Main build script
â”‚   â”œâ”€â”€ build_plugins.sh        # Plugin build script
â”‚   â”œâ”€â”€ build_and_test.sh       # Build and test examples
â”‚   â”œâ”€â”€ run_demo.sh             # Demo launcher
â”‚   â”œâ”€â”€ test_lsm_tree.sh        # LSM Tree testing
â”‚   â””â”€â”€ README.md               # Scripts documentation
â”‚
â”œâ”€â”€ python/                     # Python bindings (pybind11)
â”œâ”€â”€ cmake/                      # CMake modules
â””â”€â”€ CMakeLists.txt              # Root build configuration
```

### Directory Organization

- **tests/**: All test files consolidated here (removed old `test/` folder)
- **examples/**: Demo programs only (moved test programs to `tests/`)
- **docs/**: All documentation (removed duplicate/outdated docs)
- **scripts/**: All build scripts in one place (removed outdated scripts)

## ğŸ“¦ Building

### Prerequisites

- C++17 compatible compiler (GCC 8+, Clang 7+, MSVC 2019+)
- CMake 3.15 or higher
- Python 3.8+ (for Python bindings)
- pybind11

### Build Instructions

```bash
# Clone the repository
git clone https://github.com/intellistream/sageTSDB.git
cd sageTSDB

# Create build directory
mkdir build && cd build

# Configure and build
cmake ..
make -j$(nproc)

# Run tests
ctest

# Install (optional)
sudo make install
```

### Build Python Bindings

```bash
# From build directory
cmake -DBUILD_PYTHON_BINDINGS=ON ..
make -j$(nproc)

# Install Python package
pip install .
```

## ğŸš€ Quick Start

### C++ API

```cpp
#include <sage_tsdb/core/time_series_db.h>
#include <sage_tsdb/algorithms/stream_join.h>

using namespace sage_tsdb;

int main() {
    // Create database
    TimeSeriesDB db;
    
    // Add data
    TimeSeriesData data;
    data.timestamp = 1234567890000;
    data.value = 42.5;
    data.tags["sensor"] = "temp_01";
    
    db.add(data);
    
    // Query data
    TimeRange range{1234567890000, 1234567900000};
    auto results = db.query(range);
    
    // Use algorithms
    StreamJoin join(5000); // 5-second window
    auto joined = join.process(left_stream, right_stream);
    
    return 0;
}
```

### Python API

```python
import sage_tsdb

# Create database
db = sage_tsdb.TimeSeriesDB()

# Add data
db.add(timestamp=1234567890000, value=42.5, 
       tags={"sensor": "temp_01"})

# Query data
results = db.query(start_time=1234567890000,
                  end_time=1234567900000)

# Stream join
join = sage_tsdb.StreamJoin(window_size=5000)
joined = join.process(left_stream, right_stream)
```

## ğŸ”Œ Pluggable Algorithms

### Implementing Custom Algorithms

```cpp
#include <sage_tsdb/algorithms/algorithm_base.h>

class MyAlgorithm : public TimeSeriesAlgorithm {
public:
    MyAlgorithm(const AlgorithmConfig& config) 
        : TimeSeriesAlgorithm(config) {}
    
    std::vector<TimeSeriesData> process(
        const std::vector<TimeSeriesData>& input) override {
        // Your algorithm implementation
        return output;
    }
};

// Register algorithm
REGISTER_ALGORITHM("my_algorithm", MyAlgorithm);
```

## ğŸ§ª Testing

```bash
# Run all tests
cd build
ctest -V

# Run specific test
./tests/test_time_series_db
./tests/test_stream_join
```

## ğŸ“Š Performance

Benchmarks on typical hardware (Intel i7, 16GB RAM):

| Operation | Throughput | Latency |
|-----------|-----------|---------|
| Single insert | 1M ops/sec | < 1 Î¼s |
| Batch insert (1000) | 5M ops/sec | < 200 ns/op |
| Query (1000 results) | 500K queries/sec | 2 Î¼s |
| Stream join | 300K pairs/sec | 3 Î¼s |
| Window aggregation | 800K windows/sec | 1.2 Î¼s |

## ğŸ”— Integration with SAGE

This library is designed to be used as a submodule in the SAGE project:

```bash
# In SAGE repository
git submodule add https://github.com/intellistream/sageTSDB.git \
    packages/sage-middleware/src/sage/middleware/components/sage_tsdb/sageTSDB

git submodule update --init --recursive
```

## ğŸ“š Documentation

- [API Reference](docs/API.md)
- [Algorithm Guide](docs/ALGORITHMS.md)
- [Performance Tuning](docs/PERFORMANCE.md)
- [Python Bindings](docs/PYTHON_BINDINGS.md)

## ğŸ¤ Contributing

Contributions are welcome! Please read our [Contributing Guide](CONTRIBUTING.md) for details.

## ğŸ“„ License

This project is licensed under the Apache License 2.0 - see the [LICENSE](LICENSE) file for details.

## ğŸ”— Links

- [SAGE Project](https://github.com/intellistream/SAGE)
- [Documentation](https://sage-docs.example.com)
- [Issue Tracker](https://github.com/intellistream/sageTSDB/issues)

## ğŸ“® Contact

For questions and support:
- GitHub Issues: https://github.com/intellistream/sageTSDB/issues
- Email: shuhao_zhang@hust.edu.cn
