{"version":3,"mappings":";sKAEA,eAAsBA,EACrBC,EACAC,EACC,CACD,KAAM,CAAE,KAAAC,CAAA,EAAS,MAAO,MAAMC,KAAmB,KAChD,uBACA,CACC,KAAM,CACL,OAAAH,EACA,OAAAC,CAAA,CACD,CACD,EAGD,GAAI,CAACC,EACJ,MAAM,IAAI,MAAM,iBAAiB,EAElC,OAAOA,CACR,CCYO,MAAME,EAAgB,IAAM,CAClC,KAAM,CAACH,EAAQI,CAAS,EAAIC,EAAA,EACtB,CAACC,EAAQC,CAAS,EAAIC,EAAA,EAmB5B,MAAO,CACN,UAAAJ,EACA,OAAAJ,EACA,OAAAM,EACA,aArBoB,MAAO,CAC3B,OAAAP,CAAA,IAGK,CACL,GAAI,CACH,KAAM,CAAE,OAAAO,EAAQ,MAAAG,CAAA,EAAU,MAAMX,EAAqBC,EAAQC,CAAM,EAElEO,EADGE,EACO,GAEAH,CAFE,CAId,MAAQ,CACP,MAAM,IAAI,MAAM,yCAAyC,CAC1D,CACD,CAMC,CAEF,ECvDMI,EAAiBC,OAAK,IAAAC,EAAA,IAC3B,OAAO,2BAAe,mDAAE,KAAMC,IAAS,CAAE,QAASA,EAAI,YAAa,CACpE,EAEO,SAASC,EAAeC,EAAwB,CACtD,OACCC,MAACC,WAAA,CAAS,SAAUD,MAACE,EAAA,CAAS,UAAU,uBAAuB,EAC9D,SAAAF,MAACN,EAAA,CAAgB,GAAGK,CAAA,CAAO,EAC5B,CAEF","names":["validateSchemaValues","schema","values","data","getQueryService","useSchemaForm","setValues","useSchemaFormValues","errors","setErrors","useSchemaFormErrors","valid","SchemaFormLazy","lazy","__vitePreload","mod","LazySchemaForm","props","jsx","Suspense","Skeleton"],"ignoreList":[],"sources":["../../src/components/schemas/utilities/validate.ts","../../src/components/schemas/hooks/useSchemaForm.ts","../../src/components/schemas/lazy-schema-form.tsx"],"sourcesContent":["import { getQueryService } from \"@/api/service\";\n\nexport async function validateSchemaValues(\n\tschema: Record<string, unknown>,\n\tvalues: Record<string, unknown>,\n) {\n\tconst { data } = await (await getQueryService()).POST(\n\t\t\"/ui/schemas/validate\",\n\t\t{\n\t\t\tbody: {\n\t\t\t\tschema,\n\t\t\t\tvalues,\n\t\t\t},\n\t\t},\n\t);\n\n\tif (!data) {\n\t\tthrow new Error('\"data\" expected');\n\t}\n\treturn data;\n}\n","import { validateSchemaValues } from \"../utilities/validate\";\nimport { useSchemaFormErrors } from \"./useSchemaFormErrors\";\nimport { useSchemaFormValues } from \"./useSchemaValues\";\n\n/**\n * Hook wrapper to cover most cases in setting form values, validating, and triggering errors\n *\n * @returns hook with validation, errors, and values to be plugged into a component\n *\n * @example\n * ```tsx\n *\tconst App = () => {\n * \t\tconst { enforce_parameter_schema, parameter_openapi_schema } = useGetDeployment('deployment-id-0');\n * \t\tconst { setValues, values, errors, validateForm } = useSchemaForm();\n *\n * \t\tconst handleValidateForm = () => validateForm({ schema: parameter_openapi_schema });\n *\n * \t\treturn (\n * \t\t\t<div>\n * \t\t\t\t<SchemaForm\n * \t\t\t\t\tschema={parameter_openapi_schema}\n * \t\t\t\t\tvalues={values}\n * \t\t\t\t\terrors={errors}\n * \t\t\t\t\tonValuesChange={setValues}\n * \t\t\t\t\tkinds={[\"json\"]}\n * \t\t\t\t/>\n * \t\t\t\t<button onClick={handleValidateForm}>Validate</button>\n * \t\t\t</div>\n * \t\t);\n * };\n * ```\n */\nexport const useSchemaForm = () => {\n\tconst [values, setValues] = useSchemaFormValues();\n\tconst [errors, setErrors] = useSchemaFormErrors();\n\n\tconst validateForm = async ({\n\t\tschema,\n\t}: {\n\t\tschema: Record<string, unknown>;\n\t}) => {\n\t\ttry {\n\t\t\tconst { errors, valid } = await validateSchemaValues(schema, values);\n\t\t\tif (valid) {\n\t\t\t\tsetErrors([]);\n\t\t\t} else {\n\t\t\t\tsetErrors(errors);\n\t\t\t}\n\t\t} catch {\n\t\t\tthrow new Error(\"Server error occurred validating schema\");\n\t\t}\n\t};\n\n\treturn {\n\t\tsetValues,\n\t\tvalues,\n\t\terrors,\n\t\tvalidateForm,\n\t};\n};\n","import { lazy, Suspense } from \"react\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport type { SchemaFormProps } from \"./schema-form\";\n\nconst SchemaFormLazy = lazy(() =>\n\timport(\"./schema-form\").then((mod) => ({ default: mod.SchemaForm })),\n);\n\nexport function LazySchemaForm(props: SchemaFormProps) {\n\treturn (\n\t\t<Suspense fallback={<Skeleton className=\"min-h-[300px] w-full\" />}>\n\t\t\t<SchemaFormLazy {...props} />\n\t\t</Suspense>\n\t);\n}\n"],"file":"lazy-schema-form-Clp5QfAW.js"}