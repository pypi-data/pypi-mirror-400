@import "tailwindcss";
@import "react-day-picker/style.css";

@theme {
  --font-sans: "JetBrains Mono", ui-monospace, monospace;

  /* Task state colors */
  --color-pending: #6b7280;
  --color-received: #6b7280;
  --color-started: #3b82f6;
  --color-success: #22c55e;
  --color-failure: #ef4444;
  --color-retry: #f59e0b;
  --color-revoked: #8b5cf6;
  --color-rejected: #dc2626;
}

body {
  @apply antialiased;
}

.task-state-badge {
  @apply inline-flex items-center px-2 py-0.5 rounded text-xs font-medium;
}

.task-state-pending {
  @apply bg-gray-500/20 text-gray-400;
}

.task-state-received {
  @apply bg-gray-500/20 text-gray-400;
}

.task-state-started {
  @apply bg-blue-500/20 text-blue-400;
}

.task-state-success {
  @apply bg-green-500/20 text-green-400;
}

.task-state-failure {
  @apply bg-red-500/20 text-red-400;
}

.task-state-retry {
  @apply bg-amber-500/20 text-amber-400;
}

.task-state-revoked {
  @apply bg-purple-500/20 text-purple-400;
}

.task-state-rejected {
  @apply bg-red-600/20 text-red-500;
}

/* React Flow customization */
.react-flow__node {
  @apply rounded-lg border border-slate-700 bg-slate-800 shadow-lg;
}

.react-flow__edge-path {
  @apply stroke-slate-500;
}

.react-flow__controls {
  @apply bg-slate-800 border-slate-700;
}

.react-flow__controls-button {
  @apply bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-700;
}

/* Hide handles on header label nodes inside containers */
.header-label-node .react-flow__handle {
  display: none !important;
}

/* Hide handles on container nodes (GROUP/CHORD) - edges connect but handles hidden */
.container-node .react-flow__handle {
  opacity: 0 !important;
  width: 8px;
  height: 8px;
}

/* Hide left handles on container child nodes (only show right for edges) */
.container-child .react-flow__handle-left,
.container-child .react-flow__handle-top,
.container-child .react-flow__handle-bottom {
  display: none !important;
}

/* Make right handle on container children subtle */
.container-child .react-flow__handle-right {
  width: 6px;
  height: 6px;
  opacity: 0.5;
}

/* Allow task nodes to expand based on content, but not container nodes */
.react-flow__node-default:not(.container-node) {
  width: auto !important;
}
