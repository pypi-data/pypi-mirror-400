
[tox]
envlist = py38, py39, py310, py311, nox

[testenv]
extras = continuum,tests
commands =
        pytest -m 'not versioned and not functional' {posargs}
        pytest -m 'versioned' {posargs}
        pytest -m 'functional' {posargs}

[testenv:nox]
extras = tests
commands =
        pytest -m 'not versioned and not functional' {posargs}
        pytest -m 'functional' {posargs}

[testenv:pylint]
basepython = python3.11
commands = pylint wuttaweb

[testenv:coverage]
basepython = python3.11
commands =
        pytest -m 'not versioned and not functional' --cov=wuttaweb
        pytest -m 'versioned' --cov-append --cov=wuttaweb --cov-report=html
        pytest -m 'functional' --cov-append --cov=wuttaweb --cov-report=html --cov-fail-under=100

[testenv:docs]
basepython = python3.11
extras = docs
changedir = docs
commands = sphinx-build -b html -d {envtmpdir}/doctrees -W -T . {envtmpdir}/docs
