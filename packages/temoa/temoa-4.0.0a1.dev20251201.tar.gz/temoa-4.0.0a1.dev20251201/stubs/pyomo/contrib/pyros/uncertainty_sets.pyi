import abc
from collections.abc import MutableSequence
from enum import Enum
from typing import NamedTuple

from _typeshed import Incomplete
from pyomo.common.modeling import unique_component_name as unique_component_name
from pyomo.contrib.pyros.util import PARAM_IS_CERTAIN_ABS_TOL as PARAM_IS_CERTAIN_ABS_TOL
from pyomo.contrib.pyros.util import PARAM_IS_CERTAIN_REL_TOL as PARAM_IS_CERTAIN_REL_TOL
from pyomo.contrib.pyros.util import POINT_IN_UNCERTAINTY_SET_TOL as POINT_IN_UNCERTAINTY_SET_TOL
from pyomo.contrib.pyros.util import copy_docstring as copy_docstring
from pyomo.contrib.pyros.util import standardize_component_data as standardize_component_data
from pyomo.core.base import Block as Block
from pyomo.core.base import ConcreteModel as ConcreteModel
from pyomo.core.base import ConstraintList as ConstraintList
from pyomo.core.base import Var as Var
from pyomo.core.base import VarData as VarData
from pyomo.core.base import maximize as maximize
from pyomo.core.base import minimize as minimize
from pyomo.core.expr import mutable_expression as mutable_expression
from pyomo.core.expr import native_numeric_types as native_numeric_types
from pyomo.core.expr import value as value
from pyomo.core.util import dot_product as dot_product
from pyomo.core.util import quicksum as quicksum
from pyomo.opt.results import check_optimal_termination as check_optimal_termination

valid_num_types: Incomplete

def standardize_uncertain_param_vars(obj, dim): ...

class UncertaintyQuantification(NamedTuple):
    block: Incomplete
    uncertainty_cons: Incomplete
    uncertain_param_vars: Incomplete
    auxiliary_vars: Incomplete

def validate_arg_type(
    arg_name,
    arg_val,
    valid_types,
    valid_type_desc=None,
    is_entry_of_arg: bool = False,
    check_numeric_type_finite: bool = True,
) -> None: ...
def is_ragged(arr, arr_types=None): ...
def validate_dimensions(arr_name, arr, dim, display_value: bool = False) -> None: ...
def validate_array(
    arr,
    arr_name,
    dim,
    valid_types,
    valid_type_desc=None,
    required_shape=None,
    required_shape_qual: str = '',
): ...

class Geometry(Enum):
    LINEAR = 1
    CONVEX_NONLINEAR = 2
    GENERAL_NONLINEAR = 3
    DISCRETE_SCENARIOS = 4

class UncertaintySet(metaclass=abc.ABCMeta):
    @property
    @abc.abstractmethod
    def dim(self): ...
    @property
    @abc.abstractmethod
    def geometry(self): ...
    @property
    @abc.abstractmethod
    def parameter_bounds(self): ...
    def is_bounded(self, config): ...
    def is_nonempty(self, config): ...
    def is_valid(self, config): ...
    @abc.abstractmethod
    def set_as_constraint(self, uncertain_params=None, block=None): ...
    def point_in_set(self, point): ...
    def compute_auxiliary_uncertain_param_vals(self, point, solver=None) -> None: ...

class UncertaintySetList(MutableSequence):
    def __init__(self, uncertainty_sets=[], name=None, min_length=None) -> None: ...
    def __len__(self) -> int: ...
    def __getitem__(self, idx): ...
    def __setitem__(self, idx, value) -> None: ...
    def __delitem__(self, idx) -> None: ...
    def clear(self) -> None: ...
    def insert(self, idx, value) -> None: ...
    @property
    def dim(self): ...

class BoxSet(UncertaintySet):
    def __init__(self, bounds) -> None: ...
    @property
    def type(self): ...
    @property
    def bounds(self): ...
    @bounds.setter
    def bounds(self, val) -> None: ...
    @property
    def dim(self): ...
    @property
    def geometry(self): ...
    @property
    def parameter_bounds(self): ...
    def set_as_constraint(self, uncertain_params=None, block=None): ...

class CardinalitySet(UncertaintySet):
    def __init__(self, origin, positive_deviation, gamma) -> None: ...
    @property
    def type(self): ...
    @property
    def origin(self): ...
    @origin.setter
    def origin(self, val) -> None: ...
    @property
    def positive_deviation(self): ...
    @positive_deviation.setter
    def positive_deviation(self, val) -> None: ...
    @property
    def gamma(self): ...
    @gamma.setter
    def gamma(self, val) -> None: ...
    @property
    def dim(self): ...
    @property
    def geometry(self): ...
    @property
    def parameter_bounds(self): ...
    def set_as_constraint(self, uncertain_params=None, block=None): ...
    def compute_auxiliary_uncertain_param_vals(self, point, solver=None): ...
    def point_in_set(self, point): ...

class PolyhedralSet(UncertaintySet):
    def __init__(self, lhs_coefficients_mat, rhs_vec) -> None: ...
    @property
    def type(self): ...
    @property
    def coefficients_mat(self): ...
    @coefficients_mat.setter
    def coefficients_mat(self, val) -> None: ...
    @property
    def rhs_vec(self): ...
    @rhs_vec.setter
    def rhs_vec(self, val) -> None: ...
    @property
    def dim(self): ...
    @property
    def geometry(self): ...
    @property
    def parameter_bounds(self): ...
    def set_as_constraint(self, uncertain_params=None, block=None): ...

class BudgetSet(UncertaintySet):
    def __init__(self, budget_membership_mat, rhs_vec, origin=None) -> None: ...
    @property
    def type(self): ...
    @property
    def coefficients_mat(self): ...
    @property
    def rhs_vec(self): ...
    @property
    def budget_membership_mat(self): ...
    @budget_membership_mat.setter
    def budget_membership_mat(self, val) -> None: ...
    @property
    def budget_rhs_vec(self): ...
    @budget_rhs_vec.setter
    def budget_rhs_vec(self, val) -> None: ...
    @property
    def origin(self): ...
    @origin.setter
    def origin(self, val) -> None: ...
    @property
    def dim(self): ...
    @property
    def geometry(self): ...
    @property
    def parameter_bounds(self): ...
    def set_as_constraint(self, **kwargs): ...

class FactorModelSet(UncertaintySet):
    def __init__(self, origin, number_of_factors, psi_mat, beta) -> None: ...
    @property
    def type(self): ...
    @property
    def origin(self): ...
    @origin.setter
    def origin(self, val) -> None: ...
    @property
    def number_of_factors(self): ...
    @number_of_factors.setter
    def number_of_factors(self, val) -> None: ...
    @property
    def psi_mat(self): ...
    @psi_mat.setter
    def psi_mat(self, val) -> None: ...
    @property
    def beta(self): ...
    @beta.setter
    def beta(self, val) -> None: ...
    @property
    def dim(self): ...
    @property
    def geometry(self): ...
    @property
    def parameter_bounds(self): ...
    def set_as_constraint(self, uncertain_params=None, block=None): ...
    def compute_auxiliary_uncertain_param_vals(self, point, solver=None): ...
    def point_in_set(self, point): ...

class AxisAlignedEllipsoidalSet(UncertaintySet):
    def __init__(self, center, half_lengths) -> None: ...
    @property
    def type(self): ...
    @property
    def center(self): ...
    @center.setter
    def center(self, val) -> None: ...
    @property
    def half_lengths(self): ...
    @half_lengths.setter
    def half_lengths(self, val) -> None: ...
    @property
    def dim(self): ...
    @property
    def geometry(self): ...
    @property
    def parameter_bounds(self): ...
    def set_as_constraint(self, uncertain_params=None, block=None): ...

class EllipsoidalSet(UncertaintySet):
    def __init__(self, center, shape_matrix, scale: int = 1, gaussian_conf_lvl=None) -> None: ...
    @property
    def type(self): ...
    @property
    def center(self): ...
    @center.setter
    def center(self, val) -> None: ...
    @property
    def shape_matrix(self): ...
    @shape_matrix.setter
    def shape_matrix(self, val) -> None: ...
    @property
    def scale(self): ...
    @scale.setter
    def scale(self, val) -> None: ...
    @property
    def gaussian_conf_lvl(self): ...
    @gaussian_conf_lvl.setter
    def gaussian_conf_lvl(self, val) -> None: ...
    @property
    def dim(self): ...
    @property
    def geometry(self): ...
    @property
    def parameter_bounds(self): ...
    def point_in_set(self, point): ...
    def set_as_constraint(self, uncertain_params=None, block=None): ...

class DiscreteScenarioSet(UncertaintySet):
    def __init__(self, scenarios) -> None: ...
    @property
    def type(self): ...
    @property
    def scenarios(self): ...
    @scenarios.setter
    def scenarios(self, val) -> None: ...
    @property
    def dim(self): ...
    @property
    def geometry(self): ...
    @property
    def parameter_bounds(self): ...
    def is_bounded(self, config): ...
    def set_as_constraint(self, uncertain_params=None, block=None): ...
    def point_in_set(self, point): ...

class IntersectionSet(UncertaintySet):
    def __init__(self, **unc_sets) -> None: ...
    @property
    def type(self): ...
    @property
    def all_sets(self): ...
    @all_sets.setter
    def all_sets(self, val) -> None: ...
    @property
    def dim(self): ...
    @property
    def geometry(self): ...
    @property
    def parameter_bounds(self): ...
    def point_in_set(self, point): ...
    @staticmethod
    def intersect(Q1, Q2): ...
    def set_as_constraint(self, uncertain_params=None, block=None): ...
