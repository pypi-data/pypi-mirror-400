[project]
name = "prezo"
version = "2026.1.1"
description = "A TUI-based presentation tool for the terminal, built with Textual."
readme = "README.md"
authors = [
    { name = "Stefane Fermigier", email = "sf@fermigier.com" }
]
requires-python = ">=3.12"
dependencies = [
    "textual>=0.89.1",
    "textual-image>=0.8.0",
    "python-frontmatter>=1.1.0",
]

[project.scripts]
prezo = "prezo:main"

[dependency-groups]
dev = [
    "pytest>=8.0.0",
    "pytest-asyncio>=1.3.0",
    "abilian-devtools>=0.8.0",
    "ty>=0.0.2",
    # See below
    "cairosvg>=2.7.0",
    "pypdf>=4.0.0",
    "types-markdown>=3.10.0.20251106",
]
export = [
    "cairosvg>=2.7.0",
    "pypdf>=4.0.0",
]

[tool.pytest.ini_options]
testpaths = ["tests"]
asyncio_mode = "auto"
asyncio_default_fixture_loop_scope = "function"

[build-system]
requires = ["uv_build>=0.8.4,<0.9.0"]
build-backend = "uv_build"

[tool.pyrefly.errors]
# Disable errors for third-party library type issues
missing-source-for-stubs = false  # markdown stubs bundled but source not found
missing-import = false  # libsixel optional dependency
missing-attribute = false  # PIL.Image.ADAPTIVE
no-matching-overload = false  # PIL type stub issues
bad-argument-type = false  # LiteralString strictness with string append
bad-override = false  # Textual COMMANDS type override

[tool.ty.rules]
# Disable errors for third-party library type issues
unresolved-import = "ignore"  # markdown, libsixel optional dependencies
unresolved-attribute = "ignore"  # PIL.Image.ADAPTIVE
invalid-argument-type = "ignore"  # PIL getdata() type issues
invalid-type-form = "ignore"  # TextualImage type annotation

[tool.mypy]
python_version = "3.12"
warn_return_any = false
warn_unused_ignores = true
ignore_missing_imports = true  # For optional dependencies like libsixel

[[tool.mypy.overrides]]
module = [
    "frontmatter",
    "cairosvg",
    "libsixel",
    "textual_image.*",
]
ignore_missing_imports = true
