"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5601],{34443:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(24965),o=t(75271),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},i=t(52009),c=function(e,n){return o.createElement(i.Z,(0,r.Z)({},e,{ref:n,icon:a}))};var u=o.forwardRef(c)},32914:function(e,n,t){t.d(n,{FB:function(){return i},Mh:function(){return o},Vd:function(){return d},hG:function(){return s},hQ:function(){return c},pp:function(){return a},q_:function(){return l},uu:function(){return u}});var r=t(15292),o=(0,r.cn)([]),a=(0,r.cn)([]),i=(0,r.cn)([]),c=(0,r.cn)([]),u=(0,r.cn)([]),s=(0,r.cn)([]),d=(0,r.cn)(!1),l=(0,r.cn)(null)},1503:function(e,n,t){t.d(n,{Z:function(){return b}});var r,o,a=t(26068),i=t.n(a),c=t(53649),u=t.n(c),s=t(21363),d=t(2825),l=t(950),p=t(75271),f=t(67585),m=(0,p.createContext)({scrollToBottom:function(){}}),h=t(52676),g=f.ZP.div(r||(r=u()(["\n  max-height: ",";\n  overflow-y: auto;\n  width: 100%;\n"])),(function(e){var n=e.$maxHeight;return"number"==typeof n?"".concat(n,"px"):n})),v=f.ZP.div(o||(o=u()(["\n  display: flex;\n  align-items: center;\n  max-width: 360px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n"]))),b=function(e){var n=p.useRef(null),t=(0,s.Z)(),r=t.saveScrollHeight,o=t.restoreScrollHeight,a=(0,d.Z)(),c=a.initialize,u=a.destroyInstance,f=a.scrollToBottom;return p.useEffect((function(){e.open?r():o()}),[e.open]),p.useEffect((function(){var t=null;return e.open&&(t=setTimeout((function(){n.current&&c(n.current)}),100)),function(){t&&clearTimeout(t),u()}}),[e.open,c]),(0,h.jsx)(l.Z,i()(i()({},e),{},{title:(0,h.jsx)(v,{children:e.title}),destroyOnHidden:!0,styles:{content:{padding:0},header:{padding:"var(--ant-modal-content-padding)",paddingBottom:"0"},body:{padding:"0",paddingBlockEnd:e.footer?"0":"24px"},footer:e.footer?{padding:"12px 24px 24px",margin:"0"}:{}},children:(0,h.jsx)(m.Provider,{value:{scrollToBottom:f},children:(0,h.jsx)(g,{ref:n,"data-overlayscrollbars-initialize":!0,className:"overlay-scroller-wrapper",$maxHeight:e.maxContentHeight||500,hidden:!1,style:{paddingInline:24,paddingBlockEnd:0},children:e.children})})}))}},28565:function(e,n,t){var r=t(48305),o=t.n(r),a=t(53231),i=t(35421);n.Z=function(){var e=(0,a.useIntl)(),n=i.ZP.useMessage(),t=o()(n,2),r=t[0];t[1];return{getRuleMessage:function(n,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=r?e.formatMessage({id:t}):t,a=Array.isArray(n)?n:[n];return a.includes("select")&&a.includes("input")?e.formatMessage({id:"common.form.rule.selectInput"},{name:o}):a.includes("input")?e.formatMessage({id:"common.form.rule.input"},{name:o}):e.formatMessage({id:"common.form.rule.select"},{name:o})},showSuccess:function(n){r.success(n||e.formatMessage({id:"common.message.success"}))}}}},92047:function(e,n,t){t.d(n,{A0:function(){return R},BT:function(){return y},E:function(){return L},E_:function(){return _},Fm:function(){return U},Io:function(){return C},X8:function(){return X},ax:function(){return O},bF:function(){return B},c0:function(){return I},c9:function(){return b},gX:function(){return D},go:function(){return Y},iL:function(){return w},jl:function(){return E},kT:function(){return j},oh:function(){return d},p1:function(){return ee},qT:function(){return l},qn:function(){return Q},zc:function(){return H}});var r=t(90228),o=t.n(r),a=t(87999),i=t.n(a),c=t(52064),u=t(53231),s="/cloud-credentials",d="/clusters",l="/worker-pools",p="registration-token",f="/provider-proxy",m="/config",h="/v2/regions",g="/v2/sizes",v="/v2/images";function b(e){return x.apply(this,arguments)}function x(){return(x=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(s,"/").concat(n.id).concat(f).concat(h),{method:"GET",params:{per_page:200}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return k.apply(this,arguments)}function k(){return(k=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(s,"/").concat(n.id).concat(f).concat(g),{method:"GET",params:{per_page:200}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return T.apply(this,arguments)}function T(){return(T=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(s,"/").concat(n.id).concat(f).concat(v),{method:"GET",params:{per_page:200,type:"distribution"}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return Z.apply(this,arguments)}function Z(){return(Z=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(s),{method:"GET",params:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return M.apply(this,arguments)}function M(){return(M=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(s),{method:"POST",data:n.data}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return P.apply(this,arguments)}function P(){return(P=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(s,"/").concat(n.id),{method:"PUT",data:n.data}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return q.apply(this,arguments)}function q(){return(q=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(s,"/").concat(n),{method:"DELETE"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return S.apply(this,arguments)}function S(){return(S=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(d),{method:"GET",params:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return A.apply(this,arguments)}function A(){return(A=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(d),{method:"POST",data:n.data}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return z.apply(this,arguments)}function z(){return(z=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(d,"/").concat(n.id),{method:"PUT",data:n.data}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return K.apply(this,arguments)}function K(){return(K=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(d,"/").concat(n),{method:"DELETE"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return G.apply(this,arguments)}function G(){return(G=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(c.Ns),{method:"GET",params:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return F.apply(this,arguments)}function F(){return(F=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(d,"/").concat(n.id,"/").concat(p),{method:"GET"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,n){return N.apply(this,arguments)}function N(){return(N=i()(o()().mark((function e(n,t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(l,"?"),{method:"GET",params:n,cancelToken:null==t?void 0:t.token}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return W.apply(this,arguments)}function W(){return(W=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(d,"/").concat(n.clusterId).concat(l),{method:"POST",data:n.data}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return V.apply(this,arguments)}function V(){return(V=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(l,"/").concat(n.id),{method:"PUT",data:n.data}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return $.apply(this,arguments)}function $(){return($=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(l,"/").concat(n),{method:"DELETE"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return J.apply(this,arguments)}function J(){return(J=i()(o()().mark((function e(){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(m),{method:"GET"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){return ne.apply(this,arguments)}function ne(){return(ne=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("".concat(d,"/").concat(n.id,"/set-default"),{method:"POST"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},73940:function(e,n,t){t.d(n,{Rc:function(){return d},TE:function(){return m},Ur:function(){return u},Z3:function(){return f},_T:function(){return h},_m:function(){return s},dC:function(){return l},i7:function(){return p},oW:function(){return v},s:function(){return g}});var r=t(82092),o=t.n(r),a=t(10939),i=t(91315),c=t(93203),u={Provisioning:"provisioning",Ready:"ready",Provisioned:"provisioned"},s=o()(o()(o()({},u.Provisioning,"Provisioning"),u.Ready,"Ready"),u.Provisioned,"Provisioned"),d=o()(o()(o()({},u.Provisioning,i.iE.transitioning),u.Ready,i.iE.success),u.Provisioned,i.iE.transitioning),l={Kubernetes:"Kubernetes",DigitalOcean:"DigitalOcean",Docker:"Docker",HuaweiCloud:"HuaweiCloud",AliCloud:"AlibabaCloud",TencentCloud:"TencentCloud",AWS:"AWS"},p=o()(o()(o()({},l.Kubernetes,"Kubernetes"),l.DigitalOcean,"DigitalOcean"),l.Docker,"Docker"),f=function(e){return"curl -k -L '".concat(e.server,"/").concat(c.qk,"/clusters/").concat(e.clusterId,"/manifests' \\\n--header 'Authorization: Bearer ").concat(e.registrationToken,"' | kubectl apply -f -")},m={vram:"VRAM",vcpus:"vCPUs",ram:"RAM",bootDisk:"Boot Disk",scratchDisk:"Scratch Disk",minDiskSize:"Min Disk Size",size:"Size"},h={amd:"icon-amd",nvidia:"icon-nvidia1",rockyLinux:"icon-rocky-linux",almaLinux:"icon-alma-linux",ubuntu:"icon-ubuntu",centOs:"icon-centos",debian:"icon-debian",fedora:"icon-fedora"},g=[{key:"edit",label:"common.button.edit",icon:a.Z.EditOutlined},{key:"delete",props:{danger:!0},label:"common.button.delete",icon:a.Z.DeleteOutlined}],v=[{key:"edit",label:"common.button.edit",icon:a.Z.EditOutlined},{key:"add_worker",label:"resources.button.create",provider:l.Docker,locale:!0,icon:a.Z.DockerOutlined},{key:"register_cluster",label:"clusters.button.register",provider:l.Kubernetes,locale:!0,icon:a.Z.KubernetesOutlined},{key:"addPool",label:"clusters.button.addNodePool",provider:l.DigitalOcean,locale:!0,icon:a.Z.Catalog1},{key:"isDefault",label:"clusters.form.setDefault",icon:a.Z.StarOutlined},{key:"delete",label:"common.button.delete",icon:a.Z.DeleteOutlined,props:{danger:!0}}]},57779:function(e,n,t){t.r(n),t.d(n,{default:function(){return Y}});var r,o=t(90228),a=t.n(o),i=t(26068),c=t.n(i),u=t(87999),s=t.n(u),d=t(48305),l=t.n(d),p=t(32914),f=t(44471),m=t(92829),h=t(3108),g=t(91315),v=t(93203),b=t(47778),x=t(53231),y=t(25383),k=t(35421),w=t(52506),T=t(92665),D=t(26447),Z=t(32699),E=t.n(Z),M=t(75271),C=t(93699),P=t(94213),j=t(92047),q=t(53649),O=t.n(q),S=t(72742),I=t(1503),A=t(51143),R=t(28565),z=t(26965),B=t(67585),K=t(73940),_=t(52676),G=(B.ZP.div(r||(r=O()(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  position: absolute;\n  bottom: 6px;\n  right: 32px;\n  z-index: 1;\n  background: var(--ant-color-bg-container);\n  padding-inline: 8px;\n"]))),function(e){var n=e.title,t=e.action,r=e.open,o=e.onOk,i=e.currentData,c=e.provider,u=e.onCancel,d=z.Z.useForm(),p=l()(d,1)[0],f=(0,x.useIntl)(),m=(0,R.Z)().getRuleMessage,h=function(){p.submit()},v=function(){var e=s()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,M.useEffect)((function(){i&&p.setFieldsValue(i)}),[i]),(0,_.jsx)(I.Z,{title:n,open:r,centered:!0,onOk:h,destroyOnHidden:!0,closeIcon:!1,maskClosable:!1,keyboard:!1,width:600,footer:(0,_.jsx)(S.Z,{onOk:h,onCancel:function(){p.resetFields(),u()}}),children:(0,_.jsxs)(z.Z,{form:p,onFinish:v,preserve:!1,children:[(0,_.jsx)(z.Z.Item,{name:"name",rules:[{required:!0,message:f.formatMessage({id:"common.form.rule.input"},{name:f.formatMessage({id:"common.table.name"})})}],children:(0,_.jsx)(A.Z.Input,{label:f.formatMessage({id:"common.table.name"}),required:!0})}),c===K.dC.DigitalOcean&&(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(z.Z.Item,{name:"secret",rules:[{required:t===g.Kd.CREATE,message:m("input","clusters.credential.token")}],children:(0,_.jsx)(A.Z.Password,{label:f.formatMessage({id:"clusters.credential.token"}),required:t===g.Kd.CREATE,description:(0,_.jsx)("span",{dangerouslySetInnerHTML:{__html:f.formatMessage({id:"clusters.button.genToken"},{link:"https://cloud.digitalocean.com/account/api/tokens"})}})})})}),(0,_.jsx)(z.Z.Item,{name:"description",rules:[{required:!1}],children:(0,_.jsx)(A.Z.TextArea,{label:f.formatMessage({id:"common.table.description"})})})]})})}),H=t(85882),F=t(67760),L=t(71656),N=t.n(L),U=function(e,n){var t=(0,x.useIntl)();return(0,M.useMemo)((function(){return[{title:t.formatMessage({id:"common.table.name"}),dataIndex:"name",sorter:(0,v.Gi)(1),render:function(e){return(0,_.jsx)(H.Z,{ghost:!0,minWidth:20,children:e})}},{title:t.formatMessage({id:"clusters.table.provider"}),dataIndex:"provider",sorter:!1,render:function(e){return(0,_.jsx)("span",{children:K.i7[e]})}},{title:t.formatMessage({id:"common.table.createTime"}),dataIndex:"created_at",sorter:(0,v.Gi)(3),ellipsis:{showTitle:!1},render:function(e){return(0,_.jsx)("span",{children:N()(e).format("YYYY-MM-DD HH:mm:ss")})}},{title:t.formatMessage({id:"common.table.description"}),dataIndex:"description",ellipsis:{showTitle:!1},render:function(e){return(0,_.jsx)(H.Z,{ghost:!0,minWidth:20,children:e})}},{title:t.formatMessage({id:"common.table.operation"}),dataIndex:"operations",ellipsis:{showTitle:!1},render:function(e,t){return(0,_.jsx)(F.Z,{items:K.s,onSelect:function(e){return n(e,t)}})}}]}),[t,n])},W=[{label:"DigitalOcean",locale:!1,key:K.dC.DigitalOcean,value:K.dC.DigitalOcean,icon:(0,_.jsx)(m.Z,{type:"icon-digitalocean",style:{color:"var(--ant-blue-6)"}})}],Y=function(){var e=(0,b.Z)({fetchAPI:j.gX,deleteAPI:j.kT,contentForDelete:"menu.clusterManagement.credentials"}),n=e.dataSource,t=e.rowSelection,r=e.queryParams,o=e.sortOrder,i=e.modalRef,u=e.handleDelete,d=e.handleDeleteBatch,Z=e.fetchData,q=e.handlePageChange,O=e.handleTableChange,S=e.handleSearch,I=e.handleNameChange,A=(0,D.KO)(p.Vd),R=l()(A,2),z=R[0],B=R[1],H=(0,x.useIntl)(),F=(0,x.useNavigate)(),L=(0,M.useState)({provider:null,open:!1,action:g.Kd.CREATE,title:"",currentData:void 0}),N=l()(L,2),Y=N[0],V=N[1],X=function(e){V({provider:e.key,open:!0,action:g.Kd.CREATE,title:H.formatMessage({id:"clusters.button.add.credential"},{provider:K.i7[e.key]||e.key}),currentData:void 0})},$=function(){var e=s()(a()().mark((function e(n){var t;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c()({},n),e.prev=1,Y.action!==g.Kd.EDIT){e.next=7;break}return e.next=5,(0,j.Io)({data:c()({},t),id:Y.currentData.id});case 5:e.next=10;break;case 7:return e.next=9,(0,j.jl)({data:t});case 9:z&&F(-1);case 10:B(!1),Z(),V(c()(c()({},Y),{},{open:!1})),k.ZP.success(H.formatMessage({id:"common.message.success"})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),V(c()(c()({},Y),{},{open:!1}));case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(n){return e.apply(this,arguments)}}(),Q=(0,y.Z)((function(e,n){"edit"===e?function(e){V({provider:e.provider,open:!0,action:g.Kd.EDIT,title:H.formatMessage({id:"common.button.edit.item"},{name:e.name}),currentData:e})}(n):"delete"===e&&u(c()(c()({},n),{},{name:n.name}))})),J=U(o,Q);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(P.Z,{children:[(0,_.jsx)(h.f,{actionItems:W,actionType:"dropdown",showSelect:!1,marginBottom:22,marginTop:0,buttonText:H.formatMessage({id:"clusters.button.addCredential"}),handleDeleteByBatch:d,handleSearch:S,handleInputChange:I,handleClickPrimary:X,rowSelection:t,width:{input:300}}),(0,_.jsx)(w.ZP,{renderEmpty:function(e){if("Table"===e)return(0,_.jsx)(C.Z,{loading:n.loading,loadend:n.loadend,dataSource:[],image:(0,_.jsx)(m.Z,{type:"icon-credential-outline"}),filters:E().omit(r,["sort_by"]),noFoundText:H.formatMessage({id:"noresult.credentials.nofound"}),title:H.formatMessage({id:"noresult.credentials.title"}),subTitle:H.formatMessage({id:"noresult.credentials.subTitle"}),onClick:function(){return X(W[0])},buttonText:H.formatMessage({id:"noresult.button.add"})})},children:(0,_.jsx)(T.Z,{tableLayout:"fixed",columns:J,dataSource:n.dataList,rowSelection:t,loading:n.loading,sortDirections:v.gM,showSorterTooltip:!1,rowKey:"id",onChange:O,pagination:{showSizeChanger:!0,pageSize:r.perPage,current:r.page,total:n.total,hideOnSinglePage:10===r.perPage,onChange:q}})})]}),(0,_.jsx)(G,{provider:Y.provider,open:Y.open,action:Y.action,title:Y.title,currentData:Y.currentData,onCancel:function(){V(c()(c()({},Y),{},{open:!1,currentData:void 0}))},onOk:$}),(0,_.jsx)(f.Z,{ref:i})]})}},52064:function(e,n,t){t.d(n,{HY:function(){return d},Ns:function(){return s},Xv:function(){return m},_b:function(){return l},mt:function(){return p}});var r=t(90228),o=t.n(r),a=t(87999),i=t.n(a),c=t(53231),u=t(83861),s="/dashboard",d="".concat(s,"/usage"),l="".concat(s,"/usage/stats");function p(e){return f.apply(this,arguments)}function f(){return(f=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)(s,{params:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,n){return h.apply(this,arguments)}function h(){return(h=i()(o()().mark((function e(n,t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("".concat(t.url,"?").concat(u.Z.stringify(n)),{method:"GET",cancelToken:null==t?void 0:t.token}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);