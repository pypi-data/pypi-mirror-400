{"version":3,"file":"MediaVideoTop-Bwav54Mi.js","sources":["../../../../../../ComfyUI_frontend/src/platform/assets/components/MediaVideoTop.vue"],"sourcesContent":["<template>\n  <div\n    class=\"relative size-full overflow-hidden rounded bg-black\"\n    @mouseenter=\"isHovered = true\"\n    @mouseleave=\"isHovered = false\"\n  >\n    <video\n      ref=\"videoRef\"\n      :controls=\"shouldShowControls\"\n      preload=\"metadata\"\n      autoplay\n      muted\n      loop\n      playsinline\n      :poster=\"asset.preview_url\"\n      class=\"relative size-full object-contain transition-transform duration-300 group-hover:scale-105 group-data-[selected=true]:scale-105\"\n      @click.stop\n      @play=\"onVideoPlay\"\n      @pause=\"onVideoPause\"\n      @ended=\"onVideoEnded\"\n    >\n      <source :src=\"asset.src || ''\" />\n    </video>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onMounted, ref, watch } from 'vue'\n\nimport type { AssetContext, AssetMeta } from '../schemas/mediaAssetSchema'\n\nconst { asset } = defineProps<{\n  asset: AssetMeta\n  context: AssetContext\n}>()\n\nconst emit = defineEmits<{\n  play: [assetId: string]\n  videoPlayingStateChanged: [isPlaying: boolean]\n  videoControlsChanged: [showControls: boolean]\n}>()\n\nconst videoRef = ref<HTMLVideoElement>()\nconst isHovered = ref(false)\nconst isPlaying = ref(false)\n\n// Always show controls when not playing, hide/show based on hover when playing\nconst shouldShowControls = computed(() => !isPlaying.value || isHovered.value)\n\nwatch(shouldShowControls, (controlsVisible) => {\n  emit('videoControlsChanged', controlsVisible)\n})\n\nonMounted(() => {\n  emit('videoControlsChanged', shouldShowControls.value)\n})\n\nconst onVideoPlay = () => {\n  isPlaying.value = true\n  emit('videoPlayingStateChanged', true)\n}\n\nconst onVideoPause = () => {\n  isPlaying.value = false\n  emit('videoPlayingStateChanged', false)\n}\n\nconst onVideoEnded = () => {\n  isPlaying.value = false\n  emit('videoPlayingStateChanged', false)\n}\n</script>\n"],"names":["emit","__emit","videoRef","ref","isHovered","isPlaying","shouldShowControls","computed","watch","controlsVisible","onMounted","onVideoPlay","__name","onVideoPause","onVideoEnded"],"mappings":"2aAoCA,MAAMA,EAAOC,EAMPC,EAAWC,IACXC,EAAYD,EAAI,EAAK,EACrBE,EAAYF,EAAI,EAAK,EAGrBG,EAAqBC,EAAS,IAAM,CAACF,EAAU,OAASD,EAAU,KAAK,EAEvEI,EAAAF,EAAqBG,GAAoB,CAC7CT,EAAK,uBAAwBS,CAAe,CAAA,CAC7C,EAEDC,EAAU,IAAM,CACTV,EAAA,uBAAwBM,EAAmB,KAAK,CAAA,CACtD,EAED,MAAMK,EAAcC,EAAA,IAAM,CACxBP,EAAU,MAAQ,GAClBL,EAAK,2BAA4B,EAAI,CAAA,EAFnB,eAKda,EAAeD,EAAA,IAAM,CACzBP,EAAU,MAAQ,GAClBL,EAAK,2BAA4B,EAAK,CAAA,EAFnB,gBAKfc,EAAeF,EAAA,IAAM,CACzBP,EAAU,MAAQ,GAClBL,EAAK,2BAA4B,EAAK,CAAA,EAFnB"}